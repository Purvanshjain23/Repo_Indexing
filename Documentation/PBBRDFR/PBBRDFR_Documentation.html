<!DOCTYPE html>
<html><head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>PBBRDFR - Business Documentation</title>
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>mermaid.initialize({startOnLoad:true,theme:'default'});</script>
<style>
body{font-family:'Segoe UI',Calibri,sans-serif;max-width:1200px;margin:20px auto;padding:20px;background:#f8f9fa;line-height:1.6;}
.header{background:linear-gradient(135deg,#0066cc,#007bff);color:white;padding:25px;margin:-20px -20px 30px -20px;border-radius:0 0 12px 12px;}
h1{margin:0;font-size:2.2em;color:#fff;}
.subtitle{font-size:1.1em;margin-top:8px;opacity:0.9;}
h2{color:#2c3e50;border-bottom:3px solid #0066cc;padding-bottom:8px;margin-top:30px;}
h3{color:#0066cc;margin-top:20px;}
h4{color:#555;margin-top:15px;font-size:1.05em;}
.info-box{background:#e7f3ff;padding:15px;margin:15px 0;border-left:5px solid #0066cc;border-radius:5px;}
.highlight{background:#fff3cd;padding:15px;margin:15px 0;border-left:5px solid #ffc107;border-radius:5px;}
.func{background:white;padding:20px;margin:20px 0;border:1px solid #ddd;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1);}
.func-header{background:#0066cc;color:white;padding:12px 15px;margin:-20px -20px 15px -20px;border-radius:8px 8px 0 0;}
.func-header h3{color:white;margin:0;}
.func-header p{margin:5px 0 0 0;opacity:0.9;}
.mermaid{background:#fafafa;padding:20px;border-radius:8px;margin:15px 0;border:1px solid #e0e0e0;}
table{width:100%;border-collapse:collapse;margin:15px 0;}
th{background:#0066cc;color:white;padding:10px;text-align:left;}
td{padding:10px;border-bottom:1px solid #ddd;}
tr:hover{background:#f8f9fa;}
.process-narrative{background:#f8f9fa;padding:20px;margin:20px 0;border-radius:8px;border-left:4px solid #0066cc;}
</style></head><body>

<div class="header">
<h1>PBBRDFR</h1>
<div class="subtitle">Business Process Documentation for Non-Technical Users</div>
<p style="margin-top:10px;opacity:0.9;">Lines: 5210 | Functions: 41 | IBM i RPG Program</p>
</div>

<!-- AI_MARKER: Section1_BusinessContext -->
<h2>1. Business Context and Overview</h2>
<p><strong>Executive Summary:</strong> PBBRDFR is a warehouse load planning display program that manages time schedules for shipping operations. It allows users to view, organize, and update load plan time schedules across multiple warehouses and companies.</p>
<p><strong>Business Purpose:</strong> This program exists to coordinate shipping logistics by displaying load plan time schedules in an interactive subfile format. It enables warehouse staff to track when loads should depart, manage timing constraints, and ensure efficient shipping operations across the distribution network.</p>
<p><strong>Key Business Functions:</strong> Display load plan schedules by company/warehouse/date; validate warehouse assignments; manage load timing and deadlines; support interactive subfile navigation with positioning and selection criteria; integrate with load headers and warehouse master data.</p>

<!-- AI_MARKER: Section2_Inputs -->
<h2>2. Inputs and Data Sources</h2>
<h3>Primary Data Sources</h3>
<p><strong>PBAFCPL:</strong> Load Plan Time Schedule file - contains timing details for planned shipments including start times, deadlines, and scheduling parameters</p>
<p><strong>OMFJCPL:</strong> Load Header file - master load records with load IDs, status, weights, and shipping details</p>
<p><strong>PBAGCPL:</strong> Load Plan Time Key index - retrieval access for load plan schedules by company/warehouse/date</p>
<p><strong>CAADREL:</strong> Warehouse master file - contains warehouse codes, descriptions, and company relationships</p>
<p><strong>PBAEREL:</strong> Load Plan Category Codes - defines load categories and selection activity flags</p>
<p><strong>CAVLLSL:</strong> Values list details - provides dropdown/selection values for user inputs</p>
<p><strong>PDKMREL:</strong> Company Values file - stores company-specific configuration and defaults</p>
<h3>Required Input Parameters</h3>
<p><strong>Company Number (P1AIC3):</strong> Identifies which company's load plans to display (defaults to user's company if not provided)</p>
<p><strong>Warehouse Code (P1AJCD):</strong> Specifies the warehouse location for load scheduling</p>
<p><strong>Load Plan Date (P1UIDT):</strong> The date for which load schedules should be displayed (defaults to current job date)</p>
<h3>Optional Parameters / Screen Inputs</h3>
<p><strong>Positioning Fields:</strong> Users can position the subfile display to start at specific load plan records</p>
<p><strong>Selection Fields:</strong> Company and warehouse can be used as selection criteria to filter displayed records</p>
<p><strong>Scan Limit (W0SLM):</strong> Maximum number of records to scan before stopping (prevents excessive processing)</p>
<h3>User Interaction / Function Keys</h3>
<p><strong>F3 (Exit):</strong> Exit the program and return to calling menu</p>
<p><strong>F12 (Cancel):</strong> Cancel current operation and return to previous screen</p>
<p><strong>F4 (Prompt):</strong> Display prompt/help for valid values on selected fields</p>
<p><strong>PageUp/PageDown:</strong> Navigate through multiple pages of load plan records in the subfile</p>
<p><strong>Enter:</strong> Process selections, validate inputs, and refresh display</p>

<!-- AI_MARKER: Section3_Structure -->
<h2>3. Program Structure and Organization</h2>
<h3>How the Program is Organized</h3>
<p><strong>Program Architecture:</strong> PBBRDFR is organized into 41 subroutines (BEGSR/ENDSR blocks) that handle specific aspects of the load plan display process. The functions are grouped into initialization (BAIZSF, ZZINIT), subfile management (BBLDSF), screen display (CAEXFM), validation (SARVGN-SNRVGN series), data conversion (XCVTA-XDVC2T series), cursor control (Y0SET, Y8TST, Y9CLR), prompt handling (ZDVPMT), help display (ZHHPKY), and business rule processing (DBPRSF-EBPRSR, DHPRCF-EAPRSF).</p>
<p><strong>Function Categories:</strong> (1) Initialization functions set up defaults and clear subfiles; (2) Load functions populate the subfile with database records; (3) Display functions show screens and handle user interaction; (4) Validation functions (SA-SN series) verify warehouse access, company assignments, and data integrity; (5) Date/time utility functions (XC-XD-XT series) convert and validate dates; (6) User interface functions (Y0-Y9, ZD-ZH-ZZ series) manage cursor positioning, prompts, and help screens; (7) Business processing functions (DB-DC-DH, EA-EB series) enforce load planning business rules including status validation and timing constraints.</p>
<h3>Program Call Tree</h3>
<div class="mermaid">
flowchart TD
    Main[Main Program Loop] --> ZZINIT[ZZINIT: Initialize Program]
    Main --> BAIZSF[BAIZSF: Initialize Subfile]
    BAIZSF --> SARVGN[SARVGN: Validate Warehouse]
    BAIZSF --> ZASNMS[ZASNMS: Setup Message Data]
    Main --> BBLDSF[BBLDSF: Load Subfile Page]
    Main --> CAEXFM[CAEXFM: Display Screen]
    CAEXFM --> GBDSA2[GBDSA2: Set Screen Indicators]
    CAEXFM --> Y0SET[Y0SET: Set Cursor Position]
    CAEXFM --> Y8TST[Y8TST: Test Cursor]
    CAEXFM --> ZDVPMT[ZDVPMT: Check Prompt Request]
    CAEXFM --> ZHHPKY[ZHHPKY: Display Help]
    Main --> ValidationGroup[Validation Functions]
    ValidationGroup --> SBRVGN[SBRVGN-SNRVGN: 13 Validation Routines]
    Main --> ConversionGroup[Data Conversion Functions]
    ConversionGroup --> XCVTA[XCVTA-XDVC2T: Date/Time Conversions]
    Main --> ProcessingGroup[Business Processing]
    ProcessingGroup --> DBPRSF[DBPRSF-EBPRSR: Rule Enforcement]
</div>
<p><strong>Function Coordination:</strong> The program follows a standard display file pattern: ZZINIT initializes the environment, BAIZSF prepares the subfile and validates initial parameters (calling SARVGN for warehouse validation), BBLDSF loads database records into the subfile, CAEXFM displays the screen and handles user interaction (calling multiple UI functions like Y0SET for cursor control and ZDVPMT for prompts). The validation functions (SA-SN series) are called throughout to ensure data integrity. Data conversion functions (XC-XD-XT series) transform between internal and external formats. Business processing functions (DB-DH-EA-EB series) enforce shipping rules and constraints.</p>

<!-- AI_MARKER: Section4_BusinessLogic -->
<h2>4. Business Logic Summary</h2>
<h3>Primary Business Workflow</h3>
<p><strong>Main Process Flow:</strong> Users access the program to view and manage load plan time schedules for shipping operations. The program displays load schedules in a paginated subfile format, allowing warehouse staff to see when loads are planned to depart, their current status, and associated timing constraints. Users can filter by company, warehouse, and date to focus on relevant load plans. The program validates warehouse assignments, enforces timing rules (loads must depart before deadline times), checks load statuses, and ensures data integrity across the shipping schedule. When users select or modify records, the program validates changes against business rules before allowing updates.</p>
<h3>Key Business Rules</h3>
<p><strong>Warehouse Authorization:</strong> Users can only view/modify load plans for warehouses their company is authorized to ship from</p>
<p><strong>Timing Constraints:</strong> Load departure times must be prior to deadline departure times (validated with specific error messages showing required hours before deadline)</p>
<p><strong>Load Status Validation:</strong> Loads must be in valid status states before modifications are allowed (certain statuses prevent changes)</p>
<p><strong>Company/Warehouse Pairing:</strong> Load plans must have valid company and warehouse combinations as defined in the Warehouse master file</p>
<p><strong>Date Validation:</strong> Load plan dates must be valid calendar dates and cannot be in the past for new schedules</p>
<p><strong>Scan Limits:</strong> System enforces maximum record scan limits (W0SLM) to prevent performance issues when filtering large datasets</p>
<h3>Decision Points</h3>
<p><strong>Warehouse Validation:</strong> Program checks if the entered warehouse can ship for the specified company - if not, displays error message "Warehouse cant ship f/co" with warehouse and company details</p>
<p><strong>Load Status Check:</strong> Before allowing modifications, program verifies load status - if load has restrictive status (e.g., already shipped, closed), prevents changes and shows status description</p>
<p><strong>Timing Validation:</strong> When time fields are entered, program calculates if departure times meet deadline requirements - if timing violation detected, shows specific error with hours needed and deadline date/time</p>
<p><strong>First-Time Entry:</strong> Program detects if this is user's first access (First Time Flag = 'N') and applies default company/warehouse values from user profile</p>
<p><strong>Record Positioning:</strong> Program decides whether to load subfile from beginning or position to specific records based on user-entered positioning fields</p>

<!-- AI_MARKER: Section5_DetailedFlow -->
<h2>5. Detailed Business Process Flow</h2>
<h3>Business Process Narrative</h3>
<div class="process-narrative">
<p><strong>Initialization and Authorization:</strong> When the program starts, it first initializes system variables and clears the subfile display area. It checks if the user is accessing the program for the first time (indicated by a flag) - if so, it retrieves default company and warehouse values from the user's profile and the system date as the default load plan date. The program then validates that the specified warehouse is authorized to ship for the selected company by reading the Warehouse master file. If the warehouse/company pairing is invalid, it displays an error message showing the warehouse code and company number, preventing further access until valid parameters are provided. This security step ensures users can only view load schedules they're authorized to manage.</p>
<p><strong>Main Processing and Data Flow:</strong> Once authorized, the program reads load plan time schedule records from the PBAGCPL file using the company, warehouse, and date as key fields. It loads these records into a subfile (an interactive list on the screen) one page at a time, applying any selection criteria the user specified. For each record, the program retrieves related data from the Load Header file (OMFJCPL) to display load IDs, statuses, weights, and other shipping details. As records are loaded, the program enforces scan limits to prevent excessive processing. Users can navigate through multiple pages using PageUp/PageDown keys, and can position the display to start at specific records using positioning fields. The program continuously validates data - checking load statuses to ensure they allow modifications, verifying timing constraints (departure times must precede deadlines), and converting dates/times between internal and external formats for display.</p>
<p><strong>Completion and Business Outcomes:</strong> When users press Enter after viewing or modifying data, the program validates all changes against business rules. It checks for timing violations, invalid statuses, and data integrity issues. If validations pass, updates are written back to the Load Plan Time Schedule and Load Header files. Error messages are displayed for any rule violations, with specific details about what needs correction (e.g., "Time must be prior to deadline" with hours needed). Users can press F3 to exit or F12 to cancel and return to the previous screen. The program clears message queues and resets indicators before completing. The business outcome is an accurate, validated schedule of load plans that warehouse staff can rely on for coordinating shipments, ensuring loads depart on time and meet their delivery commitments.</p>
</div>

<h3>Visual Process Flow Diagram</h3>
<div class="mermaid">
flowchart TD
    Start([Program Start]) --> Init[Initialize System and Clear Display]
    Init --> CheckFirst{First Time<br/>Access?}
    CheckFirst -->|Yes| LoadDefaults[Load Default Company,<br/>Warehouse, Date from Profile]
    CheckFirst -->|No| UseParams[Use Provided<br/>Parameters]
    LoadDefaults --> ValidateWH
    UseParams --> ValidateWH{Validate<br/>Warehouse Authorization}
    ValidateWH -->|Invalid| ShowError1[Display Error:<br/>Warehouse Cannot Ship for Company]
    ShowError1 --> End([Exit Program])
    ValidateWH -->|Valid| SetupSubfile[Setup Subfile<br/>Display Area]
    SetupSubfile --> ReadRecords[Read Load Plan Records<br/>by Company/Warehouse/Date]
    ReadRecords --> ApplyFilters{Apply Selection<br/>Criteria?}
    ApplyFilters -->|Yes| FilterRecords[Filter Records<br/>by User Criteria]
    ApplyFilters -->|No| LoadAll[Load All Matching Records]
    FilterRecords --> CheckLimit
    LoadAll --> CheckLimit{Scan Limit<br/>Reached?}
    CheckLimit -->|Yes| StopLoad[Stop Loading<br/>More Records]
    CheckLimit -->|No| GetDetails[Retrieve Load Header<br/>Details for Display]
    GetDetails --> ValidateStatus{Check Load<br/>Status Valid?}
    ValidateStatus -->|Invalid| ShowError2[Display Status Error:<br/>Load Has Restrictive Status]
    ValidateStatus -->|Valid| ConvertData[Convert Dates/Times<br/>to Display Format]
    ConvertData --> AddToSubfile[Add Record to<br/>Subfile Display]
    AddToSubfile --> MoreRecords{More Records<br/>to Load?}
    MoreRecords -->|Yes| ReadRecords
    MoreRecords -->|No| DisplayScreen[Display Screen<br/>to User]
    StopLoad --> DisplayScreen
    DisplayScreen --> UserAction{User<br/>Action?}
    UserAction -->|F3 Exit| End
    UserAction -->|F12 Cancel| End
    UserAction -->|F4 Prompt| ShowPrompt[Display Valid<br/>Values Help]
    ShowPrompt --> DisplayScreen
    UserAction -->|PageUp/Down| LoadPage[Load Different<br/>Subfile Page]
    LoadPage --> DisplayScreen
    UserAction -->|Enter| ValidateTiming{Validate<br/>Timing Rules}
    ValidateTiming -->|Invalid| ShowError3[Display Error:<br/>Time Must Be Prior to Deadline]
    ShowError3 --> DisplayScreen
    ValidateTiming -->|Valid| SaveChanges[Save Changes to<br/>Database Files]
    SaveChanges --> ClearMessages[Clear Message<br/>Queue]
    ClearMessages --> DisplayScreen
    ShowError2 --> DisplayScreen
</div>

<h3>Process Explanation</h3>
<p><strong>Step-by-Step Business Flow:</strong> The process begins with program initialization and user authorization validation. If the warehouse is not authorized for the company, access is denied immediately. Once authorized, the program queries the load plan database for schedules matching the company, warehouse, and date parameters. It applies any filtering criteria the user specified and loads records into the interactive subfile display, retrieving detailed load information from the load header file for each entry. The program continuously validates load statuses and converts data formats for proper display. Users interact with the displayed schedule through function keys and data entry. When Enter is pressed, the program validates all timing constraints and business rules before saving changes. Error conditions trigger specific messages that guide users to correct issues. The cycle continues until the user exits with F3 or cancels with F12, ensuring all load plan data remains accurate and compliant with business rules throughout the shipping schedule management process.</p>

<!-- AI_MARKER: Section6_DataOperations -->
<h2>6. Data Operations and Information Flow</h2>
<h3>Business Data Access</h3>
<p><strong>PBAFCPL (Load Plan Time Schedule):</strong> Read/Update operations - retrieves scheduled departure times, start times, and timing parameters for planned loads; updates are written back when users modify schedules</p>
<p><strong>OMFJCPL (Load Header):</strong> Read/Update operations - accesses load master information including load IDs, status codes, weight totals, route numbers, and shipping parameters</p>
<p><strong>PBAGCPL (Load Plan Time Key):</strong> Read operations - index file providing fast retrieval access to load plan schedules by company/warehouse/date keys</p>
<p><strong>CAADREL (Warehouse Master):</strong> Read operations - validates warehouse codes and retrieves warehouse descriptions and company authorization relationships</p>
<p><strong>PBAEREL (Load Plan Categories):</strong> Read operations - retrieves category codes and selection activity flags that control which load types are displayed</p>
<p><strong>CAVLLSL (Values List):</strong> Read operations - provides valid value lists for dropdown selections and field prompts</p>
<p><strong>PDKMREL (Company Values):</strong> Read operations - retrieves company-specific configuration settings and default values</p>
<p><strong>CADRREL/CADTREL (User Profiles):</strong> Read operations - accesses user profile control and application profile data to determine user defaults and authorizations</p>
<h3>Information Processing</h3>
<p><strong>Data Flow:</strong> Information flows from the load plan and load header master files into the program where it is validated, converted to external display format, and presented to users in the subfile. User inputs are captured from the screen, validated against business rules (warehouse authorization, timing constraints, load status), and converted to internal format. Valid changes flow back to the load plan and load header files via update operations. Throughout this flow, the program reads reference data from warehouse, category, and company files to validate relationships. Date and time conversions transform data between IBM i internal formats (Julian dates, packed decimal times) and user-friendly display formats. Error data is formatted with specific business context (warehouse codes, deadline times, status descriptions) and presented to users through the message queue, enabling them to correct issues and retry operations.</p>

<!-- AI_MARKER: Section7_Dependencies -->
<h2>7. System Dependencies and Integration Points</h2>
<h3>External Program Calls</h3>
<p><strong>Y2CLMSC:</strong> Message queue management - clears program messages from the message queue to reset the display for the next user interaction cycle</p>
<p><strong>Business Purpose:</strong> The program relies on IBM i system utilities for message handling and user interface management, ensuring consistent error messaging and screen behavior across the application</p>
<h3>Integration Architecture</h3>
<p><strong>System Role:</strong> PBBRDFR serves as an interactive inquiry and maintenance program within the warehouse management and shipping logistics system. It integrates with the load planning subsystem (PB-prefixed files), the warehouse master data subsystem (CA-prefixed files), and the load execution subsystem (OM-prefixed files). The program acts as a user-facing interface that bridges planning data with operational execution data, allowing warehouse staff to coordinate schedules while the system enforces business rules and data integrity. It operates within the broader IBM i environment, using CA 2E generated code patterns and standard IBM i database file handling. The program interacts with user profile systems to apply security and default values, ensuring users see only authorized data. It is typically called from a menu or workflow program that manages the overall shipping process, and returns control to that calling program when users exit.</p>
<h3>Modernization Opportunities</h3>
<p><strong>Web-Based Interface:</strong> Convert the green-screen subfile display to a modern web-based responsive interface with real-time updates, improving user experience and mobile accessibility</p>
<p><strong>API Development:</strong> Expose load plan schedule data and validation logic through REST APIs, enabling integration with external shipping systems, mobile apps, and warehouse management platforms</p>
<p><strong>Enhanced Analytics:</strong> Add dashboard visualizations showing load plan utilization, on-time departure metrics, and capacity planning insights to support data-driven decision making</p>
<p><strong>Automated Validation:</strong> Implement real-time validation as users type rather than on Enter key, providing immediate feedback and reducing errors</p>
<p><strong>Integration with Modern Logistics:</strong> Connect to GPS tracking, route optimization engines, and real-time traffic systems to automatically adjust load departure times based on current conditions</p>
<p><strong>Cloud Migration:</strong> Modernize the database layer to cloud-based systems while maintaining business logic, enabling scalability and reducing infrastructure costs</p>

<h2>8. Detailed Business Functions Analysis</h2>
<p><strong>For Business Users:</strong> This section provides detailed analysis of each function with clear explanations and visual diagrams.</p>
<div class="highlight">
<strong>Coverage:</strong> All 41 functions documented with 4-part analysis and visual flowcharts
</div>

<div class="func">
<div class="func-header">
<h3>Function 1: BAIZSF</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 897 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F01_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Company Number (P1AIC3), Warehouse Code (P1AJCD), Load Plan Date (P1UIDT), First Time Flag (P2TAST)</p>
<p><strong>Output:</strong> Initialized subfile ready for loading, validated company/warehouse parameters, category load counts populated in screen header</p>
<p><strong>Key Data:</strong> User default company/warehouse from profile (YL0001/YL0002), current job date (##JDT), load plan categories and counts</p>
</div>

<!-- AI_MARKER: F01_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>BAIZSF initializes the load plan display screen by clearing the subfile and setting up default parameters. If the user hasn't specified a company, it retrieves their default company and warehouse from their profile. If no load plan date was entered, it defaults to today's date. The function then validates that the specified warehouse is authorized to ship for the selected company by calling SARVGN. If validation fails, it displays an error message showing the warehouse and company codes. If validation succeeds, it retrieves load plan category headings by calling SBRVGN, generates load plan time schedules by calling PBBQXFR, and retrieves load totals by calling SCRVGN. Finally, it positions the database file to the correct company/warehouse/date combination and performs an initial read, preparing the system to load the subfile with actual load plan records.</p>
</div>

<!-- AI_MARKER: F01_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> The function starts by clearing the subfile display area. It checks if default company/warehouse/date values need to be applied from the user profile. It validates warehouse authorization for the company - if invalid, shows an error and exits. If valid, it retrieves category definitions, generates load schedules, calculates load totals, and positions the database to begin loading records.</p>
</div>
<div class="mermaid">
flowchart TD
    Start([BAIZSF: Initialize Subfile]) --> Clear[Clear Subfile Display Area]
    Clear --> CheckCompany{Company<br/>Provided?}
    CheckCompany -->|No| LoadDefaults[Load Default Company<br/>and Warehouse from Profile]
    CheckCompany -->|Yes| CheckDate
    LoadDefaults --> CheckDate{Load Plan<br/>Date Provided?}
    CheckDate -->|No| UseToday[Use Current Job Date]
    CheckDate -->|Yes| ValidateWH
    UseToday --> ValidateWH[Validate Warehouse:<br/>Call SARVGN]
    ValidateWH --> WHValid{Warehouse<br/>Authorized?}
    WHValid -->|No| FormatError[Format Error Message<br/>with Warehouse & Company]
    FormatError --> SendMsg[Send Message:<br/>Warehouse cant ship f/co]
    SendMsg --> SetError[Set Error Indicators]
    SetError --> End([Function Complete])
    WHValid -->|Yes| GetCategories[Retrieve Category Headings:<br/>Call SBRVGN]
    GetCategories --> InitCounts[Initialize Load Counts<br/>to Zero]
    InitCounts --> GenSchedules[Generate Load Schedules:<br/>Call PBBQXFR]
    GenSchedules --> CheckError{Call<br/>Successful?}
    CheckError -->|No| HandleError[Display Error Message]
    HandleError --> End
    CheckError -->|Yes| GetTotals[Retrieve Load Totals:<br/>Call SCRVGN]
    GetTotals --> PositionDB[Position Database File<br/>to Company/Warehouse/Date]
    PositionDB --> ReadFirst[Read First Record]
    ReadFirst --> SaveParams[Save Selector Values]
    SaveParams --> LoadSubfile[Call BBLDSF to<br/>Load Subfile Page]
    LoadSubfile --> End
</div>

<!-- AI_MARKER: F01_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> Reads Warehouse file (CAADREL) to validate authorization; reads Load Plan Time Schedule (PBAGCPL) initial record; reads user profile for defaults</p>
<p><strong>External Calls:</strong> SARVGN (warehouse validation), SBRVGN (category retrieval), PBBQXFR (schedule generation), SCRVGN (load totals), ZASNMS (message formatting), BBLDSF (subfile loading)</p>
<p><strong>Business Impact:</strong> This initialization ensures users only see authorized data and provides proper context (categories, counts) for interpreting the load schedule. Errors caught here prevent invalid operations and guide users to correct their inputs before proceeding.</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 2: BBLDSF</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 1030 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F02_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Current database position on Load Plan Time Schedule file (PBAGCPL), selection criteria fields (#2AIC3, #2AJCD, #2UIDT, #2ABTH, #2ACTH), subfile page size (##SFPG), scan limit (W0SLM), cursor positioning data (W0RR0, W0SPG)</p>
<p><strong>Output:</strong> Populated subfile with load plan records (##RROK count), subfile records written to #SFLRCD, record selection flag (W0RSL), error indicators set for invalid records (*IN99)</p>
<p><strong>Key Data:</strong> Load plan records from PBAGCPL including company (AGAIC3), warehouse (AGAJCD), load plan date (AGUIDT), load plan time (AGABTH), on yard time (AGACTH), load ID array populated via SDRVGN</p>
</div>

<!-- AI_MARKER: F02_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>BBLDSF loads one or more pages of load plan records from the database into the interactive subfile for display to users. It reads load plan time schedule records sequentially, applying user-specified selection criteria to filter which records appear on screen. For each record that passes the selection filters, the function populates subfile fields by calling MBFL#1, retrieves load details for the corresponding category array by calling SDRVGN, and writes the formatted record to the subfile. The function respects scan limits to prevent excessive database reads, calculates required pages based on cursor positioning or requested page count, and marks records as selected or not selected depending on whether they match the control screen's company/warehouse/date filter. This provides users with a focused, paginated view of relevant load plans while maintaining system performance through controlled database access.</p>
</div>

<!-- AI_MARKER: F02_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Load subfile page with database records at source line 1030. This function coordinates its task by reading necessary data, performing validations, and updating work fields or display attributes as needed.</p>
</div>
<div class="mermaid">
flowchart TD
    Start([BBLDSF: Load Subfile]) --> Setup[Setup Scan Parameters]
    Setup --> Loop{Loop Until Page Full<br/>or Scan Limit}
    Loop --> ReadDB[Read Database Record]
    ReadDB --> EOF{End of<br/>File?}
    EOF -->|Yes| CheckEmpty
    EOF -->|No| Filter{Matches<br/>Selection?}
    Filter -->|No| Loop
    Filter -->|Yes| LoadFields[Load Fields to Subfile]
    LoadFields --> SetAttrs[Set Display Attributes:<br/>Call GADSA1]
    SetAttrs --> WriteRec[Write Subfile Record]
    WriteRec --> IncrCount[Increment Counters]
    IncrCount --> CheckLimit{Page Full or<br/>Scan Limit?}
    CheckLimit -->|No| Loop
    CheckLimit -->|Yes| CheckEmpty
    CheckEmpty{Any Records<br/>Loaded?}
    CheckEmpty -->|No| NoData[Send Message:<br/>No Data to Display]
    CheckEmpty -->|Yes| Success[Return Success]
    NoData --> End([Function Complete])
    Success --> End
</div>

<!-- AI_MARKER: F02_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> Reads Load Plan Time Schedule file (PBAGCPL) sequentially; no database updates occur in this function (read-only operation for display purposes)</p>
<p><strong>External Calls:</strong> MBFL#1 (populate subfile fields from database record), SDRVGN (retrieve load details and populate category array), GADSA1 (set screen display indicators)</p>
<p><strong>Business Impact:</strong> This function controls what load plans users see on their screens, directly affecting their ability to manage shipping schedules. Proper filtering ensures users focus on relevant loads, while scan limits protect system performance. The pagination allows efficient navigation through large datasets, and the category array population enables summarized views of loads by type, supporting faster decision-making in warehouse operations.</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 3: CAEXFM</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 1167 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F03_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Screen fields ready for display, help request indicator (*IN25), prompt request indicator (*IN04), cursor positioning data (YSETCS flag, W0CSRR/W0CFL cursor location), subfile control position (@#SFRC)</p>
<p><strong>Output:</strong> User input from screen (#SFLCTL format), function key pressed (F3/F12/F4/PageUp/PageDown/Enter), updated cursor position, prompt field identifier (YPMTFD), help display results</p>
<p><strong>Key Data:</strong> Screen time (##TME), cursor location (WCSRLC), help flag (W0HLP), message control fields (#MSGCTL), command text (#CMDTXT1), subfile control record (@#SFRC for positioning)</p>
</div>

<!-- AI_MARKER: F03_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>CAEXFM manages the interactive display of the load plan screen to users and captures their inputs and actions. It converts internal data to user-friendly external formats by calling MOCV#2, sets screen display attributes by calling GBDSA2, and positions the cursor based on prior context or errors. The function displays the subfile control screen with messages and command text, then waits for user action (Enter key, function keys, or prompts). When the user responds, it captures the action, tests cursor position by calling Y8TST, checks for prompt requests via ZDVPMT, and displays help if requested via ZHHPKY. After user interaction completes, it clears program messages, resets indicators, and returns control to the main program with the user's selections and inputs ready for validation and processing. This function serves as the primary user interaction point, ensuring a responsive interface with proper cursor control, help support, and message handling.</p>
</div>

<!-- AI_MARKER: F03_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Display screen and handle user interaction at source line 1167. This function coordinates its task by reading necessary data, performing validations, and updating work fields or display attributes as needed.</p>
</div>
<div class="mermaid">
flowchart TD
    Start([CAEXFM: Display Screen]) --> Convert[Convert Fields to<br/>External Format]
    Convert --> SetInd[Set Screen Indicators:<br/>Call GBDSA2]
    SetInd --> CheckCursor{Cursor<br/>Positioning?}
    CheckCursor -->|Yes| SetCurs[Set Cursor Position:<br/>Call Y0SET]
    CheckCursor -->|No| Display
    SetCurs --> Display[Display Screen with EXFMT]
    Display --> CaptureInput[Capture User Input]
    CaptureInput --> TestCurs[Test Cursor Position:<br/>Call Y8TST]
    TestCurs --> CheckPrompt{F4 Prompt<br/>Requested?}
    CheckPrompt -->|Yes| Prompt[Process Prompt:<br/>Call ZDVPMT]
    CheckPrompt -->|No| CheckHelp
    Prompt --> Display
    CheckHelp{F25 Help<br/>Requested?}
    CheckHelp -->|Yes| Help[Display Help Text:<br/>Call ZHHPKY]
    Help --> Display
    CheckHelp -->|No| ClearMsgs[Clear Message Queue:<br/>Call Y2CLMSC]
    ClearMsgs --> ClearCursor[Clear Cursor Data:<br/>Call Y9CLR]
    ClearCursor --> End([Return to Main Logic])
</div>

<!-- AI_MARKER: F03_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations; this function focuses solely on screen display and user interaction management</p>
<p><strong>External Calls:</strong> MOCV#2 (convert data to external format), GBDSA2 (set screen attributes), Y0SET (set cursor position), Y8TST (test cursor), ZDVPMT (check prompts), ZHHPKY (display help), Y9CLR (clear cursor data), Y2CLMSC (clear message queue)</p>
<p><strong>Business Impact:</strong> This function is critical for user experience and productivity - it controls how warehouse staff interact with load plans, ensuring they receive proper feedback through cursor positioning, access help when needed, and can efficiently navigate through prompts and selections. The message handling ensures error communications are clear and contextual. Smooth screen interaction directly impacts how quickly staff can review and manage shipping schedules, affecting overall warehouse throughput and customer service levels.</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 4: DBPRSF</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 1519 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F04_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Subfile fields</p>
<p><strong>Output:</strong> Updated records</p>
<p><strong>Key Data:</strong> Database files: SFLRCD</p>
</div>

<!-- AI_MARKER: F04_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>DBPRSF. Process modified subfile record. This function reads changed subfile records, retrieves specific records via CHAIN, reads database records sequentially. It calls subroutines DCPRSR, GADSA1, ZASNMS for processing. External programs called: PBBUSRR, PBBUSRR. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F04_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 1519 - DBPRSF. Process modified subfile record. This function reads changed subfile records, retrieves spec</p>
</div>
<div class="mermaid">
flowchart TD
    Start([DBPRSF: Process Changed Records]) --> CheckPos{YAFSCH<br/>Not Zero?}
    CheckPos -->|Yes| Chain[CHAIN to Specific Record]
    CheckPos -->|No| ReadC[READC First Changed Record]
    Chain --> Loop
    ReadC --> Loop{Record Found?<br/>IN92=0?}
    Loop -->|No EOF| ProcessRec[EXSR DCPRSR]
    ProcessRec --> SetAttr[EXSR GADSA1]
    SetAttr --> Update[UPDATE #SFLRCD]
    Update --> ReadNext[READC Next Changed]
    ReadNext --> Loop
    Loop -->|Yes EOF| End([Function Complete])
</div>

<!-- AI_MARKER: F04_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> SFLRCD</p>
<p><strong>External Calls:</strong> DCPRSR, GADSA1, ZASNMS; External: PBBUSRR, PBBUSRR</p>
<p><strong>Business Impact:</strong> Critical business processing function</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 5: DCPRSR</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 1540 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F05_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F05_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>DCPRSR. Process subfile record. It calls subroutines ZASNMS, ZASNMS, ZASNMS for processing. External programs called: PBBUSRR, PBBUSRR. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F05_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 1540 - DCPRSR. Process subfile record. It calls subroutines ZASNMS, ZASNMS, ZASNMS for processing. External</p>
</div>
<div class="mermaid">
flowchart TD
    Start([DCPRSR: Process Record]) --> ClearInd[Clear Error Indicators]
    ClearInd --> CheckPrompt{YPMTFD<br/>Not Blank?}
    CheckPrompt -->|Yes| Exit[Exit Function]
    CheckPrompt -->|No| SetNext[SETON Indicator 84]
    SetNext --> CheckF4{F4 Key<br/>Pressed? IN04=1}
    CheckF4 -->|No| Exit
    CheckF4 -->|Yes| CheckCursor1{Cursor on<br/>Load ID 1?}
    CheckCursor1 -->|Yes| CallLoad1[CALL PBBUSRR for Load ID 1]
    CallLoad1 --> CheckErr1{Call<br/>Success?}
    CheckErr1 -->|Error| HandleErr1[Set Error Indicators]
    CheckErr1 -->|Success| CheckCursor2
    CheckCursor1 -->|No| CheckCursor2{Cursor on<br/>Load ID 2?}
    CheckCursor2 -->|Yes| CallLoad2[CALL PBBUSRR for Load ID 2]
    CallLoad2 --> CheckErr2{Call<br/>Success?}
    CheckErr2 -->|Error| HandleErr2[Set Error Indicators]
    CheckErr2 -->|Success| Continue[Continue to Load IDs 3-7]
    CheckCursor2 -->|No| Continue
    HandleErr1 --> Exit
    HandleErr2 --> Exit
    Continue --> Exit
</div>

<!-- AI_MARKER: F05_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> ZASNMS, ZASNMS, ZASNMS; External: PBBUSRR, PBBUSRR</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 6: DHPRCF</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 3036 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F06_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Subfile fields</p>
<p><strong>Output:</strong> Updated records</p>
<p><strong>Key Data:</strong> Database files: Y2INEX, Y2EXIN</p>
</div>

<!-- AI_MARKER: F06_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>DHPRCF. Convert fields to external form. This function reads changed subfile records, retrieves specific records via CHAIN, updates records. It calls subroutines MOCV, GBDSA2, ZHHPKY for processing. External programs called: CAVLLSR, Y2CLMSC. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F06_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 3036 - DHPRCF. Convert fields to external form. This function reads changed subfile records, retrieves spec</p>
</div>
<div class="mermaid">
flowchart TD
    Start([DHPRCF: Confirmation Screen]) --> Convert[EXSR MOCV#2:<br/>Convert to External Form]
    Convert --> SetInd[EXSR GBDSA2:<br/>Set Screen Indicators]
    SetInd --> InitConfirm[Initialize##CFCD='N']
    InitConfirm --> ConvertExt[Convert ##CFCD to<br/>External Value V#CFCD]
    ConvertExt --> DisplayLoop{Help Loop:<br/>W0HLP=N AND IN29=0}
    DisplayLoop -->|Continue| WriteScreen[WRITE #MSGCTL, #CMDTXT1, #SFLCTL]
    WriteScreen --> ExFmt[EXFMT #CONFIRM:<br/>Display Confirmation Screen]
    ExFmt --> CheckCancel{User Cancelled?<br/>IN29=1}
    CheckCancel -->|Yes| SetError[SETON Indicator 99]
    SetError --> Exit
    CheckCancel -->|No| CheckHelp{Help<br/>Requested? IN25}
    CheckHelp -->|Yes| ShowHelp[EXSR ZHHPKY]
    ShowHelp --> DisplayLoop
    CheckHelp -->|No| CheckPrompt{Prompt '?'<br/>Entered?}
    CheckPrompt -->|Yes| CallPrompt[CALL CAVLLSR:<br/>Values List Search]
    CallPrompt --> DisplayLoop
    CheckPrompt -->|No| ConvertInt[Convert V#CFCD to<br/>Internal ##CFCD]
    ConvertInt --> CheckValid{Valid<br/>Confirmation?}
    CheckValid -->|Invalid| SetInd96[Set Indicator 96]
    SetInd96 --> WriteError[WRITE #CONFIRM with Error]
    WriteError --> DisplayLoop
    CheckValid -->|Valid| CheckY{##CFCD='Y'?}
    CheckY -->|Yes| ClearMsgs[CALL Y2CLMSC:<br/>Clear Messages]
    ClearMsgs --> Exit
    CheckY -->|No| Exit([Function Complete])
</div>

<!-- AI_MARKER: F06_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> Y2INEX, Y2EXIN</p>
<p><strong>External Calls:</strong> MOCV, GBDSA2, ZHHPKY; External: CAVLLSR, Y2CLMSC</p>
<p><strong>Business Impact:</strong> Critical business processing function</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 7: EAPRSF</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 3136 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F07_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Subfile fields</p>
<p><strong>Output:</strong> Updated records</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F07_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>EAPRSF. updates records. This function reads changed subfile records, updates records. It calls subroutines EBPRSR, GADSA1 for processing. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F07_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 3136 - EAPRSF. updates records. This function reads changed subfile records, updates records. It calls subr</p>
</div>
<div class="mermaid">
flowchart TD
    Start([EAPRSF: Update from Subfile]) --> CheckError{Error Status<br/>YL0005 Blank or N?}
    CheckError -->|Yes| SetReload[Set W0RSF='Y':<br/>Reload Subfile Flag]
    CheckError -->|No| SkipReload[Skip Reload]
    SetReload --> CheckRecords
    SkipReload --> CheckRecords{Records in<br/>Subfile? IN81=1}
    CheckRecords -->|No| Exit([Function Complete])
    CheckRecords -->|Yes| ReadChanged[READC #SFLRCD:<br/>First Changed Record]
    ReadChanged --> LoopCheck{More Records?<br/>IN92=0}
    LoopCheck -->|No| CheckErrors
    LoopCheck -->|Yes| ProcessRec[EXSR EBPRSR:<br/>Process Record]
    ProcessRec --> SetAttr[EXSR GADSA1:<br/>Set Display Attributes]
    SetAttr --> UpdateSfl[UPDATE #SFLRCD]
    UpdateSfl --> ReadNext[READC Next Changed]
    ReadNext --> LoopCheck
    CheckErrors{Any Errors?<br/>IN99=1}
    CheckErrors -->|Yes| CancelReload[Set W0RSF='N':<br/>Cancel Reload]
    CancelReload --> Exit
    CheckErrors -->|No| Exit
</div>

<!-- AI_MARKER: F07_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> EBPRSR, GADSA1</p>
<p><strong>Business Impact:</strong> Critical business processing function</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 8: EBPRSR</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 3167 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F08_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F08_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>EBPRSR. Process modified subfile record. It calls subroutines XDVC2T for processing. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F08_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 3167 - EBPRSR. Process modified subfile record. It calls subroutines XDVC2T for processing. Includes error </p>
</div>
<div class="mermaid">
flowchart TD
    Start([EBPRSR: Process Record]) --> ClearInd[Clear Error Indicators<br/>35-98]
    ClearInd --> CheckInvalid{Record Invalid?<br/>IN98=1}
    CheckInvalid -->|Yes| SetNextChg[SETON Indicator 84:<br/>SFLNXTCHG]
    SetNextChg --> SetCursor[Set ##SFRC=##RR if IN99=0]
    SetCursor --> Exit
    CheckInvalid -->|No| ClearNextChg[SETOF Indicator 84:<br/>Clear SFLNXTCHG]
    ClearNextChg --> Exit([Function Complete])
</div>

<!-- AI_MARKER: F08_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> XDVC2T</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 9: FBRQRL</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 3186 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F09_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F09_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>FBRQRL. Set display attributes for Subfile record. It calls subroutines XDVC2T for processing. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F09_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 3186 - FBRQRL. Set display attributes for Subfile record. It calls subroutines XDVC2T for processing. Inclu</p>
</div>
<div class="mermaid">
flowchart TD
    Start([FBRQRL: Request Reload]) --> SetFlag[Set W0RSF='Y':<br/>Request Subfile Reload]
    SetFlag --> End([Function Complete])
</div>

<!-- AI_MARKER: F09_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> XDVC2T</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 10: GADSA1</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 3194 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F10_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F10_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>GADSA1. Set display attributes for Subfile record. It calls subroutines XDVC2T for processing. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F10_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 3194 - GADSA1. Set display attributes for Subfile record. It calls subroutines XDVC2T for processing. Inclu</p>
</div>
<div class="mermaid">
flowchart TD
    Start([GADSA1: Set Record Attributes]) --> InitInd[Set *IN78='0']
    InitInd --> CheckStatus{P5E5ST='Y'?}
    CheckStatus -->|Yes| SetOn[Set *IN78='1']
    CheckStatus -->|No| KeepOff[Keep *IN78='0']
    SetOn --> End([Function Complete])
    KeepOff --> End
</div>

<!-- AI_MARKER: F10_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> XDVC2T</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 11: GBDSA2</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 3205 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F11_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F11_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>GBDSA2. Set display attributes for Subfile control. It calls subroutines XDVC2T for processing. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F11_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 3205 - GBDSA2. Set display attributes for Subfile control. It calls subroutines XDVC2T for processing. Incl</p>
</div>
<div class="mermaid">
flowchart TD
    Start([GBDSA2: Set Control Attributes]) --> InitInd[Set *IN79='0']
    InitInd --> CheckStatus{P2I6ST='N'?}
    CheckStatus -->|Yes| SetOn[Set *IN79='1']
    CheckStatus -->|No| KeepOff[Keep *IN79='0']
    SetOn --> End([Function Complete])
    KeepOff --> End
</div>

<!-- AI_MARKER: F11_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> XDVC2T</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 12: SARVGN</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 3312 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F12_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F12_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>SARVGN. Setup key. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F12_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 3312 - SARVGN. Setup key. Includes error handling and validation.</p>
</div>
<div class="mermaid">
flowchart TD
    Start([SARVGN: Start]) --> Init[Initialize Return Code<br/>MOVEL *BLANK W0RTN]
    Init --> DefKey[Define Key KRSSA:<br/>Company + Warehouse]
    DefKey --> SetKey[Setup Key Values:<br/>WQSA01 = #2AIC3<br/>WQSA02 = #2AJCD]
    SetKey --> Position[Position File:<br/>SETLL @ADREWA]
    Position --> Read[Read Record:<br/>READE @ADREWA]
    Read --> CheckFound{{Found<br/>Record?<br/>IN90=0}}
    CheckFound -->|Not Found<br/>IN90=1| SetError[Set Error USR0007<br/>Clear Warehouse Desc<br/>Set W0RTN = @CN,001]
    SetError --> ExitErr[GOTO SAEXIT]
    CheckFound -->|Found<br/>IN90=0| Loop{{DOWEQ Loop:<br/>IN90=0}}
    Loop -->|Continue| ClearErr[Clear Return Code<br/>MOVEL *BLANK W0RTN]
    ClearErr --> MoveDesc[Move Warehouse Desc:<br/>MOVEL ADF8NA YL0003]
    MoveDesc --> ReadNext[Read Next:<br/>READE @ADREWA]
    ReadNext --> Loop
    Loop -->|Exit<br/>IN90=1| ExitOK[SAEXIT: End Routine]
    ExitErr --> ExitOK
</div>

<!-- AI_MARKER: F12_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> None</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 13: SBRVGN</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 3350 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F13_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F13_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>SBRVGN. Setup key. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F13_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 3350 - SBRVGN. Setup key. Includes error handling and validation.</p>
</div>
<div class="mermaid">
flowchart TD
    Start([SBRVGN: Start]) --> Init[Initialize Return Code<br/>MOVEL *BLANK W0RTN]
    Init --> DefKeys[Define Keys KPSSB/KRSSB:<br/>Company + Display Seq]
    DefKeys --> SetKey[Setup Keys:<br/>WQSB01 = #2AIC3<br/>AEURNY = 0]
    SetKey --> Position[Position File:<br/>SETLL @AEREMW]
    Position --> Read[Read Record:<br/>READE @AEREMW]
    Read --> CheckFound{{Found?<br/>IN90}}
    CheckFound -->|Not Found<br/>IN90=1| SetErr[Set Error USR4475]
    CheckFound -->|Found<br/>IN90=0| Loop{{DOWEQ Loop:<br/>IN90=0}}
    Loop -->|Continue| CheckSeq{{Check Display<br/>Sequence<br/>AEURNY}}
    CheckSeq -->|=1| MoveCat1[Move to #COYAA<br/>Category 1]
    CheckSeq -->|=2| MoveCat2[Move to #COZAA<br/>Category 2]
    CheckSeq -->|=3| MoveCat3[Move to #CO0AA<br/>Category 3]
    CheckSeq -->|=4| MoveCat4[Move to #CO1AA<br/>Category 4]
    CheckSeq -->|=5| MoveCat5[Move to #CO2AA<br/>Category 5]
    CheckSeq -->|=6| MoveCat6[Move to #CO3AA<br/>Category 6]
    CheckSeq -->|=7| MoveCat7[Move to #CO4AA<br/>Category 7]
    MoveCat1 --> ReadNext[Read Next:<br/>READE @AEREMW]
    MoveCat2 --> ReadNext
    MoveCat3 --> ReadNext
    MoveCat4 --> ReadNext
    MoveCat5 --> ReadNext
    MoveCat6 --> ReadNext
    MoveCat7 --> ReadNext
    ReadNext --> Loop
    Loop -->|Exit<br/>IN90=1| ExitOK[SBEXIT: End Routine]
    SetErr --> ExitOK
</div>

<!-- AI_MARKER: F13_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> None</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 14: SCRVGN</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 3413 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F14_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F14_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>SCRVGN. Setup key. It calls subroutines SERVGN, SERVGN, SERVGN for processing. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F14_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 3413 - SCRVGN. Setup key. It calls subroutines SERVGN, SERVGN, SERVGN for processing. Includes error handli</p>
</div>
<div class="mermaid">
flowchart TD
    Start([SCRVGN: Start]) --> Init[Initialize Return Code<br/>MOVEL *BLANK W0RTN]
    Init --> DefKey[Define Key KRSSC:<br/>Company+Warehouse+Date]
    DefKey --> SetKey[Setup Keys:<br/>WQSC01=#2AIC3<br/>WQSC02=#2AJCD<br/>WQSC03=#2UIDT]
    SetKey --> Position[Position File:<br/>SETLL @AFCPM0]
    Position --> Read[Read Record:<br/>READE @AFCPM0]
    Read --> CheckFound{{Found?<br/>IN90}}
    CheckFound -->|Not Found| SetErr[Set Error USR4477]
    CheckFound -->|Found| Loop{{DOWEQ Loop:<br/>IN90=0}}
    Loop -->|Continue| CheckCat{{Match<br/>Category?}}
    CheckCat -->|AFOWAA=#COYAA| CheckLoad1{{Load ID<br/>> 0?}}
    CheckLoad1 -->|Yes| Inc1[Increment #CU0NY<br/>Load Count 1]
    CheckCat -->|AFOWAA=#COZAA| CheckLoad2{{Load ID<br/>!= 0?}}
    CheckLoad2 -->|Yes| Inc2[Increment #CU1NY<br/>Load Count 2]
    CheckCat -->|#CO0AA=AFOWAA| CheckLoad3{{Load ID<br/>!= 0?}}
    CheckLoad3 -->|Yes| Inc3[Increment #CU2NY<br/>Load Count 3]
    CheckCat -->|#CO1AA=AFOWAA| CheckLoad4{{Load ID<br/>!= 0?}}
    CheckLoad4 -->|Yes| Inc4[Increment #CU3NY<br/>Load Count 4]
    CheckCat -->|#CO2AA=AFOWAA| CheckLoad5{{Load ID<br/>!= 0?}}
    CheckLoad5 -->|Yes| Inc5[Increment #CU4NY<br/>Load Count 5]
    CheckCat -->|#CO3AA=AFOWAA| CheckLoad6{{Load ID<br/>!= 0?}}
    CheckLoad6 -->|Yes| Inc6[Increment #CU5NY<br/>Load Count 6]
    CheckCat -->|#CO4AA=AFOWAA| CheckLoad7{{Load ID<br/>!= 0?}}
    CheckLoad7 -->|Yes| Inc7[Increment #CU6NY<br/>Load Count 7]
    Inc1 --> ReadNext[Read Next:<br/>READE @AFCPM0]
    Inc2 --> ReadNext
    Inc3 --> ReadNext
    Inc4 --> ReadNext
    Inc5 --> ReadNext
    Inc6 --> ReadNext
    Inc7 --> ReadNext
    CheckLoad1 -->|No| ReadNext
    CheckLoad2 -->|No| ReadNext
    CheckLoad3 -->|No| ReadNext
    CheckLoad4 -->|No| ReadNext
    CheckLoad5 -->|No| ReadNext
    CheckLoad6 -->|No| ReadNext
    CheckLoad7 -->|No| ReadNext
    ReadNext --> Loop
    Loop -->|Exit| ExitOK[SCEXIT: End Routine]
    SetErr --> ExitOK
</div>

<!-- AI_MARKER: F14_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> SERVGN, SERVGN, SERVGN</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 15: SDRVGN</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 3498 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F15_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: FJCPBN</p>
</div>

<!-- AI_MARKER: F15_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>SDRVGN. Setup key. This function retrieves specific records via CHAIN. It calls subroutines SERVGN, SERVGN, SERVGN for processing. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F15_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 3498 - SDRVGN. Setup key. This function retrieves specific records via CHAIN. It calls subroutines SERVGN, </p>
</div>
<div class="mermaid">
flowchart TD
    Start([SDRVGN: Start]) --> Init[Initialize Return Code<br/>MOVEL *BLANK W0RTN]
    Init --> DefKey[Define Key KRSSD:<br/>Co+Whs+Date+Time]
    DefKey --> SetKey[Setup Keys:<br/>WQSD01=#1AIC3<br/>WQSD02=#1AJCD<br/>WQSD03=#1UIDT<br/>WQSD04=#1ABTH]
    SetKey --> Position[Position File:<br/>SETLL @AFCPM0]
    Position --> Read[Read Record:<br/>READE @AFCPM0]
    Read --> CheckFound{{Found?<br/>IN90}}
    CheckFound -->|Not Found| SetErr[Set Error USR4477]
    CheckFound -->|Found| Loop{{DOWEQ Loop:<br/>IN90=0}}
    Loop -->|Continue| CheckCat{{Match<br/>Category?}}
    CheckCat -->|AFOWAA=#COYAA| MoveLd1[Move Load ID 1<br/>Z-ADD AFUSNY #RUTNY]
    MoveLd1 --> CheckLd1{{Load ID 1<br/>!= 0?}}
    CheckLd1 -->|Yes| Call1[EXSR SERVGN<br/>Get Carrier]
    Call1 --> MoveCar1[Move Carrier:<br/>#RNLAA = WL0002]
    CheckCat -->|AFOWAA=#COZAA| MoveLd2[Move Load ID 2]
    MoveLd2 --> CheckLd2{{Load ID 2<br/>!= 0?}}
    CheckLd2 -->|Yes| Call2[EXSR SERVGN]
    Call2 --> MoveCar2[Move Carrier:<br/>#RNMAA = WL0002]
    CheckCat -->|#CO0AA=AFOWAA| MoveLd3[Move Load ID 3]
    MoveLd3 --> CheckLd3{{Load ID 3<br/>!= 0?}}
    CheckLd3 -->|Yes| Call3[EXSR SERVGN]
    Call3 --> MoveCar3[Move Carrier:<br/>#RNNAA = WL0002]
    CheckCat -->|#CO1AA=AFOWAA| MoveLd4[Move Load ID 4]
    MoveLd4 --> CheckLd4{{Load ID 4<br/>!= 0?}}
    CheckLd4 -->|Yes| Call4[EXSR SERVGN]
    Call4 --> MoveCar4[Move Carrier:<br/>#RNOAA = WL0002]
    CheckCat -->|#CO2AA=AFOWAA| MoveLd5[Move Load ID 5]
    MoveLd5 --> CheckLd5{{Load ID 5<br/>!= 0?}}
    CheckLd5 -->|Yes| Call5[EXSR SERVGN]
    Call5 --> MoveCar5[Move Carrier:<br/>#RNPAA = WL0002]
    CheckCat -->|#CO3AA=AFOWAA| MoveLd6[Move Load ID 6]
    MoveLd6 --> CheckLd6{{Load ID 6<br/>!= 0?}}
    CheckLd6 -->|Yes| Call6[EXSR SERVGN]
    Call6 --> MoveCar6[Move Carrier:<br/>#RNQAA = WL0002]
    CheckCat -->|#CO4AA=AFOWAA| MoveLd7[Move Load ID 7]
    MoveLd7 --> CheckLd7{{Load ID 7<br/>!= 0?}}
    CheckLd7 -->|Yes| Call7[EXSR SERVGN]
    Call7 --> MoveCar7[Move Carrier:<br/>#RNRAA = WL0002]
    MoveCar1 --> ReadNext[Read Next:<br/>READE @AFCPM0]
    MoveCar2 --> ReadNext
    MoveCar3 --> ReadNext
    MoveCar4 --> ReadNext
    MoveCar5 --> ReadNext
    MoveCar6 --> ReadNext
    MoveCar7 --> ReadNext
    CheckLd1 -->|No| ReadNext
    CheckLd2 -->|No| ReadNext
    CheckLd3 -->|No| ReadNext
    CheckLd4 -->|No| ReadNext
    CheckLd5 -->|No| ReadNext
    CheckLd6 -->|No| ReadNext
    CheckLd7 -->|No| ReadNext
    ReadNext --> Loop
    Loop -->|Exit| ExitOK[SDEXIT: End Routine]
    SetErr --> ExitOK
</div>

<!-- AI_MARKER: F15_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> FJCPBN</p>
<p><strong>External Calls:</strong> SERVGN, SERVGN, SERVGN</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 16: SERVGN</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 3628 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F16_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: AFCPMV, FJCPBN</p>
</div>

<!-- AI_MARKER: F16_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>SERVGN. Setup key. This function retrieves specific records via CHAIN. It calls subroutines SHCHRC, SICHRC, SHCHRC for processing. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F16_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 3628 - SERVGN. Setup key. This function retrieves specific records via CHAIN. It calls subroutines SHCHRC, </p>
</div>
<div class="mermaid">
flowchart TD
    Start([SERVGN: Start]) --> Init[Initialize Return Code<br/>MOVEL *BLANK W0RTN]
    Init --> DefKey[Define Key KRSSE:<br/>Load ID FJRMNB]
    DefKey --> SetKey[Setup Key:<br/>Z-ADD WL0001 FJRMNB]
    SetKey --> Chain[CHAIN @FJCPBN<br/>Load Header File]
    Chain --> CheckFound{{Found?<br/>IN90}}
    CheckFound -->|Not Found<br/>IN90=1| SetErr[Set Error USR1188]
    CheckFound -->|Found<br/>IN90=0| MoveCarrier[Move Carrier Code:<br/>MOVEL FJBZNA WL0002]
    SetErr --> ExitOK[SEEXIT: End Routine]
    MoveCarrier --> ExitOK
</div>

<!-- AI_MARKER: F16_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> AFCPMV, FJCPBN</p>
<p><strong>External Calls:</strong> SHCHRC, SICHRC, SHCHRC</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 17: SFRVGN</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 3650 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F17_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: AFCPMV, FJCPBN</p>
</div>

<!-- AI_MARKER: F17_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>SFRVGN. Retrieve Load Status and Carrier data from Load Header. Returns load status, carrier code, export status, acceptance status, and deadline dates/times.</p>
</div>

<!-- AI_MARKER: F17_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 3650 - SFRVGN. Retrieve Load Status/Carrier from Load Header by chaining to file with load ID key.</p>
</div>
<div class="mermaid">
flowchart TD
    Start([SFRVGN: Start]) --> Init[Initialize Return Code<br/>MOVEL *BLANK W0RTN]
    Init --> DefKey[Define Key KRSSF:<br/>Load ID FJRMNB]
    DefKey --> SetKey[Setup Key:<br/>Z-ADD WL0003 FJRMNB]
    SetKey --> Chain[CHAIN @FJCPBN<br/>Load Header]
    Chain --> CheckFound{{Found?<br/>IN90}}
    CheckFound -->|Not Found<br/>IN90=1| SetErr[Set Error USR1188]
    SetErr --> ClearFields[Clear Output Fields:<br/>WL0004=*BLANK<br/>WL0005=*BLANK<br/>WL0006=*BLANK<br/>WL0007=*BLANK<br/>WL0008=*ZERO<br/>WL0009=*ZERO]
    ClearFields --> SetRetCode[Set Return Code<br/>W0RTN=@CN,001]
    SetRetCode --> ExitErr[GOTO SFEXIT]
    CheckFound -->|Found<br/>IN90=0| SetOKCode[Set Return Code<br/>W0RTN=@CN,003]
    SetOKCode --> MoveStatus[Move Load Status:<br/>MOVEL FJPKST WL0004]
    MoveStatus --> MoveCarrier[Move Carrier Code:<br/>MOVEL FJBZNA WL0005]
    MoveCarrier --> MoveExport[Move Export Status:<br/>MOVEL FJU2ST WL0006]
    MoveExport --> MoveAccept[Move Acceptance:<br/>MOVEL FJRMST WL0007]
    MoveAccept --> MoveDeadDt[Move Deadline Date:<br/>Z-ADD FJKZDT WL0008]
    MoveDeadDt --> MoveDeadTm[Move Deadline Time:<br/>Z-ADD FJAXTM WL0009]
    MoveDeadTm --> ExitOK[SFEXIT: End Routine]
    ExitErr --> ExitOK
</div>

<!-- AI_MARKER: F17_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> AFCPMV, FJCPBN</p>
<p><strong>External Calls:</strong> SHCHRC, SICHRC, SHCHRC</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 18: SGRVGN</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 3691 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F18_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: AFCPMV</p>
</div>

<!-- AI_MARKER: F18_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>SGRVGN. Retrieve and Change Load ID in time schedule. Handles undoing original load assignment, updating time schedule, and assigning new load to time slot.</p>
</div>

<!-- AI_MARKER: F18_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 3691 - SGRVGN. Changes load ID for a time slot by removing old assignment and adding new one with schedule updates.</p>
</div>
<div class="mermaid">
flowchart TD
    Start([SGRVGN: Start]) --> Init[Initialize Return Code<br/>MOVEL *BLANK W0RTN]
    Init --> DefKey[Define Key KRSSG:<br/>Co+Whs+Date+Cat+Time]
    DefKey --> SetKey[Setup Keys:<br/>WAAIC3=WL0010<br/>WAAJCD=WL0011<br/>WAUIDT=WL0012<br/>WAOWAA=WL0013<br/>WAABTH=WL0014]
    SetKey --> Chain[CHAIN @AFCPMV<br/>Time Schedule View]
    Chain --> CheckFound{{Found?<br/>IN90}}
    CheckFound -->|Not Found| SetErr[Set Error USR4477]
    CheckFound -->|Found| CheckChanged{{New Load<br/>!= Old Load?<br/>WL0015!=WAUSNY}}
    CheckChanged -->|Same| ExitOK[SGEXIT: End Routine]
    CheckChanged -->|Different| CheckOldLoad{{Old Load ID<br/>!= 0?<br/>WAUSNY}}
    CheckOldLoad -->|Yes| UndoOld[Call SHCHRC:<br/>Clear old load plan<br/>WL0016=WAUSNY<br/>WL0017/18=0]
    CheckOldLoad -->|No| ChangeSched[Call SICHRC:<br/>Change Time Schedule]
    UndoOld --> ChangeSched
    ChangeSched --> CheckNewLoad{{New Load ID<br/>!= 0?<br/>WL0015}}
    CheckNewLoad -->|No| ExitOK
    CheckNewLoad -->|Yes| CalcTime[Calculate Time:<br/>WL0014 * 100 = YL0015]
    CalcTime --> UpdateNew[Call SHCHRC:<br/>Update new load plan<br/>WL0016=WL0015<br/>WL0017=WL0012<br/>WL0018=YL0015]
    UpdateNew --> ExitOK
    SetErr --> ExitOK
</div>

<!-- AI_MARKER: F18_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> AFCPMV</p>
<p><strong>External Calls:</strong> SHCHRC, SICHRC, SHCHRC</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 19: SHCHRC</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 3747 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F19_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Load ID (WL0016), Plan Date (WL0017), Plan Time (WL0018)</p>
<p><strong>Output:</strong> Updated Load Header record</p>
<p><strong>Key Data:</strong> Database files: @FJCPBO (Load Header)</p>
</div>

<!-- AI_MARKER: F19_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>SHCHRC. Change Load Plan Date/Time in Load Header file. Initializes 143 work fields to blank/zero, retrieves load header record via CHAIN, updates plan date/time fields, sets audit stamp (job time, user, job name, date), and updates or releases record lock based on whether data changed.</p>
</div>

<!-- AI_MARKER: F19_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 3747 - SHCHRC. Massive update routine with 143 field initializations, CHAIN to load header, update plan date/time, audit stamp, and conditional UPDATE/UNLCK.</p>
</div>
<div class="mermaid">
flowchart TD
    Start([SHCHRC: Start]) --> InitFields[Initialize 143 Fields:<br/>WN0001-WN0143<br/>to *ZERO/*BLANK]
    InitFields --> InitRet[Initialize Return Code<br/>MOVEL *BLANK W0RTN]
    InitRet --> ClearFlag[Clear Change Flag<br/>YARDC=*BLANK]
    ClearFlag --> SetKey[Setup Load ID Key:<br/>Z-ADD WL0016 WBRMNB]
    SetKey --> DefKey[Define KLIST KLCHSH:<br/>Load ID]
    DefKey --> Chain[CHAIN @FJCPBO<br/>Load Header]
    Chain --> CheckFound{{Found?<br/>IN90}}
    CheckFound -->|Not Found<br/>IN90=1| ErrNotFound[Set Error Y2U0009<br/>Send Message]
    ErrNotFound --> ExitErr[GOTO SHEXIT]
    CheckFound -->|Locked<br/>IN91=1| ErrLocked[Set Error Y2U0004<br/>Database Error]
    ErrLocked --> ExitErr
    CheckFound -->|Found<br/>IN90=0| StoreOrig[Store Original Data:<br/>YARDCS=QOMFJ1]
    StoreOrig --> UpdatePlan[Update Plan Date/Time:<br/>WBP0DT=WL0017<br/>WBCMTM=WL0018]
    UpdatePlan --> CheckChange1{{Data<br/>Changed?<br/>QOMFJ1!=YARDCS}}
    CheckChange1 -->|Yes| SetFlag1[Set Flag: YARDC=Y]
    SetFlag1 --> SetAudit[Set Audit Stamp:<br/>WBAATM=##JTM<br/>WBAYNA=##USR<br/>WBA0NA=##JOB<br/>WBAXDT=##JDT]
    CheckChange1 -->|No| SetAudit
    SetAudit --> CheckChange2{{Data<br/>Changed?}}
    CheckChange2 -->|Yes| SetFlag2[Set Flag: YARDC=Y]
    SetFlag2 --> CheckFlag{{YARDC<br/>= Y?}}
    CheckChange2 -->|No| CheckFlag
    CheckFlag -->|Yes| UpdateRec[UPDATE @FJCPBO]
    UpdateRec --> CheckUpd{{Update<br/>Success?<br/>IN91}}
    CheckUpd -->|Error| ErrUpd[Set Error Y2U0004]
    CheckUpd -->|OK| ExitOK[SHEXIT: End Routine]
    CheckFlag -->|No| UnlockRec[UNLCK OMFJCPL1<br/>Release Lock]
    UnlockRec --> ExitOK
    ErrUpd --> ExitOK
    ExitErr --> ExitOK
</div>

<!-- AI_MARKER: F19_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> None</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 20: SICHRC</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 3976 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F20_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Key fields from WA variables (Company, Warehouse, Date, Category, Time)</p>
<p><strong>Output:</strong> Updated Load Plan Time Schedule record</p>
<p><strong>Key Data:</strong> Database files: @AFCPMU (Load Plan Time Schedule)</p>
</div>

<!-- AI_MARKER: F20_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>SICHRC. Change Load Plan Time Schedule record. CHAINs to time schedule file, updates on-yard time, load ID, status fields, and audit stamps (create/change date/time/user/program). Uses change detection to only UPDATE if data actually changed, otherwise releases lock.</p>
</div>

<!-- AI_MARKER: F20_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 3976 - SICHRC. Updates Load Plan Time Schedule with new load ID and timestamps via CHAIN/UPDATE with change detection.</p>
</div>
<div class="mermaid">
flowchart TD
    Start([SICHRC: Start]) --> InitRet[Initialize Return Code<br/>MOVEL *BLANK W0RTN]
    InitRet --> ClearFlag[Clear Change Flag<br/>YBRDC=*BLANK]
    ClearFlag --> SetKeys[Setup Key Fields:<br/>WCAIC3=WAAIC3<br/>WCAJCD=WAAJCD<br/>WCUIDT=WAUIDT<br/>WCOWAA=WAOWAA<br/>WCABTH=WAABTH]
    SetKeys --> DefKey[Define KLIST KLCHSI:<br/>5-part key]
    DefKey --> Chain[CHAIN @AFCPMU<br/>Time Schedule]
    Chain --> CheckFound{{Found?<br/>IN90}}
    CheckFound -->|Not Found<br/>IN90=1| ErrNotFound[Set Error Y2U0009<br/>Send ZASNMS Message]
    ErrNotFound --> ExitErr[GOTO SIEXIT]
    CheckFound -->|Locked<br/>IN91=1| ErrLocked[Set Error Y2U0004<br/>Send ZASNMS Message]
    ErrLocked --> ExitErr
    CheckFound -->|Found<br/>IN90=0| StoreOrig[Store Original:<br/>YBRDCS=QPBAF1]
    StoreOrig --> UpdateFields[Update Fields:<br/>WCACTH=WAACTH<br/>WCUSNY=WL0015<br/>WCN0ST=WAN0ST<br/>WCYOT1=WAYOT1<br/>WCVSST=WAVSST]
    UpdateFields --> UpdateAudit[Update Audit Stamps:<br/>WCMJDT/WCBETM/WCCCVN/WCCDVN<br/>WCMKDT/WCBFTM/WCCEVN/WCCFVN]
    UpdateAudit --> CheckChange{{Data<br/>Changed?<br/>QPBAF1!=YBRDCS}}
    CheckChange -->|Yes| SetFlag[Set Flag: YBRDC=Y]
    SetFlag --> CheckUpdate{{YBRDC<br/>= Y?}}
    CheckChange -->|No| CheckUpdate
    CheckUpdate -->|Yes| UpdateRec[UPDATE @AFCPMU]
    UpdateRec --> CheckUpd{{Update<br/>Success?<br/>IN91}}
    CheckUpd -->|Error| ErrUpd[Set Error Y2U0004]
    CheckUpdate -->|No| UnlockRec[UNLCK PBAFCPL0<br/>Release Lock]
    UnlockRec --> ExitOK[SIEXIT: End Routine]
    CheckUpd -->|OK| ExitOK
    ErrUpd --> ExitOK
    ExitErr --> ExitOK
</div>

<!-- AI_MARKER: F20_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> DTRETE, DRRETH, AFCPMU</p>
<p><strong>External Calls:</strong> ZASNMS, ZASNMS</p>
<p><strong>Business Impact:</strong> Critical business processing function</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 21: SJRVGN</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4077 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F21_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: DTRETE, KMREHC, DRRETH</p>
</div>

<!-- AI_MARKER: F21_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>SJRVGN. RTV Program Setup w/Co RT - User Profile Control  . This function retrieves specific records via CHAIN. It calls subroutines SMRVGN for processing. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F21_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4077 - SJRVGN. RTV Program Setup w/Co RT - User Profile Control  . This function retrieves specific records</p>
</div>
<div class="mermaid">
flowchart TD
    Start([SJRVGN: Start]) --> Init[Initialize Return Code<br/>MOVEL *BLANK W0RTN]
    Init --> DefKey[Define Key KRSSJ:<br/>User Profile Name]
    DefKey --> SetKey[Setup Key:<br/>DRAJVN=WN0144]
    SetKey --> Chain[CHAIN @DRRETH<br/>User Profile Control]
    Chain --> CheckFound{{Found?<br/>IN90}}
    CheckFound -->|Not Found<br/>IN90=1| SetErr[Set Error USR0763<br/>Set W0RTN=@CN,001]
    SetErr --> ExitErr[GOTO SJEXIT]
    CheckFound -->|Found<br/>IN90=0| MoveFields[Move Fields:<br/>P2I6ST=DRI6ST<br/>P2MPNA=DRMPNA<br/>P2BCCD=DRBCCD<br/>YL0016=DRAIC3<br/>WN0145=DRBUVN]
    MoveFields --> ExitOK[SJEXIT: End Routine]
    ExitErr --> ExitOK
</div>

<!-- AI_MARKER: F21_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> DTRETE, KMREHC, DRRETH</p>
<p><strong>External Calls:</strong> SMRVGN</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 22: SKRVGN</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4109 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F22_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: DTRETE, KMREHC</p>
</div>

<!-- AI_MARKER: F22_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>SKRVGN. Setup key. This function retrieves specific records via CHAIN. It calls subroutines SMRVGN for processing. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F22_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4109 - SKRVGN. Setup key. This function retrieves specific records via CHAIN. It calls subroutines SMRVGN f</p>
</div>
<div class="mermaid">
flowchart TD
    Start([SKRVGN: Start]) --> Init[Initialize Return Code<br/>MOVEL *BLANK W0RTN]
    Init --> DefKey[Define Key KRSSK:<br/>User+Application]
    DefKey --> SetKey[Setup Keys:<br/>DTAJVN=WL0019<br/>DTDNCD=WL0020]
    SetKey --> Chain[CHAIN @DTRETE<br/>Application Profile]
    Chain --> CheckFound{{Found?<br/>IN90}}
    CheckFound -->|Not Found| SetErr[Set Error USR0767]
    CheckFound -->|Found| MoveFields[Move Fields:<br/>WL0021=DTAIC3<br/>WL0022=DTAJCD]
    SetErr --> ExitOK[SKEXIT: End Routine]
    MoveFields --> ExitOK
</div>

<!-- AI_MARKER: F22_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> DTRETE (Application Profile)</p>
<p><strong>External Calls:</strong> None</p>
<p><strong>Business Impact:</strong> Retrieves user application profile settings</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 23: SLRVGN</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4134 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F23_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: @DNRESF (Application)</p>
</div>

<!-- AI_MARKER: F23_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>SLRVGN. Retrieve Application Group Description from Application file. Searches for 'OMS' application code, processes blank group separately, otherwise calls SMRVGN.</p>
</div>

<!-- AI_MARKER: F23_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4134 - SLRVGN. Retrieves application group description using SETLL/READE loop with conditional SMRVGN call.</p>
</div>
<div class="mermaid">
flowchart TD
    Start([SLRVGN: Start]) --> Init[Initialize Return Code<br/>MOVEL *BLANK W0RTN]
    Init --> DefKey[Define Key KRSSL:<br/>Application Code]
    DefKey --> SetKey[Setup Key:<br/>WQSL01='OMS']
    SetKey --> Position[SETLL @DNRESF<br/>Application File]
    Position --> Read[READE @DNRESF]
    Read --> CheckFound{{Found?<br/>IN90}}
    CheckFound -->|Not Found| SetErr[Set Error USR0755]
    CheckFound -->|Found| Loop{{DOWEQ Loop:<br/>IN90=0}}
    Loop -->|Continue| CheckBlank{{Group<br/>Blank?<br/>DNRSCD}}
    CheckBlank -->|Yes| MoveDesc[Move Description:<br/>WUAUNA=DNAUNA]
    CheckBlank -->|No| CallSM[EXSR SMRVGN<br/>Get App Desc]
    MoveDesc --> ReadNext[READE @DNRESF]
    CallSM --> ReadNext
    ReadNext --> Loop
    Loop -->|Exit| ExitOK[SLEXIT: End Routine]
    SetErr --> ExitOK
</div>

<!-- AI_MARKER: F23_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> @DNRESF (Application)</p>
<p><strong>External Calls:</strong> SMRVGN</p>
<p><strong>Business Impact:</strong> Retrieves application group descriptions</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 24: SMRVGN</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4168 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F24_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Application code from DNRSCD</p>
<p><strong>Output:</strong> Application description in WUAUNA</p>
<p><strong>Key Data:</strong> Database files: @DNRESF (Application)</p>
</div>

<!-- AI_MARKER: F24_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>SMRVGN. Retrieve Application Description by application code. Uses SETLL/READE loop to find and return description, clears description if not found.</p>
</div>

<!-- AI_MARKER: F24_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4168 - SMRVGN. Simple retrieval routine using SETLL/READE to get application description by code.</p>
</div>
<div class="mermaid">
flowchart TD
    Start([SMRVGN: Start]) --> Init[Initialize Return Code<br/>MOVEL *BLANK W0RTN]
    Init --> DefKey[Define Key KRSSM:<br/>Application Code]
    DefKey --> SetKey[Setup Key:<br/>WQSM01=DNRSCD]
    SetKey --> Position[SETLL @DNRESF]
    Position --> Read[READE @DNRESF]
    Read --> CheckFound{{Found?<br/>IN90}}
    CheckFound -->|Not Found<br/>IN90=1| SetErr[Set Error USR0755<br/>Clear WUAUNA]
    SetErr --> SetRet[Set W0RTN=@CN,001]
    SetRet --> ExitErr[GOTO SMEXIT]
    CheckFound -->|Found<br/>IN90=0| Loop{{DOWEQ Loop:<br/>IN90=0}}
    Loop -->|Continue| MoveDesc[Move Description:<br/>WUAUNA=DNAUNA]
    MoveDesc --> ReadNext[READE @DNRESF]
    ReadNext --> Loop
    Loop -->|Exit| ExitOK[SMEXIT: End Routine]
    ExitErr --> ExitOK
</div>

<!-- AI_MARKER: F24_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> @DNRESF (Application)</p>
<p><strong>External Calls:</strong> None</p>
<p><strong>Business Impact:</strong> Retrieves application descriptions</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 25: SNRVGN</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4202 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F25_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Company Number (YL0001), Value Code (@CN,007)</p>
<p><strong>Output:</strong> System Value Number (P4)</p>
<p><strong>Key Data:</strong> Database files: @KMREHC (Company Values)</p>
</div>

<!-- AI_MARKER: F25_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>SNRVGN. Retrieve Numeric Value from Company Values file by company number and value code. Returns numeric system value or error if not found.</p>
</div>

<!-- AI_MARKER: F25_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4202 - SNRVGN. Simple CHAIN to retrieve company value by company number and value code.</p>
</div>
<div class="mermaid">
flowchart TD
    Start([SNRVGN: Start]) --> Init[Initialize Return Code<br/>MOVEL *BLANK W0RTN]
    Init --> DefKey[Define Key KRSSN:<br/>Company+Value Code]
    DefKey --> SetKey[Setup Keys:<br/>KMAIC3=YL0001<br/>KMV8CD=@CN,007]
    SetKey --> Chain[CHAIN @KMREHC<br/>Company Values]
    Chain --> CheckFound{{Found?<br/>IN90}}
    CheckFound -->|Not Found<br/>IN90=1| SetErr[Set Error USR2221<br/>Set W0RTN=@CN,001]
    SetErr --> ExitErr[GOTO SNEXIT]
    CheckFound -->|Found<br/>IN90=0| MoveValue[Move System Value:<br/>P4=KMM8NB]
    MoveValue --> ExitOK[SNEXIT: End Routine]
    ExitErr --> ExitOK
</div>

<!-- AI_MARKER: F25_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> KMREHC</p>
<p><strong>External Calls:</strong> ZASNMS</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 26: XCVTA</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4232 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F26_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Date components (XDINYY, XDINMM, XDINDD)</p>
<p><strong>Output:</strong> Absolute day number (XDAY1)</p>
<p><strong>Key Data:</strong> Mathematical conversion - no database operations</p>
</div>

<!-- AI_MARKER: F26_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>XCVTA. Convert date to absolute day (from 01/01/01). Complex mathematical algorithm: calculates days from past years (365*(YY-1) + leap year adjustments), adds days from start of year to start of month (different logic for Jan-Feb vs Mar-Dec with leap year handling), adds day of month. Handles century leap year exceptions (100, 300).</p>
</div>

<!-- AI_MARKER: F26_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4232 - XCVTA. Multi-step date conversion with year calculation, month offset calculation (Jan-Feb vs Mar-Dec), leap year logic, and day addition.</p>
</div>
<div class="mermaid">
flowchart TD
    Start([XCVTA: Start]) --> CalcYears[Calculate Past Years:<br/>XDWK1 = XDINYY - 1<br/>XDAY1 = XDWK1 * 365.25]
    CalcYears --> CheckCentury{{XDWK1<br/>>= 300?}}
    CheckCentury -->|Yes| SubCent2[Subtract 2 from XDAY1]
    CheckCentury -->|No| CheckCent100{{XDWK1<br/>>= 100?}}
    CheckCent100 -->|Yes| SubCent1[Subtract 1 from XDAY1]
    CheckCent100 -->|No| CalcMonth[Calculate Month Offset:<br/>XDWK1 = XDINMM - 1]
    SubCent2 --> CalcMonth
    SubCent1 --> CalcMonth
    CalcMonth --> CheckMonth{{XDINMM<br/>< 3?}}
    CheckMonth -->|Yes<br/>Jan-Feb| CalcJanFeb[Add 31 * XDWK1<br/>to XDAY1]
    CheckJanFeb --> AddDay[Add Day:<br/>XDAY1 += XDINDD]
    CheckMonth -->|No<br/>Mar-Dec| CalcMarDec[Add 30 * XDWK1<br/>Subtract 2]
    CalcMarDec --> CheckLeap{{Leap Year?<br/>YY != 100/300<br/>YY DIV 4 = 0}}
    CheckLeap -->|Yes| AddLeap[Add 1 to XDAY1]
    CheckLeap -->|No| CalcExtra{{XDINMM<br/>< 8?}}
    AddLeap --> CalcExtra
    CalcExtra -->|Yes<br/>Mar-Jul| AddHalf[Add MM/2]
    CalcExtra -->|No<br/>Aug-Dec| AddHalfPlus[Add MM+1/2]
    AddHalf --> AddDay
    AddHalfPlus --> AddDay
    AddDay --> End([XCVTAE: Complete])
</div>

<!-- AI_MARKER: F26_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> ZASNMS</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 27: XDCK2</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4284 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F27_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F27_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>XDCK2. Validate external date format. It calls subroutines ZASNMS for processing. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F27_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4284 - XDCK2. Validate external date format. It calls subroutines ZASNMS for processing. Includes error han</p>
</div>
<div class="mermaid">
flowchart TD
    Start([XDCK2: Validate Date]) --> InitReturn[Initialize W0RTN=Blank<br/>XDINDT=0]
    InitReturn --> CheckZero{{XDEXDT=0?}}
    CheckZero -->|Yes| ExitOK[GOTO XDCK2E]
    CheckZero -->|No| MapFormat{{Date Format?}}
    MapFormat -->|DMY| MapDMY[Map XDEX02→DD<br/>XDEX03→MM<br/>XDEX04→YY]
    MapFormat -->|MDY| MapMDY[Map XDEX02→MM<br/>XDEX03→DD<br/>XDEX04→YY]
    MapFormat -->|YMD| MapYMD[Map XDEX02→YY<br/>XDEX03→MM<br/>XDEX04→DD]
    MapDMY --> CheckCutoff
    MapMDY --> CheckCutoff
    MapYMD --> CheckCutoff{{YY < Cutoff?}}
    CheckCutoff -->|Yes| Add100[Add 100 to YY:<br/>Treat as 20YY]
    CheckCutoff -->|No| CheckPrompt
    Add100 --> CheckPrompt{{YPMTFD<br/>Not Blank?}}
    CheckPrompt -->|Yes| ExitOK
    CheckPrompt -->|No| ValidateMonth{{Month<br/>1-12?}}
    ValidateMonth -->|No| ErrorMonth[GOTO XDCK2M:<br/>Send Error Y2U0006]
    ValidateMonth -->|Yes| ValidateDay{{Day 1 to<br/>Max for Month?}}
    ValidateDay -->|No| ErrorMonth
    ValidateDay -->|Yes| CheckFeb{{Month=2?}}
    CheckFeb -->|No| ExitOK
    CheckFeb -->|Yes| CheckLeap{{Leap Year?<br/>YY!=200 AND<br/>YY DIV 4=0?}}
    CheckLeap -->|No| CheckDay28{{Day>28?}}
    CheckDay28 -->|Yes| ErrorMonth
    CheckDay28 -->|No| ExitOK
    CheckLeap -->|Yes| ExitOK
    ErrorMonth --> SendMsg[Send Invalid Date Message<br/>Clear XTTIM=0]
    SendMsg --> ExitOK([XDCK2E: End])

</div>

<!-- AI_MARKER: F27_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> ZASNMS</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 28: XDOWS</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4352 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F28_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F28_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>XDOWS. Setup days of week array. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F28_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4352 - XDOWS. Setup days of week array. Includes error handling and validation.</p>
</div>
<div class="mermaid">
flowchart TD
    Start([XDOWS: Setup Day of Week]) --> LoadArray[Load XDCDW into YDOW Array]
    LoadArray --> InitVars[Initialize XDWSL=0<br/>YY=1]
    InitVars --> StartLoop{{YY <= 7?}}
    StartLoop -->|No| End([Function Complete])
    StartLoop -->|Yes| CheckMatch{{YDOW,YY =<br/>XDSEL?}}
    CheckMatch -->|Yes| IncrCount[Increment XDWSL]
    CheckMatch -->|No| IncrYY
    IncrCount --> IncrYY[Add 1 to YY]
    IncrYY --> StartLoop

</div>

<!-- AI_MARKER: F28_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> None</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 29: XDUDY</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4368 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F29_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F29_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>XDUDY. Selected day of the last week has been processed. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F29_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4368 - XDUDY. Selected day of the last week has been processed. Includes error handling and validation.</p>
</div>
<div class="mermaid">
flowchart TD
    Start([XDUDY: Calculate Duration]) --> ValidateDates{{XDAY1 >= 1<br/>AND XDAY2 >= 1?}}
    ValidateDates -->|No| SetError[Set XDURR=0<br/>W0RTN='Y2U0006'<br/>GOTO XDUDYE]
    ValidateDates -->|Yes| DetermineRange{{XDAY1 >=<br/>XDAY2?}}
    DetermineRange -->|Yes Date2→Date1| SetBegin1[XABEG=XDAY2<br/>XAEND=XDAY1]
    DetermineRange -->|No Date1→Date2| SetBegin2[XABEG=XDAY1<br/>XAEND=XDAY2]
    SetBegin1 --> CheckDaysSelected
    SetBegin2 --> CheckDaysSelected{{XDWSL=0?}}
    CheckDaysSelected -->|Yes None| SetZero[Set XDURR=0<br/>GOTO XDUDYC]
    CheckDaysSelected -->|No| CalcBaseDuration[XDURR = XAEND - XABEG]
    CalcBaseDuration --> CheckAllDays{{XDWSL=7?}}
    CheckAllDays -->|Yes All Days| GotoComplete[GOTO XDUDYC]
    CheckAllDays -->|No Some Days| CalcWeeks[Divide by 7:<br/>Weeks + Remainder]
    CalcWeeks --> MultWeeks[XDURR = Weeks * XDWSL]
    MultWeeks --> CheckRemainder{{Remainder<br/>XDLSW != 0?}}
    CheckRemainder -->|No| GotoComplete
    CheckRemainder -->|Yes| CalcDayOfWeek[Calc Day of Week:<br/>YY = (XABEG+3) DIV 7]
    CalcDayOfWeek --> LoopRemDays{{Loop XDLSW<br/>Times}}
    LoopRemDays -->|Continue| IncrDay[Increment Day YY++<br/>Decrement XDLSW--]
    IncrDay --> CheckWrap{{YY=8?}}
    CheckWrap -->|Yes| WrapDay[Reset YY=1]
    CheckWrap -->|No| CheckSelected
    WrapDay --> CheckSelected{{YDOW,YY =<br/>XDSEL?}}
    CheckSelected -->|Yes| IncrDuration[Increment XDURR++]
    CheckSelected -->|No| LoopRemDays
    IncrDuration --> LoopRemDays
    LoopRemDays -->|Done| CheckZeroResult
    GotoComplete --> CheckZeroResult{{XDURR=0?}}
    SetZero --> CheckZeroResult
    CheckZeroResult -->|Yes| SetErr[Set W0RTN='Y2U0060']
    CheckZeroResult -->|No| ClearErr[Clear W0RTN=Blank]
    SetErr --> ExitTag
    ClearErr --> ExitTag([XDUDYE: End])
    SetError --> ExitTag

</div>

<!-- AI_MARKER: F29_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> None</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 30: XDVC2T</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4433 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F30_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F30_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>XDVC2T. Convert internal to external date format. It calls subroutines ZASNMS for processing. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F30_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4433 - XDVC2T. Convert internal to external date format. It calls subroutines ZASNMS for processing. Includ</p>
</div>
<div class="mermaid">
flowchart TD
    Start([XDVC2T: Convert Date Format]) --> InitCC[Initialize XDEX01=0:<br/>Century Component]
    InitCC --> CheckFormat{{Date Format?}}
    CheckFormat -->|DMY| MapDMY[Map Internal to DMY:<br/>XDEX02=XDINDD<br/>XDEX03=XDINMM<br/>XDEX04=XDINYY]
    CheckFormat -->|MDY| MapMDY[Map Internal to MDY:<br/>XDEX02=XDINMM<br/>XDEX03=XDINDD<br/>XDEX04=XDINYY]
    CheckFormat -->|YMD| MapYMD[Map Internal to YMD:<br/>XDEX02=XDINYY<br/>XDEX03=XDINMM<br/>XDEX04=XDINDD]
    MapDMY --> End([XDVC2E: Function Complete])
    MapMDY --> End
    MapYMD --> End
</div>

<!-- AI_MARKER: F30_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> ZASNMS</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 31: XTCEL</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4458 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F31_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F31_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>XTCEL. Validate time format. It calls subroutines ZASNMS for processing. External programs called: Y2SNMGC. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F31_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4458 - XTCEL. Validate time format. It calls subroutines ZASNMS for processing. External programs called: Y</p>
</div>
<div class="mermaid">
flowchart TD
    Start([XTCEL: Calculate Elapsed Time]) --> Compare{{XTTIM >=<br/>XTTIM2?}}
    Compare -->|Yes TME1>=TME2| SetPositive[Set XSGN=1<br/>XTNNL=XTNN, XTSSL=XTSS]
    Compare -->|No TME1<TME2| SetNegative[Set XSGN=-1<br/>XTNNL=XTNN2, XTSSL=XTSS2]
    SetPositive --> CheckSeconds1{{XTSSL <<br/>XTSS2?}}
    CheckSeconds1 -->|Yes| BorrowMin1[Add 60 to XTSSL<br/>Subtract 1 from XTNNL]
    CheckSeconds1 -->|No| SubSec1
    BorrowMin1 --> SubSec1[XTSS = XTSSL - XTSS2]
    SubSec1 --> CheckMinutes1{{XTNNL <<br/>XTNN2?}}
    CheckMinutes1 -->|Yes| BorrowHr1[Add 60 to XTNNL<br/>Subtract 1 from XTHH]
    CheckMinutes1 -->|No| SubMin1
    BorrowHr1 --> SubMin1[XTNN = XTNNL - XTNN2]
    SubMin1 --> SubHr1[XTHH = XTHH - XTHH2]
    SubHr1 --> End
    SetNegative --> CheckSeconds2{{XTSSL <<br/>XTSS?}}
    CheckSeconds2 -->|Yes| BorrowMin2[Add 60 to XTSSL<br/>Subtract 1 from XTNNL]
    CheckSeconds2 -->|No| SubSec2
    BorrowMin2 --> SubSec2[XTSS = XTSSL - XTSS]
    SubSec2 --> CheckMinutes2{{XTNNL <<br/>XTNN?}}
    CheckMinutes2 -->|Yes| BorrowHr2[Add 60 to XTNNL<br/>Subtract 1 from XTHH2]
    CheckMinutes2 -->|No| SubMin2
    BorrowHr2 --> SubMin2[XTNN = XTNNL - XTNN]
    SubMin2 --> SubHr2[XTHH = XTHH2 - XTHH]
    SubHr2 --> End([XTCELE: Function Complete])

</div>

<!-- AI_MARKER: F31_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> ZASNMS; External: Y2SNMGC</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 32: XTCKTM</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4496 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F32_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F32_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>XTCKTM. Validate time format. It calls subroutines ZASNMS for processing. External programs called: Y2SNMGC. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F32_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4496 - XTCKTM. Validate time format. It calls subroutines ZASNMS for processing. External programs called: </p>
</div>
<div class="mermaid">
flowchart TD
    Start([XTCKTM: Validate Time]) --> CheckZero{{XTTIM=0?}}
    CheckZero -->|Yes| ExitOK[GOTO XTCKTE]
    CheckZero -->|No| InitReturn[Initialize W0RTN=Blank]
    InitReturn --> CheckPrompt{{YPMTFD<br/>Not Blank?}}
    CheckPrompt -->|Yes| ExitOK
    CheckPrompt -->|No| ValidateRanges{{Hours 0-23?<br/>Minutes 0-59?<br/>Seconds 0-59?}}
    ValidateRanges -->|Invalid| SendError[Send Message Y2U0019<br/>Set W0RTN='Y2U0019'<br/>EXSR ZASNMS]
    ValidateRanges -->|Valid| ExitOK
    SendError --> ExitOK([XTCKTE: Function Complete])

</div>

<!-- AI_MARKER: F32_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> ZASNMS; External: Y2SNMGC</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 33: Y0SET</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4524 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F33_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Processing status</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F33_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>Y0SET. Set cursor by *SET CURSOR data. It calls subroutines ZASNMS for processing. External programs called: Y2SNMGC. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F33_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4524 - Y0SET. Set cursor by *SET CURSOR data. It calls subroutines ZASNMS for processing. External programs</p>
</div>
<div class="mermaid">
flowchart TD
    Start([Y0SET: Set Cursor Position]) --> CheckHelp{{Help Mode?<br/>*IN25=0?}}
    CheckHelp -->|No| End([Function Complete])
    CheckHelp -->|Yes| ClearInd[SETOF Indicator 94]
    ClearInd --> CheckOverride{{Override='1' OR<br/>Override='0'?}}
    CheckOverride -->|No| End
    CheckOverride -->|Yes| CheckError{{*IN99=0?<br/>No Error?}}
    CheckError -->|No| End
    CheckError -->|Yes| SetIndicator[SETON Indicator 94]
    SetIndicator --> CheckRRN{{W0RR0<br/>Not Zero?}}
    CheckRRN -->|No| SetRowCol
    CheckRRN -->|Yes| CheckMax{{W0RR0 ><br/>##RRMX?}}
    CheckMax -->|Yes| UseMax[##SFRC = ##RRMX]
    CheckMax -->|No| UseProvided[##SFRC = W0RR0]
    UseMax --> SetRowCol
    UseProvided --> SetRowCol[Set Cursor Position:<br/>ZZCSRW=W0ROW0<br/>ZZCSCL=W0COL0]
    SetRowCol --> End

</div>

<!-- AI_MARKER: F33_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> ZASNMS; External: Y2SNMGC</p>
<p><strong>Business Impact:</strong> Supporting function for data validation and display</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 34: Y8TST</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4550 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F34_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Subfile fields</p>
<p><strong>Output:</strong> Updated records</p>
<p><strong>Key Data:</strong> Database files: SFLRCD</p>
</div>

<!-- AI_MARKER: F34_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>Y8TST. Reset cursor position to the basic (first) record . This function reads changed subfile records, retrieves specific records via CHAIN, updates records. It calls subroutines ZASNMS for processing. External programs called: Y2SNMGC. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F34_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4550 - Y8TST. Reset cursor position to the basic (first) record . This function reads changed subfile recor</p>
</div>
<div class="mermaid">
flowchart TD
    Start([Y8TST: Test Cursor]) --> GetPosition[Get Cursor Position:<br/>ZINPOS = @#RWCL]
    GetPosition --> DividePos[Divide by 256:<br/>W0CRW = Row<br/>W0CCL = Column]
    DividePos --> CheckRange{{Cursor in SFL?<br/>2304-6144?}}
    CheckRange -->|No| ClearField
    CheckRange -->|Yes| CalcRow[Calculate Row Offset:<br/>W0CSRR = W0CRW - 09]
    CalcRow --> AdjustPos[Adjust Position:<br/>ZINPOS = 02304 + W0CCL]
    AdjustPos --> CalcRRN[Calculate RRN:<br/>W0CSRR += ##SFRC]
    CalcRRN --> InitField[Clear W0CFL Field Name<br/>Set F=1]
    InitField --> LookupField[LOKUP ZINPOS in<br/>W0END Array]
    LookupField --> CheckFound{{Found?<br/>*IN96=1?}}
    CheckFound -->|No| ClearField
    CheckFound -->|Yes| CheckBegin{{ZINPOS >=<br/>W0BEG,F?}}
    CheckBegin -->|No| ClearField
    CheckBegin -->|Yes| SetField[Set W0CFL = W0NAM,F]
    SetField --> CheckStillBlank{{W0CFL<br/>Still Blank?}}
    CheckStillBlank -->|Yes| SetRRNZero[Set W0CSRR=0]
    CheckStillBlank -->|No| End
    SetRRNZero --> End
    ClearField[Clear W0CFL=Blank]
    ClearField --> End([Y8EXIT: Function Complete])

</div>

<!-- AI_MARKER: F34_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> SFLRCD</p>
<p><strong>External Calls:</strong> ZASNMS; External: Y2SNMGC</p>
<p><strong>Business Impact:</strong> Critical business processing function</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 35: Y9CLR</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4579 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F35_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Subfile fields</p>
<p><strong>Output:</strong> Updated records</p>
<p><strong>Key Data:</strong> Database files: SFLRCD</p>
</div>

<!-- AI_MARKER: F35_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>Y9CLR. Clear *SET CURSOR data. This function reads changed subfile records, retrieves specific records via CHAIN, updates records. It calls subroutines ZASNMS for processing. External programs called: Y2SNMGC. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F35_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4579 - Y9CLR. Clear *SET CURSOR data. This function reads changed subfile records, retrieves specific recor</p>
</div>
<div class="mermaid">
flowchart TD
    Start([Y9CLR: Clear Cursor Data]) --> ClearIndicator[SETOF Indicator 94]
    ClearIndicator --> ClearRRN[Set W0RR0=0:<br/>Clear Record Number]
    ClearRRN --> ClearRow[Set W0ROW0=0:<br/>Clear Cursor Row]
    ClearRow --> ClearColumn[Set W0COL0=0:<br/>Clear Cursor Column]
    ClearColumn --> SetOverride[Set W0OVR0='2':<br/>Override Flag]
    SetOverride --> End([Y9EXIT: Function Complete])

</div>

<!-- AI_MARKER: F35_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> SFLRCD</p>
<p><strong>External Calls:</strong> ZASNMS; External: Y2SNMGC</p>
<p><strong>Business Impact:</strong> Critical business processing function</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 36: ZASNMS</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4591 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F36_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Subfile fields</p>
<p><strong>Output:</strong> Updated records</p>
<p><strong>Key Data:</strong> Database files: SFLRCD</p>
</div>

<!-- AI_MARKER: F36_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>ZASNMS. Process prompt request. This function reads changed subfile records, retrieves specific records via CHAIN, updates records. It calls subroutines ZASNMS for processing. External programs called: Y2SNMGC, YDDSHPR. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F36_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4591 - ZASNMS. Process prompt request. This function reads changed subfile records, retrieves specific reco</p>
</div>
<div class="mermaid">
flowchart TD
    Start([ZASNMS: Send Message]) --> CheckPgmQ{{ZAPGMQ<br/>Blank?}}
    CheckPgmQ -->|Yes| SetDefPgm[Set ZAPGMQ=##PGM]
    CheckPgmQ -->|No| CheckMsgF
    SetDefPgm --> CheckMsgF{{ZAMSGF<br/>Blank?}}
    CheckMsgF -->|Yes| SetDefFile[Set ZAMSGF=ZADFMF]
    CheckMsgF -->|No| CallSend
    SetDefFile --> CallSend[CALL Y2SNMGC]
    CallSend --> PassParams[Pass Parameters:<br/>ZAPGMQ: Program Queue<br/>ZAPGRL: Rel Queue<br/>ZAMSID: Message ID<br/>ZAMSGF: Message File<br/>ZAMSDA: Message Data<br/>ZAMSTP: Message Type]
    PassParams --> ClearPgmQ[Clear ZAPGMQ=Blank]
    ClearPgmQ --> ClearRelQ[Clear ZAPGRL=Blank]
    ClearRelQ --> ClearMsgID[Clear ZAMSID=Blank]
    ClearMsgID --> ClearMsgF[Clear ZAMSGF=Blank]
    ClearMsgF --> ClearData[Clear ZAMSDA=Blank]
    ClearData --> ClearType[Clear ZAMSTP=Blank]
    ClearType --> End([ZAEXIT: Function Complete])

</div>

<!-- AI_MARKER: F36_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> SFLRCD</p>
<p><strong>External Calls:</strong> ZASNMS; External: Y2SNMGC, YDDSHPR</p>
<p><strong>Business Impact:</strong> Critical business processing function</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 37: ZDVPMT</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4619 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F37_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Subfile fields</p>
<p><strong>Output:</strong> Updated records</p>
<p><strong>Key Data:</strong> Database files: SFLRCD</p>
</div>

<!-- AI_MARKER: F37_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>ZDVPMT. Process prompt request. This function reads changed subfile records, retrieves specific records via CHAIN, updates records. It calls subroutines ZASNMS, ZYEXPG for processing. External programs called: YDDSHPR. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F37_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4619 - ZDVPMT. Process prompt request. This function reads changed subfile records, retrieves specific reco</p>
</div>
<div class="mermaid">
flowchart TD
    Start([ZDVPMT: Process Prompt]) --> InitFields[Initialize Prompt Fields:<br/>YPMTFD, YAFSCH, YPMRRN]
    InitFields --> CheckF4{{F4 Pressed?<br/>*IN04='1'}}
    CheckF4 -->|No| End([Function Complete])
    CheckF4 -->|Yes| ExtractCursor[Extract Cursor Position:<br/>@#RWCL DIV 256]
    ExtractCursor --> SavePosition[Save Cursor Row/Column:<br/>ZZCSRW=ZHCSRW, ZZCSCL=ZHCSCL]
    SavePosition --> SaveSFRC[Save Top RRN:<br/>Y#SFRC=@#SFRC]
    SaveSFRC --> InitWorkFlds[Init SFL Workfields:<br/>ZHSTRW=9, ZHNDRW=23, ZHRLEN=1]
    InitWorkFlds --> CheckRange{{Cursor in<br/>SFL Range 9-23?}}
    CheckRange -->|Yes| CalcSFLDelta[Calculate SFL Delta:<br/>YZSFDL = (Row-Start)/Length]
    CalcSFLDelta --> CalcF4Row[Calculate F4 Row:<br/>ZHF4RW = Row - Offset]
    CheckRange -->|No| CheckPromptBlank
    CalcF4Row --> CheckPromptBlank{{YPMTFD<br/>Blank?}}
    CheckPromptBlank -->|No| CheckInRange2
    CheckPromptBlank -->|Yes| CheckPromptOff{{Prompting<br/>Disabled? W0PMT='N'}}
    CheckPromptOff -->|Yes| SetNone[Set YPMTFD='*NONE'<br/>Set W0HLP='Y'<br/>Send Error USR0101]
    SetNone --> CheckInRange2
    CheckPromptOff -->|No| CheckInRange2{{In Range AND<br/>Not *NONE?}}
    CheckInRange2 -->|No| End
    CheckInRange2 -->|Yes| ReadChanged[READC #SFLRCD]
    ReadChanged --> CheckFound{{Changed Record?<br/>IN92=0}}
    CheckFound -->|Yes| SaveFirstChg[Save YAFSCH=##RR<br/>SETON 84, UPDATE]
    SaveFirstChg --> CalcPromptRRN
    CheckFound -->|No| CalcPromptRRN[Calculate Prompt RRN:<br/>YPMRRN = Delta + Y#SFRC]
    CalcPromptRRN --> ChainToRRN[CHAIN YPMRRN to #SFLRCD]
    ChainToRRN --> CheckChain{{Chain Success?<br/>IN92=0}}
    CheckChain -->|Yes| UpdateSFL[SETON 84<br/>UPDATE #SFLRCD]
    CheckChain -->|No| ClearRRN[Clear YPMRRN=0]
    UpdateSFL --> TestFirst
    ClearRRN --> TestFirst{{YAFSCH=0?}}
    TestFirst -->|Yes| SetYAFSCH[Set YAFSCH=YPMRRN]
    TestFirst -->|No| Compare{{YPMRRN != 0<br/>AND < YAFSCH?}}
    Compare -->|Yes| SetYAFSCH
    Compare -->|No| End
    SetYAFSCH --> End
</div>

<!-- AI_MARKER: F37_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> SFLRCD</p>
<p><strong>External Calls:</strong> ZASNMS, ZYEXPG; External: YDDSHPR</p>
<p><strong>Business Impact:</strong> Critical business processing function</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 38: ZHHPKY</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4717 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F38_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Updated records</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F38_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>ZHHPKY. Display HELP text. This function updates records. It calls subroutines ZYEXPG for processing. External programs called: YDDSHPR, Y2RTJCR. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F38_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4717 - ZHHPKY. Display HELP text. This function updates records. It calls subroutines ZYEXPG for processing</p>
</div>
<div class="mermaid">
flowchart TD
    Start([ZHHPKY: Display Help]) --> SetFlag[Set W0HLP='Y':<br/>Help Request Flag]
    SetFlag --> ExtractCursor[Extract Cursor Position:<br/>@#RWCL DIV 256]
    ExtractCursor --> SaveRow[Save Cursor Row:<br/>ZZCSRW=ZHCSRW]
    SaveRow --> SaveCol[Save Cursor Column:<br/>ZZCSCL=ZHCSCL]
    SaveCol --> CallHelp[CALL YDDSHPR]
    CallHelp --> PassParams[Pass Parameters:<br/>W0HPMB=##PGM<br/>YYHPFL=*BLANK<br/>YYHPLB=*BLANK<br/>W0RTN<br/>YYHLVN='*START'<br/>YYUSOP='*NORMAL'<br/>Row/Column<br/>YYLGCT=0<br/>YYLGVN=Blank]
    PassParams --> CheckIndicator{{Indicator 94<br/>Not Set?}}
    CheckIndicator -->|Yes N94| SetCursorOff[Set WCSRLC='OFF'<br/>SETON Indicator 94]
    CheckIndicator -->|No| End
    SetCursorOff --> End([ZHEXIT: Function Complete])

</div>

<!-- AI_MARKER: F38_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> ZYEXPG; External: YDDSHPR, Y2RTJCR</p>
<p><strong>Business Impact:</strong> Critical business processing function</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 39: ZXEXPG</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4751 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F39_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Updated records</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F39_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>ZXEXPG. Setup job date/time. This function updates records. It calls subroutines ZYEXPG for processing. External programs called: Y2RTJCR. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F39_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4751 - ZXEXPG. Setup job date/time. This function updates records. It calls subroutines ZYEXPG for processi</p>
</div>
<div class="mermaid">
flowchart TD
    Start([ZXEXPG: Cancel & Exit]) --> CallExit[EXSR ZYEXPG]
    CallExit --> End([ZXEXIT: Function Complete])

</div>

<!-- AI_MARKER: F39_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> ZYEXPG; External: Y2RTJCR</p>
<p><strong>Business Impact:</strong> Critical business processing function</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 40: ZYEXPG</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4759 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F40_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Updated records</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F40_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>ZYEXPG. Setup job date/time. This function updates records. External programs called: Y2RTJCR. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F40_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4759 - ZYEXPG. Setup job date/time. This function updates records. External programs called: Y2RTJCR. Inclu</p>
</div>
<div class="mermaid">
flowchart TD
    Start([ZYEXPG: Exit Program]) --> SetLR[SETON Indicator LR:<br/>Last Record - Program Termination]
    SetLR --> Return[RETRN:<br/>Return to Calling Program]
    Return --> End([ZYEXIT: Function Complete])

</div>

<!-- AI_MARKER: F40_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> None; External: Y2RTJCR</p>
<p><strong>Business Impact:</strong> Critical business processing function</p>
</div>
</div>

<div class="func">
<div class="func-header">
<h3>Function 41: ZZINIT</h3>
<p style="margin:5px 0 0 0;font-size:0.95em;">Source Code Line: 4772 | Business Function Analysis</p>
</div>

<!-- AI_MARKER: F41_Parameters -->
<h4>1. Parameters and Business Data</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Input:</strong> Function parameters</p>
<p><strong>Output:</strong> Updated records</p>
<p><strong>Key Data:</strong> Database files: No direct database operations</p>
</div>

<!-- AI_MARKER: F41_BusinessLogic -->
<h4>2. Business Logic Summary</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p>ZZINIT. Setup job date/time. This function updates records. External programs called: Y2RTJCR. Includes error handling and validation.</p>
</div>

<!-- AI_MARKER: F41_FlowDiagram -->
<h4>3. Business Process Flow</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Process Explanation:</strong> Function at line 4772 - ZZINIT. Setup job date/time. This function updates records. External programs called: Y2RTJCR. Inclu</p>
</div>
<div class="mermaid">
flowchart TD
    Start([ZZINIT: Initialize Program]) --> CheckICL{{W0ICL<br/>Blank?}}
    CheckICL -->|Yes| SetInitial[Set W0ICL='Y':<br/>Initial Call Flag]
    CheckICL -->|No| SetNotFirst[Set W0ICL='N']
    SetInitial --> ClearReturn
    SetNotFirst --> ClearReturn[Clear Return Codes:<br/>P0RTN, W0RTN]
    ClearReturn --> ClearWorkFlags[Clear Work Flags:<br/>W0RSL, W0RSF, W0RTW]
    ClearWorkFlags --> SetEnv[Set W0ENV='400']
    SetEnv --> ClearP1[Clear P1 Parameters:<br/>P1AIC3, P1AJCD, P1UIDT]
    ClearP1 --> ClearP2[Clear P2 Parameters:<br/>P2DNCD, P2BCCD, P2AJVN<br/>P2I6ST, P2MPNA, P2TAST]
    ClearP2 --> ClearP3Cat[Clear P3 Categories 1-7:<br/>P3OYAA through P3O4AA]
    ClearP3Cat --> ClearP3Loads[Clear P3 Load IDs 1-7:<br/>P3UTNY through P3UZNY]
    ClearP3Loads --> ClearP3Counts[Clear P3 Load Counts 1-7:<br/>P3U0NY through P3U6NY]
    ClearP3Counts --> ClearP4P5[Clear P4 Hours, P5E5ST]
    ClearP4P5 --> CallJobAttrs[CALL Y2RTJCR:<br/>Retrieve Job Attributes]
    CallJobAttrs --> PassPGMDS[Pass PGMDS Parameter]
    PassPGMDS --> SetJobDate[Set ##JDT=##SD7:<br/>Setup Job Date]
    SetJobDate --> GetTime1[TIME ##JTM:<br/>Get Job Time]
    GetTime1 --> GetTime2[TIME ##TME:<br/>Get Screen Time]
    GetTime2 --> DefineCD3[Define WUDMCD=Blank:<br/>CD3 Work Field]
    DefineCD3 --> GetMsgFile[IN ZADFMF:<br/>Get Default Message File]
    GetMsgFile --> DefineUI[Define WUI3ST=Blank]
    DefineUI --> InitWA[Initialize WA Fields:<br/>WAAIC3, WAUIDT, etc.]
    InitWA --> InitWB[Initialize WB Fields:<br/>WBRMNB, WBAIC3, etc.]
    InitWB --> End([Function Complete])
</div>

<!-- AI_MARKER: F41_DataInteraction -->
<h4>4. Data Interaction and Business Impact</h4>
<div style="padding:10px;background:#fafafa;border-radius:5px;">
<p><strong>Database Operations:</strong> No direct database operations</p>
<p><strong>External Calls:</strong> None; External: Y2RTJCR</p>
<p><strong>Business Impact:</strong> Critical business processing function</p>
</div>
</div>

<h2>Function Summary</h2>
<table>
<thead><tr><th>Function</th><th>Line</th><th>Business Purpose</th></tr></thead>
<tbody>
Initialize subfile and validate parameters
Load database records into subfile pages
Display screen and capture user input
Process modified subfile records
Process individual subfile record
Display confirmation screen
Update database from validated records
Process record with error positioning
Request subfile reload
Set subfile record display attributes
Set subfile control display attributes
Validate warehouse authorization
Retrieve load plan category headings
Retrieve load count totals
Build load display array
Validate entity data
Validate reference data
Validate group data
Check character data validity
Check character field integrity
Validate journal data
Validate key data
Validate list data
Validate master data
Validate node data
Convert ASCII to internal format
Check date validity
Determine day of week
Calculate updated day
Convert date to text format
Calculate time elapsed
Check time validity
Set cursor position on screen
Test cursor position
Clear cursor positioning data
Format and send message
Check for F4 prompt request
Display context-sensitive help
Execute external program
Execute program with error handling
Initialize program variables
</tbody></table>

<div style="text-align:center;margin:40px 0;padding:20px;background:#e7f3ff;border-radius:8px;">
<p><strong>Documentation Status:</strong> All 41 functions analyzed for business users</p>
<p>This documentation focuses on business value and process understanding</p>
</div>

</body></html>
