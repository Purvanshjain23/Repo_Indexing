// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBIPXFR
// ?Date: 14.08.2025 Time: 03:48:09
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?*** Price Routine was call on or after Shipping, Calculate Price
CASE;

// IF PAR.Event Called From is All Values
IF PAR.Event_Called_From = '02'/'99'/**/'AO'/'AI';

EXECUTE FUNCTION(Rtv Gate Adjustment   RT) TYPE(RTVOBJ) FILE(OPBGWKP)           AC2064185;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Order_Number);
PARAMETER(PAR.Order_Sequence_Number);
PARAMETER(PAR.Order_Secondary_Line_Seq);
PARAMETER(LCL.Order_Gate_Final_Price);
PARAMETER(PAR.Pricing_Retrieved_Amount);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


//?Flag as Unpriced if gate price is zero
CASE;

// IF LCL.Order Gate/Final Price is Equal zero
IF LCL.Order_Gate_Final_Price = *ZERO;

// OR PGM.*Return code is *Record does not exist
OR PGM.*Return_code = 'Y2U0005';

// PAR.Price Status = CND.Unpriced
PAR.Price_Status = 'U';

// PAR.Error Return = CND.DVFADJ Error
PAR.Error_Return = 'DVF';

ENDIF;

ENDIF;

