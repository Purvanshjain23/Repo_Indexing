// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PUTCXFR
// ?Date: 14.08.2025 Time: 03:51:19
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Crt EDI 940 f/Held OrdsRT) TYPE(RTVOBJ) FILE(PMAMREP)          AC2197819;
{
 //?USER: Process Data record

 EXECUTE FUNCTION(RTV 1st Whse Not CancelRT) TYPE(RTVOBJ) FILE(OPBGWKP)          AC2130424;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(LCL.Warehouse_Code);
 {
  //?USER: Initialize routine

  // PAR.Warehouse Code = CON.*BLANK
  PAR.Warehouse_Code = *BLANK;

  //?USER: Process Data record

  // PAR.Warehouse Code = DB1.Warehouse Code
  PAR.Warehouse_Code = DB1.Warehouse_Code;

  QUIT;

 }

 EXECUTE FUNCTION(RTV Warehouse Duns    RT) TYPE(RTVOBJ) FILE(PNG0REP)           AC2023518;
 PARAMETER(LCL.Warehouse_Code);
 PARAMETER('WSO');
 PARAMETER(NLL.EDI_Trading_Partner_No);
 PARAMETER(NLL.EDI_Whs_Duns_Number);
 PARAMETER(NLL.EDI_Company_#_940_846_947);
 PARAMETER(LCL.Hold_til_ship_within_#day);
 PARAMETER(LCL.Record_Status_1_Usr);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 //?Record Found & Active?
 CASE;

 // IF LCL.Record Status 1 Usr is Active
 IF LCL.Record_Status_1_Usr = 'A';

 // LCL.Curr Date + Days To Hold = JOB.*Job date + LCL.Hold til ship within #day *DAYS
 LCL.Curr_Date_+_Days_To_Hold = DATEINCR(JOB.*Job_date LCL.Hold_til_ship_within_#day 'DY'
 1111111 'NONE' 'N' 1);

 EXECUTE FUNCTION(Rtv Scheduled Ship DateRT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC2197811;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(LCL.Scheduled_Ship_Date);
 {
  //?USER: Initialize routine

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 //?If SSD <= (Current Date + Days To Hold) Then Create EDI 940.
 CASE;

 // IF LCL.Scheduled Ship Date LE LCL.Curr Date + Days To Hold
 IF LCL.Scheduled_Ship_Date <= LCL.Curr_Date_+_Days_To_Hold;

 //?Create EDI 940 Transaction.
 // Call program Exc EDI Whs Shp Order XF.
 CALL PROGRAM(Exc EDI Whs Shp Order XF) ('PNYHXFR');
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(*BLANK);

 ENDIF;

 ENDIF;

}


