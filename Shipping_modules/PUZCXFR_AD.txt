// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PUZCXFR
// ?Date: 14.08.2025 Time: 03:51:44
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications History
DO;

//?Eric L 05-2023 WI572 CA Prop 12 Creation
ENDDO;

EXECUTE FUNCTION(SND PFS Regul Code RT) TYPE(RTVOBJ) FILE(PUC7REP)              AC2214417;
PARAMETER(*BLANK);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 EXECUTE FUNCTION(Crt Reg Master QTEMP CR) TYPE(CRTOBJ) FILE(PUC7REP)            AC2214421;
 PARAMETER(DB1.PFS_Regulation_Code);
 PARAMETER(DB1.PFS_Regulation_ID);
 PARAMETER(DB1.PFS_Regulation_Origin);
 PARAMETER(DB1.PFS_Regulation_Desc);
 PARAMETER(DB1.PFS_ShipTo_EstStmStopTot);
 PARAMETER(DB1.PFS_Ship_To_Cust_Type);
 PARAMETER(DB1.PFS_Default_Regulation);
 PARAMETER(DB1.PFS_NonComp_Stm1_StopTot);
 PARAMETER(DB1.PFS_NonComp_Stm2_StopTot);
 PARAMETER(DB1.PFS_Compliancy_Stm1_Item);
 PARAMETER(DB1.PFS_Compliancy_Stm2_Item);
 PARAMETER(DB1.PFS_Record_Status);
 PARAMETER(DB1.PFS_Process_Status);
 PARAMETER(DB1.PFS_Error_Reason);
 PARAMETER(DB1.PFS_Create_Date);
 PARAMETER(DB1.PFS_Create_Time);
 PARAMETER(DB1.PFS_Change_Date);
 PARAMETER(DB1.PFS_Change_Time);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Create Stamp      IF) TYPE(EXCINTFUN)                      AC1732162;
  PARAMETER(DB1.PFS_Process_Status);
  PARAMETER(DB1.PFS_Create_Date);
  PARAMETER(DB1.PFS_Create_Time);
  {
   //?Execute internal function

   // PAR.PFS Process Status = CND.Not Processed
   PAR.PFS_Process_Status = *ZERO;

   // PAR.PFS Create Date = JOB.*Job date
   PAR.PFS_Create_Date = JOB.*Job_date;

   // PAR.PFS Create Time = JOB.*Job time
   PAR.PFS_Create_Time = JOB.*Job_time;

  }

  //?USER: Processing if Data record already exists

  EXECUTE FUNCTION(Change Regulation Master) TYPE(CHGOBJ) FILE(PUC7REP)           AC2213077;
  PARAMETER(PAR.PFS_Regulation_Code);
  PARAMETER(PAR.PFS_Regulation_ID);
  PARAMETER(DB1.PFS_Regulation_Origin);
  PARAMETER(DB1.PFS_Regulation_Desc);
  PARAMETER(DB1.PFS_ShipTo_EstStmStopTot);
  PARAMETER(*MISSING);
  PARAMETER(*MISSING);
  PARAMETER(DB1.PFS_NonComp_Stm1_StopTot);
  PARAMETER(DB1.PFS_NonComp_Stm2_StopTot);
  PARAMETER(DB1.PFS_Compliancy_Stm1_Item);
  PARAMETER(DB1.PFS_Compliancy_Stm2_Item);
  PARAMETER(PAR.PFS_Record_Status);
  PARAMETER(DB1.PFS_Process_Status);
  PARAMETER(DB1.PFS_Error_Reason);
  PARAMETER(DB1.PFS_Create_Date);
  PARAMETER(DB1.PFS_Create_Time);
  PARAMETER(DB1.PFS_Change_Date);
  PARAMETER(DB1.PFS_Change_Time);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Change Stamp      IF) TYPE(EXCINTFUN)                      AC1732163;
   PARAMETER(DB1.PFS_Change_Date);
   PARAMETER(DB1.PFS_Change_Time);
   {
    //?Execute internal function

    // PAR.PFS Change Date = JOB.*Job date
    PAR.PFS_Change_Date = JOB.*Job_date;

    // PAR.PFS Change time = JOB.*Job time
    PAR.PFS_Change_Time = JOB.*Job_time;

   }

  }

 }

 EXECUTE FUNCTION(Chg Process Status CH) TYPE(CHGOBJ) FILE(PUC7REP)              AC2214693;
 PARAMETER(DB1.PFS_Regulation_Code);
 PARAMETER(DB1.PFS_Regulation_ID);
 PARAMETER(DB1.PFS_Regulation_Origin);
 PARAMETER(DB1.PFS_Regulation_Desc);
 PARAMETER(DB1.PFS_ShipTo_EstStmStopTot);
 PARAMETER(DB1.PFS_Ship_To_Cust_Type);
 PARAMETER(DB1.PFS_Default_Regulation);
 PARAMETER(DB1.PFS_NonComp_Stm1_StopTot);
 PARAMETER(DB1.PFS_NonComp_Stm2_StopTot);
 PARAMETER(DB1.PFS_Compliancy_Stm1_Item);
 PARAMETER(DB1.PFS_Compliancy_Stm2_Item);
 PARAMETER(DB1.PFS_Record_Status);
 PARAMETER(1);
 PARAMETER(DB1.PFS_Error_Reason);
 PARAMETER(DB1.PFS_Create_Date);
 PARAMETER(DB1.PFS_Create_Time);
 PARAMETER(DB1.PFS_Change_Date);
 PARAMETER(DB1.PFS_Change_Time);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Change Stamp      IF) TYPE(EXCINTFUN)                      AC1732163;
  PARAMETER(DB1.PFS_Change_Date);
  PARAMETER(DB1.PFS_Change_Time);
  {
   //?Execute internal function

   // PAR.PFS Change Date = JOB.*Job date
   PAR.PFS_Change_Date = JOB.*Job_date;

   // PAR.PFS Change time = JOB.*Job time
   PAR.PFS_Change_Time = JOB.*Job_time;

  }

 }

}


