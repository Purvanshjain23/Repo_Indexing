// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDQVXFR
// ?Date: 14.08.2025 Time: 03:29:29
// ?------------------------------------------------------------------------------------------------

//?Execute user function

// PAR.Pick Status USR = CND.Not Picked
PAR.Pick_Status_USR = 'N';

EXECUTE FUNCTION(RTV Load for Picked    RT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC1323132;
PARAMETER(PAR.Load_ID);
PARAMETER(PAR.Pick_Status_USR);
{
 //?USER: Initialize routine

 //?05/14/04 SLM PKTR01 Multi-Company - Funct chg remove Company RST or Pos
 // PAR.Pick Status USR = CND.Not Picked
 PAR.Pick_Status_USR = 'N';

 //?USER: Process Data record

 CASE;

 // IF DB1.Header Status is Cancelled
 IF DB1.Header_Status = 'X';

 // IF *OTHERWISE
 IF *OTHERWISE;

 EXECUTE FUNCTION(RTV Check Event        RT) TYPE(RTVOBJ) FILE(OPEYCPP)          AC1320238;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER('03');
 {
  //?USER: Processing if Data record not found

  // PGM.*Return code = CND.*Record does not exist
  PGM.*Return_code = 'Y2U0005';

  //?USER: Process Data record

  // PGM.*Return code = CND.*Normal
  PGM.*Return_code = *BLANK;

 }

 CASE;

 // IF PGM.*Return code is *Normal
 IF PGM.*Return_code = *BLANK;

 // PAR.Pick Status USR = CND.Picked
 PAR.Pick_Status_USR = 'Y';

 QUIT;

 ENDIF;

 ENDIF;

}


//?If Not picked in Event file, check accusort Picked file
CASE;

// IF PAR.Pick Status USR is Not Picked
IF PAR.Pick_Status_USR = 'N';

EXECUTE FUNCTION(PFS Val Order Picked  RT) TYPE(RTVOBJ) FILE(PPBKCPP)           AC1754282;
PARAMETER(PAR.Load_ID);
PARAMETER(PAR.Pick_Status_USR);
{
 //?USER: Processing if Data record not found

 // PAR.Pick Status USR = CND.Not Picked
 PAR.Pick_Status_USR = 'N';

 //?USER: Process Data record

 // PAR.Pick Status USR = CND.Picked
 PAR.Pick_Status_USR = 'Y';

 QUIT;

}


ENDIF;

