// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POP1XFR
// ?Date: 14.08.2025 Time: 03:38:26
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modification history
DO;

//? 8/06/2018 JBB E13556 - Remove Item Structure Class Code check
//? - Comment out the retrieval of Item Structure Class Code value.
//?   Also, comment out the test for the Item Structure Class Code.
ENDDO;

EXECUTE FUNCTION(Rtv First Consumed Itm RT) TYPE(RTVOBJ) FILE(PDIOREP)          AC1559427;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Item_Code);
PARAMETER('C');
PARAMETER(LCL.Component_Item_Code);
{
 //?USER: Initialize routine

 EXECUTE FUNCTION(Rtv Base Values PA    RT) TYPE(RTVOBJ) FILE(CABZREP)           AC1416510;
 PARAMETER(PAR.Company_Number);
 PARAMETER(PAR.Item_Code);
 PARAMETER(WRK.Description_Line_One);
 PARAMETER(WRK.Description_Line_Two);
 PARAMETER(WRK.UOM_Primary);
 PARAMETER(WRK.Conversion_Factor_1);
 PARAMETER(WRK.Operation_Factor_1);
 PARAMETER(WRK.UOM_Second);
 PARAMETER(WRK.Conversion_Factor_2);
 PARAMETER(WRK.Operation_Factor_2);
 PARAMETER(WRK.UOM_Third);
 PARAMETER(WRK.UOM_Pricing);
 PARAMETER(WRK.Unit_Weight);
 PARAMETER(WRK.Production_Date_Control);
 PARAMETER(WRK.Catch_Weight_Status);
 PARAMETER(WRK.Fresh_Chilling_Time);
 PARAMETER(LCL.Base_Conv_Loss_Item);
 PARAMETER(WRK.Piece_Count_Item);
 PARAMETER(WRK.Pieces_Per_Bag);
 PARAMETER(WRK.Bags_Per_Unit);
 PARAMETER(WRK.Record_Status);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 //?USER: Processing if Data record not found

 // PAR.Component Item Code = PAR.Item Code
 PAR.Component_Item_Code = PAR.Item_Code;

 //?USER: Process Data record

 CASE;

 // IF DB1.Consume Priority is NE Zero
 IF DB1.Consume_Priority <> *ZERO;

 MOVE *ALL (To: PAR From: DB1);

 CASE;

 // IF LCL.Base/Conv/Loss Item is Base
 IF LCL.Base_Conv_Loss_Item = 'B';

 // PAR.Component Item Code = DB1.Item Code
 PAR.Component_Item_Code = DB1.Item_Code;

 ENDIF;

 QUIT;

 ENDIF;

}


// PAR.Component Item Code = LCL.Component Item Code
PAR.Component_Item_Code = LCL.Component_Item_Code;

//?FP1054 for HAMS, output item code as itself
//?E13556 8/06/2018 JBB - Remove Ham Range condition check
//?If Component Item Code is blank, move Item Code to field
CASE;

// IF LCL.Component Item Code is Not Entered
IF LCL.Component_Item_Code = *ZERO;

//?jbb  8/06/18 removed Item Structure Class for Ham Range
//?rmc 10/23/15 added catchall
// PAR.Component Item Code = PAR.Item Code
PAR.Component_Item_Code = PAR.Item_Code;

ENDIF;

