// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POO5XFR
// ?Date: 14.08.2025 Time: 03:38:22
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?4/30/03 Changed for new Item Structure definitions
//?  This is what the Item Structure Class case stmt looked like:
//?c1 | c2 | c3 | c4
//?c1    : PAR.Item Structure Class Code is Loin Bone-in
//?c2    : PAR.Item Structure Class Code is Loin Bnl's Center Cu
//?c3    : PAR.Item Structure Class Code is Proc Loin Bnls Cente
//?c4    : PAR.Item Structure Class Code is Proc Loin Bone-in
//?  Now it compares the Item Structure Group to specific codes
CASE;

// IF PAR.Inventory Trans. Type is Receipt Production
IF PAR.Inventory_Trans_Type = 'RR';

// AND PAR.Transaction Date Code EQ PAR.Production Date
AND PAR.Transaction_Date_Code = PAR.Production_Date;

// AND PAR.Item Structure Type Code is Loin
AND PAR.Item_Structure_Type_Code = 200;

EXECUTE FUNCTION(RTV Pass Rate Info    RT) TYPE(RTVOBJ) FILE(CABZREP)           AC1642312;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Item_Code);
PARAMETER(WRK.Description_Line_One);
PARAMETER(WRK.Unit_Weight);
PARAMETER(LCL.Quality_Level);
PARAMETER(WRK.Piece_Count_Item);
PARAMETER(LCL.Pieces_Per_Bag);
PARAMETER(LCL.Bags_Per_Unit);
PARAMETER(PAR.Export_Domestic);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


// Call program Rtv Boning/Export Cls XF.
CALL PROGRAM(Rtv Boning/Export Cls XF) ('PMD5XFR');
PARAMETER(LCL.Quality_Level);
PARAMETER(PAR.Item_Structure_Class_Code);
PARAMETER(PAR.Item_Structure_Group_Code);
PARAMETER(PAR.Item_Structure_Type_Code);
PARAMETER(LCL.BoneIn_Boneless);
PARAMETER(PAR.Export_Domestic);
PARAMETER(LCL.PFS_Item_Primal_Group);

CASE;

// IF LCL.PFS Item Primal Group is Loin
IF LCL.PFS_Item_Primal_Group = 'L';

// LCL.Time Zoned USR = PAR.Job Time
LCL.Time_Zoned_USR = PAR.Job_Time;

// LCL.Production Hour = LCL.Time Zoned USR *HOURS
LCL.Production_Hour = TIMEDTLS(LCL.Time_Zoned_USR 'HR');

// Production Pieces
PAR.Production_Pieces = ( PAR.Transaction_Quantity * LCL.Bags_Per_Unit 'H' )                       +
* LCL.Pieces_Per_Bag 'H';

EXECUTE FUNCTION(Upd Pass Rate Detail  RT) TYPE(RTVOBJ) FILE(POBWCPP)           AC1642300;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Warehouse_Code);
PARAMETER(PAR.Production_Date);
PARAMETER(PAR.Shift_Number);
PARAMETER(LCL.Production_Hour);
PARAMETER(PAR.Item_Code);
PARAMETER(PAR.Transaction_Weight);
PARAMETER(PAR.Transaction_Quantity);
PARAMETER(PAR.Production_Pieces);
PARAMETER(PAR.Item_Structure_Class_Code);
PARAMETER(LCL.BoneIn_Boneless);
PARAMETER(PAR.Export_Domestic);
PARAMETER(LCL.Quality_Level);
PARAMETER(PAR.Item_Structure_Class_Code);
PARAMETER(PAR.Item_Structure_Group_Code);
PARAMETER(PAR.Item_Structure_Type_Code);
{
 //?USER: Processing if Data record not found

 //?02/22/2007 PKD Input Parm now
 // LCL.Month                 USR = PAR.Production Date *MONTH
 LCL.Month_USR = DATEDTLS(PAR.Production_Date 'MO' 1111111 'NONE' 'N' 1);

 // LCL.Day of Month USR = PAR.Production Date *DAY OF MONTH
 LCL.Day_of_Month_USR = DATEDTLS(PAR.Production_Date 'DM' 1111111 'NONE' 'N' 1);

 // LCL.Month (Char) USR = CVTVAR(LCL.Month                 USR)
 LCL.Month_Char_USR = CVTVAR(LCL.Month_USR);

 // LCL.Day   (Char) USR = CVTVAR(LCL.Day of Month USR)
 LCL.Day_Char_USR = CVTVAR(LCL.Day_of_Month_USR);

 // LCL.Hours  2A            USR = CVTVAR(PAR.Production Hour)
 LCL.Hours_2A_USR = CVTVAR(PAR.Production_Hour);

 // PAR.Month/Day-Hour = CONCAT(LCL.Month (Char) USR,CON./,CON.*ZERO)
 PAR.Month_Day_Hour = LCL.Month_Char_USR + '/' (*ZERO);

 // PAR.Month/Day-Hour = CONCAT(PAR.Month/Day-Hour,LCL.Day   (Char) USR,CON.*ZERO)
 PAR.Month_Day_Hour = PAR.Month_Day_Hour + LCL.Day_Char_USR (*ZERO);

 // PAR.Month/Day-Hour = CONCAT(PAR.Month/Day-Hour,CON.-,CON.*ZERO)
 PAR.Month_Day_Hour = PAR.Month_Day_Hour + '-' (*ZERO);

 // PAR.Month/Day-Hour = CONCAT(PAR.Month/Day-Hour,LCL.Hours  2A            USR,CON.*ZERO)
 PAR.Month_Day_Hour = PAR.Month_Day_Hour + LCL.Hours_2A_USR (*ZERO);

 EXECUTE FUNCTION(Crt Pass Rate Detail  CR) TYPE(CRTOBJ) FILE(POBWCPP)           AC1642297;
 PARAMETER(PAR.Company_Number);
 PARAMETER(PAR.Warehouse_Code);
 PARAMETER(PAR.Production_Date);
 PARAMETER(PAR.Shift_Number);
 PARAMETER(PAR.Production_Hour);
 PARAMETER(PAR.Item_Code);
 PARAMETER(PAR.Production_Weight);
 PARAMETER(PAR.Production_Quantity);
 PARAMETER(PAR.Production_Pieces);
 PARAMETER(PAR.Item_Structure_Class_Code);
 PARAMETER(PAR.BoneIn_Boneless);
 PARAMETER(PAR.Export_Domestic);
 PARAMETER(PAR.Month_Day_Hour);
 PARAMETER(WRK.EDI_Status_1);
 PARAMETER(WRK.EDI_Status_2);
 PARAMETER(WRK.EDI_Status_3);
 PARAMETER(WRK.Record_Status);
 PARAMETER(*ZERO);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(*ZERO);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(SET Record Stamp CRTOB IF) TYPE(EXCINTFUN)                     AC1282865;
  PARAMETER(DB1.Record_Status);
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Record Status = CND.Active
   PAR.Record_Status = 'A';

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 //?USER: Process Data record

 // LCL.Production Weight = DB1.Production Weight + PAR.Production Weight
 LCL.Production_Weight = DB1.Production_Weight + PAR.Production_Weight;

 // LCL.Production Quantity = DB1.Production Quantity + PAR.Production Quantity
 LCL.Production_Quantity = DB1.Production_Quantity + PAR.Production_Quantity;

 // LCL.Production Pieces = DB1.Production Pieces + PAR.Production Pieces
 LCL.Production_Pieces = DB1.Production_Pieces + PAR.Production_Pieces;

 EXECUTE FUNCTION(Chg Pass Rate Detail  CH) TYPE(CHGOBJ) FILE(POBWCPP)           AC1642298;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Warehouse_Code);
 PARAMETER(DB1.Production_Date);
 PARAMETER(DB1.Shift_Number);
 PARAMETER(DB1.Production_Hour);
 PARAMETER(DB1.Item_Code);
 PARAMETER(LCL.Production_Weight);
 PARAMETER(LCL.Production_Quantity);
 PARAMETER(LCL.Production_Pieces);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

}


ENDIF;

ENDIF;

