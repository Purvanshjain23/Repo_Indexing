// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBNKXFR
// ?Date: 14.08.2025 Time: 03:48:38
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Documentation
DO;

//?CST/ITM Ankit B. 05/26/25 - Recompilation due to DDS to DDL conversion of
//?   "PBBSREP - PFS Fresh Frozen Master" file.
ENDDO;

// PAR.PFS Company Number = CVTVAR(PAR.Company Number)
PAR.PFS_Company_Number = CVTVAR(PAR.Company_Number);

EXECUTE FUNCTION(Upd/Del Processed     RT) TYPE(RTVOBJ) FILE(PBBSREP)           AC2092048;
PARAMETER(PAR.PFS_Company_Number);
PARAMETER(PAR.Upd_Del_Sts_USR);
{
 //?USER: Process Data record

 CASE;

 // IF PAR.Upd/Del Sts USR is Delete
 IF PAR.Upd_Del_Sts_USR = 'D';

 EXECUTE FUNCTION(Del PFS Fresh Frozen  DO) TYPE(DLTOBJ) FILE(PBBSREP)           AC2091865;
 PARAMETER(DB1.PFS_Company_Number);
 PARAMETER(DB1.PFS_Item_Code_Fresh);
 // IF PAR.Upd/Del Sts USR is Update
 IF PAR.Upd_Del_Sts_USR = 'U';

 EXECUTE FUNCTION(Chg Process Status    CH) TYPE(CHGOBJ) FILE(PBBSREP)           AC2092042;
 PARAMETER(DB1.PFS_Company_Number);
 PARAMETER(DB1.PFS_Item_Code_Fresh);
 PARAMETER(DB1.PFS_Item_Code_Frozen);
 PARAMETER(DB1.PFS_FR_FZ_Unused_1);
 PARAMETER(DB1.PFS_FR_FZ_Unused_2);
 PARAMETER(DB1.PFS_Record_Status);
 PARAMETER(*ZERO);
 PARAMETER(DB1.PFS_Error_Reason);
 PARAMETER(DB1.PFS_Create_Date);
 PARAMETER(DB1.PFS_Create_Time);
 PARAMETER(DB1.PFS_Change_Date);
 PARAMETER(DB1.PFS_Change_Time);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Change Stamp      IF) TYPE(EXCINTFUN)                      AC1732163;
  PARAMETER(DB1.PFS_Change_Date);
  PARAMETER(DB1.PFS_Change_Time);
  {
   //?Execute internal function

   // PAR.PFS Change Date = JOB.*Job date
   PAR.PFS_Change_Date = JOB.*Job_date;

   // PAR.PFS Change time = JOB.*Job time
   PAR.PFS_Change_Time = JOB.*Job_time;

  }

 }

 ENDIF;

}


