// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PVB8XFR
// ?Date: 14.08.2025 Time: 03:51:52
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(RTV Load Header forLDPLAN) TYPE(RTVOBJ) FILE(OMFJCPP)          AC2220010;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Scheduled_Ship_Date);
PARAMETER(PAR.Warehouse_Code);
PARAMETER(PAR.Load_U_M);
{
 //?USER: Process Data record

 CASE;

 // IF PAR.Load U_M is not entered
 IF PAR.Load_U_M = *BLANK;

 //?If Load U_M is blank
 CASE;

 // IF DB1.Load Status is Combined,Unlocked,Locked
 IF DB1.Load_Status = 'C'/'L'/'U';

 EXECUTE FUNCTION(RTV Load Detail forLDPLAN) TYPE(RTVOBJ) FILE(OMFLCPP)          AC2220011;
 PARAMETER(DB1.Load_ID);
 PARAMETER(PAR.Warehouse_Code);
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Carrier_Code);
 PARAMETER(DB1.Schedule_Sequence_Number);
 PARAMETER(DB1.LPT_Load_Plan_Start_Dt);
 PARAMETER(DB1.LPT_Load_Plan_Start_Tm);
 PARAMETER(DB1.Scheduled_Ship_Date);
 PARAMETER(DB1.Deadline_Departure_Date);
 PARAMETER(DB1.Deadline_Departure_Time);
 PARAMETER(DB1.Load_Status);
 PARAMETER(DB1.Load_U_M);
 PARAMETER(DB1.Trailer_Id);
 {
  //?USER: Initialize routine

  // LCL.Order Number Saved USR = CND.Equal to zeros
  LCL.Order_Number_Saved_USR = *ZERO;

  //?USER: Process Data record

  CASE;

  // IF LCL.Order Number Saved USR EQ DB1.Order Number
  IF LCL.Order_Number_Saved_USR = DB1.Order_Number;

  // IF *OTHERWISE
  IF *OTHERWISE;

  EXECUTE FUNCTION(RTV Shipto for LDPLAN) TYPE(RTVOBJ) FILE(OPBGWKP)              AC2220170;
  PARAMETER(DB1.Company_Number);
  PARAMETER(DB1.Order_Number);
  PARAMETER(PAR.Warehouse_Code);
  PARAMETER(LCL.Ship_To_Customer);
  PARAMETER(NLL.Country_Code);
  {
   //?USER: Initialize routine

   // PAR.Ship To Customer = CND.equal to zero
   PAR.Ship_To_Customer = *ZERO;

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

   QUIT;

  }

  //?Proceed when last stop shipto customer is found
  CASE;

  // IF LCL.Ship To Customer is equal to zero
  IF LCL.Ship_To_Customer = *ZERO;

  //?Proceed when last stop shipto customer is found
  // IF *OTHERWISE
  IF *OTHERWISE;

  EXECUTE FUNCTION(RTV Customer Name      RT) TYPE(RTVOBJ) FILE(CABBREP)          AC1108159;
  PARAMETER(LCL.Ship_To_Customer);
  PARAMETER(LCL.Customer_Name);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   // PGM.*Return code = CND.*Record does not exist
   PGM.*Return_code = 'Y2U0005';

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

  }

  EXECUTE FUNCTION(RTV Loan PLan StartLDPLAN) TYPE(RTVOBJ) FILE(PVAHCPP)          AC2220175;
  PARAMETER(DB1.Company_Number);
  PARAMETER(PAR.Warehouse_Code);
  PARAMETER(DB1.Load_ID);
  PARAMETER(PAR.Carrier_Code);
  {
   //?USER: Processing if Data record not found

   // PGM.*Return code = CND.*Record does not exist
   PGM.*Return_code = 'Y2U0005';

   //?USER: Process Data record

   // PGM.*Return code = CND.*Record already exists
   PGM.*Return_code = 'Y2U0003';

   QUIT;

  }

  CASE;

  // IF PGM.*Return code is *Record does not exist
  IF PGM.*Return_code = 'Y2U0005';

  EXECUTE FUNCTION(Create WF Load PlanLDPLAN) TYPE(CRTOBJ) FILE(PVAHCPP)          AC2220064;
  PARAMETER(DB1.Company_Number);
  PARAMETER(PAR.Warehouse_Code);
  PARAMETER(DB1.Load_ID);
  PARAMETER(PAR.Carrier_Code);
  PARAMETER(PAR.Schedule_Sequence_Number);
  PARAMETER(PAR.LPT_Load_Plan_Start_Dt);
  PARAMETER(PAR.LPT_Load_Plan_Start_Tm);
  PARAMETER(PAR.Scheduled_Ship_DateA);
  PARAMETER(PAR.Deadline_Departure_Date);
  PARAMETER(PAR.Deadline_Departure_Time);
  PARAMETER(PAR.Load_Status);
  PARAMETER(PAR.Load_U_M);
  PARAMETER(PAR.Trailer_Id);
  PARAMETER(LCL.Customer_Name);
  ENDIF;

  ENDIF;

  // LCL.Order Number Saved USR = DB1.Order Number
  LCL.Order_Number_Saved_USR = DB1.Order_Number;

  ENDIF;

 }

 ENDIF;

 // IF *OTHERWISE
 IF *OTHERWISE;

 //?If Load U_M is entered
 CASE;

 // IF DB1.Load Status is Combined,Unlocked,Locked
 IF DB1.Load_Status = 'C'/'L'/'U';

 // AND PAR.Load U_M EQ DB1.Load U_M
 AND PAR.Load_U_M = DB1.Load_U_M;

 EXECUTE FUNCTION(RTV Load Detail forLDPLAN) TYPE(RTVOBJ) FILE(OMFLCPP)          AC2220011;
 PARAMETER(DB1.Load_ID);
 PARAMETER(PAR.Warehouse_Code);
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Carrier_Code);
 PARAMETER(DB1.Schedule_Sequence_Number);
 PARAMETER(DB1.LPT_Load_Plan_Start_Dt);
 PARAMETER(DB1.LPT_Load_Plan_Start_Tm);
 PARAMETER(DB1.Scheduled_Ship_Date);
 PARAMETER(DB1.Deadline_Departure_Date);
 PARAMETER(DB1.Deadline_Departure_Time);
 PARAMETER(DB1.Load_Status);
 PARAMETER(DB1.Load_U_M);
 PARAMETER(DB1.Trailer_Id);
 {
  //?USER: Initialize routine

  // LCL.Order Number Saved USR = CND.Equal to zeros
  LCL.Order_Number_Saved_USR = *ZERO;

  //?USER: Process Data record

  CASE;

  // IF LCL.Order Number Saved USR EQ DB1.Order Number
  IF LCL.Order_Number_Saved_USR = DB1.Order_Number;

  // IF *OTHERWISE
  IF *OTHERWISE;

  EXECUTE FUNCTION(RTV Shipto for LDPLAN) TYPE(RTVOBJ) FILE(OPBGWKP)              AC2220170;
  PARAMETER(DB1.Company_Number);
  PARAMETER(DB1.Order_Number);
  PARAMETER(PAR.Warehouse_Code);
  PARAMETER(LCL.Ship_To_Customer);
  PARAMETER(NLL.Country_Code);
  {
   //?USER: Initialize routine

   // PAR.Ship To Customer = CND.equal to zero
   PAR.Ship_To_Customer = *ZERO;

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

   QUIT;

  }

  //?Proceed when last stop shipto customer is found
  CASE;

  // IF LCL.Ship To Customer is equal to zero
  IF LCL.Ship_To_Customer = *ZERO;

  //?Proceed when last stop shipto customer is found
  // IF *OTHERWISE
  IF *OTHERWISE;

  EXECUTE FUNCTION(RTV Customer Name      RT) TYPE(RTVOBJ) FILE(CABBREP)          AC1108159;
  PARAMETER(LCL.Ship_To_Customer);
  PARAMETER(LCL.Customer_Name);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   // PGM.*Return code = CND.*Record does not exist
   PGM.*Return_code = 'Y2U0005';

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

  }

  EXECUTE FUNCTION(RTV Loan PLan StartLDPLAN) TYPE(RTVOBJ) FILE(PVAHCPP)          AC2220175;
  PARAMETER(DB1.Company_Number);
  PARAMETER(PAR.Warehouse_Code);
  PARAMETER(DB1.Load_ID);
  PARAMETER(PAR.Carrier_Code);
  {
   //?USER: Processing if Data record not found

   // PGM.*Return code = CND.*Record does not exist
   PGM.*Return_code = 'Y2U0005';

   //?USER: Process Data record

   // PGM.*Return code = CND.*Record already exists
   PGM.*Return_code = 'Y2U0003';

   QUIT;

  }

  CASE;

  // IF PGM.*Return code is *Record does not exist
  IF PGM.*Return_code = 'Y2U0005';

  EXECUTE FUNCTION(Create WF Load PlanLDPLAN) TYPE(CRTOBJ) FILE(PVAHCPP)          AC2220064;
  PARAMETER(DB1.Company_Number);
  PARAMETER(PAR.Warehouse_Code);
  PARAMETER(DB1.Load_ID);
  PARAMETER(PAR.Carrier_Code);
  PARAMETER(PAR.Schedule_Sequence_Number);
  PARAMETER(PAR.LPT_Load_Plan_Start_Dt);
  PARAMETER(PAR.LPT_Load_Plan_Start_Tm);
  PARAMETER(PAR.Scheduled_Ship_DateA);
  PARAMETER(PAR.Deadline_Departure_Date);
  PARAMETER(PAR.Deadline_Departure_Time);
  PARAMETER(PAR.Load_Status);
  PARAMETER(PAR.Load_U_M);
  PARAMETER(PAR.Trailer_Id);
  PARAMETER(LCL.Customer_Name);
  ENDIF;

  ENDIF;

  // LCL.Order Number Saved USR = DB1.Order Number
  LCL.Order_Number_Saved_USR = DB1.Order_Number;

  ENDIF;

 }

 ENDIF;

 ENDIF;

}


