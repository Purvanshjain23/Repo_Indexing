// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMJMXFR
// ?Date: 14.08.2025 Time: 03:43:18
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(RTV ExpOrd Info for LD RT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC1835011;
PARAMETER(PAR.Order_Number);
PARAMETER(PAR.Ship_To_Customer);
PARAMETER(PAR.Ship_To_Name);
PARAMETER(PAR.Ship_To_Address_Line_1);
PARAMETER(PAR.Ship_To_Address_Line_2);
PARAMETER(PAR.Ship_To_Address_Line_3);
PARAMETER(PAR.Ship_To_City);
PARAMETER(PAR.Ship_To_State_Code);
PARAMETER(PAR.Ship_To_Zip_Postal_Code);
PARAMETER(PAR.Carrier_Code);
PARAMETER(PAR.Load_ID);
PARAMETER(PAR.Export_Status);
PARAMETER(PAR.Export_Docs_Go_w_Driver);
PARAMETER(PAR.Air_Freight_Order);
PARAMETER(PAR.Export_USDA_Approved);
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Stop_Drop_Sequence_Number);
PARAMETER(PAR.Shipping_Line);
PARAMETER(PAR.Port_Delv_Terminal);
PARAMETER(PAR.OHE_City);
PARAMETER(PAR.OHE_Vessel_Airline);
PARAMETER(PAR.OHE_Voyage_Flight);
PARAMETER(PAR.OHE_Booking_Number);
PARAMETER(PAR.OHE_Discharge_Port_Airprt);
PARAMETER(PAR.OHE_Sail_Flight_Date);
PARAMETER(PAR.OHE_Port_Cut_Date);
PARAMETER(PAR.OHE_Arrival_Date);
PARAMETER(PAR.OHE_Late_Delivery_Code);
PARAMETER(PAR.OHE_Ship_Status);
PARAMETER(PAR.OHE_Container_Number);
PARAMETER(PAR.OHE_Comment_1);
PARAMETER(PAR.OHE_Comment_2);
PARAMETER(PAR.Port_City);
PARAMETER(PAR.Port_Address_Line_1);
PARAMETER(PAR.Port_Address_Line_2);
PARAMETER(PAR.Sail_Port_State);
PARAMETER(PAR.Port_Zip_Postal_Code);
PARAMETER(PAR.Port_Phone_Number);
PARAMETER(PAR.Port_Fax_Number);
{
 //?USER: Initialize routine

 MOVE *ALL (To: PAR From: CON);

 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 //?** Return last export record's information
 CASE;

 // IF DB1.Ship To State Code is International Accounts
 IF DB1.Ship_To_State_Code = '.';

 MOVE *ALL (To: PAR From: DB1);

 EXECUTE FUNCTION(RTV OHE Ship fields    RT) TYPE(RTVOBJ) FILE(PMAMREP)          AC1814635;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(LCL.Shipping_Line);
 PARAMETER(LCL.Port_Delv_Terminal);
 PARAMETER(PAR.OHE_City);
 PARAMETER(PAR.OHE_Vessel_Airline);
 PARAMETER(PAR.OHE_Voyage_Flight);
 PARAMETER(PAR.OHE_Booking_Number);
 PARAMETER(PAR.OHE_Discharge_Port_Airprt);
 PARAMETER(PAR.OHE_Sail_Flight_Date);
 PARAMETER(PAR.OHE_Port_Cut_Date);
 PARAMETER(PAR.OHE_Arrival_Date);
 PARAMETER(PAR.OHE_Late_Delivery_Code);
 PARAMETER(PAR.OHE_Ship_Status);
 PARAMETER(PAR.OHE_Container_Number);
 PARAMETER(PAR.OHE_Comment_1);
 PARAMETER(PAR.OHE_Comment_2);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 // PAR.Shipping Line = LCL.Shipping Line
 PAR.Shipping_Line = LCL.Shipping_Line;

 // PAR.Port Delv Terminal = LCL.Port Delv Terminal
 PAR.Port_Delv_Terminal = LCL.Port_Delv_Terminal;

 EXECUTE FUNCTION(RTV Shp Line/Port All  RT) TYPE(RTVOBJ) FILE(PDLCREP)          AC1502160;
 PARAMETER(LCL.Shipping_Line);
 PARAMETER(LCL.Port_Delv_Terminal);
 PARAMETER(PAR.Port_City);
 PARAMETER(PAR.Port_Address_Line_1);
 PARAMETER(PAR.Port_Address_Line_2);
 PARAMETER(PAR.Sail_Port_State);
 PARAMETER(PAR.Port_Zip_Postal_Code);
 PARAMETER(PAR.Port_Phone_Number);
 PARAMETER(PAR.Port_Fax_Number);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  // PGM.*Return code = CND.*Record does not exist
  PGM.*Return_code = 'Y2U0005';

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

  // PGM.*Return code = CND.*Record already exists
  PGM.*Return_code = 'Y2U0003';

 }

 //?** Return last export record's information
 // IF *OTHERWISE
 IF *OTHERWISE;

 MOVE *ALL (To: PAR From: DB1);

 ENDIF;

}


