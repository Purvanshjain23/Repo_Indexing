/********************************************************************/
/*                                                                  */
/*  PBTIUPC   - SWEEP ORDERS TO MERCURYGATE                         */
/*  SYNOPSIS  - SUBMITTED FROM PBTJUPC                              */
/*              CALLS THE PGM TO UPDATE TMS ORDER STATUS = "S"      */
/*              CALLS THE EDIT POST OPEN ORDERS TO WRITE            */
/*              THE TRIGGER RECORD TO PBATCPP                       */
/*                                                                  */
/*  SYSTEM    - ORDER MANAGEMENT SYSTEM                             */
/*  DATE      - 10/21/2015                                          */
/*            - LARA BUSER                                          */
/*                                                                  */
/*  PARAMETERS:                                                     */
/*   &RETURN     - RETURN CODE                                      */
/*   &UPDTYP     - UPDATE TYPE: ONLY 1 OR ALL                       */
/*   &DTOUTN     - FROM SCHEDULED SHIP DATE                         */
/*   &DTINN      - THRU SCHEDULED SHIP DATE                         */
/*   &COMPN      - COMPANY NUMBER                                   */
/*   &ORDERN     - ORDER (BLANKS=ALL FOR CUSTOMER)                  */
/*   &CUSTN      - A/R CUSTOMER NUMBER                              */
/*   &WHSE       - WAREHOUSE                                        */
/*   &PRCEVENT   - PRICE EVENT (=FROM SWEEP ORDERS TO MG)           */
/*                                                                  */
/********************************************************************/
/* MODIFICATIONS:                                                   */
/*------------------------------------------------------------------*/
/*                                                                  */
/********************************************************************/
 PBTIUPC:    PGM        PARM(&RETURN &NAME &CUSTPO &LPR &DTTHRUN +
                          &DTFROMN &RDD &COMPN &CUSTN &ORDERN &WHSE +
                          &CSTTYP &STATE &UPDTYP &CITY &PRCEVENT)

/* PARMS                                                            */
             DCL        VAR(&RETURN)  TYPE(*CHAR) LEN(7)
             DCL        VAR(&STATE)   TYPE(*CHAR) LEN(2)
             DCL        VAR(&UPDTYP)  TYPE(*CHAR) LEN(1)
             DCL        VAR(&CUSTPO)  TYPE(*CHAR) LEN(15)
             DCL        VAR(&CITY)    TYPE(*CHAR) LEN(20)
             DCL        VAR(&RDD)     TYPE(*DEC)
             DCL        VAR(&RDDATE)  TYPE(*DEC) LEN(7 0)
             DCL        VAR(&DTTHRUN) TYPE(*DEC)
             DCL        VAR(&DTFROMN) TYPE(*DEC)
             DCL        VAR(&SSDFROM) TYPE(*DEC) LEN(7 0)
             DCL        VAR(&SSDTHRU) TYPE(*DEC) LEN(7 0)
             DCL        VAR(&COMPN)   TYPE(*DEC)
             DCL        VAR(&COMP)    TYPE(*DEC) LEN(3 0)
             DCL        VAR(&CUSTN)   TYPE(*DEC)
             DCL        VAR(&CUST)    TYPE(*DEC) LEN(7 0)
             DCL        VAR(&ORDERN)  TYPE(*DEC)
             DCL        VAR(&ORDER)   TYPE(*DEC) LEN(7 0)
             DCL        VAR(&WHSE)    TYPE(*CHAR) LEN(3)
             DCL        VAR(&LPR)     TYPE(*CHAR) LEN(2)
             DCL        VAR(&PRCEVENT) TYPE(*CHAR) LEN(3)
             DCL        VAR(&NAME)     TYPE(*CHAR) LEN(30)
             DCL        VAR(&WHSE)     TYPE(*CHAR) LEN(3)
             DCL        VAR(&CSTTYP)   TYPE(*CHAR) LEN(2)
             DCL        VAR(&JDTE)    TYPE(*DEC) LEN(7 0) VALUE(0)
             DCL        VAR(&JTME)    TYPE(*DEC) LEN(6 0) VALUE(0)
             DCL        VAR(&JPGM)    TYPE(*CHAR) LEN(10) VALUE('    ')
             DCL        VAR(&USERID)  TYPE(*CHAR) LEN(10) VALUE('    ')

             MONMSG     MSGID(CPF0000)

             CHGVAR     VAR(&COMP) VALUE(&COMPN)
             CHGVAR     VAR(&CUST) VALUE(&CUSTN)
             CHGVAR     VAR(&ORDER) VALUE(&ORDERN)
             CHGVAR     VAR(&SSDTHRU) VALUE(&DTTHRUN)
             CHGVAR     VAR(&SSDFROM) VALUE(&DTFROMN)

/* IF UPDATE TYPE = '1' FOR "ONLY ONE ORDER"                        */
/*           IF         COND(&UPDTYP *EQ '1') THEN(DO) */

/* UPDATE LOAD PLAN READY                                           */
/*           CALL       PGM(PPNNXFR) PARM(&RETURN &COMP &ORDER +
                          &SSDFROM &LPR)                            */
/*           IF         COND(&RETURN *NE '       ') THEN(GOTO  +
                          CMDLBL(END))                              */

/* WRITE THE TMS TRIGGER RECORD                                     */
/*           CHGVAR     VAR(&LPR) VALUE(' ')                        */
/*           CALL       PGM(PBUOXFR) PARM(&RETURN &JDTE &JTME &ORDER +
                          &COMP &LPR &USERID &JPGM) */
/*           IF         COND(&RETURN *NE '       ') THEN(GOTO +
                          CMDLBL(END)) */
/*           ENDDO */

/* IF UPDATE TYPE = 'A' FOR "ALL"                                   */
             IF         COND(&UPDTYP *EQ 'A') THEN(DO)

/* UPDATE TMS LOAD PLAN READY TO "  "                               */
             CALL       PGM(PBTKXFR) PARM(&RETURN &COMP &ORDER &CUST +
                          &NAME &CITY &STATE &CUSTPO &SSDFROM +
                          &RDDATE &LPR &SSDTHRU &WHSE &CSTTYP +
                          &PRCEVENT)
             IF         COND(&RETURN *NE '       ') THEN(GOTO +
                          CMDLBL(END))
             ENDDO

 END:        ENDPGM
