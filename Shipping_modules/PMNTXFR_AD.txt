// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMNTXFR
// ?Date: 14.08.2025 Time: 03:43:32
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Rtv/Chg Ld Str Co-New  RT) TYPE(RTVOBJ) FILE(OMFJCPP)          AC1848820;
PARAMETER(PAR.Load_ID);
{
 //?USER: Process Data record

 // LCL.Load Start Company USR = DB1.Company Number
 LCL.Load_Start_Company_USR = DB1.Company_Number;

 EXECUTE FUNCTION(RTV Chk Load Str Co   RT) TYPE(RTVOBJ) FILE(OPBFCPP)           AC1848822;
 PARAMETER(DB1.Load_ID);
 PARAMETER(LCL.Load_Start_Company_USR);
 PARAMETER(LCL.Status_Y_or_N);
 {
  //?USER: Initialize routine

  // PAR.Status - Y or N = CND.no
  PAR.Status_Y_or_N = 'N';

  //?USER: Process Data record

  CASE;

  // IF DB1.Header Status is Cancel Status Types
  IF DB1.Header_Status = 'L'/'A'/'E'/'H';

  //?Quit if at least one order exists with matching load start company
  CASE;

  // IF DB1.Company Number EQ PAR.Load Start Company USR
  IF DB1.Company_Number = PAR.Load_Start_Company_USR;

  // PAR.Status - Y or N = CND.yes
  PAR.Status_Y_or_N = 'Y';

  QUIT;

  //?Quit if at least one order exists with matching load start company
  // IF *OTHERWISE
  IF *OTHERWISE;

  // PAR.Load Start Company USR = DB1.Company Number
  PAR.Load_Start_Company_USR = DB1.Company_Number;

  ENDIF;

  ENDIF;

 }

 CASE;

 // IF LCL.Status - Y or N is no
 IF LCL.Status_Y_or_N = 'N';

 CASE;

 // IF LCL.Load Start Company USR NE DB1.Company Number
 IF LCL.Load_Start_Company_USR <> DB1.Company_Number;

 EXECUTE FUNCTION(CHG Load Start Company CH) TYPE(CHGOBJ) FILE(OMFJCPP)          AC1848824;
 PARAMETER(DB1.Load_ID);
 PARAMETER(LCL.Load_Start_Company_USR);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 ENDIF;

 ENDIF;

}


