/*********************************************************************/
/* PROGRAM : PVBFUPC                                                 */
/* DESC    : UPD SETUP ERADANI LIBS CL EXECUTE USER PROGRAM          */
/* DATE    : 10/12/2023                                              */
/* PROJECT : WI517 - WAREHOUSE INVENTORY MANAGEMENT (WIM)            */
/* BY      : DANNY NGUYEN                                            */
/* PURPOSE : Add the required Eradani's environment libraries in     */
/*           order to utilize/run the Outbound WIM API               */
/*           'wim.ordershipping.inventory'.                          */
/*                                                                   */
/*                                                                   */
/* NOTE    : The Menu Security system is limited to 25 libraries     */
/*           hence we need to update the library list at the program */
/*           level.                                                  */
/*                                                                   */
/*********************************************************************/
/* MAINTENANCE LOG:                                                  */
/*-------------------------------------------------------------------*/
/* DATE     BY  PROJ      CHANGE DESCRIPTION                         */
/* -------- --- --------- ------------------------------------------ */
/*                                                                   */
/*                                                                   */
/*********************************************************************/

             PGM

             DCL        VAR(&DTALIB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&RLSSTS) TYPE(*CHAR) LEN(1)


 /* GET WIM MODULE RELEASE 1 STATUS */
             CALL       PGM(PUYLXFR) PARM('' 'WIM' X'001F' &RLSSTS)

 /* ONLY IF 'LIVE' OR 'PARALLEL' WITH WIM RELEASE 1 THEN CONTINUE */
             IF         COND((&RLSSTS *EQ 'Y') *OR (&RLSSTS *EQ +
                          'P')) THEN(DO)

/*-------------------------------------------------------------------*/
/* Get Data Library in Order to Setup which Environment Libraries    */
/*-------------------------------------------------------------------*/
             CALL       PGM(PPJXXFR) PARM(' ' 'DTALIB' &DTALIB)


    /*If PRKFLIB - Setup Eradani Production Environment Libraries */
             IF         COND(&DTALIB *EQ 'PRKFLIB') THEN(DO)

             ADDLIBLE LIB(ECNCT) POSITION(*LAST)
             MONMSG     MSGID(CPF2103) EXEC(DO) /* Already Exists */
             GOTO       CMDLBL(ENDPGM)
             ENDDO

             ADDLIBLE LIB(ECIFLIB) POSITION(*LAST)
             MONMSG     MSGID(CPF2103)
             ADDLIBLE   LIB(ECIPLIB) POSITION(*LAST)
             MONMSG     MSGID(CPF2103)
             ADDLIBLE   LIB(ECIPRD) POSITION(*LAST) /* Eradani Subsystem */
             MONMSG     MSGID(CPF2103)

             ENDDO      /* &DTALIB = 'PRKFLIB' */


    /*If PRKTESTF - Setup Eradani QUA Environment Libraries */
             IF         COND(&DTALIB *EQ 'PRKTESTF') THEN(DO)

             ADDLIBLE LIB(ECNCT) POSITION(*LAST)
             MONMSG     MSGID(CPF2103) EXEC(DO) /* Already Exists */
             GOTO       CMDLBL(ENDPGM)
             ENDDO

             ADDLIBLE LIB(ECITESTF) POSITION(*LAST)
             MONMSG     MSGID(CPF2103)
             ADDLIBLE   LIB(ECITESTP) POSITION(*LAST)
             MONMSG     MSGID(CPF2103)
             ADDLIBLE   LIB(ECIQUA) POSITION(*LAST) /* Eradani Subsystem */
             MONMSG     MSGID(CPF2103)
             ADDLIBLE   LIB(ECIPLIB) POSITION(*LAST)

             ENDDO      /* &DTALIB = 'PRKTESTF' */


    /*If PRKUATF - Setup Eradani UAT Environment Libraries */
             IF         COND(&DTALIB *EQ 'PRKUATF') THEN(DO)

             ADDLIBLE LIB(ECNCT) POSITION(*LAST)
             MONMSG     MSGID(CPF2103) EXEC(DO) /* Already Exists */
             GOTO       CMDLBL(ENDPGM)
             ENDDO

             ADDLIBLE LIB(ECIUATF) POSITION(*LAST)
             MONMSG     MSGID(CPF2103)
             ADDLIBLE   LIB(ECIUATP) POSITION(*LAST)
             MONMSG     MSGID(CPF2103)
             ADDLIBLE   LIB(ECIUAT) POSITION(*LAST) /* Eradani Subsystem */
             MONMSG     MSGID(CPF2103)
             ADDLIBLE   LIB(ECIPLIB) POSITION(*LAST)

             ENDDO      /* &DTALIB = 'PRKUATF' */


    /*ˆTHIS IS FOR TESTING PURPOSE ONLY! WILL LEAVE IT HERE SO WE */
    /*ˆDON'T GENERATE ERRORS WHEN TESTING IN THE TPMTESTF ENV. */
    /*ˆTHIS IS NOT A FULLY FUNCTIONAL ERADANI ENV. */
    /*ˆIf TPMTESTF - Setup Eradani DEV Environment Libraries */
             IF         COND(&DTALIB *EQ 'TPMTESTF') THEN(DO)

             ADDLIBLE LIB(ECNCT) POSITION(*LAST)
             MONMSG     MSGID(CPF2103) EXEC(DO) /* Already Exists */
             GOTO       CMDLBL(ENDPGM)
             ENDDO

             ADDLIBLE   LIB(ECIDEVLIB) POSITION(*LAST)
             MONMSG     MSGID(CPF2103)
             ADDLIBLE   LIB(ECIDEV) POSITION(*LAST) /* Eradani Subsystem */
             MONMSG     MSGID(CPF2103)
             ADDLIBLE   LIB(ECIPLIB) POSITION(*LAST)

             ENDDO      /* &DTALIB = 'TPMTESTF' */

             ENDDO      /* &RLSSTS = 'Y' OR 'P' */


 ENDPGM:
             ENDPGM
