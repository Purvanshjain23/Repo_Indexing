// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for E1G0XFR
// ?Date: 14.08.2025 Time: 02:43:41
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Convert incoming 3 character Company Number alpha to 5 alpha
// LCL.Company = CONCAT(CON.00,PAR.OMS Company Number Alpha,CND.*None)
LCL.Company = '00' + PAR.OMS_Company_Number_Alpha (*ZERO);

//?Convert 4 digit year to 2 digit fiscal year
// LCL.Fiscal Year = PAR.@Year 4.0
LCL.Fiscal_Year = PAR.AAYear_4_0;

EXECUTE FUNCTION(Rtv Acct Bal - HPS E1 RT) TYPE(RTVOBJ) FILE(E10902)            AA1101432;
PARAMETER(LCL.Company);
PARAMETER(LCL.Fiscal_Year);
PARAMETER(PAR.Object_Account);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Ledger Types is AA
 IF DB1.Ledger_Types = 'AA';

 // LCL.Process Flag = CND.No
 LCL.Process_Flag = 'N';

 EXECUTE FUNCTION(Chk Exist for AA NUR G/F) TYPE(RTVOBJ) FILE(E10006)            AA1101435;
 PARAMETER(DB1.Business_Unit_Cost_Center);
 {
  //?USER: Process Data record

  CASE;

  // IF DB1.Catg Code - Biz Unit 12 is AC
  IF DB1.Catg_Code_Biz_Unit_12 = 'AC';

  //?If Group is Nursery or G/F
  CASE;

  // IF DB1.Group is Nursery
  IF DB1.Group = 'NUR';

  // OR DB1.Group is G/F
  OR DB1.Group = 'G/F';

  // PGM.*Return code = CND.*Normal
  PGM.*Return_code = *BLANK;

  //?If Group is Nursery or G/F
  // IF *OTHERWISE
  IF *OTHERWISE;

  // PGM.*Return code = CND.*Record does not exist
  PGM.*Return_code = 'Y2U0005';

  ENDIF;

  // IF *OTHERWISE
  IF *OTHERWISE;

  // PGM.*Return code = CND.*Record does not exist
  PGM.*Return_code = 'Y2U0005';

  ENDIF;

 }

 ENDIF;

}


