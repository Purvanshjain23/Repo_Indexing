// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBVUXFR
// ?Date: 14.08.2025 Time: 03:49:31
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Run this for Test Pilots and Live cutover
EXECUTE FUNCTION(RTV Opn AR for M3 CtOvRT) TYPE(RTVOBJ) FILE(ARBDCPP)           AC2118435;
PARAMETER(PAR.Invoice_Number);
PARAMETER(PAR.Transaction_Date_Code);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Transaction Date Code GT PAR.Transaction Date Code
 IF DB1.Transaction_Date_Code > PAR.Transaction_Date_Code;

 CASE;

 // IF DB1.Invoice Suffix is IN, DM, or CM
 IF DB1.Invoice_Suffix = 'CM'/'DM'/'IN';

 // AND DB1.Invoice Number GT PAR.Invoice Number
 AND DB1.Invoice_Number > PAR.Invoice_Number;

 // Call program ZzzOMS AR Opn F/CutOvr UP.
 CALL PROGRAM(ZzzOMS AR Opn F/CutOvr UP) ('PBVVUPR');
 PARAMETER(LCL.Return_Code_Usr);
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number_Ref);

 // IF DB1.Invoice Suffix is Charge Backs
 IF DB1.Invoice_Suffix = 'CB';

 //?for Test Pilots and Live Cutover only!
 //?Rem bal due -- not the trans amt?? 1-18-16
 // Call program M3 OMS AR Open CB      UP.
 CALL PROGRAM(M3 OMS AR Open CB      UP) ('M3OPNCBOA');
 PARAMETER(LCL.Return_Code_Usr);
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number_Ref);
 PARAMETER(DB1.Invoice_Number);
 PARAMETER(DB1.Invoice_Suffix);
 PARAMETER(DB1.Remaining_Balance_Due);

 // IF DB1.Invoice Suffix is On Account Cash
 IF DB1.Invoice_Suffix = 'OA';

 //?Rem bal due -- not the trans amt?? 1-18-16
 // Call program ZzzOMS AR Open OA      UP.
 CALL PROGRAM(ZzzOMS AR Open OA      UP) ('PBVPUPR');
 PARAMETER(LCL.Return_Code_Usr);
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number_Ref);
 PARAMETER(DB1.Invoice_Number);
 PARAMETER(DB1.Invoice_Suffix);
 PARAMETER(DB1.Remaining_Balance_Due);
 PARAMETER(DB1.AR_Customer_Number);

 ENDIF;

 ENDIF;

}


