// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PWNNPVR
// ?Date: 14.08.2025 Time: 02:57:07
// ?------------------------------------------------------------------------------------------------

//?USER: Load screen

// DTL.CC Company Number = PAR.CC Company Number
DTL.CC_Company_Number = PAR.CC_Company_Number;

// DTL.TRH Repayment ID = PAR.TRH Repayment ID
DTL.TRH_Repayment_ID = PAR.TRH_Repayment_ID;

// DTL.TRH Payment Date = PAR.TRH Payment Date
DTL.TRH_Payment_Date = PAR.TRH_Payment_Date;

//?USER: User defined action

// LCL.CC Company Num-Alpha = CVTVAR(DTL.CC Company Number)
LCL.CC_Company_Num_Alpha = CVTVAR(DTL.CC_Company_Number);

// Call program Prt Repay Diff Report UP.
SBMJOB;
CALL PROGRAM(Prt Repay Diff Report UP) ('PWNPUPC');
PARAMETER(LCL.CC_Company_Num_Alpha);
PARAMETER(DTL.EMail_Address);
SBMJOBOVR JOB(REPYMTDIFF);
SBMJOBEND;

// Send information message - 'Job &1 has been submitted.'
MESSAGE(PRK1500 *INFO);
MSGPARM('REPYMTDIFF');

//?USER: Exit program processing

CASE;

// IF DTL.*CMD key is *Exit
IF DTL.*CMD_key = '03';

PGM.*Return_code = 'Y2U9999';

RETURN;

ENDIF;

