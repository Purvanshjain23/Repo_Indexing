// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKXDXFR
// ?Date: 14.08.2025 Time: 02:50:45
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?MODIFICATIONS
//?11/02/2020 ISE H16853 - CHANGE BUY ORDER NUMBER FIELD LENGTH FROM 5 TO 7
EXECUTE FUNCTION(Rtv/Prt SelCrcSm,dtlFr RT) TYPE(RTVOBJ) FILE(PKC6CPP)          AB1165580;
PARAMETER(PAR.Oms_System_Value_Alpha);
PARAMETER(PAR.Print_Carcass_Analysis_Us);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Rtv PayTyp/Src Hc     Rt) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1177466;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.TH_Kill_Date);
 PARAMETER(WRK.TH_Source_Type);
 PARAMETER(WRK.TH_Payment_Type);
 PARAMETER(WRK.TH_Hog_Class_Type);
 {
  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 //?Print original Carc sum / dtl if BOTH or NO selected
 CASE;

 // IF PAR.Print Carcass Analysis Us is Both/No
 IF PAR.Print_Carcass_Analysis_Us = 'B'/'N';

 CASE;

 // IF WRK.TH Payment Type is Carcass Merit
 IF WRK.TH_Payment_Type = 'C';

 //?Print Carc Sum
 CASE;

 // IF DB1.Tattoo Header Action is Carc Sum
 IF DB1.Tattoo_Header_Action = 'Carc Sum';

 // Call program Zzz Crc Sum on Form   Pf.
 CALL PROGRAM(Zzz Crc Sum on Form   Pf) ('PKW9PFR');
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER('N');

 ENDIF;

 //?Print Crc Dtl
 CASE;

 // IF DB1.Tattoo Header Action is Prt Crc Dtl
 IF DB1.Tattoo_Header_Action = 'Prt CrcDtl';

 // Call program ZZt Carcass Detail    zz.
 CALL PROGRAM(ZZt Carcass Detail    zz) ('PKTCPFR');
 PARAMETER(DB1.Tattoo_Sequence_Number);
 PARAMETER('N');
 PARAMETER(PAR.Oms_System_Value_Alpha);

 ENDIF;

 ENDIF;

 ENDIF;

 //?Print Carcass Analysis  if BOTH or YES selected
 CASE;

 // IF PAR.Print Carcass Analysis Us is Both/Yes
 IF PAR.Print_Carcass_Analysis_Us = 'B'/'Y';

 CASE;

 // IF WRK.TH Payment Type is Live
 IF WRK.TH_Payment_Type = 'L';

 // AND WRK.TH Hog Class Type is Market
 AND WRK.TH_Hog_Class_Type = 'M';

 //?Print Carc Sum
 CASE;

 // IF DB1.Tattoo Header Action is Carc Sum
 IF DB1.Tattoo_Header_Action = 'Carc Sum';

 // Call program Zzz Crc Sum on Form   Pf.
 CALL PROGRAM(Zzz Crc Sum on Form   Pf) ('PKW9PFR');
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER('Y');

 ENDIF;

 //?Print Crc Dtl
 CASE;

 // IF DB1.Tattoo Header Action is Prt Crc Dtl
 IF DB1.Tattoo_Header_Action = 'Prt CrcDtl';

 // Call program ZZt Carcass Detail    zz.
 CALL PROGRAM(ZZt Carcass Detail    zz) ('PKTCPFR');
 PARAMETER(DB1.Tattoo_Sequence_Number);
 PARAMETER('Y');
 PARAMETER(PAR.Oms_System_Value_Alpha);

 ENDIF;

 // IF WRK.TH Source Type is Internal
 IF WRK.TH_Source_Type = 'I';

 // AND WRK.TH Payment Type is Carcass Merit
 AND WRK.TH_Payment_Type = 'C';

 //?Print Carc Sum
 CASE;

 // IF DB1.Tattoo Header Action is Carc Sum
 IF DB1.Tattoo_Header_Action = 'Carc Sum';

 // Call program Zzz Crc Sum on Form   Pf.
 CALL PROGRAM(Zzz Crc Sum on Form   Pf) ('PKW9PFR');
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER('Y');

 ENDIF;

 //?Print Crc Dtl
 CASE;

 // IF DB1.Tattoo Header Action is Prt Crc Dtl
 IF DB1.Tattoo_Header_Action = 'Prt CrcDtl';

 // Call program ZZt Carcass Detail    zz.
 CALL PROGRAM(ZZt Carcass Detail    zz) ('PKTCPFR');
 PARAMETER(DB1.Tattoo_Sequence_Number);
 PARAMETER('Y');
 PARAMETER(PAR.Oms_System_Value_Alpha);

 ENDIF;

 ENDIF;

 ENDIF;

}


