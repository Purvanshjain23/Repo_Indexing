// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDCTDFR
// ?Date: 14.08.2025 Time: 03:31:18
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?***** Change Log
//?** 03/27/2006 LJB
//?** Put blanks in new input parm for the DSP A/R Summary
//?*****
//?USER: Initialize subfile control

// PGM.*Scan limit = CON.1500
PGM.*Scan_limit = 1500;

//?USER: Initialize subfile record from DBF record

EXECUTE FUNCTION(RTV Num. of Payments   RT) TYPE(RTVOBJ) FILE(ARBECPP)          AC1357699;
PARAMETER(RCD.Company_Number);
PARAMETER(RCD.Invoice_Number);
PARAMETER(RCD.Invoice_Suffix);
PARAMETER(1);
PARAMETER(LCL.USR_Number_of_Payments);
{
 //?USER: Initialize routine

 // PAR.USR Number of Payments = CND.Equal zero
 PAR.USR_Number_of_Payments = *ZERO;

 //?USER: Processing if Data record not found

 QUIT;

 //?USER: Process Data record

 CASE;

 // IF DB1.Cash/Adj is Cash Adjustment
 IF DB1.Cash_Adj = 'CSH';

 // PAR.USR Number of Payments = CON.1 + PAR.USR Number of Payments
 PAR.USR_Number_of_Payments = 1 + PAR.USR_Number_of_Payments;

 ENDIF;

}


CASE;

// IF LCL.USR Number of Payments is Greater Than 1
IF LCL.USR_Number_of_Payments > 1;

// RCD.Text 1 Length USR = CON.*
RCD.Text_1_Length_USR = *;

ENDIF;

//?USER: Process subfile record (Pre-confirm)

//?Display A/R Header Detail
CASE;

// IF RCD.*SFLSEL is Option 5
IF RCD.*SFLSEL = '5'/'5';

// Call program DSP A/R Header Detail  D1.
CALL PROGRAM(DSP A/R Header Detail  D1) ('PDC0D1R');
PARAMETER(RCD.Company_Number);
PARAMETER(RCD.Invoice_Number);
PARAMETER(RCD.Invoice_Suffix);

ENDIF;

//?Display Adjustment Detail Records
CASE;

// IF RCD.*SFLSEL is Option 8
IF RCD.*SFLSEL = '8'/'8';

// Call program DSP Detail for Header  DF.
CALL PROGRAM(DSP Detail for Header  DF) ('PDT2DFR');
PARAMETER(RCD.Company_Number);
PARAMETER(RCD.Invoice_Number);
PARAMETER(RCD.Invoice_Suffix);
PARAMETER(*ZERO);
PARAMETER(RCD.Bank_Code);

ENDIF;

//?Display A/R Summary
CASE;

// IF RCD.*SFLSEL is Opt 7
IF RCD.*SFLSEL = '7'/'7';

//?RMC 9/16/04  PKTR01
//?** Put blanks in new input parm for the DSP A/R Summary  03/27/06 LJB
// WRK.USR Check Y/N Status = CND.blank
WRK.USR_Check_Y_N_Status = *BLANK;

// Call program DSP A/R Summary       XF.
CALL PROGRAM(DSP A/R Summary       XF) ('PPG5XFR');
PARAMETER(RCD.Company_Number);
PARAMETER(RCD.AR_Customer_Number);
PARAMETER(WRK.USR_Check_Y_N_Status);

ENDIF;

//?Edit Explanation
CASE;

// IF RCD.*SFLSEL is Option 9
IF RCD.*SFLSEL = '9'/'9';

// Call program Edt Explanation       EF.
CALL PROGRAM(Edt Explanation       EF) ('PONREFR');
PARAMETER(RCD.Company_Number);
PARAMETER(RCD.Invoice_Number);
PARAMETER(RCD.Invoice_Suffix);
PARAMETER(*ZERO);
PARAMETER(RCD.Bank_Code);

ENDIF;

