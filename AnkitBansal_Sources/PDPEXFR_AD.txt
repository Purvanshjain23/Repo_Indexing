// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDPEXFR
// ?Date: 14.08.2025 Time: 03:35:35
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(RTV Reason Codes       RT) TYPE(RTVOBJ) FILE(CAB7CPP)          AC1530238;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Item_Code);
PARAMETER(PAR.Warehouse_Code);
PARAMETER(PAR.Reason_Code);
PARAMETER(PAR.Production_Date);
{
 //?USER: Initialize routine

 // PAR.Monday                USR = PAR.Production Date
 PAR.Monday_USR = PAR.Production_Date;

 // PAR.Tuesday               USR = PAR.Monday                USR + CON.1 *DAYS
 PAR.Tuesday_USR = DATEINCR(PAR.Monday_USR 1 'DY' 1111111 'NONE' 'N' 1);

 // PAR.Wednesday             USR = PAR.Tuesday               USR + CON.1 *DAYS
 PAR.Wednesday_USR = DATEINCR(PAR.Tuesday_USR 1 'DY' 1111111 'NONE' 'N' 1);

 // PAR.Thursday              USR = PAR.Wednesday             USR + CON.1 *DAYS
 PAR.Thursday_USR = DATEINCR(PAR.Wednesday_USR 1 'DY' 1111111 'NONE' 'N' 1);

 // PAR.Friday                USR = PAR.Thursday              USR + CON.1 *DAYS
 PAR.Friday_USR = DATEINCR(PAR.Thursday_USR 1 'DY' 1111111 'NONE' 'N' 1);

 // PAR.Saturday              USR = PAR.Friday                USR + CON.1 *DAYS
 PAR.Saturday_USR = DATEINCR(PAR.Friday_USR 1 'DY' 1111111 'NONE' 'N' 1);

 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 //?Monday
 CASE;

 // IF DB1.Production Date EQ PAR.Monday                USR
 IF DB1.Production_Date = PAR.Monday_USR;

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

 QUIT;

 ENDIF;

 //?Tuesday
 CASE;

 // IF DB1.Production Date EQ PAR.Tuesday               USR
 IF DB1.Production_Date = PAR.Tuesday_USR;

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

 QUIT;

 ENDIF;

 //?Wednesday
 CASE;

 // IF DB1.Production Date EQ PAR.Wednesday             USR
 IF DB1.Production_Date = PAR.Wednesday_USR;

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

 QUIT;

 ENDIF;

 //?Thursday
 CASE;

 // IF DB1.Production Date EQ PAR.Thursday              USR
 IF DB1.Production_Date = PAR.Thursday_USR;

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

 QUIT;

 ENDIF;

 //?Friday
 CASE;

 // IF DB1.Production Date EQ PAR.Friday                USR
 IF DB1.Production_Date = PAR.Friday_USR;

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

 QUIT;

 ENDIF;

 //?Saturday
 CASE;

 // IF DB1.Production Date EQ PAR.Saturday              USR
 IF DB1.Production_Date = PAR.Saturday_USR;

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

 QUIT;

 ENDIF;

 CASE;

 // IF DB1.Production Date GT PAR.Saturday              USR
 IF DB1.Production_Date > PAR.Saturday_USR;

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 QUIT;

 ENDIF;

}


CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

PGM.*Return_code = 'Y2U0003';

RETURN;

ENDIF;

CASE;

// IF PGM.*Return code is *Record does not exist
IF PGM.*Return_code = 'Y2U0005';

PGM.*Return_code = 'Y2U0005';

RETURN;

ENDIF;

