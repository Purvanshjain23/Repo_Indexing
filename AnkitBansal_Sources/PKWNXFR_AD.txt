// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKWNXFR
// ?Date: 14.08.2025 Time: 02:53:10
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Cnv MPR Purch Type    RT) TYPE(RTVOBJ) FILE(PKACREP)           AB1236227;
{
 //?USER: Process Data record

 CASE;

 // IF DB1.PD Producer Code is SEABOA
 IF DB1.PD_Producer_Code = 'SEABOA';

 // WRK.MPR Purchase Type Code = CON.9
 WRK.MPR_Purchase_Type_Code = 9;

 // IF *OTHERWISE
 IF *OTHERWISE;

 // WRK.MPR Purchase Type Code = CON.3
 WRK.MPR_Purchase_Type_Code = 3;

 ENDIF;

 EXECUTE FUNCTION(Rtv/Crt/Chg MPR PrPur RT) TYPE(RTVOBJ) FILE(PKE3CPP)           AB1235598;
 PARAMETER(DB1.PD_Producer_Code);
 PARAMETER(WRK.MPR_Purchase_Type_Code);
 PARAMETER(DB1.RS_User_Changed);
 PARAMETER(DB1.RS_Date_Changed);
 PARAMETER(DB1.RS_Time_Changed);
 PARAMETER(DB1.RS_Record_Status);
 PARAMETER(DB1.RS_Job);
 PARAMETER(DB1.RS_Program);
 PARAMETER(DB1.RS_User_Added);
 PARAMETER(DB1.RS_Date_Added);
 PARAMETER(DB1.RS_Time_Added);
 {
  //?USER: Processing if Data record not found

  EXECUTE FUNCTION(Crt MPR Prdcr Purch   CR) TYPE(CRTOBJ) FILE(PKE3CPP)           AB1235460;
  PARAMETER(PAR.PD_Producer_Code);
  PARAMETER(PAR.MPR_Purchase_Type_Code);
  PARAMETER(*BLANK);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER('A');
  PARAMETER(PAR.RS_Job);
  PARAMETER(PAR.RS_Program);
  PARAMETER(PAR.RS_User_Added);
  PARAMETER(PAR.RS_Date_Added);
  PARAMETER(PAR.RS_Time_Added);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Rtv Add Stamp         IF) TYPE(EXCINTFUN)                      AB1100935;
   PARAMETER(DB1.RS_Record_Status);
   PARAMETER(DB1.RS_Job);
   PARAMETER(DB1.RS_Program);
   PARAMETER(DB1.RS_User_Added);
   PARAMETER(DB1.RS_Date_Added);
   PARAMETER(DB1.RS_Time_Added);
   {
    //?Execute internal function

    // PAR.RS Record Status = CND.Active
    PAR.RS_Record_Status = 'A';

    // PAR.RS User Added = JOB.*USER
    PAR.RS_User_Added = JOB.*USER;

    // PAR.RS Date Added = JOB.*Job date
    PAR.RS_Date_Added = JOB.*Job_date;

    // PAR.RS Time Added = JOB.*Job time
    PAR.RS_Time_Added = JOB.*Job_time;

    // PAR.RS Program = JOB.*PROGRAM
    PAR.RS_Program = JOB.*PROGRAM;

    // PAR.RS Job = JOB.*JOB
    PAR.RS_Job = JOB.*JOB;

   }

  }

  //?USER: Process Data record

  CASE;

  // IF PAR.MPR Purchase Type Code NE DB1.MPR Purchase Type Code
  IF PAR.MPR_Purchase_Type_Code <> DB1.MPR_Purchase_Type_Code;

  EXECUTE FUNCTION(Del MPR Prdcr Purch   DL) TYPE(DLTOBJ) FILE(PKE3CPP)           AB1235462;
  PARAMETER(DB1.PD_Producer_Code);
  PARAMETER(DB1.MPR_Purchase_Type_Code);
  EXECUTE FUNCTION(Crt MPR Prdcr Purch   CR) TYPE(CRTOBJ) FILE(PKE3CPP)           AB1235460;
  PARAMETER(PAR.PD_Producer_Code);
  PARAMETER(PAR.MPR_Purchase_Type_Code);
  PARAMETER(PAR.RS_User_Changed);
  PARAMETER(PAR.RS_Date_Changed);
  PARAMETER(PAR.RS_Time_Changed);
  PARAMETER('A');
  PARAMETER(PAR.RS_Job);
  PARAMETER(DB1.RS_Program);
  PARAMETER(DB1.RS_User_Added);
  PARAMETER(DB1.RS_Date_Added);
  PARAMETER(DB1.RS_Time_Added);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Rtv Add Stamp         IF) TYPE(EXCINTFUN)                      AB1100935;
   PARAMETER(DB1.RS_Record_Status);
   PARAMETER(DB1.RS_Job);
   PARAMETER(DB1.RS_Program);
   PARAMETER(DB1.RS_User_Added);
   PARAMETER(DB1.RS_Date_Added);
   PARAMETER(DB1.RS_Time_Added);
   {
    //?Execute internal function

    // PAR.RS Record Status = CND.Active
    PAR.RS_Record_Status = 'A';

    // PAR.RS User Added = JOB.*USER
    PAR.RS_User_Added = JOB.*USER;

    // PAR.RS Date Added = JOB.*Job date
    PAR.RS_Date_Added = JOB.*Job_date;

    // PAR.RS Time Added = JOB.*Job time
    PAR.RS_Time_Added = JOB.*Job_time;

    // PAR.RS Program = JOB.*PROGRAM
    PAR.RS_Program = JOB.*PROGRAM;

    // PAR.RS Job = JOB.*JOB
    PAR.RS_Job = JOB.*JOB;

   }

  }

  ENDIF;

 }

}


