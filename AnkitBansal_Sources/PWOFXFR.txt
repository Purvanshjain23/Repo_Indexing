// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PWOFXFR
// ?Date: 14.08.2025 Time: 02:57:11
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modification history
DO;

//? 9/09/2021 JBB WHD84104 - [ME] Purge Repayment Backup Files
//?                          Function created.  This function uses
//?                          incoming parms DATEIN and DAYS to
//?                          to calculate a DATEOUT.  The DATEOUT
//?                          is a date that is calculated as:
//?                          DATEOUT = DATEIN - DAYS
ENDDO;

//?If Date In = 0, use job date
CASE;

// IF PAR.Date In is Not entered
IF PAR.Date_In = *ZERO;

// LCL.Date In = JOB.*Job date
LCL.Date_In = JOB.*Job_date;

//?If Date In = 0, use job date
// IF *OTHERWISE
IF *OTHERWISE;

// LCL.Date In = PAR.Date In
LCL.Date_In = PAR.Date_In;

ENDIF;

//?Convert Days to a negative value
CASE;

// IF PAR.Days USR is GT 0
IF PAR.Days_USR > *ZERO;

// LCL.Days USR = CON.*ZERO - PAR.Days USR
LCL.Days_USR = *ZERO - PAR.Days_USR;

//?Convert Days to a negative value
// IF *OTHERWISE
IF *OTHERWISE;

// LCL.Days USR = PAR.Days USR
LCL.Days_USR = PAR.Days_USR;

ENDIF;

// PAR.Date Out = LCL.Date In + LCL.Days USR *DAYS
PAR.Date_Out = DATEINCR(LCL.Date_In LCL.Days_USR 'DY' 1111111 'NONE' 'N' 1);

