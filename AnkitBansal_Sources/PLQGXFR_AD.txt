// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLQGXFR
// ?Date: 14.08.2025 Time: 02:55:09
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?MODIFICATIONS
//?11/02/2020 ISE H16853 - CHANGE BUY ORDER NUMBER FIELD LENGTH FROM 5 TO 7
EXECUTE FUNCTION(Rtv Shipped Head/Spr  RT) TYPE(RTVOBJ) FILE(PKAXCPP)           AB1303684;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.BOH_Buy_Order_Number);
PARAMETER(PAR.BOL_Load_Number);
PARAMETER(WRK.BOL_Truck_Scale_Weigh_Sts);
PARAMETER(NLL.BOL_Shipped_Head);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


// PAR.BOL Truck Scale Weigh Sts = WRK.BOL Truck Scale Weigh Sts
PAR.BOL_Truck_Scale_Weigh_Sts = WRK.BOL_Truck_Scale_Weigh_Sts;

EXECUTE FUNCTION(Val DelTrck ArrvRules RT) TYPE(RTVOBJ) FILE(PLAFCPP)           AB1303131;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.BOH_Buy_Order_Number);
PARAMETER(PAR.BOL_Load_Number);
PARAMETER(PAR.DSH_Kill_Date);
PARAMETER(PAR.*Return_code);
PARAMETER(PAR.TRK_Arrival_Step_Usr);
PARAMETER(WRK.BOL_Truck_Scale_Weigh_Sts);
{
 //?USER: Processing if Data record not found

 // PAR.*Return code = CND.*Record does not exist
 PAR.*Return_code = 'Y2U0005';

 QUIT;

 //?USER: Process Data record

 // Call program Rtv Company Values    XF.
 CALL PROGRAM(Rtv Company Values    XF) ('PDGKXFR');
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER('HPETRKARV');
 PARAMETER(WRK.System_Value_Alpha_USR);

 CASE;

 // IF WRK.System Value Alpha    USR is No
 IF WRK.System_Value_Alpha_USR = 'N';

 // PAR.*Return code = CND.Arrival Date/Tm Error
 PAR.*Return_code = 'A';

 // IF *OTHERWISE
 IF *OTHERWISE;

 CASE;

 // IF PAR.TRK Arrival Step Usr is Trucker Called In
 IF PAR.TRK_Arrival_Step_Usr = 'C';

 CASE;

 // IF DB1.DT Arrive @ Plant Date is Entered
 IF DB1.DT_Arrive_@_Plant_Date <> *ZERO;

 // PAR.*Return code = CND.Arrival Date/Tm Error
 PAR.*Return_code = 'A';

 // IF DB1.DT Arrive @ Plant Time is Entered
 IF DB1.DT_Arrive_@_Plant_Time > *ZERO;

 // PAR.*Return code = CND.Arrival Date/Tm Error
 PAR.*Return_code = 'A';

 // IF *OTHERWISE
 IF *OTHERWISE;

 // PAR.*Return code = CND.Record Found
 PAR.*Return_code = 999;

 ENDIF;

 // IF PAR.TRK Arrival Step Usr is Trucker Arrived
 IF PAR.TRK_Arrival_Step_Usr = 'A';

 // OR PAR.BOL Truck Scale Weigh Sts is Called In
 OR PAR.BOL_Truck_Scale_Weigh_Sts = 'C';

 // PAR.*Return code = CND.Record Found
 PAR.*Return_code = 999;

 // IF PAR.TRK Arrival Step Usr is Trucker Arrived
 IF PAR.TRK_Arrival_Step_Usr = 'A';

 CASE;

 // IF DB1.DT Arrive @ Plant Date is Entered
 IF DB1.DT_Arrive_@_Plant_Date <> *ZERO;

 // PAR.*Return code = CND.Arrival Date/Tm Error
 PAR.*Return_code = 'A';

 // IF DB1.DT Arrive @ Plant Time is Entered
 IF DB1.DT_Arrive_@_Plant_Time > *ZERO;

 // PAR.*Return code = CND.Arrival Date/Tm Error
 PAR.*Return_code = 'A';

 // IF *OTHERWISE
 IF *OTHERWISE;

 // PAR.*Return code = CND.Record Found
 PAR.*Return_code = 999;

 ENDIF;

 // IF PAR.TRK Arrival Step Usr is Maintenance the Delv Trk
 IF PAR.TRK_Arrival_Step_Usr = 'M';

 CASE;

 // IF DB1.DT Arrive @ Plant Date is Not Entered
 IF DB1.DT_Arrive_@_Plant_Date = 0;

 // PAR.*Return code = CND.Arrival Date/Tm Error
 PAR.*Return_code = 'A';

 // IF DB1.DT Arrive @ Plant Time is Not Entered
 IF DB1.DT_Arrive_@_Plant_Time = *ZERO;

 // PAR.*Return code = CND.Arrival Date/Tm Error
 PAR.*Return_code = 'A';

 // IF *OTHERWISE
 IF *OTHERWISE;

 // PAR.*Return code = CND.Record Found
 PAR.*Return_code = 999;

 ENDIF;

 // IF PAR.TRK Arrival Step Usr is Trucker at Gate
 IF PAR.TRK_Arrival_Step_Usr = 'T';

 CASE;

 // IF DB1.DT Arrive @ Plant Date is Not Entered
 IF DB1.DT_Arrive_@_Plant_Date = 0;

 // PAR.*Return code = CND.Arrival Date/Tm Error
 PAR.*Return_code = 'A';

 // IF DB1.DT Arrive @ Plant Time is Not Entered
 IF DB1.DT_Arrive_@_Plant_Time = *ZERO;

 // PAR.*Return code = CND.Arrival Date/Tm Error
 PAR.*Return_code = 'A';

 // IF *OTHERWISE
 IF *OTHERWISE;

 // PAR.*Return code = CND.Record Found
 PAR.*Return_code = 999;

 ENDIF;

 ENDIF;

 ENDIF;

 QUIT;

}


