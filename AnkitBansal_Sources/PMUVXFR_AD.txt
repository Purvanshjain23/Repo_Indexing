// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMUVXFR
// ?Date: 14.08.2025 Time: 03:44:09
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Fix Trans Partner     RT) TYPE(RTVOBJ) FILE(PMDACPP)           AC1883062;
{
 //?USER: Process Data record

 CASE;

 // IF DB1.COA Retired RIN Reason Cd is *Blank
 IF DB1.COA_Retired_RIN_Reason_Cd = *BLANK;

 EXECUTE FUNCTION(RTV Bilto/Customer     RT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC1735268;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(LCL.Bill_to_Customer);
 PARAMETER(LCL.Bill_to_Name);
 {
  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 EXECUTE FUNCTION(Rtv HPB Cust Fields   RT) TYPE(RTVOBJ) FILE(PDNIREP)           AC1858717;
 PARAMETER(DB1.Company_Number);
 PARAMETER(LCL.Bill_to_Customer);
 PARAMETER(LCL.HPB_Employer_ID_#);
 PARAMETER(LCL.HPB_ULSD_Company_#);
 PARAMETER(LCL.HPB_ULSD_Facility_ID);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 EXECUTE FUNCTION(Chg COA Batch Hdr RIN CH) TYPE(CHGOBJ) FILE(PMDACPP)           AC1858627;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.COA_ULSD_Company_#);
 PARAMETER(DB1.COA_Batch_Number);
 PARAMETER(DB1.COA_Batch_Header_RIN_Seq);
 PARAMETER(DB1.COA_Batch_Hdr_RIN_Seq_Sec);
 PARAMETER(DB1.COA_Batch_Header_RIN);
 PARAMETER(DB1.COA_RIN_SSSSSSSS);
 PARAMETER(DB1.COA_RIN_EEEEEEEE);
 PARAMETER(DB1.COA_RIN_Volume_in_Gallons);
 PARAMETER(DB1.COA_RIN_Transaction_Date);
 PARAMETER(DB1.COA_RIN_Transaction_Time);
 PARAMETER(LCL.Bill_to_Name);
 PARAMETER(LCL.HPB_ULSD_Company_#);
 PARAMETER(DB1.COA_Retired_RIN_Reason_Cd);
 PARAMETER(DB1.COA_Retired_RIN_Date);
 PARAMETER(DB1.COA_Retired_RIN_Time);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Order_Sequence_Number);
 PARAMETER(DB1.Order_Secondary_Line_Seq);
 PARAMETER(DB1.Case_Sequence_Number);
 PARAMETER(DB1.COA_Rail_Car);
 PARAMETER(DB1.Load_ID);
 PARAMETER(DB1.COA_Date_of_1st_Load);
 PARAMETER(DB1.COA_RIN_Unused_Time);
 PARAMETER(DB1.COA_RIN_Modified_Sts);
 PARAMETER(DB1.COA_RIN_Unused_Text);
 PARAMETER(DB1.COA_RIN_SoldFull_Splt_Sts);
 PARAMETER(DB1.COA_RIN_Gallons_Sold);
 PARAMETER(DB1.COA_Ship_To_Warehouse);
 PARAMETER(DB1.COA_RIN_Type_Flag);
 PARAMETER(DB1.COA_RIN_Customer_PO#);
 PARAMETER(DB1.COA_Shipping_Company);
 PARAMETER(DB1.COA_Ref_Load_Id);
 PARAMETER(DB1.COA_Reference_Batch_NbrNU);
 PARAMETER(DB1.COA_Reference_Btch_Seq_NU);
 PARAMETER(DB1.RFS_Compliance_Period);
 PARAMETER(DB1.RFS_Report_Year);
 PARAMETER(DB1.COA_RIN_Int_Ext_Company);
 PARAMETER(DB1.COA_BHR_Unused_Sts_2);
 PARAMETER(DB1.COA_BHR_Net_Galls_to_Sell);
 PARAMETER(DB1.COA_BHR_Unused_Date_2);
 PARAMETER(DB1.COA_BHR_Unused_Text);
 PARAMETER(DB1.COA_BHR_Loadout_Temp);
 PARAMETER(DB1.COA_ULSD_Facility_#);
 PARAMETER(DB1.COA_Batch_RIN_Volume);
 PARAMETER(DB1.COA_RIN_Quantity);
 PARAMETER(DB1.RFS_Transaction_Type);
 PARAMETER(DB1.RFS_Trans_Reason_Code);
 PARAMETER(DB1.RFS_Fuel_Code);
 PARAMETER(DB1.COA_BHR_RIN_Gen_Year);
 PARAMETER(DB1.COA_BHR_RIN_Price);
 PARAMETER(DB1.COA_BHR_Gallon_Price);
 PARAMETER(DB1.COA_Transaction_Comment);
 PARAMETER(DB1.COA_RIN_Supporting_Text_1);
 PARAMETER(DB1.COA_RIN_Supporting_Nbr_1);
 PARAMETER(DB1.COA_RIN_Supporting_Text_2);
 PARAMETER(DB1.COA_RIN_Supporting_Nbr_2);
 PARAMETER(DB1.COA_BHR_RFS_Version_Nbr);
 PARAMETER(DB1.COA_GEN_EMTS_Sts);
 PARAMETER(DB1.COA_GEN_EMTS_Date_Sent);
 PARAMETER(DB1.COA_GEN_EMTS_Time_Sent);
 PARAMETER(DB1.COA_RIN_EMTS_Sts);
 PARAMETER(DB1.COA_RIN_EMTS_Date_Sent);
 PARAMETER(DB1.COA_RIN_EMTS_Time_Sent);
 PARAMETER(DB1.COA_EMTS_PTD_Nbr);
 PARAMETER(DB1.COA_EMTS_Batch_Nbr);
 PARAMETER(DB1.COA_BHR_Unused_Sts_3);
 PARAMETER(DB1.COA_BHR_Unused_Nbr);
 PARAMETER(DB1.COA_EMTS_Trans_Id);
 PARAMETER(DB1.COA_EMTS_Return_Code);
 PARAMETER(DB1.COA_BHR_Unused_Date_3);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(DB1.Record_Status);
 PARAMETER(DB1.Change_Date);
 PARAMETER(DB1.Change_Time);
 PARAMETER(DB1.Change_User);
 PARAMETER(DB1.Change_Program);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Chg Date/Time      IF) TYPE(EXCINTFUN)                     AC1523476;
  PARAMETER(DB1.Change_Date);
  PARAMETER(DB1.Change_Time);
  PARAMETER(DB1.Change_User);
  PARAMETER(DB1.Change_Program);
  {
   //?Execute internal function

   // PAR.Change Date = JOB.*Job date
   PAR.Change_Date = JOB.*Job_date;

   // PAR.Change Time = JOB.*Job time
   PAR.Change_Time = JOB.*Job_time;

   // PAR.Change User = JOB.*USER
   PAR.Change_User = JOB.*USER;

   // PAR.Change Program = JOB.*PROGRAM
   PAR.Change_Program = JOB.*PROGRAM;

  }

 }

 ENDIF;

}


