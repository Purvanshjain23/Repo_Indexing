// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PVI6PVR
// ?Date: 14.08.2025 Time: 03:52:16
// ?------------------------------------------------------------------------------------------------

//?USER: Load screen

// LCL.Absorbed Freight Rate CWT = PAR.Absorbed Freight Rate CWT
LCL.Absorbed_Freight_Rate_CWT = PAR.Absorbed_Freight_Rate_CWT;

//?USER: Validate fields

//?Order ABS Freight Rate Cannot Be Zero if Originally Entered.
CASE;

// IF PAR.Absorbed Freight Rate CWT is Entered
IF PAR.Absorbed_Freight_Rate_CWT <> *ZERO;

// AND DTL.Absorbed Freight Rate CWT is EQ Zeros
AND DTL.Absorbed_Freight_Rate_CWT = *ZERO;

// Send error message - 'Absorbed Freight Rate cannot be zero.'
ERROR(USR5072);
MSGPARM(DTL.Absorbed_Freight_Rate_CWT);

QUIT;

ENDIF;

//?ABS Frt Override Reason Cannot be Blank if ABS Frt Rate Changed.
CASE;

// IF DTL.Absorbed Freight Rate CWT NE DTL.Absorbed Freight Rate 1
IF DTL.Absorbed_Freight_Rate_CWT <> DTL.Absorbed_Freight_Rate_1;

// AND DTL.Absorbed Freight Rate 1 is Entered
AND DTL.Absorbed_Freight_Rate_1 <> *ZERO;

// AND PAR.Shipping Method is Prepaid
AND PAR.Shipping_Method = 'PR'/'PT';

// AND DTL.Abs Frt Override Reason is Not Entered
AND DTL.Abs_Frt_Override_Reason = *BLANK;

// Send error message - 'ABS Freight Rate was changed, must select ABS Frt Override Reason.'
ERROR(USR5084);
MSGPARM(DTL.Abs_Frt_Override_Reason);

QUIT;

ENDIF;

//?ABS Frt Override Reason Cannot be Blank if ABS Frt Rate Changed
CASE;

// IF DTL.Absorbed Freight Rate CWT NE PAR.Absorbed Freight Rate CWT
IF DTL.Absorbed_Freight_Rate_CWT <> PAR.Absorbed_Freight_Rate_CWT;

// AND DTL.Absorbed Freight Rate 1 is EQ Zeros
AND DTL.Absorbed_Freight_Rate_1 = *ZERO;

// AND PAR.Shipping Method is Prepaid
AND PAR.Shipping_Method = 'PR'/'PT';

// AND DTL.Abs Frt Override Reason is Not Entered
AND DTL.Abs_Frt_Override_Reason = *BLANK;

// Send error message - 'ABS Freight Rate was changed, must select ABS Frt Override Reason.'
ERROR(USR5084);
MSGPARM(DTL.Abs_Frt_Override_Reason);

QUIT;

ENDIF;

//?USER: User defined action

// PAR.Absorbed Freight Rate CWT = DTL.Absorbed Freight Rate CWT
PAR.Absorbed_Freight_Rate_CWT = DTL.Absorbed_Freight_Rate_CWT;

// PAR.Abs Frt Override Reason = DTL.Abs Frt Override Reason
PAR.Abs_Frt_Override_Reason = DTL.Abs_Frt_Override_Reason;

