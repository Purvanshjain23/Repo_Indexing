// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBORXFR
// ?Date: 14.08.2025 Time: 03:48:42
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Rtv Ship to by DUNS   RT) TYPE(RTVOBJ) FILE(PDNEREP)           AC2095007;
PARAMETER(PAR.EDI_Cust_Duns_Number);
PARAMETER(PAR.CIR_UM_Base_Price);
PARAMETER(PAR.CIR_Resource_No);
PARAMETER(PAR.Item_Code);
{
 //?USER: Process Data record

 //?Determine if the Customer number is AR or ST
 EXECUTE FUNCTION(RTV CustAR UPD EDI XR RT) TYPE(RTVOBJ) FILE(CABBREP)           AC2095591;
 PARAMETER(DB1.Ship_To_Customer);
 PARAMETER(PAR.ITEM_NUMBER);
 PARAMETER(PAR.CIR_Resource_No);
 PARAMETER(PAR.POD_Basis_Unit_Prc_Cde);
 {
  //?USER: Process Data record

  CASE;

  // IF DB1.Ship To Customer NE DB1.A/R Customer Number
  IF DB1.Ship_To_Customer <> DB1.AR_Customer_Number;

  EXECUTE FUNCTION(RTV/UPD CIR UM BPrc   RT) TYPE(RTVOBJ) FILE(POBIREP)           AC2094746;
  PARAMETER(DB1.Ship_To_Customer);
  PARAMETER(PAR.ITEM_NUMBER);
  PARAMETER(PAR.CIR_Resource_No);
  PARAMETER(PAR.POD_Basis_Unit_Prc_Cde);
  {
   //?USER: Processing if Data record not found

   EXECUTE FUNCTION(Crt Cust Item Ref     CR) TYPE(CRTOBJ) FILE(POBIREP)           AC1631562;
   PARAMETER(PAR.Ship_To_Customer);
   PARAMETER(PAR.Item_Code);
   PARAMETER(PAR.CIR_Resource_No);
   PARAMETER(*BLANK);
   PARAMETER(*BLANK);
   PARAMETER(*BLANK);
   PARAMETER(*BLANK);
   PARAMETER(LCL.CIR_Unused_Status_1);
   PARAMETER(LCL.CIR_Unused_Status_2);
   PARAMETER('PI');
   PARAMETER(PAR.CIR_UM_Base_Price);
   PARAMETER(LCL.CIR_Unused_Status_5);
   PARAMETER(LCL.Record_Status);
   PARAMETER(*ZERO);
   PARAMETER(*ZERO);
   PARAMETER(*BLANK);
   PARAMETER(*BLANK);
   PARAMETER(*ZERO);
   PARAMETER(*ZERO);
   PARAMETER(*BLANK);
   PARAMETER(*BLANK);
   {
    //?USER: Processing before Data update

    EXECUTE FUNCTION(Set Crt Date/Time      IF) TYPE(EXCINTFUN)                     AC1523477;
    PARAMETER(DB1.Record_Status);
    PARAMETER(DB1.Create_Date);
    PARAMETER(DB1.Create_Time);
    PARAMETER(DB1.Create_User);
    PARAMETER(DB1.Create_Program);
    PARAMETER(DB1.Change_Date);
    PARAMETER(DB1.Change_Time);
    PARAMETER(DB1.Change_User);
    PARAMETER(DB1.Change_Program);
    {
     //?Execute internal function

     //?*** Set RECORD STATUS field. ***
     // PAR.Record Status = CND.Active
     PAR.Record_Status = 'A';

     //?*** Set CREATE fields. ***
     // PAR.Create Date = JOB.*Job date
     PAR.Create_Date = JOB.*Job_date;

     // PAR.Create Time = JOB.*Job time
     PAR.Create_Time = JOB.*Job_time;

     // PAR.Create User = JOB.*USER
     PAR.Create_User = JOB.*USER;

     // PAR.Create Program = JOB.*PROGRAM
     PAR.Create_Program = JOB.*PROGRAM;

     //?*** Set CHANGE fields. ***
     // PAR.Change Date = CON.*ZERO
     PAR.Change_Date = *ZERO;

     // PAR.Change Time = CON.*ZERO
     PAR.Change_Time = *ZERO;

     // PAR.Change User = CON.*BLANK
     PAR.Change_User = *BLANK;

     // PAR.Change Program = CON.*BLANK
     PAR.Change_Program = *BLANK;

    }

   }

   //?USER: Process Data record

   CASE;

   // IF DB1.CIR UM Base Price NE PAR.CIR UM Base Price
   IF DB1.CIR_UM_Base_Price <> PAR.CIR_UM_Base_Price;

   EXECUTE FUNCTION(CHG Cust Itm Ref Sts  CH) TYPE(CHGOBJ) FILE(POBIREP)           AC2041244;
   PARAMETER(DB1.Ship_To_Customer);
   PARAMETER(DB1.Item_Code);
   PARAMETER(DB1.CIR_Resource_No);
   PARAMETER(DB1.CIR_Item_No);
   PARAMETER(DB1.CIR_Description_Line_1);
   PARAMETER(DB1.CIR_Description_Line_2);
   PARAMETER(DB1.CIR_Description_Line_3);
   PARAMETER(DB1.CIR_Unused_Status_1);
   PARAMETER(DB1.CIR_Unused_Status_2);
   PARAMETER(DB1.CIR_Resource_No_Type);
   PARAMETER(PAR.CIR_UM_Base_Price);
   PARAMETER(DB1.CIR_Unused_Status_5);
   PARAMETER(DB1.Record_Status);
   PARAMETER(DB1.Create_Date);
   PARAMETER(DB1.Create_Time);
   PARAMETER(DB1.Create_User);
   PARAMETER(DB1.Create_Program);
   PARAMETER(DB1.Change_Date);
   PARAMETER(DB1.Change_Time);
   PARAMETER(DB1.Change_User);
   PARAMETER(DB1.Change_Program);
   {
    //?USER: Processing before Data update

    EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
    PARAMETER(DB1.Change_Time);
    PARAMETER(DB1.Change_User);
    PARAMETER(DB1.Change_Program);
    PARAMETER(DB1.Change_Date);
    {
     //?Execute internal function

     // PAR.Job Time = JOB.*Job time
     PAR.Job_Time = JOB.*Job_time;

     // PAR.User Id = JOB.*USER
     PAR.User_Id = JOB.*USER;

     // PAR.Job Name = JOB.*PROGRAM
     PAR.Job_Name = JOB.*PROGRAM;

     // PAR.Job Date = JOB.*Job date
     PAR.Job_Date = JOB.*Job_date;

    }

   }

   ENDIF;

  }

  QUIT;

  ENDIF;

 }

}


