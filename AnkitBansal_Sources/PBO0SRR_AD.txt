// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBO0SRR
// ?Date: 14.08.2025 Time: 03:48:46
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?Select items not in the DP Product
// PGM.*Scan limit = CND.3000
PGM.*Scan_limit = 3000;

//?USER: Load subfile record from DBF record

//?E13079 - Allow Item Type = WIP to be used with DP Product
//?Previous Code
CASE;

// IF DB1.Item Type Code is Finished Good
IF DB1.Item_Type_Code = 'FG';

// AND DB1.Record Status is Active
AND DB1.Record_Status = 'A';

EXECUTE FUNCTION(Val DP Product        RT) TYPE(RTVOBJ) FILE(PBBNREP)           AC2096260;
PARAMETER(DB1.Item_Code);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

}


CASE;

// IF PGM.*Return code is *Record does not exist
IF PGM.*Return_code = 'Y2U0005';

// PGM.*Record selected = CND.*YES
PGM.*Record_selected = 'Y';

//?DO2642 DN 06/01/22-Replaced RTVOBJ.
EXECUTE FUNCTION(Rtv IDE Forecast in DP RT) TYPE(RTVOBJ) FILE(PBBTREP)          AC2205739;
PARAMETER(DB1.Item_Code);
PARAMETER(RCD.IDE_Forecast_in_DP);

CASE;

// IF RCD.IDE Forecast in DP is No
IF RCD.IDE_Forecast_in_DP = 'N';

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

// IF *OTHERWISE
IF *OTHERWISE;

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

//?Previous Code
// IF *OTHERWISE
IF *OTHERWISE;

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

CASE;

// IF DB1.Item Type Code is FG/WP
IF DB1.Item_Type_Code = 'FG'/'WP';

// AND DB1.Record Status is Active
AND DB1.Record_Status = 'A';

EXECUTE FUNCTION(Val DP Product        RT) TYPE(RTVOBJ) FILE(PBBNREP)           AC2096260;
PARAMETER(DB1.Item_Code);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

}


CASE;

// IF PGM.*Return code is *Record does not exist
IF PGM.*Return_code = 'Y2U0005';

//?DO2642 DN 06/01/22-Replaced RTVOBJ.
EXECUTE FUNCTION(Rtv IDE Forecast in DP RT) TYPE(RTVOBJ) FILE(PBBTREP)          AC2205739;
PARAMETER(DB1.Item_Code);
PARAMETER(RCD.IDE_Forecast_in_DP);

// PGM.*Record selected = CND.*YES
PGM.*Record_selected = 'Y';

// IF *OTHERWISE
IF *OTHERWISE;

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

// IF *OTHERWISE
IF *OTHERWISE;

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

