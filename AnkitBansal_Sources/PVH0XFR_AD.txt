// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PVH0XFR
// ?Date: 14.08.2025 Time: 03:52:15
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?**************************************************************************
//?** PR1 Parms Represent Old Record Fields (Will be blank for Insert).
//?** PR2 Parms Represent New Record Fields (Will be blank for Delete).
//?**************************************************************************
//?Trigger Processing for Insert Event.
CASE;

// IF PR3.TRG Database Event is Insert
IF PR3.TRG_Database_Event = '1';

EXECUTE FUNCTION(Crt Cust Accr Item TRG CR) TYPE(CRTOBJ) FILE(PVCMCPP)          AC2236172;
PARAMETER(PR2.Ship_To_Customer);
PARAMETER(PR2.Accrual_Code);
PARAMETER(PR2.CAH_Sequence_No);
PARAMETER(PR2.Item_Code);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.CAI_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


//?If Record Already Exist.
CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Date);
PARAMETER(LCL.Current_System_Time);

// WRK.Current System Time = LCL.Current System Time
WRK.Current_System_Time = LCL.Current_System_Time;

//?S17018 DN 12/14/20-Loop Until System Time Changes.
// DOW LCL.Current System Time EQ WRK.Current System Time
DOW LCL.Current_System_Time = WRK.Current_System_Time;

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Date);
PARAMETER(WRK.Current_System_Time);

ENDDO;

EXECUTE FUNCTION(Crt Cust Accr Item TRG CR) TYPE(CRTOBJ) FILE(PVCMCPP)          AC2236172;
PARAMETER(PR2.Ship_To_Customer);
PARAMETER(PR2.Accrual_Code);
PARAMETER(PR2.CAH_Sequence_No);
PARAMETER(PR2.Item_Code);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.CAI_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

ENDIF;

//?Trigger Processing for Update Event.
CASE;

// IF PR3.TRG Database Event is Update
IF PR3.TRG_Database_Event = '3';

//?Update If Any Non-Key Fields Have Changed.
CASE;

// IF PR1.Accrual Rate NE PR2.Accrual Rate
IF PR1.Accrual_Rate <> PR2.Accrual_Rate;

// OR PR1.Accrual Rate Type NE PR2.Accrual Rate Type
OR PR1.Accrual_Rate_Type <> PR2.Accrual_Rate_Type;

// OR PR1.EDI Status 1 NE PR2.EDI Status 1
OR PR1.EDI_Status_1 <> PR2.EDI_Status_1;

// OR PR1.EDI Status 2 NE PR2.EDI Status 2
OR PR1.EDI_Status_2 <> PR2.EDI_Status_2;

// OR PR1.EDI Status 3 NE PR2.EDI Status 3
OR PR1.EDI_Status_3 <> PR2.EDI_Status_3;

EXECUTE FUNCTION(Crt Cust Accr Item TRG CR) TYPE(CRTOBJ) FILE(PVCMCPP)          AC2236172;
PARAMETER(PR2.Ship_To_Customer);
PARAMETER(PR2.Accrual_Code);
PARAMETER(PR2.CAH_Sequence_No);
PARAMETER(PR2.Item_Code);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.CAI_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


//?If Record Already Exist.
CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Date);
PARAMETER(LCL.Current_System_Time);

// WRK.Current System Time = LCL.Current System Time
WRK.Current_System_Time = LCL.Current_System_Time;

//?S17018 DN 12/14/20-Loop Until System Time Changes.
// DOW LCL.Current System Time EQ WRK.Current System Time
DOW LCL.Current_System_Time = WRK.Current_System_Time;

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Date);
PARAMETER(WRK.Current_System_Time);

ENDDO;

EXECUTE FUNCTION(Crt Cust Accr Item TRG CR) TYPE(CRTOBJ) FILE(PVCMCPP)          AC2236172;
PARAMETER(PR2.Ship_To_Customer);
PARAMETER(PR2.Accrual_Code);
PARAMETER(PR2.CAH_Sequence_No);
PARAMETER(PR2.Item_Code);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.CAI_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

ENDIF;

ENDIF;

//?Trigger Processing for Delete Event.
CASE;

// IF PR3.TRG Database Event is Delete
IF PR3.TRG_Database_Event = '2';

EXECUTE FUNCTION(Crt Cust Accr Item TRG CR) TYPE(CRTOBJ) FILE(PVCMCPP)          AC2236172;
PARAMETER(PR1.Ship_To_Customer);
PARAMETER(PR1.Accrual_Code);
PARAMETER(PR1.CAH_Sequence_No);
PARAMETER(PR1.Item_Code);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.CAI_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

