// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PME2XFR
// ?Date: 14.08.2025 Time: 03:44:53
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(BLD Prod Cost rcds    RT) TYPE(RTVOBJ) FILE(PRODCOST)          AC1922611;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Effective_Date);
{
 //?USER: Process Data record

 // LCL.Item Code = CVTVAR(DB1.PRODUCT#)
 LCL.Item_Code = CVTVAR(DB1.PRODUCT#);

 EXECUTE FUNCTION(Rtv DPM Cost Info     RT) TYPE(RTVOBJ) FILE(CABZREP)           AC2007086;
 PARAMETER(PAR.Company_Number);
 PARAMETER(LCL.Item_Code);
 PARAMETER(LCL.UOM_Pricing);
 PARAMETER(LCL.Unit_Weight);
 PARAMETER(LCL.Item_Structure_Class_Code);
 PARAMETER(LCL.Item_Structure_Group_Code);
 PARAMETER(LCL.Item_Structure_Type_Code);
 PARAMETER(LCL.Credit_Item_Status);
 PARAMETER(LCL.FP_Std_Green_Weight);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 CASE;

 // IF LCL.Credit Item Status is Not Yes
 IF LCL.Credit_Item_Status = *BLANK/'N';

 //?CALC: Costs
 CASE;

 // IF LCL.U/M - Pricing is Cases
 IF LCL.UOM_Pricing = 'CS';

 // AND LCL.FP Std Green Weight is Entered
 AND LCL.FP_Std_Green_Weight <> *ZERO;

 // Std Packaging Cost/CWT
 PAR.Std_Packaging_Cost_CWT = ( ( ( DB1.PACKAGING_COST / 100 'H' )
 * LCL.FP_Std_Green_Weight 'H' ) / LCL.Unit_Weight 'H' ) * 100 'H';

 // Std Other Cost/CWT
 PAR.Std_Other_Cost_CWT = ( ( ( DB1.OVERHEAD_COST / 100 'H' ) * LCL.FP_Std_Green_Weight
 'H' ) / LCL.Unit_Weight 'H' ) * 100 'H';

 // Std Inc. Labor Cost/Cwt
 PAR.Std_Inc_Labor_Cost_CWT = ( ( ( DB1.LABOR_COST / 100 'H' ) * LCL.FP_Std_Green_Weight
 'H' ) / LCL.Unit_Weight 'H' ) * 100 'H';

 // Std Ingredient Cost/CWT
 PAR.Std_Ingredient_Cost_CWT = ( ( ( DB1.CURE_COST / 100 'H' ) * LCL.FP_Std_Green_Weight
 'H' ) / LCL.Unit_Weight 'H' ) * 100 'H';

 // Std Meat Cost/CWT
 PAR.Std_Meat_Cost_CWT = ( ( ( DB1.MATERIAL_COST / 100 'H' ) * LCL.FP_Std_Green_Weight
 'H' ) / LCL.Unit_Weight 'H' ) * 100 'H';

 //?CALC: Costs
 // IF *OTHERWISE
 IF *OTHERWISE;

 // PAR.Std Packaging Cost/CWT = DB1.PACKAGING COST
 PAR.Std_Packaging_Cost_CWT = DB1.PACKAGING_COST;

 // PAR.Std Other Cost/CWT = DB1.OVERHEAD COST
 PAR.Std_Other_Cost_CWT = DB1.OVERHEAD_COST;

 // PAR.Std Inc. Labor Cost/Cwt = DB1.LABOR COST
 PAR.Std_Inc_Labor_Cost_CWT = DB1.LABOR_COST;

 // PAR.Std Ingredient Cost/CWT = DB1.CURE COST
 PAR.Std_Ingredient_Cost_CWT = DB1.CURE_COST;

 // PAR.Std Meat Cost/CWT = DB1.MATERIAL COST
 PAR.Std_Meat_Cost_CWT = DB1.MATERIAL_COST;

 ENDIF;

 // Std Total Labor Cost/CWT
 PAR.Std_Total_Labor_Cost_CWT = ( ( ( PAR.Std_Packaging_Cost_CWT + PAR.Std_Other_Cost_CWT )
 + PAR.Std_Inc_Labor_Cost_CWT ) + PAR.Std_Ingredient_Cost_CWT ) + PAR.Std_Meat_Cost_CWT;

 EXECUTE FUNCTION(Crt Item Std CostOnly CO) TYPE(CRTOBJ) FILE(POAXCPP)           AC1916909;
 PARAMETER(PAR.Company_Number);
 PARAMETER(LCL.Item_Code);
 PARAMETER(PAR.Effective_Date);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(PAR.Std_Packaging_Cost_CWT);
 PARAMETER(PAR.Std_Other_Cost_CWT);
 PARAMETER(PAR.Std_Inc_Labor_Cost_CWT);
 PARAMETER(PAR.Std_Ingredient_Cost_CWT);
 PARAMETER(PAR.Std_Meat_Cost_CWT);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(PAR.Std_Total_Labor_Cost_CWT);
 PARAMETER(*ZERO);
 PARAMETER(LCL.FP_Std_Green_Weight);
 PARAMETER(LCL.EDI_Status_1);
 PARAMETER(LCL.EDI_Status_2);
 PARAMETER(LCL.EDI_Status_3);
 PARAMETER(LCL.Record_Status);
 PARAMETER(JOB.*Job_time);
 PARAMETER(JOB.*USER);
 PARAMETER(JOB.*JOB);
 PARAMETER(JOB.*Job_date);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(SET Record Stamp CRTOB IF) TYPE(EXCINTFUN)                     AC1282865;
  PARAMETER(DB1.Record_Status);
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Record Status = CND.Active
   PAR.Record_Status = 'A';

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 ENDIF;

}


