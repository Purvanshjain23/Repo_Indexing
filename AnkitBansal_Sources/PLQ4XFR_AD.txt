// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLQ4XFR
// ?Date: 14.08.2025 Time: 02:55:15
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications and Comments
DO;

//?P12827 JJH 04/04/18 - STF Gate Entry
//?- Recompiled with no logic changes so we can use STRISDB
//?H16853 ISE 11/02/2020 CHANGE BUY ORDER NUMBER FIELD LENGTH FROM 5 TO 7
ENDDO;

EXECUTE FUNCTION(Val DelTrck RDocRules RT) TYPE(RTVOBJ) FILE(PLAFCPP)           AB1305144;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.BOH_Buy_Order_Number);
PARAMETER(PAR.BOL_Load_Number);
PARAMETER(PAR.DSH_Kill_Date);
PARAMETER(PAR.*Return_code);
{
 //?USER: Processing if Data record not found

 // PAR.*Return code = CND.*Record does not exist
 PAR.*Return_code = 'Y2U0005';

 QUIT;

 //?USER: Process Data record

 // PAR.*Return code = CND.*Normal
 PAR.*Return_code = *BLANK;

 // Call program Rtv Company Values    XF.
 CALL PROGRAM(Rtv Company Values    XF) ('PDGKXFR');
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER('HPETRKRDK');
 PARAMETER(WRK.System_Value_Alpha_USR);

 CASE;

 // IF WRK.System Value Alpha    USR is No
 IF WRK.System_Value_Alpha_USR = 'N';

 // PAR.*Return code = CND.RecDoc Date/Tm Error
 PAR.*Return_code = 'R';

 // IF *OTHERWISE
 IF *OTHERWISE;

 //?Arrival Date and time   required
 CASE;

 // IF DB1.DT Arrive @ Plant Date is Entered
 IF DB1.DT_Arrive_@_Plant_Date <> *ZERO;

 // AND DB1.DT Arrive @ Plant Time is Entered
 AND DB1.DT_Arrive_@_Plant_Time > *ZERO;

 //?Arrival Date and time   required
 // IF *OTHERWISE
 IF *OTHERWISE;

 // PAR.*Return code = CND.RecDoc Date/Tm Error
 PAR.*Return_code = 'R';

 ENDIF;

 //?Receiving to Doc    should be empty
 CASE;

 // IF DB1.DT To Recv Dock Date is Not Entered
 IF DB1.DT_To_Recv_Dock_Date = *ZERO;

 // AND DB1.DT To Recv Dock Time is Not Entered
 AND DB1.DT_To_Recv_Dock_Time = *ZERO;

 //?Receiving to Doc    should be empty
 // IF *OTHERWISE
 IF *OTHERWISE;

 // PAR.*Return code = CND.RecDoc Date/Tm Already En
 PAR.*Return_code = 'E';

 ENDIF;

 ENDIF;

 QUIT;

}


EXECUTE FUNCTION(Rtv ShipHd/Spr/RecHd  RT) TYPE(RTVOBJ) FILE(PKAXCPP)           AB1305145;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.BOH_Buy_Order_Number);
PARAMETER(PAR.BOL_Load_Number);
PARAMETER(PAR.BOL_Head_Received);
PARAMETER(PAR.BOL_Truck_Scale_Weigh_Sts);
PARAMETER(NLL.BOL_Shipped_Head);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


