// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDR4PVR
// ?Date: 14.08.2025 Time: 03:32:53
// ?------------------------------------------------------------------------------------------------

//?USER: Load screen

// DTL.Post to G/L Date = JOB.*Job date
DTL.Post_to_G_L_Date = JOB.*Job_date;

EXECUTE FUNCTION(RTV Company Name       RT) TYPE(RTVOBJ) FILE(CAABREP)          AC1255767;
PARAMETER(PAR.Company_Number);
PARAMETER(DTL.Company_Name);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


//?CALC: Screen function fields

EXECUTE FUNCTION(RTV Company Name       RT) TYPE(RTVOBJ) FILE(CAABREP)          AC1255767;
PARAMETER(DTL.Company_Number);
PARAMETER(DTL.Company_Name);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


//?USER: User defined action

//?If date entered, process
CASE;

// IF DTL.Post to G/L Date NE WRK.ZERO
IF DTL.Post_to_G_L_Date <> WRK.ZERO;

// Call program ZzzItem Substitutions  DF.
CALL PROGRAM(ZzzItem Substitutions  DF) ('PDR3DFR');
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Item_Code);
PARAMETER(PAR.Warehouse_Code);
PARAMETER(DTL.Post_to_G_L_Date);
PARAMETER(PAR.Chilling_Time_USR);

ENDIF;

