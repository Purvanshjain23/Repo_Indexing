// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKW7PVR
// ?Date: 14.08.2025 Time: 02:50:43
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?MODIFICATIONS
//?11/02/2020 ISE H16853 - CHANGE BUY ORDER NUMBER FIELD LENGTH FROM 5 TO 7
//?USER: Validate fields

EXECUTE FUNCTION(Rtv Tatts/Bo Load     RT) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1135414;
PARAMETER(DTL.Company_Number_USR);
PARAMETER(PAR.BOH_Buy_Order_Number);
PARAMETER(PAR.BOL_Load_Number);
PARAMETER(DTL.Tattoo_Number_USR);
PARAMETER(DTL.Kill_Date_Usr);
PARAMETER(PAR.TH_Sex);
PARAMETER(*MISSING);
PARAMETER(PAR.TH_Hog_Class_Type);
PARAMETER(PAR.THP_Process_Code);
PARAMETER(PAR.HC_Class_Code);
PARAMETER(WRK.Return_Code_USR);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 // PAR.Return Code USR = CND.*Record does not exist
 PAR.Return_Code_USR = 'Y2U0005';

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

 QUIT;

}


CASE;

// IF PAR.BOH Buy Order Number EQ WRK.Zero USR
IF PAR.BOH_Buy_Order_Number = WRK.Zero_USR;

// Send error message - 'Buy Order Load not found.'
ERROR(PRK0051);

ENDIF;

//?USER: User defined action

EXECUTE FUNCTION(Tst Cpy Eval Trans    RT) TYPE(RTVOBJ) FILE(PKBVCPP)           AB1165194;
PARAMETER(DTL.ET_Company_Number);
PARAMETER(DTL.ET_Tattoo_Number);
PARAMETER(DTL.ET_Kill_Date);
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.BOH_Buy_Order_Number);
PARAMETER(PAR.BOL_Load_Number);
PARAMETER(DTL.Company_Number_USR);
PARAMETER(DTL.Kill_Date_Usr);
PARAMETER(DTL.Tattoo_Number_USR);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Crt Eval Trans Cpy) TYPE(CRTOBJ) FILE(PKBVCPP)                 AB1164776;
 PARAMETER(PAR.Company_Number_USR);
 PARAMETER(PAR.Kill_Date_Usr);
 PARAMETER(DB1.ET_Scale_Sequence_Number);
 PARAMETER(DB1.ET_Carcass_Number);
 PARAMETER(DB1.ET_Carcass_Number_Insert);
 PARAMETER(PAR.Tattoo_Number_USR);
 PARAMETER(DB1.ET_Lot);
 PARAMETER(DB1.ET_Shift);
 PARAMETER(DB1.ET_Hot_Wgt);
 PARAMETER(DB1.ET_Backfat_Thickness_Inch);
 PARAMETER(DB1.ET_Loin_Eye_Depth_Inches);
 PARAMETER(DB1.ET_Lean_Percent_NPPC);
 PARAMETER(DB1.ET_Backfat_Thickness_MM);
 PARAMETER(DB1.ET_Loineye_Depth_MM);
 PARAMETER(DB1.ET_Light_Reflectance_MM);
 PARAMETER(DB1.ET_Lean_Percent_FOM);
 PARAMETER(DB1.ET_Light_Reflectance);
 PARAMETER(DB1.ET_Trim_Area);
 PARAMETER(DB1.ET_Carcass_Sex);
 PARAMETER(DB1.ET_Error_Sts);
 PARAMETER(DB1.ET_Record_Add_Del_Sts);
 PARAMETER(DB1.ET_Record_Created_W_Avg);
 PARAMETER(DB1.ET_Record_Created_Status);
 PARAMETER(DB1.ET_User_Error_Override);
 PARAMETER(DB1.ET_Adjust_Add_Type);
 PARAMETER(DB1.ET_Broken_Back_Sts);
 PARAMETER(DB1.ET_Unused_Sts_2);
 PARAMETER(DB1.ET_Adjust_Add_Source);
 PARAMETER(DB1.ET_Unused_Sts_4);
 PARAMETER(DB1.ET_Unused_Sts_5);
 PARAMETER(PAR.Company_Number_USR);
 PARAMETER(PAR.BOH_Buy_Order_Number);
 PARAMETER(PAR.BOL_Load_Number);
 PARAMETER(PAR.Tattoo_Number_USR);
 PARAMETER(PAR.Kill_Date_Usr);
 PARAMETER(DB1.RS_User_Changed);
 PARAMETER(DB1.RS_Date_Changed);
 PARAMETER(DB1.RS_Time_Changed);
 PARAMETER(DB1.RS_Record_Status);
 PARAMETER(DB1.RS_Job);
 PARAMETER(DB1.RS_Program);
 PARAMETER(DB1.RS_User_Added);
 PARAMETER(DB1.RS_Date_Added);
 PARAMETER(DB1.RS_Time_Added);
 PARAMETER(DB1.RU_Date);
 PARAMETER(DB1.RU_Time);
}


