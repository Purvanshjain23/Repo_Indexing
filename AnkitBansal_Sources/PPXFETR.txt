// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PPXFETR
// ?Date: 14.08.2025 Time: 03:42:11
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

EXECUTE FUNCTION(VAL Rtv and Center Hdg IF) TYPE(EXCINTFUN)                     AC1258539;
PARAMETER('OMS');

EXECUTE FUNCTION(Rtv Lang Xlate Exist?  RT) TYPE(RTVOBJ) FILE(PDMSREP)          AC2165749;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Order_Number);
PARAMETER(PAR.ED_Export_Document_Type);
PARAMETER(PAR.Country_Code);
PARAMETER(LCL.Yes_No_Selection_USR);

//?Language Xlate Desc Exist, Then Display Subfile Fold Line.
CASE;

// IF LCL.Yes/No Selection      USR is Yes
IF LCL.Yes_No_Selection_USR = 'Y';

// CTL.*Subfile mode = CND.Folded
CTL.*Subfile_mode = 0;

//?Language Xlate Desc Exist, Then Display Subfile Fold Line.
// IF *OTHERWISE
IF *OTHERWISE;

// CTL.*Subfile mode = CND.Truncated
CTL.*Subfile_mode = 1;

ENDIF;

//?USER: Load existing header

//?RMC 3/20/06 allow input on plant no dtl
CASE;

// IF CTL.ED Plant Number Dtl EQ WRK.Blank for 4           USR
IF CTL.ED_Plant_Number_Dtl = WRK.Blank_for_4_USR;

EXECUTE FUNCTION(RTV Alpha Value        RT) TYPE(RTVOBJ) FILE(PDKMREP)          AC1381513;
PARAMETER(DB1.Company_Number);
PARAMETER('PLTESTNO');
PARAMETER(CTL.ED_Plant_Number_Dtl);

ENDIF;

EXECUTE FUNCTION(RTV Header Status      RT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC1231329;
PARAMETER(DB1.Company_Number);
PARAMETER(DB1.Order_Number);
PARAMETER(LCL.Header_Status);

CASE;

// IF LCL.Header Status is Complete
IF LCL.Header_Status = 'C';

//?allow input on weight and qty
ENDIF;

//?USER: Initialize subfile record (old record)

//?RMC 3/20/06 new
CASE;

// IF CTL.ED Plant Number Dtl NE DB2.ED Plant Number Dtl
IF CTL.ED_Plant_Number_Dtl <> DB2.ED_Plant_Number_Dtl;

CASE;

// IF DB2.ED Plant Number Dtl NE WRK.Blank for 4           USR
IF DB2.ED_Plant_Number_Dtl <> WRK.Blank_for_4_USR;

// CTL.ED Plant Number Dtl = DB2.ED Plant Number Dtl
CTL.ED_Plant_Number_Dtl = DB2.ED_Plant_Number_Dtl;

ENDIF;

ENDIF;

//?USER: Validate subfile record fields

//?F4=Prompt                           R13944 DN 12/18/18-Added F4.
CASE;

// IF CTL.*CMD key is *Prompt
IF CTL.*CMD_key = '04';

// AND PGM.*Cursor field <IS> RCD.ED Language Xlate Desc
AND PGM.*Cursor_field = RCD.ED_Language_Xlate_Desc;

//?DO2642 DN 06/02/22-Added ED Language Xlate Desc 2.
// Call program Zzz Item Translated DscSR.
CALL PROGRAM(Zzz Item Translated DscSR) ('PULISRR');
PARAMETER(RCD.ED_Item_Code);
PARAMETER(CTL.ED_Xlate_Desc_to_Country);
PARAMETER(RCD.ED_Language_Xlate_Desc_2);
PARAMETER(RCD.ED_Language_Xlate_Desc);

ENDIF;

//?R13944 DN 12/18/18-Ensure Language Xlate Desc is Required.
CASE;

// IF NOT CTL.ED Xlate Desc to Country is Not Entered
IF ! CTL.ED_Xlate_Desc_to_Country = *BLANK;

CASE;

// IF RCD.ED Language Xlate Desc is Not Entered
IF RCD.ED_Language_Xlate_Desc = *BLANK;

// Send error message - '&1'
ERROR(USR5085);
MSGPARM('Translated Desc required.');
MSGPARM(RCD.ED_Language_Xlate_Desc);

ENDIF;

ENDIF;

//?USER: Change header DBF record

EXECUTE FUNCTION(Chg All Order Hdrs     IF) TYPE(EXCINTFUN) FILE(PDMRREP)       AC1538305;
PARAMETER(CTL.Company_Number);
PARAMETER(CTL.Order_Number);
PARAMETER(CTL.ED_Export_Document_Type);
PARAMETER(CTL.Country_Code);
PARAMETER(CTL.ED_Area_Office);
PARAMETER(CTL.ED_Destination);
PARAMETER(CTL.ED_Consignor_Name);
PARAMETER(CTL.ED_Consignor_Addr_1);
PARAMETER(CTL.ED_Consignor_Addr_2);
PARAMETER(CTL.ED_Consignor_Addr_3);
PARAMETER(CTL.ED_Consignor_Addr_4);
PARAMETER(CTL.ED_Consignor_State);
PARAMETER(CTL.ED_Consignor_Postal);
PARAMETER(CTL.ED_Consignor_Country_Code);
PARAMETER(CTL.ED_Consignee_Name);
PARAMETER(CTL.ED_Consignee_Addr_1);
PARAMETER(CTL.ED_Consignee_Addr_2);
PARAMETER(CTL.ED_Consignee_Addr_3);
PARAMETER(CTL.ED_Consignee_Addr_4);
PARAMETER(CTL.ED_Consignee_State);
PARAMETER(CTL.ED_Consignee_Postal);
PARAMETER(CTL.ED_Consignee_Country_Code);
PARAMETER(CTL.ED_Plant_Location_City);
PARAMETER(CTL.ED_Plant_Location_State);
PARAMETER(CTL.ED_Plant_Number);
PARAMETER(CTL.ED_Processing_Plant_Sts);
PARAMETER(CTL.ED_Attachment_Subtype);
PARAMETER(CTL.ED_Attachment_Type_Sts);
PARAMETER(CTL.ED_Xlate_Desc_to_Country);
PARAMETER(CTL.ED_Unmarked_Txt);
PARAMETER(CTL.ED_Shipping_Marks_Txt);
PARAMETER(CTL.ED_Date_of_Slaughter);
PARAMETER(CTL.ED_Place_of_Slaughter_Txt);
PARAMETER(CTL.ED_Date_of_Processing);
PARAMETER(CTL.ED_Place_of_processing_Tx);
PARAMETER(CTL.ED_Continue_Comment_Txt);
PARAMETER(CTL.ED_Remark_Constant_1);
PARAMETER(CTL.ED_Remark_Constant_2);
PARAMETER(CTL.ED_Remark_Constant_3);
PARAMETER(CTL.ED_Remark_Constant_4);
PARAMETER(CTL.ED_Remark_Constant_5);
PARAMETER(CTL.ED_Remark_Constant_7);
PARAMETER(CTL.ED_Remark_Constant_8);
PARAMETER(CTL.ED_Certify_that_the_meat);
PARAMETER(CTL.ED_Inspector_Name);
PARAMETER(CTL.ED_Origin_Country);
PARAMETER(CTL.ED_Port_of_Loading);
PARAMETER(CTL.ED_Transportion);
PARAMETER(CTL.ED_Seal_Number_1);
PARAMETER(CTL.ED_Seal_Number_2);
PARAMETER(CTL.ED_Can_Import_Cntrl_Nm);
PARAMETER(CTL.ED_Can_Import_Cntrl_Ad_1);
PARAMETER(CTL.ED_Can_Import_Cntrl_Ad_2);
PARAMETER(CTL.ED_Can_Import_Cntrl_Fax);
PARAMETER(CTL.ED_Can_Import_Cntrl_Phne);
PARAMETER(CTL.ED_Seaboard_Plant_Fax);
PARAMETER(CTL.ED_USDA_Cert_Nbr_US);
PARAMETER(CTL.ED_USDA_Cert_Nbr_CA);
PARAMETER(CTL.ED_Can_Port_of_Entry);
PARAMETER(CTL.ED_Can_Reinsp_Est_Nbr);
PARAMETER(CTL.ED_Can_Reinsp_Est_Name);
PARAMETER(CTL.ED_Can_Reinsp_Est_City);
PARAMETER(CTL.ED_Herm_Sealed_Cntr_Sts);
PARAMETER(CTL.ED_Herm_Sealed_Cntr_Type);
PARAMETER(CTL.ED_Herm_Sealed_Cntr_p_Crt);
PARAMETER(CTL.ED_Whole_Bird_Sts);
PARAMETER(CTL.ED_Marked_Sts);
PARAMETER(CTL.ED_Tamper_Evident_Sts);
PARAMETER(CTL.ED_Plant_Contact_Name);
PARAMETER(CTL.ED_Plant_Contact_Phone);
PARAMETER(CTL.ED_Modified_Text);
PARAMETER(CTL.ED_Issued_Crt_for_Exp_Txt);
PARAMETER(CTL.ED_Species);
PARAMETER(CTL.ED_Slaughter_Plant_Name);
PARAMETER(CTL.ED_Slaughter_Plant_Addr_1);
PARAMETER(CTL.ED_Slaughter_Plant_Addr_2);
PARAMETER(CTL.ED_Packaging_Plant_Name);
PARAMETER(CTL.ED_Packaging_Plant_Addr_1);
PARAMETER(CTL.ED_Packaging_Plant_Addr_2);
PARAMETER(CTL.ED_Manufact_Plant_Name);
PARAMETER(CTL.ED_Manufact_Plant_Addr_1);
PARAMETER(CTL.ED_Manufact_Plant_Addr_2);
PARAMETER(CTL.ED_USDA_Name_1);
PARAMETER(CTL.ED_USDA_Name_2);
PARAMETER(CTL.ED_USDA_Name_3);
PARAMETER(CTL.ED_Title_of_Official);
PARAMETER(CTL.ED_Letter_of_Credit_Nbr);
PARAMETER(CTL.ED_Unused_prd_mo_yr);
PARAMETER(CTL.ED_Nbr_of_prods_on_1st_pg);
PARAMETER(CTL.ED_Importer_Name);
PARAMETER(CTL.ED_Importer_Addr_1);
PARAMETER(CTL.ED_Importer_Addr_2);
PARAMETER(CTL.ED_Purchaser_Name);
PARAMETER(CTL.ED_Purchaser_Addr_1);
PARAMETER(CTL.ED_Purchaser_Addr_2);
PARAMETER(CTL.ED_Place_Drct_Shpmnt_Nm);
PARAMETER(CTL.ED_Place_Drct_Shpmnt_Ad_1);
PARAMETER(CTL.ED_Place_Drct_Shpmnt_Ad_2);
PARAMETER(CTL.ED_Place_Drct_Shpmnt_Ad_3);
PARAMETER(CTL.ED_Currency);
PARAMETER(CTL.ED_Conditions_of_Sale);
PARAMETER(CTL.ED_Total_Unit_Price);
PARAMETER(CTL.ED_Invoice_Total);
PARAMETER(CTL.ED_Live_with_PHIS);
PARAMETER(CTL.ED_Print_Status);
PARAMETER(CTL.ED_Total_Net_Weight_lbs);
PARAMETER(CTL.ED_Total_Net_Weight_MT);
PARAMETER(CTL.ED_Nbr_of_Packages);
PARAMETER(CTL.ED_Customer_PO_#);
PARAMETER(CTL.ED_Total_Gross_Weight_lbs);
PARAMETER(CTL.ED_Total_Gross_Weight_MT);
PARAMETER(CTL.ED_Plant_Number_Dtl);
PARAMETER(CTL.ED_Language_Xlate_Desc_2);
PARAMETER(CTL.ED_Slaughter_Date_CofE_3);
PARAMETER(CTL.ED_Production_mo_yr_ln_3);
PARAMETER(CTL.ED_Remark_Constant_6);
PARAMETER(CTL.ED_Allow_Print_bef_Ship);
PARAMETER(CTL.ED_Cert_of_Orig_Sbd_addr);
PARAMETER(CTL.ED_Use_item_label_1_2);
PARAMETER(CTL.ED_Slg_Proc_Date_Format);
PARAMETER(CTL.ED_Total_Package_UOM);
PARAMETER(CTL.ED_Export_Certificate_Nbr);
PARAMETER(CTL.ED_Sail_Date);
PARAMETER(CTL.ED_Sworn_on_Date);
PARAMETER(CTL.ED_Consignee_Address_Nbr);
PARAMETER(CTL.ED_Form_Identification_Tx);
PARAMETER(CTL.ED_Cold_Storage_Name);
PARAMETER(CTL.ED_Cold_Storage_Addr_1);
PARAMETER(CTL.ED_Cold_Storage_Addr_2);
PARAMETER(CTL.ED_Cold_Storage_Plant_Nbr);
PARAMETER(CTL.ED_Slaughter_Date_CofE_1);
PARAMETER(CTL.ED_Production_mo_yr_ln_1);
PARAMETER(CTL.ED_Production_mo_yr_ln_2);
PARAMETER(CTL.ED_Booking_Nbr);
PARAMETER(CTL.ED_Document_Date);
PARAMETER(CTL.ED_Packing_Date);
PARAMETER(CTL.ED_Expiration_Date);
PARAMETER(CTL.ED_Packing_Date_To);
PARAMETER(CTL.ED_Unused_Date_2);
PARAMETER(CTL.ED_Print_Kilograms);
PARAMETER(CTL.ED_MPR_Canadian_Province);
PARAMETER(CTL.ED_Container_Nbrs);
PARAMETER(CTL.ED_Slaughter_Date_CofE_2);
PARAMETER(CTL.ED_Submit_Status);
PARAMETER(CTL.EDOH_Unused_Sts_2);
PARAMETER(CTL.EDOH_Unused_Text_1);
PARAMETER(CTL.EDOH_Unused_Text_2);
PARAMETER(CTL.EDOH_Unused_Number_1);
PARAMETER(CTL.EDOH_Unused_Date_1);
PARAMETER(CTL.EDI_Status_1);
PARAMETER(CTL.EDI_Status_2);
PARAMETER(CTL.EDI_Status_3);
PARAMETER(CTL.Record_Status);
PARAMETER(CTL.Job_Time);
PARAMETER(CTL.User_Id);
PARAMETER(CTL.Job_Name);
PARAMETER(CTL.Job_Date);
PARAMETER(CTL.ED_Export_Certificate_Nbr);

//?USER: Change detail DBF record

EXECUTE FUNCTION(Chg Exp Doc Order Dtl  CH) TYPE(CHGOBJ) FILE(PDMSREP)          AC1524036;
PARAMETER(RCD.Company_Number);
PARAMETER(RCD.Order_Number);
PARAMETER(RCD.ED_Export_Document_Type);
PARAMETER(RCD.Country_Code);
PARAMETER(RCD.Order_Sequence_Number);
PARAMETER(RCD.Order_Secondary_Line_Seq);
PARAMETER(RCD.ED_Item_Code);
PARAMETER(RCD.ED_Item_Label_Line_1);
PARAMETER(RCD.ED_Item_Label_Line_2);
PARAMETER(RCD.ED_Chilled_Frozen_Text);
PARAMETER(RCD.ED_Unmarked_Txt);
PARAMETER(RCD.ED_Product_Net_Weight_lbs);
PARAMETER(RCD.ED_Product_Net_Weight_MT);
PARAMETER(RCD.ED_Product_UOM);
PARAMETER(RCD.ED_Product_Nbr_of_Pkgs);
PARAMETER(RCD.ED_Product_Pkg_Type);
PARAMETER(RCD.ED_Shipping_Marks_Txt);
PARAMETER(RCD.ED_Pieces_per_Bag);
PARAMETER(RCD.ED_Bags_per_Unit);
PARAMETER(RCD.ED_Total_Nbr_of_Pieces);
PARAMETER(RCD.ED_Product_Unit_Price);
PARAMETER(RCD.ED_Producet_Extended_Amt);
PARAMETER(RCD.ED_Print_Status);
PARAMETER(CTL.ED_Plant_Number_Dtl);
PARAMETER(RCD.ED_Language_Xlate_Desc_2);
PARAMETER(RCD.ED_Consignee_Address_Nbr);
PARAMETER(RCD.ED_Date_of_Slaughter_Dtl);
PARAMETER(RCD.ED_HACCP_Category);
PARAMETER(RCD.ED_Slaughter_Date_Range);
PARAMETER(RCD.ED_Production_Date_Range);
PARAMETER(RCD.ED_Product_UID);
PARAMETER(RCD.ED_Language_Xlate_Desc);
PARAMETER(RCD.ED_Unused_Status_1);
PARAMETER(RCD.ED_Unused_Status_2);
PARAMETER(RCD.ED_Harmonized_Tariff_Cde);
PARAMETER(RCD.ED_Nbr_of_Packing_Units);
PARAMETER(RCD.EDI_Status_1);
PARAMETER(RCD.EDI_Status_2);
PARAMETER(RCD.EDI_Status_3);
PARAMETER(RCD.Record_Status);
PARAMETER(RCD.Job_Time);
PARAMETER(RCD.User_Id);
PARAMETER(RCD.Job_Name);
PARAMETER(RCD.Job_Date);

