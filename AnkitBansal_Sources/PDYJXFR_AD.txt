// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDYJXFR
// ?Date: 14.08.2025 Time: 03:33:37
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?C01620 RMC 6/28/11 Check for open orders to use LF sans company
//?Cannot delete if any of the following exist for the customer:
//?History, A/R Header, Order Header, Order Detail, Company/Customer
//?A/R Summary, Item Contract, Customer/Item Price Overage, Order Events
//?First check for other customer dependencies
// WRK.USR Count = CND.EQ 0
WRK.USR_Count = *ZERO;

// PAR.USR Return Code = CND.Does Not Exist
PAR.USR_Return_Code = 'N';

EXECUTE FUNCTION(VAL A/R Cust B4 Delete RT) TYPE(RTVOBJ) FILE(CABBREP)          AC1463210;
PARAMETER(PAR.Ship_To_Customer);
PARAMETER(WRK.USR_Count);
{
 //?USER: Initialize routine

 // PAR.USR Count = CND.EQ 0
 PAR.USR_Count = *ZERO;

 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PAR.USR Count = PAR.USR Count + CON.1
 PAR.USR_Count = PAR.USR_Count + 1;

 CASE;

 // IF PAR.USR Count is GT 1
 IF PAR.USR_Count > 1;

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

 QUIT;

 ENDIF;

}


CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// PAR.USR Return Code = CND.Exists
PAR.USR_Return_Code = 'E';

QUIT;

ENDIF;

// WRK.USR Count = CND.EQ 0
WRK.USR_Count = *ZERO;

EXECUTE FUNCTION(VAL Parent B4 Delete   RT) TYPE(RTVOBJ) FILE(CABBREP)          AC1463214;
PARAMETER(PAR.Ship_To_Customer);
PARAMETER(WRK.USR_Count);
{
 //?USER: Initialize routine

 // PAR.USR Count = CND.EQ 0
 PAR.USR_Count = *ZERO;

 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PAR.USR Count = PAR.USR Count + CON.1
 PAR.USR_Count = PAR.USR_Count + 1;

 CASE;

 // IF PAR.USR Count is GT 1
 IF PAR.USR_Count > 1;

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

 QUIT;

 ENDIF;

}


CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// PAR.USR Return Code = CND.Exists
PAR.USR_Return_Code = 'E';

QUIT;

ENDIF;

EXECUTE FUNCTION(VAL Customer History   RT) TYPE(RTVOBJ) FILE(OMHSTPP)          AC1462746;
PARAMETER(PAR.Ship_To_Customer);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

 QUIT;

}


CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// PAR.USR Return Code = CND.Exists
PAR.USR_Return_Code = 'E';

QUIT;

ENDIF;

EXECUTE FUNCTION(VAL Customer in A/R HdrRT) TYPE(RTVOBJ) FILE(ARBDCPP)          AC1462763;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Ship_To_Customer);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

}


CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// PAR.USR Return Code = CND.Exists
PAR.USR_Return_Code = 'E';

QUIT;

ENDIF;

EXECUTE FUNCTION(VAL Customer Order Hdr RT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC1462968;
PARAMETER(PAR.Ship_To_Customer);
{
 //?USER: Initialize routine

 //?RMC 6/28/2011 use lf not keyed by company, so all will be chked.
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

}


CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// PAR.USR Return Code = CND.Exists
PAR.USR_Return_Code = 'E';

QUIT;

ENDIF;

EXECUTE FUNCTION(VAL Customer Order Dtl RT) TYPE(RTVOBJ) FILE(OPBGWKP)          AC1463163;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Ship_To_Customer);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

}


CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// PAR.USR Return Code = CND.Exists
PAR.USR_Return_Code = 'E';

QUIT;

ENDIF;

EXECUTE FUNCTION(Val Co/Customer Exists RT) TYPE(RTVOBJ) FILE(CAEOREP)          AC1443443;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Ship_To_Customer);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

}


CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// PAR.USR Return Code = CND.Exists
PAR.USR_Return_Code = 'E';

QUIT;

ENDIF;

EXECUTE FUNCTION(Val Customer in A/R SumRT) TYPE(RTVOBJ) FILE(ARBCREP)          AC1463166;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Ship_To_Customer);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

}


CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// PAR.USR Return Code = CND.Exists
PAR.USR_Return_Code = 'E';

QUIT;

ENDIF;

EXECUTE FUNCTION(Val Cust in Itm Cntrct RT) TYPE(RTVOBJ) FILE(OMHTREP)          AC1463167;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Ship_To_Customer);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

}


CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// PAR.USR Return Code = CND.Exists
PAR.USR_Return_Code = 'E';

QUIT;

ENDIF;

EXECUTE FUNCTION(Val Cust in Cust/Item  RT) TYPE(RTVOBJ) FILE(PDISREP)          AC1463170;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Ship_To_Customer);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

}


CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// PAR.USR Return Code = CND.Exists
PAR.USR_Return_Code = 'E';

QUIT;

ENDIF;

EXECUTE FUNCTION(Val Cust in Order EvntsRT) TYPE(RTVOBJ) FILE(OPEYCPP)          AC1463171;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Ship_To_Customer);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

}


CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// PAR.USR Return Code = CND.Exists
PAR.USR_Return_Code = 'E';

QUIT;

ENDIF;

EXECUTE FUNCTION(DLT Customer Record    DL) TYPE(DLTOBJ) FILE(CABBREP)          AC1463178;
PARAMETER(PAR.Ship_To_Customer);

EXECUTE FUNCTION(Dlt Customer Elec Comm DL) TYPE(DLTOBJ) FILE(PDNEREP)          AC1569825;
PARAMETER(PAR.Ship_To_Customer);

// PAR.USR Return Code = CND.Does Not Exist
PAR.USR_Return_Code = 'N';

