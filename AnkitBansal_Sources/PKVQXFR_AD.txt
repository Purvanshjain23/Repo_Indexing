// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKVQXFR
// ?Date: 14.08.2025 Time: 02:53:05
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?** H16853 ISE 11/05/2020-Recompiled due to change in Buy Order Number
//?** 03/13/2009 FP1009 *** Tattoo Scale Purge *****
//?** Commented out - this file is not being used enough to purge
//?***** Eval Loss Error  *****
EXECUTE FUNCTION(PRG Eval/Loss Error   RT) TYPE(RTVOBJ) FILE(PKB6CPP)           AB1234011;
PARAMETER(PAR.Purge_Date_USR);
{
 //?USER: Initialize routine

 //?***** Change Log and Comments
 DO;

 //?** 02/09/2009 LJB FP1009
 //?** Remove QTEMP processing and add crt to purge file in purge
 //?** library. Pass in purge date so 1 year of records can be kept.
 //?** 08/15/2007 LJB FP1009
 //?** Remove company number from input parms. Pass in the purge
 //?** Date. If record is prior to Purge Date, write a record to
 //?** the file in QTEMP then delete from production. The QTEMP file
 //?** will be copied to the "Z" member of the Purge Tape Phys file.
 ENDDO;

 //?USER: Process Data record

 EXECUTE FUNCTION(CRT Evl/Loss Error Prg CR) TYPE(CRTOBJ) FILE(PKB6CPP)          AB1279980;
 PARAMETER(DB1.KV_Company_Number);
 PARAMETER(DB1.KV_Kill_Date);
 PARAMETER(DB1.KV_TATTOO_NUMBER);
 PARAMETER(DB1.KV_Buy_Order_Number);
 PARAMETER(DB1.KV_Load_Number);
 PARAMETER(DB1.KV_Record_Number);
 PARAMETER(DB1.KV_Record_Type);
 PARAMETER(DB1.KV_Error_Code);
 PARAMETER(DB1.KV_Error_Description);
 PARAMETER(DB1.RS_User_Changed);
 PARAMETER(DB1.RS_Date_Changed);
 PARAMETER(DB1.RS_Time_Changed);
 PARAMETER(DB1.RS_Record_Status);
 PARAMETER(DB1.RS_Job);
 PARAMETER(DB1.RS_Program);
 PARAMETER(DB1.RS_User_Added);
 PARAMETER(DB1.RS_Date_Added);
 PARAMETER(DB1.RS_Time_Added);
 EXECUTE FUNCTION(Delete Kill Validation) TYPE(DLTOBJ) FILE(PKB6CPP)             AB1104583;
 PARAMETER(DB1.KV_Company_Number);
 PARAMETER(DB1.KV_Kill_Date);
 PARAMETER(DB1.KV_TATTOO_NUMBER);
 PARAMETER(DB1.KV_Buy_Order_Number);
 PARAMETER(DB1.KV_Load_Number);
 PARAMETER(DB1.KV_Record_Number);
 PARAMETER(DB1.KV_Record_Type);
 PARAMETER(DB1.KV_Error_Code);
}


//?***** Movement Entry Log  *****
EXECUTE FUNCTION(Prg Movement Ent Log  RT) TYPE(RTVOBJ) FILE(PKELCPP)           AB1234015;
PARAMETER(PAR.Purge_Date_USR);
{
 //?USER: Initialize routine

 //?***** Change Log and Comments
 DO;

 //?** 01/26/2009 LJB FP1009
 //?** Remove QTEMP processing, write to Purge file in purge
 //?** library, there will be one year kept.
 //?** 08/15/2007 LJB FP1009
 //?** Remove company number from input parms, pass in purge date,
 //?** No longer writing this to tape - just delete the record
 //?** from production
 ENDDO;

 //?USER: Process Data record

 EXECUTE FUNCTION(CRT Mvment Ent Log Purge) TYPE(CRTOBJ) FILE(PKELCPP)           AB1279985;
 PARAMETER(DB1.CC_Company_Number);
 PARAMETER(DB1.MEL_Date);
 PARAMETER(DB1.MEL_Time);
 PARAMETER(DB1.PD_Producer_Code);
 PARAMETER(DB1.PL_Location_Code);
 PARAMETER(DB1.BOLW_Movement_Number);
 PARAMETER(DB1.BOLW_Weight_Type);
 PARAMETER(DB1.MEL_Error_Code);
 EXECUTE FUNCTION(Del Movement Ent Log  DL) TYPE(DLTOBJ) FILE(PKELCPP)           AB1234018;
 PARAMETER(DB1.CC_Company_Number);
 PARAMETER(DB1.MEL_Date);
 PARAMETER(DB1.MEL_Time);
}


//?***** Change Log and comments
DO;

//?** 02/09/2009 LJB FP1009
//?** Add back into production. Add CRT's and write to purge file
ENDDO;

