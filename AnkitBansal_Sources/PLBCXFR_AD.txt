// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLBCXFR
// ?Date: 14.08.2025 Time: 02:53:37
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?H16853 ISE 11/05/2020-Recompiled due to change in Buy Order Number
//?Pass the New status into the rtv.  The corresponding date/time
//?will be updated.
EXECUTE FUNCTION(Rtv Chg Sts/Date/Time RT) TYPE(RTVOBJ) FILE(PLADCPP)           AB1245573;
PARAMETER(PAR.CC_Company_Number);
PARAMETER(PAR.DSH_Kill_Date);
PARAMETER(PAR.DSH_Status);
{
 //?USER: Process Data record

 // LCL.DSH Opened to Live Date = DB1.DSH Opened to Live Date
 LCL.DSH_Opened_to_Live_Date = DB1.DSH_Opened_to_Live_Date;

 // LCL.DSH Opened to Live Time = DB1.DSH Opened to Live Time
 LCL.DSH_Opened_to_Live_Time = DB1.DSH_Opened_to_Live_Time;

 // LCL.DSH Posted to HPS Date = DB1.DSH Posted to HPS Date
 LCL.DSH_Posted_to_HPS_Date = DB1.DSH_Posted_to_HPS_Date;

 // LCL.DSH Posted to HPS Time = DB1.DSH Posted to HPS Time
 LCL.DSH_Posted_to_HPS_Time = DB1.DSH_Posted_to_HPS_Time;

 // LCL.DSH Sched Closed Date = DB1.DSH Sched Closed Date
 LCL.DSH_Sched_Closed_Date = DB1.DSH_Sched_Closed_Date;

 // LCL.DSH Sched Closed Time = DB1.DSH Sched Closed Time
 LCL.DSH_Sched_Closed_Time = DB1.DSH_Sched_Closed_Time;

 // LCL.DSH BOL Printed Date = DB1.DSH BOL Printed Date
 LCL.DSH_BOL_Printed_Date = DB1.DSH_BOL_Printed_Date;

 // LCL.DSH BOL Printed Time = DB1.DSH BOL Printed Time
 LCL.DSH_BOL_Printed_Time = DB1.DSH_BOL_Printed_Time;

 CASE;

 // IF PAR.DSH Status is 02-Opened to Live Prod
 IF PAR.DSH_Status = '02';

 // LCL.DSH Opened to Live Date = JOB.*Job date
 LCL.DSH_Opened_to_Live_Date = JOB.*Job_date;

 // LCL.DSH Opened to Live Time = JOB.*Job time / CON.100 *
 LCL.DSH_Opened_to_Live_Time = JOB.*Job_time / 100;

 // IF PAR.DSH Status is 03-Posted to HPS
 IF PAR.DSH_Status = '03';

 // LCL.DSH Posted to HPS Date = JOB.*Job date
 LCL.DSH_Posted_to_HPS_Date = JOB.*Job_date;

 // LCL.DSH Posted to HPS Time = JOB.*Job time / CON.100 *
 LCL.DSH_Posted_to_HPS_Time = JOB.*Job_time / 100;

 // IF PAR.DSH Status is 05-BOL/Movement Printed
 IF PAR.DSH_Status = '05';

 // LCL.DSH BOL Printed Date = JOB.*Job date
 LCL.DSH_BOL_Printed_Date = JOB.*Job_date;

 // LCL.DSH BOL Printed Time = JOB.*Job time / CON.100 *
 LCL.DSH_BOL_Printed_Time = JOB.*Job_time / 100;

 // IF PAR.DSH Status is 10=Schedule Closed
 IF PAR.DSH_Status = '10';

 // LCL.DSH Sched Closed Date = JOB.*Job date
 LCL.DSH_Sched_Closed_Date = JOB.*Job_date;

 // LCL.DSH Sched Closed Time = JOB.*Job time / CON.100 *
 LCL.DSH_Sched_Closed_Time = JOB.*Job_time / 100;

 EXECUTE FUNCTION(Upd Lock Status       RT) TYPE(RTVOBJ) FILE(PLAECPP)           AB1252437;
 PARAMETER(DB1.CC_Company_Number);
 PARAMETER(DB1.DSH_Kill_Date);
 {
  //?USER: Process Data record

  EXECUTE FUNCTION(Chg Lock Status       CH) TYPE(CHGOBJ) FILE(PLAECPP)           AB1252438;
  PARAMETER(DB1.CC_Company_Number);
  PARAMETER(DB1.DSH_Kill_Date);
  PARAMETER(DB1.DSD_Delivery_Date);
  PARAMETER(DB1.DSD_Delivery_Time);
  PARAMETER(DB1.DSD_Delivery_Time_Seq);
  PARAMETER('L');
 }

 ENDIF;

 EXECUTE FUNCTION(Chg DSH Sts           CH) TYPE(CHGOBJ) FILE(PLADCPP)           AB1245572;
 PARAMETER(DB1.CC_Company_Number);
 PARAMETER(DB1.DSH_Kill_Date);
 PARAMETER(DB1.DSH_Planned_Kill_Head);
 PARAMETER(DB1.DSH_Requested_Delv_Head);
 PARAMETER(PAR.DSH_Status);
 PARAMETER(DB1.DSH_Ext_Sch_Create_Date);
 PARAMETER(DB1.DSH_Ext_Sch_Create_Time);
 PARAMETER(LCL.DSH_Opened_to_Live_Date);
 PARAMETER(LCL.DSH_Opened_to_Live_Time);
 PARAMETER(LCL.DSH_Posted_to_HPS_Date);
 PARAMETER(LCL.DSH_Posted_to_HPS_Time);
 PARAMETER(LCL.DSH_Unused_Sts_1);
 PARAMETER(LCL.DSH_Sched_Closed_Date);
 PARAMETER(LCL.DSH_Sched_Closed_Time);
 PARAMETER(DB1.DSH_Unused_Sts_2);
 PARAMETER(LCL.DSH_BOL_Printed_Date);
 PARAMETER(DB1.DSH_BOL_Printed_Time);
 PARAMETER(DB1.RS_User_Changed);
 PARAMETER(DB1.RS_Date_Changed);
 PARAMETER(DB1.RS_Time_Changed);
 PARAMETER(DB1.RS_Record_Status);
 PARAMETER(DB1.RS_Job);
 PARAMETER(DB1.RS_Program);
 PARAMETER(DB1.RS_User_Added);
 PARAMETER(DB1.RS_Date_Added);
 PARAMETER(DB1.RS_Time_Added);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Rtv Change Stamp      IF) TYPE(EXCINTFUN)                      AB1100934;
  PARAMETER(DB1.RS_User_Changed);
  PARAMETER(DB1.RS_Date_Changed);
  PARAMETER(DB1.RS_Time_Changed);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  {
   //?Execute internal function

   // PAR.RS User Changed = JOB.*USER
   PAR.RS_User_Changed = JOB.*USER;

   // PAR.RS Date Changed = JOB.*Job date
   PAR.RS_Date_Changed = JOB.*Job_date;

   // PAR.RS Time Changed = JOB.*Job time
   PAR.RS_Time_Changed = JOB.*Job_time;

   // PAR.RS Job = JOB.*JOB
   PAR.RS_Job = JOB.*JOB;

   // PAR.RS Program = JOB.*PROGRAM
   PAR.RS_Program = JOB.*PROGRAM;

  }

 }

}


