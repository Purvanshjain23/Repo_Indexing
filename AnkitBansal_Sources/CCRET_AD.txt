// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for CCRET
// ?Date: 14.08.2025 Time: 02:43:36
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modification history
DO;

//?11/14/2021 RMC SDN440 DEFAULT TO E1
//? 3/12/2020 JBB P16169 - JDE World to JDE E1
//?     Project SDN465     Function created.  Use Company Values to
//?                        determine whether to call JDE World or JDE
//?                        Enterprise 1 programs.
ENDDO;

//?Determine OMS Company Number
// Call program Rtv Determine Company# XF.
CALL PROGRAM(Rtv Determine Company# XF) ('E1I3XFR');
PARAMETER(*BLANK);
PARAMETER(*BLANK);
PARAMETER(PAR.OMS_Company_Number_Alpha);
PARAMETER(LCL.OMS_Company_Number);

//?Retrieve Company Values for E1 Live, JW Live, and M3 Live
// Call program Rtv Live In E1/JW/M3  XF.
CALL PROGRAM(Rtv Live In E1/JW/M3  XF) ('E1JUXFR');
PARAMETER(LCL.OMS_Company_Number);
PARAMETER(LCL.E1_Live);
PARAMETER(LCL.JW_Live);
PARAMETER(LCL.M3_Live);
PARAMETER(LCL.E1_Parallel);
PARAMETER(LCL.JW_Parallel);
PARAMETER(LCL.M3_Parallel);

//?Logic based upon Live In flag (Y/N/P)
CASE;

// IF LCL.E1 Live is Yes or Parallel
IF LCL.E1_Live = 'P'/'Y';

// OR LCL.JW Live is Parallel
OR LCL.JW_Live = 'P';

// Call program Rtv BU/CC Desc     E1 XF.
CALL PROGRAM(Rtv BU/CC Desc     E1 XF) ('CCRETE1');
PARAMETER(PAR.OMS_Company_Number_Alpha);
PARAMETER(PAR.Business_Unit_Cost_Center);
PARAMETER(PAR.Description);

//?Note: PGM.*Return Code set in RTVOBJ
//?Logic based upon Live In flag (Y/N/P)
// IF LCL.JW Live is Yes
IF LCL.JW_Live = 'Y';

// Call program Rtv BU/CC Desc  World UP.
CALL PROGRAM(Rtv BU/CC Desc  World UP) ('CCRETW');
PARAMETER(PGM.*Return_code);
PARAMETER(PAR.OMS_Company_Number_Alpha);
PARAMETER(PAR.Business_Unit_Cost_Center);
PARAMETER(PAR.Description);

//?Logic based upon Live In flag (Y/N/P)
// IF LCL.JW Live is No
IF LCL.JW_Live = 'N';

//?default to world
// Call program Rtv BU/CC Desc     E1 XF.
CALL PROGRAM(Rtv BU/CC Desc     E1 XF) ('CCRETE1');
PARAMETER(PAR.OMS_Company_Number_Alpha);
PARAMETER(PAR.Business_Unit_Cost_Center);
PARAMETER(PAR.Description);

ENDIF;

