// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKPCXFR
// ?Date: 14.08.2025 Time: 02:52:23
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?ISE 11/04/20 H16853-Recompiled due to change in Buy Order Number
//?RMC 11/16/05 had 360 hard-coded
// Call program Rtv Co for User       XF.
CALL PROGRAM(Rtv Co for User       XF) ('PLF8XFR');
PARAMETER(WRK.CC_Company_Number);
PARAMETER('HPE');

EXECUTE FUNCTION(Upd Cal Yr/Qtr        RT) TYPE(RTVOBJ) FILE(PKD6CPP)           AB1211950;
PARAMETER(WRK.CC_Company_Number);
PARAMETER('AGPDMGCMP');
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Rtv Year/Quarter      RT) TYPE(RTVOBJ) FILE(PKD0CPP)           AB1199074;
 PARAMETER('AGP');
 PARAMETER(PAR.PCD_Calendar_Year);
 PARAMETER(PAR.PCD_Calendar_Quarter);
 PARAMETER(DB1.TH_Kill_Date);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  CASE;

  // IF PAR.TH Kill Date GE DB1.Calendar Quarter Start
  IF PAR.TH_Kill_Date >= DB1.Calendar_Quarter_Start;

  // AND PAR.TH Kill Date LE DB1.Calendar Quarter End
  AND PAR.TH_Kill_Date <= DB1.Calendar_Quarter_End;

  MOVE *ALL (To: PAR From: DB1);

  QUIT;

  ENDIF;

 }

 EXECUTE FUNCTION(Chg Cal Yr/Qtr        CH) TYPE(CHGOBJ) FILE(PKD6CPP)           AB1211953;
 PARAMETER(DB1.CC_Company_Number);
 PARAMETER(DB1.PCS_Code);
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.TH_Kill_Date);
 PARAMETER(PAR.PCD_Calendar_Year);
 PARAMETER(PAR.PCD_Calendar_Quarter);
}


