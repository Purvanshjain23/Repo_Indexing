// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMRAXFR
// ?Date: 14.08.2025 Time: 03:43:51
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Bld Contact DB        RT) TYPE(RTVOBJ) FILE(POC5REP)           AC1862023;
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Record Status is Active
 IF DB1.Record_Status = 'A';

 EXECUTE FUNCTION(Crt Contact           IF) TYPE(EXCINTFUN)                      AC1860767;
 PARAMETER(LCL.Contact_Number);
 PARAMETER(DB1.Broker_Name);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(DB1.Broker_Telephone_Number);
 PARAMETER(DB1.Broker_Fax_Number);
 PARAMETER(DB1.Broker_Address_Line_1);
 PARAMETER(DB1.Broker_Address_Line_2);
 PARAMETER(*BLANK);
 PARAMETER(DB1.Broker_City);
 PARAMETER(DB1.Broker_State);
 {
  //?Execute internal function

  EXECUTE FUNCTION(Rtv Next Contact#     RT) TYPE(RTVOBJ) FILE(CAD0REP)           AC1860765;
  PARAMETER(PAR.Contact_Number);
  {
   //?USER: Processing if Data record not found

   // PAR.Contact Number = CON.1
   PAR.Contact_Number = 1;

   //?USER: Process Data record

   // PAR.Contact Number = DB1.Contact Number + CON.1
   PAR.Contact_Number = DB1.Contact_Number + 1;

   QUIT;

  }

  EXECUTE FUNCTION(CRT Contact Name       CR) TYPE(CRTOBJ) FILE(CAD0REP)          AC1143963;
  PARAMETER(PAR.Contact_Number);
  PARAMETER(PAR.Primary_Contact_Name);
  PARAMETER(PAR.Primary_Contact_Salutatio);
  PARAMETER(PAR.Primary_Contact_Bus_Title);
  PARAMETER(PAR.Telephone_Number_FF);
  PARAMETER(PAR.Address_Line_1);
  PARAMETER(PAR.Address_Line_2);
  PARAMETER(PAR.Address_Line_3);
  PARAMETER(PAR.City);
  PARAMETER(PAR.Zip_Postal_Code);
  PARAMETER(PAR.EDI_Status_1);
  PARAMETER(PAR.EDI_Status_2);
  PARAMETER(PAR.EDI_Status_3);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Date/Time Stamp   IF) TYPE(EXCINTFUN)                      AC1142219;
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*JOB
    PAR.Job_Name = JOB.*JOB;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

  }

 }

 EXECUTE FUNCTION(Bld Cust Contact      RT) TYPE(RTVOBJ) FILE(OMHOREP)           AC1862037;
 PARAMETER(DB1.Broker_Code);
 PARAMETER(LCL.Contact_Number);
 PARAMETER(DB1.Payee_Type);
 {
  //?USER: Process Data record

  CASE;

  // IF JOB.*Job date GE DB1.Period Beginning Date
  IF JOB.*Job_date >= DB1.Period_Beginning_Date;

  // AND JOB.*Job date LE DB1.Period Ending Date
  AND JOB.*Job_date <= DB1.Period_Ending_Date;

  CASE;

  // IF PAR.Payee Type is Broker
  IF PAR.Payee_Type = 'BR';

  // LCL.Contact Type Code = CON.BROKER
  LCL.Contact_Type_Code = 'BROKER';

  // IF PAR.Payee Type is Buyer Group
  IF PAR.Payee_Type = 'BG';

  // LCL.Contact Type Code = CON.BUYGRP
  LCL.Contact_Type_Code = 'BUYGRP';

  ENDIF;

  EXECUTE FUNCTION(Crt Customer Contact  IF) TYPE(EXCINTFUN)                      AC1860999;
  PARAMETER(DB1.Ship_To_Customer);
  PARAMETER(LCL.Contact_Type_Code);
  PARAMETER(PAR.Contact_Number);
  PARAMETER(DB1.Broker_Code);
  {
   //?Execute internal function

   EXECUTE FUNCTION(RTV Next Sequence #   RT) TYPE(RTVOBJ) FILE(CAEMCPP)           AC1160093;
   PARAMETER(PAR.Ship_To_Customer);
   PARAMETER(PAR.Contact_Sequence_Number);
   {
    //?USER: Processing if Data record not found

    // PAR.Contact Sequence Number = CON.1
    PAR.Contact_Sequence_Number = 1;

    //?USER: Process Data record

    // PAR.Contact Sequence Number = DB1.Contact Sequence Number + CON.1
    PAR.Contact_Sequence_Number = DB1.Contact_Sequence_Number + 1;

    QUIT;

   }

   EXECUTE FUNCTION(Crt Customer Contact  CR) TYPE(CRTOBJ) FILE(CAEMCPP)           AC1159588;
   PARAMETER(PAR.Ship_To_Customer);
   PARAMETER(PAR.Contact_Sequence_Number);
   PARAMETER(PAR.Contact_Type_Code);
   PARAMETER(PAR.Contact_Number);
   PARAMETER(PAR.Broker_Code);
   PARAMETER(PAR.EDI_Status_1);
   PARAMETER(PAR.EDI_Status_2);
   PARAMETER(PAR.EDI_Status_3);
   {
    //?USER: Processing before Data update

    EXECUTE FUNCTION(Set Date/Time Stamp   IF) TYPE(EXCINTFUN)                      AC1142219;
    PARAMETER(DB1.Job_Time);
    PARAMETER(DB1.User_Id);
    PARAMETER(DB1.Job_Name);
    PARAMETER(DB1.Job_Date);
    {
     //?Execute internal function

     // PAR.Job Time = JOB.*Job time
     PAR.Job_Time = JOB.*Job_time;

     // PAR.User Id = JOB.*USER
     PAR.User_Id = JOB.*USER;

     // PAR.Job Name = JOB.*JOB
     PAR.Job_Name = JOB.*JOB;

     // PAR.Job Date = JOB.*Job date
     PAR.Job_Date = JOB.*Job_date;

    }

   }

  }

  ENDIF;

 }

 ENDIF;

}


