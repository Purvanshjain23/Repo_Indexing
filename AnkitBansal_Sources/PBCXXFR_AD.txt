// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBCXXFR
// ?Date: 14.08.2025 Time: 03:47:28
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Set Customer's associated file rec status to match customer's
DO;

EXECUTE FUNCTION(VAL Cust Frt Rt Exists RT) TYPE(RTVOBJ) FILE(PNGKREP)          AC2041242;
PARAMETER(PAR.Ship_To_Customer);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

}


//?Set Customer Freight Rate rec sts to match Customer rec sts   E000900
CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

EXECUTE FUNCTION(RTV/UPD Cst Frt Rt Sts RT) TYPE(RTVOBJ) FILE(PNGKREP)          AC2041061;
PARAMETER(*ZERO);
PARAMETER(PAR.Ship_To_Customer);
PARAMETER(*ZERO);
PARAMETER(*ZERO);
PARAMETER(PAR.Record_Status);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Normal
 PGM.*Return_code = *BLANK;

 //?USER: Process Data record

 CASE;

 // IF DB1.Record Status NE PAR.Record Status
 IF DB1.Record_Status <> PAR.Record_Status;

 EXECUTE FUNCTION(CHG Cust Frt Rate Sts  CH) TYPE(CHGOBJ) FILE(PNGKREP)          AC2041056;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Ship_To_Customer);
 PARAMETER(DB1.Change_Date);
 PARAMETER(DB1.Change_Time);
 PARAMETER(DB1.Absorbed_Freight_Rate_CWT);
 PARAMETER(PAR.Record_Status);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Date/Time Stamp   IF) TYPE(EXCINTFUN)                      AC1142219;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*JOB
   PAR.Job_Name = JOB.*JOB;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 ENDIF;

}


ENDIF;

EXECUTE FUNCTION(Val Customer exists    RT) TYPE(RTVOBJ) FILE(PDISREP)          AC2041349;
PARAMETER(PAR.Ship_To_Customer);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

}


//?Set Company Customer Item rec sts to match Customer rec sts   E000900
CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

EXECUTE FUNCTION(RTV CoCust Item Status RT) TYPE(RTVOBJ) FILE(PDISREP)          AC2041042;
PARAMETER(*ZERO);
PARAMETER(PAR.Ship_To_Customer);
PARAMETER(*ZERO);
PARAMETER(PAR.Record_Status);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Normal
 PGM.*Return_code = *BLANK;

 //?USER: Process Data record

 EXECUTE FUNCTION(CHG CoCust Item Status CH) TYPE(CHGOBJ) FILE(PDISREP)          AC2041041;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Ship_To_Customer);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Overage_Begin_Date);
 PARAMETER(DB1.Overage_End_Date);
 PARAMETER(DB1.Seasonal_Overage);
 PARAMETER(DB1.Market_Overage);
 PARAMETER(DB1.Formula_Differential);
 PARAMETER(DB1.Formula_Processing_Fee);
 PARAMETER(DB1.Commodity_Market_Code);
 PARAMETER(DB1.EDI_Status_1);
 PARAMETER(DB1.EDI_Status_2);
 PARAMETER(DB1.EDI_Status_3);
 PARAMETER(PAR.Record_Status);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
 {
  //?USER: Processing after Data read

  MOVE *ALL (To: DB1 From: PAR);

  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

}


ENDIF;

EXECUTE FUNCTION(VAL Cust Item Ref Exis RT) TYPE(RTVOBJ) FILE(POBIREP)          AC2041243;
PARAMETER(PAR.Ship_To_Customer);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

}


//?Set Customer Item Reference rec sts to match Customer rec sts   E000900
CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

EXECUTE FUNCTION(RTV/UPD CIR Status    RT) TYPE(RTVOBJ) FILE(POBIREP)           AC2041245;
PARAMETER(PAR.Ship_To_Customer);
PARAMETER(*ZERO);
PARAMETER(PAR.Record_Status);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Record Status NE PAR.Record Status
 IF DB1.Record_Status <> PAR.Record_Status;

 EXECUTE FUNCTION(CHG Cust Itm Ref Sts  CH) TYPE(CHGOBJ) FILE(POBIREP)           AC2041244;
 PARAMETER(DB1.Ship_To_Customer);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.CIR_Resource_No);
 PARAMETER(DB1.CIR_Item_No);
 PARAMETER(DB1.CIR_Description_Line_1);
 PARAMETER(DB1.CIR_Description_Line_2);
 PARAMETER(DB1.CIR_Description_Line_3);
 PARAMETER(DB1.CIR_Unused_Status_1);
 PARAMETER(DB1.CIR_Unused_Status_2);
 PARAMETER(DB1.CIR_Resource_No_Type);
 PARAMETER(DB1.CIR_UM_Base_Price);
 PARAMETER(DB1.CIR_Unused_Status_5);
 PARAMETER(PAR.Record_Status);
 PARAMETER(DB1.Create_Date);
 PARAMETER(DB1.Create_Time);
 PARAMETER(DB1.Create_User);
 PARAMETER(DB1.Create_Program);
 PARAMETER(DB1.Change_Date);
 PARAMETER(DB1.Change_Time);
 PARAMETER(DB1.Change_User);
 PARAMETER(DB1.Change_Program);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
  PARAMETER(DB1.Change_Time);
  PARAMETER(DB1.Change_User);
  PARAMETER(DB1.Change_Program);
  PARAMETER(DB1.Change_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 ENDIF;

}


ENDIF;

EXECUTE FUNCTION(Val Cust in Custom EXT RT) TYPE(RTVOBJ) FILE(PDNEREP)          AC2031831;
PARAMETER(PAR.Ship_To_Customer);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

}


//?Set Customer EXT record status to match Customer record status E000900
CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

EXECUTE FUNCTION(RTV Upd Cust Status   RT) TYPE(RTVOBJ) FILE(PDNEREP)           AC2041577;
PARAMETER(PAR.Ship_To_Customer);
PARAMETER(PAR.Record_Status);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Normal
 PGM.*Return_code = *BLANK;

 //?USER: Process Data record

 CASE;

 // IF PAR.Record Status NE DB1.Record Status
 IF PAR.Record_Status <> DB1.Record_Status;

 EXECUTE FUNCTION(Chg Cust EXT Rec Sts  CH) TYPE(CHGOBJ) FILE(PDNEREP)           AC2041019;
 PARAMETER(DB1.Ship_To_Customer);
 PARAMETER(DB1.Internet_Password);
 PARAMETER(DB1.Email_Address);
 PARAMETER(DB1.Email_User_ID);
 PARAMETER(DB1.EDI_Trading_Partner_No);
 PARAMETER(DB1.EDI_Cust_Duns_Number);
 PARAMETER(DB1.EDI_Warehouse_Store_No);
 PARAMETER(DB1.State_Tax_ID);
 PARAMETER(DB1.Cust_Shipping_Temp_C_F);
 PARAMETER(DB1.One_Invoice_Per_PO);
 PARAMETER(DB1.EDI_Advanced_Ship_Notice);
 PARAMETER(DB1.Customer_G_L_Vendor_Num);
 PARAMETER(DB1.Air_Freight_Orders);
 PARAMETER(DB1.Regional_Mgr_Fax_Email);
 PARAMETER(DB1.Employee_Co_Packer_Sale);
 PARAMETER(DB1.Customer_TF_Exempt_Code);
 PARAMETER(DB1.Customer_Watch_Flag);
 PARAMETER(DB1.Customer_Sales_Region);
 PARAMETER(DB1.Customer_Market_Code);
 PARAMETER(DB1.EDI_Status_1);
 PARAMETER(DB1.EDI_Status_2);
 PARAMETER(DB1.EDI_Status_3);
 PARAMETER(PAR.Record_Status);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Date/Time Stamp   IF) TYPE(EXCINTFUN)                      AC1142219;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*JOB
   PAR.Job_Name = JOB.*JOB;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 ENDIF;

}


ENDIF;

ENDDO;

//?***** Changes and Comments
DO;

//?** 06/08/2017 RMC E9064 DONT CHG COMP CUST RCD STS HERE
//?** 04/09/2012 LJB E000900  When the Record Status for a Customer
//?**   changes, change the record status of several associated files
ENDDO;

