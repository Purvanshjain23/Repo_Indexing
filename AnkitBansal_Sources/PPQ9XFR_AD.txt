// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PPQ9XFR
// ?Date: 14.08.2025 Time: 03:41:39
// ?------------------------------------------------------------------------------------------------

//?Execute user function

// LCL.PFS Location Code = CON.*ZERO
LCL.PFS_Location_Code = *ZERO;

// LCL.Location Aisle = CON.00
LCL.Location_Aisle = 00;

// LCL.Location Bay Alpha = CON.00
LCL.Location_Bay_Alpha = 00;

// LCL.Location Bay = CON.*ZERO
LCL.Location_Bay = *ZERO;

// DOW LCL.PFS Location Code is LE 1215
DOW LCL.PFS_Location_Code <= 1215;

// PAR.Location Code = CVTVAR(LCL.PFS Location Code)
PAR.Location_Code = CVTVAR(LCL.PFS_Location_Code);

// PAR.Location Aisle = SUBSTRING(PAR.Location Code,CON.1,CON.2)
PAR.Location_Aisle = SUBSTRING(PAR.Location_Code:1:2);

// LCL.Location Bay Alpha = SUBSTRING(PAR.Location Code,CON.3,CON.2)
LCL.Location_Bay_Alpha = SUBSTRING(PAR.Location_Code:3:2);

// PAR.Location Bay = CVTVAR(LCL.Location Bay Alpha)
PAR.Location_Bay = CVTVAR(LCL.Location_Bay_Alpha);

//?Location Type
CASE;

// IF LCL.PFS Location Code is 1051 - 1053
IF LCL.PFS_Location_Code >= 1051;
AND LCL.PFS_Location_Code <= 1053;

// PAR.WLT Type Code = CND.Blast Freeze
PAR.WLT_Type_Code = 'B';

//?Location Type
// IF *OTHERWISE
IF *OTHERWISE;

// PAR.WLT Type Code = CND.Room Freeze
PAR.WLT_Type_Code = 'F';

ENDIF;

EXECUTE FUNCTION(Upd Carlisle Loc      RT) TYPE(RTVOBJ) FILE(PDL2REP)           AC1743482;
PARAMETER(PAR.Warehouse_Code);
PARAMETER(PAR.Location_Code);
PARAMETER(PAR.Location_Aisle);
PARAMETER(PAR.Location_Bay);
PARAMETER(PAR.WLT_Type_Code);
{
 //?USER: Processing if Data record not found

 EXECUTE FUNCTION(Crt Carlisle Loc      CR) TYPE(CRTOBJ) FILE(PDL2REP)           AC1743484;
 PARAMETER(PAR.Warehouse_Code);
 PARAMETER(PAR.Location_Code);
 PARAMETER(PAR.Location_Aisle);
 PARAMETER(PAR.Location_Bay);
 PARAMETER(PAR.Loc_Unused_Chill_Time);
 PARAMETER(PAR.WL_Unused_Sts_1);
 PARAMETER(PAR.WL_Unused_Sts_2);
 PARAMETER(PAR.WL_PFS_Zone);
 PARAMETER(PAR.WLT_Type_Code);
 PARAMETER(PAR.EDI_Status_1);
 PARAMETER(PAR.EDI_Status_2);
 PARAMETER(PAR.EDI_Status_3);
 PARAMETER(PAR.Record_Status);
 PARAMETER(PAR.Job_Time);
 PARAMETER(PAR.User_Id);
 PARAMETER(PAR.Job_Name);
 PARAMETER(PAR.Job_Date);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(SET Record Stamp CRTOB IF) TYPE(EXCINTFUN)                     AC1282865;
  PARAMETER(DB1.Record_Status);
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Record Status = CND.Active
   PAR.Record_Status = 'A';

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 //?USER: Process Data record

 EXECUTE FUNCTION(Chg Carlisle Loc      CH) TYPE(CHGOBJ) FILE(PDL2REP)           AC1743483;
 PARAMETER(DB1.Warehouse_Code);
 PARAMETER(DB1.Location_Code);
 PARAMETER(PAR.Location_Aisle);
 PARAMETER(PAR.Location_Bay);
 PARAMETER(PAR.WLT_Type_Code);
}


// LCL.PFS Location Code = LCL.PFS Location Code + CON.1
LCL.PFS_Location_Code = LCL.PFS_Location_Code + 1;

ENDDO;

