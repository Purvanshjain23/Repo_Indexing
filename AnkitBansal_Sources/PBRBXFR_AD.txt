// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBRBXFR
// ?Date: 14.08.2025 Time: 03:49:04
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?* One time function, run this on demand
//?* Update Item Default Extension record status to match Item Default
EXECUTE FUNCTION(RTV/CHG Status by Item RT) TYPE(RTVOBJ) FILE(PBBTREP)          AC2105247;
PARAMETER(1);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Rtv Record Sts        RT) TYPE(RTVOBJ) FILE(OMBYREP)           AC1842965;
 PARAMETER(DB1.Item_Code);
 PARAMETER(LCL.Record_Status);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  // PGM.*Return code = CND.*Normal
  PGM.*Return_code = *BLANK;

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

  // PGM.*Return code = CND.*Normal
  PGM.*Return_code = *BLANK;

 }

 CASE;

 // IF PGM.*Return code is *Normal
 IF PGM.*Return_code = *BLANK;

 EXECUTE FUNCTION(Chg Itm Dft Ext Sts   CH) TYPE(CHGOBJ) FILE(PBBTREP)           AC2097662;
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.IDE_Forecast_in_DP);
 PARAMETER(LCL.Record_Status);
 PARAMETER(DB1.Change_Date);
 PARAMETER(DB1.Change_Time);
 PARAMETER(DB1.Change_User);
 PARAMETER(DB1.Change_Program);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Chg Date/Time      IF) TYPE(EXCINTFUN)                     AC1523476;
  PARAMETER(DB1.Change_Date);
  PARAMETER(DB1.Change_Time);
  PARAMETER(DB1.Change_User);
  PARAMETER(DB1.Change_Program);
  {
   //?Execute internal function

   // PAR.Change Date = JOB.*Job date
   PAR.Change_Date = JOB.*Job_date;

   // PAR.Change Time = JOB.*Job time
   PAR.Change_Time = JOB.*Job_time;

   // PAR.Change User = JOB.*USER
   PAR.Change_User = JOB.*USER;

   // PAR.Change Program = JOB.*PROGRAM
   PAR.Change_Program = JOB.*PROGRAM;

  }

 }

 ENDIF;

}


