// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBNEXFR
// ?Date: 14.08.2025 Time: 03:48:37
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(RTV Co FR/FZ PFS Crt   RT) TYPE(RTVOBJ) FILE(CAABREP)          AC2091919;
PARAMETER(PAR.Item_Code);
PARAMETER(PAR.PFS_Record_Status);
{
 //?USER: Process Data record

 //?**************************************************************************
 //?RMC 7/07/14  Crt rcd for each plant company Active with PFS
 //?**************************************************************************
 CASE;

 // IF DB1.Company Number is not equal to zero
 IF DB1.Company_Number <> *ZERO;

 EXECUTE FUNCTION(Rtv Plant Co Status   RT) TYPE(RTVOBJ) FILE(PDJYREP)           AC1761084;
 PARAMETER(DB1.Company_Number);
 PARAMETER(LCL.Plant_Company_Sts);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 CASE;

 // IF LCL.Plant Company Sts is Plant Company
 IF LCL.Plant_Company_Sts = 'P';

 EXECUTE FUNCTION(Rtv Active Status     RT) TYPE(RTVOBJ) FILE(PPBUREP)           AC1740339;
 PARAMETER(DB1.Company_Number);
 PARAMETER('FRFZIT');
 PARAMETER(LCL.PFS_AccuSort_Active);
 PARAMETER(LCL.PFS_Carlisle_Active);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 //?Carlisle:  Create FR FZ product
 CASE;

 // IF LCL.PFS Carlisle Active is Yes
 IF LCL.PFS_Carlisle_Active = 'Y';

 // OR LCL.Plant Floor System USR is Both
 OR LCL.Plant_Floor_System_USR = 'B';

 // Call program PFS Fr Fz Master      XF.
 CALL PROGRAM(PFS Fr Fz Master      XF) ('PBNFXFR');
 PARAMETER(DB1.Company_Number);
 PARAMETER(PAR.Item_Code);
 PARAMETER(PAR.PFS_Record_Status);

 ENDIF;

 ENDIF;

 ENDIF;

}


