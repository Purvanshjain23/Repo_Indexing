// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBMAXFR
// ?Date: 14.08.2025 Time: 03:48:31
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Change Log
DO;

//?03/25/2014 LJB If an order is put on Credit Hold and it was
//?  previously released then change the Type Code to CRDRLX to
//?  show that it was cancelled and to make sure the release record
//?  is not there anymore
//?PIO 03/06/24 CHANGED THE FILE NAME FROM PDLHCPLI TO PDLHCPLM
ENDDO;

//?Log order changes
DO;

EXECUTE FUNCTION(CHG LOCL-Ord,no load   RT) TYPE(RTVOBJ) FILE(PDLHCPP)          AC2086554;
PARAMETER(PAR.Created_Date);
PARAMETER(PAR.Created_Time);
PARAMETER(PAR.Sequence_Number);
PARAMETER(PAR.Load_ID);
PARAMETER(PAR.Stop_Drop);
PARAMETER(PAR.Load_Change_Type);
PARAMETER(PAR.Department_Control_Code);
PARAMETER(PAR.Change_Log_Prior_Value);
PARAMETER(PAR.Change_Log_New_Value);
PARAMETER(PAR.User_Id);
PARAMETER(PAR.Job_Name);
PARAMETER(PAR.Carrier_Code);
PARAMETER(PAR.Carrier_Broker_Carrier_Co);
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Order_Number);
PARAMETER(PAR.@Change_Type_2);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(CHG Ld Chg Type=Cancld CH) TYPE(CHGOBJ) FILE(PDLHCPP)          AC2086536;
 PARAMETER(DB1.Created_Date);
 PARAMETER(DB1.Created_Time);
 PARAMETER(DB1.Sequence_Number);
 PARAMETER(DB1.Load_ID);
 PARAMETER(DB1.Stop_Drop);
 PARAMETER(PAR.Load_Change_Type);
 PARAMETER(PAR.Department_Control_Code);
 PARAMETER(PAR.Load_Change_Type);
 PARAMETER(PAR.@Change_Type_2);
 PARAMETER(JOB.*USER);
 PARAMETER(JOB.*PROGRAM);
 PARAMETER(DB1.Carrier_Code);
 PARAMETER(DB1.Carrier_Broker_Carrier_Co);
 PARAMETER(DB1.Company_Number);
 PARAMETER(PAR.Order_Number);
 PARAMETER(PAR.@Change_Type_2);
 {
  //?USER: Processing if Data record not found

  QUIT;

  //?USER: Processing before Data update

  // DB1.Change Log Prior Value = PAR.Load Change Type
  DB1.Change_Log_Prior_Value = PAR.Load_Change_Type;

  // DB1.Change Log New Value = PAR.@Change Type 2
  DB1.Change_Log_New_Value = PAR.@Change_Type_2;

  // DB1.Load Change Type = PAR.@Change Type 2
  DB1.Load_Change_Type = PAR.@Change_Type_2;

 }

 //?Comments and Changes
 DO;

 ENDDO;

}


ENDDO;

