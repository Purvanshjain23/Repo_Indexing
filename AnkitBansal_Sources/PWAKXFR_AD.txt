// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PWAKXFR
// ?Date: 14.08.2025 Time: 02:55:50
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Upd M3 Supplier Files RT) TYPE(RTVOBJ) FILE(PWAACPP)           AB1329919;
PARAMETER(PAR.M3I_Supplier_id);
{
 //?USER: Initialize routine

 // LCL.M3I ERP Process Date = JOB.*Job date
 LCL.M3I_ERP_Process_Date = JOB.*Job_date;

 // PAR.M3 Division # USR = SUBSTRING(PAR.M3I Supplier id,CON.1,CON.3)
 PAR.M3_Division_#_USR = SUBSTRING(PAR.M3I_Supplier_id:1:3);

 //?USER: Process Data record

 //?Quit if M3 Division No Longer Matches.
 CASE;

 // IF *OTHERWISE
 IF *OTHERWISE;

 // LCL.M3 Division # USR = SUBSTRING(DB1.M3I Supplier id,CON.1,CON.3)
 LCL.M3_Division_#_USR = SUBSTRING(DB1.M3I_Supplier_id:1:3);

 CASE;

 // IF PAR.M3 Division # USR NE LCL.M3 Division # USR
 IF PAR.M3_Division_#_USR <> LCL.M3_Division_#_USR;

 QUIT;

 ENDIF;

 ENDIF;

 //?Format Data Before Update.
 CASE;

 // IF *OTHERWISE
 IF *OTHERWISE;

 //?Telephone No 1.
 CASE;

 // IF DB1.M3I Telephone No 1 is _NONE_
 IF DB1.M3I_Telephone_No_1 = '_NONE_';

 // PAR.M3I Telephone No 1 = CON.*BLANK
 PAR.M3I_Telephone_No_1 = *BLANK;

 //?Telephone No 1.
 // IF *OTHERWISE
 IF *OTHERWISE;

 // PAR.M3I Telephone No 1 = DB1.M3I Telephone No 1
 PAR.M3I_Telephone_No_1 = DB1.M3I_Telephone_No_1;

 ENDIF;

 //?Telephone No 2.
 CASE;

 // IF DB1.M3I Telephone No 2 is _NONE_
 IF DB1.M3I_Telephone_No_2 = '_NONE_';

 // PAR.M3I Telephone No 2 = CON.*BLANK
 PAR.M3I_Telephone_No_2 = *BLANK;

 //?Telephone No 2.
 // IF *OTHERWISE
 IF *OTHERWISE;

 // PAR.M3I Telephone No 2 = DB1.M3I Telephone No 2
 PAR.M3I_Telephone_No_2 = DB1.M3I_Telephone_No_2;

 ENDIF;

 ENDIF;

 //?Update/Create Record.
 EXECUTE FUNCTION(Upd M3 Supplier Files RT) TYPE(RTVOBJ) FILE(PLB2REP)           AB1329491;
 PARAMETER(DB1.M3I_Supplier_id);
 PARAMETER(DB1.M3I_Supplier_Name);
 PARAMETER(DB1.M3I_Address_Line_1);
 PARAMETER(DB1.M3I_Address_Line_2);
 PARAMETER(DB1.M3I_Address_Line_3);
 PARAMETER(DB1.M3I_Address_Line_4);
 PARAMETER(DB1.M3I_City);
 PARAMETER(DB1.M3I_State);
 PARAMETER(DB1.M3I_Postal_Code);
 PARAMETER(PAR.M3I_Telephone_No_1);
 PARAMETER(PAR.M3I_Telephone_No_2);
 PARAMETER(DB1.M3I_Fax_Telephone);
 PARAMETER(DB1.M3I_Supplier_Tax_ID);
 PARAMETER(DB1.M3I_Country_Code);
 PARAMETER(DB1.M3I_Status);
 PARAMETER(1);
 PARAMETER(LCL.M3I_ERP_Process_Date);
 PARAMETER(JOB.*Job_time);
 PARAMETER(DB1.M3I_Supplier_Group);
 PARAMETER(DB1.M3I_Supplier_Division);
 PARAMETER(DB1.M3I_Unused_Status);
 {
  //?USER: Processing if Data record not found

  EXECUTE FUNCTION(Crt M3 Suplr&Sync PrdNmCR) TYPE(CRTOBJ) FILE(PLB2REP)          AB1332119;
  PARAMETER(PAR.M3_Supplier_ID);
  PARAMETER(PAR.M3_Supplier_Name);
  PARAMETER(PAR.M3_Address_Line_1);
  PARAMETER(PAR.M3_Address_Line_2);
  PARAMETER(PAR.M3_Address_Line_3);
  PARAMETER(PAR.M3_Address_Line_4);
  PARAMETER(PAR.M3_City);
  PARAMETER(PAR.M3_State);
  PARAMETER(PAR.M3_Postal_Code);
  PARAMETER(PAR.M3_Telephone_No_1);
  PARAMETER(PAR.M3_Telephone_No_2);
  PARAMETER(PAR.M3_Fax_Telephone);
  PARAMETER(PAR.M3_Supplier_Tax_ID);
  PARAMETER(PAR.M3_Country_Code);
  PARAMETER(PAR.M3_Status);
  PARAMETER(PAR.M3_ERP_Process_Sts);
  PARAMETER(PAR.M3_ERP_Process_Date);
  PARAMETER(PAR.M3_ERP_Process_Time);
  PARAMETER(PAR.M3_Supplier_Group);
  PARAMETER(PAR.M3_Supplier_Division);
  PARAMETER(PAR.M3_Unused_Status);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Rtv Add Stamp         IF) TYPE(EXCINTFUN)                      AB1100935;
   PARAMETER(DB1.RS_Record_Status);
   PARAMETER(DB1.RS_Job);
   PARAMETER(DB1.RS_Program);
   PARAMETER(DB1.RS_User_Added);
   PARAMETER(DB1.RS_Date_Added);
   PARAMETER(DB1.RS_Time_Added);
   {
    //?Execute internal function

    // PAR.RS Record Status = CND.Active
    PAR.RS_Record_Status = 'A';

    // PAR.RS User Added = JOB.*USER
    PAR.RS_User_Added = JOB.*USER;

    // PAR.RS Date Added = JOB.*Job date
    PAR.RS_Date_Added = JOB.*Job_date;

    // PAR.RS Time Added = JOB.*Job time
    PAR.RS_Time_Added = JOB.*Job_time;

    // PAR.RS Program = JOB.*PROGRAM
    PAR.RS_Program = JOB.*PROGRAM;

    // PAR.RS Job = JOB.*JOB
    PAR.RS_Job = JOB.*JOB;

   }

   // DB1.RS User Changed = CON.*BLANK
   DB1.RS_User_Changed = *BLANK;

   // DB1.RS Date Changed = CON.*ZERO
   DB1.RS_Date_Changed = *ZERO;

   // DB1.RS Time Changed = CON.*ZERO
   DB1.RS_Time_Changed = *ZERO;

   //?USER: Processing after Data update

   // Call program Exc Sync Producer Name XF.
   CALL PROGRAM(Exc Sync Producer Name XF) ('PWBCXFR');
   PARAMETER(DB1.M3_Supplier_ID);
   PARAMETER(DB1.M3_Supplier_Name);

  }

  //?USER: Process Data record

  EXECUTE FUNCTION(Chg M3 Suplr&Sync PrdNmCH) TYPE(CHGOBJ) FILE(PLB2REP)          AB1332118;
  PARAMETER(PAR.M3_Supplier_ID);
  PARAMETER(PAR.M3_Supplier_Name);
  PARAMETER(PAR.M3_Address_Line_1);
  PARAMETER(PAR.M3_Address_Line_2);
  PARAMETER(PAR.M3_Address_Line_3);
  PARAMETER(PAR.M3_Address_Line_4);
  PARAMETER(PAR.M3_City);
  PARAMETER(PAR.M3_State);
  PARAMETER(PAR.M3_Postal_Code);
  PARAMETER(PAR.M3_Telephone_No_1);
  PARAMETER(PAR.M3_Telephone_No_2);
  PARAMETER(PAR.M3_Fax_Telephone);
  PARAMETER(PAR.M3_Supplier_Tax_ID);
  PARAMETER(PAR.M3_Country_Code);
  PARAMETER(PAR.M3_Status);
  PARAMETER(PAR.M3_ERP_Process_Sts);
  PARAMETER(PAR.M3_ERP_Process_Date);
  PARAMETER(PAR.M3_ERP_Process_Time);
  PARAMETER(PAR.M3_Supplier_Group);
  PARAMETER(PAR.M3_Supplier_Division);
  PARAMETER(PAR.M3_Unused_Status);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Rtv Change Stamp      IF) TYPE(EXCINTFUN)                      AB1100934;
   PARAMETER(DB1.RS_User_Changed);
   PARAMETER(DB1.RS_Date_Changed);
   PARAMETER(DB1.RS_Time_Changed);
   PARAMETER(DB1.RS_Job);
   PARAMETER(DB1.RS_Program);
   {
    //?Execute internal function

    // PAR.RS User Changed = JOB.*USER
    PAR.RS_User_Changed = JOB.*USER;

    // PAR.RS Date Changed = JOB.*Job date
    PAR.RS_Date_Changed = JOB.*Job_date;

    // PAR.RS Time Changed = JOB.*Job time
    PAR.RS_Time_Changed = JOB.*Job_time;

    // PAR.RS Job = JOB.*JOB
    PAR.RS_Job = JOB.*JOB;

    // PAR.RS Program = JOB.*PROGRAM
    PAR.RS_Program = JOB.*PROGRAM;

   }

   //?USER: Processing after Data update

   // Call program Exc Sync Producer Name XF.
   CALL PROGRAM(Exc Sync Producer Name XF) ('PWBCXFR');
   PARAMETER(DB1.M3_Supplier_ID);
   PARAMETER(DB1.M3_Supplier_Name);

  }

 }

 //?Update Record in M3 Interface File Library.
 EXECUTE FUNCTION(Chg M3 Supplier Interface) TYPE(CHGOBJ) FILE(PWAACPP)          AB1329897;
 PARAMETER(DB1.M3I_Supplier_id);
 PARAMETER(DB1.M3I_Date_Time_Stamp);
 PARAMETER(DB1.M3I_Supplier_Name);
 PARAMETER(DB1.M3I_Address_Line_1);
 PARAMETER(DB1.M3I_Address_Line_2);
 PARAMETER(DB1.M3I_Address_Line_3);
 PARAMETER(DB1.M3I_Address_Line_4);
 PARAMETER(DB1.M3I_City);
 PARAMETER(DB1.M3I_State);
 PARAMETER(DB1.M3I_Postal_Code);
 PARAMETER(DB1.M3I_Telephone_No_1);
 PARAMETER(DB1.M3I_Telephone_No_2);
 PARAMETER(DB1.M3I_Fax_Telephone);
 PARAMETER(DB1.M3I_Supplier_Tax_ID);
 PARAMETER(DB1.M3I_Country_Code);
 PARAMETER(DB1.M3I_Status);
 PARAMETER(1);
 PARAMETER(LCL.M3I_ERP_Process_Date);
 PARAMETER(JOB.*Job_time);
 PARAMETER(DB1.M3I_Supplier_Group);
 PARAMETER(DB1.M3I_Supplier_Division);
 PARAMETER(DB1.M3I_Unused_Status);
}


