// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBNFXFR
// ?Date: 14.08.2025 Time: 03:48:37
// ?------------------------------------------------------------------------------------------------

//?Execute user function

CASE;

// IF PAR.PFS Item Code Fresh is Not Entered
IF PAR.PFS_Item_Code_Fresh = *ZERO;

EXECUTE FUNCTION(Rtv Snd All PFS FrFz  RT) TYPE(RTVOBJ) FILE(PBA2REP)           AC2091976;
PARAMETER(PAR.PFS_Item_Code_Fresh);
PARAMETER(PAR.PFS_Company_Number);
PARAMETER(PAR.PFS_Record_Status);
{
 //?USER: Process Data record

 // LCL.Frozen Item Code = DB1.Frozen Item Code
 LCL.Frozen_Item_Code = DB1.Frozen_Item_Code;

 EXECUTE FUNCTION(Crt PFS Fresh Frozen  CR) TYPE(CRTOBJ) FILE(PBBSREP)           AC2091863;
 PARAMETER(PAR.Company_Number);
 PARAMETER(DB1.Item_Code);
 PARAMETER(LCL.Frozen_Item_Code);
 PARAMETER(LCL.PFS_FR_FZ_Unused_1);
 PARAMETER(LCL.PFS_FR_FZ_Unused_2);
 PARAMETER(PAR.PFS_Record_Status);
 PARAMETER(*ZERO);
 PARAMETER(*BLANK);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Create Stamp      IF) TYPE(EXCINTFUN)                      AC1732162;
  PARAMETER(DB1.PFS_Process_Status);
  PARAMETER(DB1.PFS_Create_Date);
  PARAMETER(DB1.PFS_Create_Time);
  {
   //?Execute internal function

   // PAR.PFS Process Status = CND.Not Processed
   PAR.PFS_Process_Status = *ZERO;

   // PAR.PFS Create Date = JOB.*Job date
   PAR.PFS_Create_Date = JOB.*Job_date;

   // PAR.PFS Create Time = JOB.*Job time
   PAR.PFS_Create_Time = JOB.*Job_time;

  }

  //?USER: Processing if Data record already exists

  EXECUTE FUNCTION(Chg PFS Fresh Frozen  CH) TYPE(CHGOBJ) FILE(PBBSREP)           AC2091864;
  PARAMETER(DB1.PFS_Company_Number);
  PARAMETER(DB1.PFS_Item_Code_Fresh);
  PARAMETER(PAR.PFS_Item_Code_Frozen);
  PARAMETER(DB1.PFS_FR_FZ_Unused_1);
  PARAMETER(DB1.PFS_FR_FZ_Unused_2);
  PARAMETER(PAR.PFS_Record_Status);
  PARAMETER(DB1.PFS_Process_Status);
  PARAMETER(DB1.PFS_Error_Reason);
  PARAMETER(DB1.PFS_Create_Date);
  PARAMETER(DB1.PFS_Create_Time);
  PARAMETER(DB1.PFS_Change_Date);
  PARAMETER(DB1.PFS_Change_Time);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Change Stamp      IF) TYPE(EXCINTFUN)                      AC1732163;
   PARAMETER(DB1.PFS_Change_Date);
   PARAMETER(DB1.PFS_Change_Time);
   {
    //?Execute internal function

    // PAR.PFS Change Date = JOB.*Job date
    PAR.PFS_Change_Date = JOB.*Job_date;

    // PAR.PFS Change time = JOB.*Job time
    PAR.PFS_Change_Time = JOB.*Job_time;

   }

  }

 }

}


// IF *OTHERWISE
IF *OTHERWISE;

EXECUTE FUNCTION(Rtv Snd PFS FR FZ MstrRT) TYPE(RTVOBJ) FILE(PBA2REP)           AC2091943;
PARAMETER(PAR.PFS_Item_Code_Fresh);
PARAMETER(PAR.PFS_Company_Number);
PARAMETER(PAR.PFS_Record_Status);
{
 //?USER: Process Data record

 // LCL.Frozen Item Code = DB1.Frozen Item Code
 LCL.Frozen_Item_Code = DB1.Frozen_Item_Code;

 EXECUTE FUNCTION(Crt PFS Fresh Frozen  CR) TYPE(CRTOBJ) FILE(PBBSREP)           AC2091863;
 PARAMETER(PAR.Company_Number);
 PARAMETER(DB1.Item_Code);
 PARAMETER(LCL.Frozen_Item_Code);
 PARAMETER(LCL.PFS_FR_FZ_Unused_1);
 PARAMETER(LCL.PFS_FR_FZ_Unused_2);
 PARAMETER(PAR.PFS_Record_Status);
 PARAMETER(*ZERO);
 PARAMETER(*BLANK);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Create Stamp      IF) TYPE(EXCINTFUN)                      AC1732162;
  PARAMETER(DB1.PFS_Process_Status);
  PARAMETER(DB1.PFS_Create_Date);
  PARAMETER(DB1.PFS_Create_Time);
  {
   //?Execute internal function

   // PAR.PFS Process Status = CND.Not Processed
   PAR.PFS_Process_Status = *ZERO;

   // PAR.PFS Create Date = JOB.*Job date
   PAR.PFS_Create_Date = JOB.*Job_date;

   // PAR.PFS Create Time = JOB.*Job time
   PAR.PFS_Create_Time = JOB.*Job_time;

  }

  //?USER: Processing if Data record already exists

  EXECUTE FUNCTION(Chg PFS Fresh Frozen  CH) TYPE(CHGOBJ) FILE(PBBSREP)           AC2091864;
  PARAMETER(DB1.PFS_Company_Number);
  PARAMETER(DB1.PFS_Item_Code_Fresh);
  PARAMETER(PAR.PFS_Item_Code_Frozen);
  PARAMETER(DB1.PFS_FR_FZ_Unused_1);
  PARAMETER(DB1.PFS_FR_FZ_Unused_2);
  PARAMETER(PAR.PFS_Record_Status);
  PARAMETER(DB1.PFS_Process_Status);
  PARAMETER(DB1.PFS_Error_Reason);
  PARAMETER(DB1.PFS_Create_Date);
  PARAMETER(DB1.PFS_Create_Time);
  PARAMETER(DB1.PFS_Change_Date);
  PARAMETER(DB1.PFS_Change_Time);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Change Stamp      IF) TYPE(EXCINTFUN)                      AC1732163;
   PARAMETER(DB1.PFS_Change_Date);
   PARAMETER(DB1.PFS_Change_Time);
   {
    //?Execute internal function

    // PAR.PFS Change Date = JOB.*Job date
    PAR.PFS_Change_Date = JOB.*Job_date;

    // PAR.PFS Change time = JOB.*Job time
    PAR.PFS_Change_Time = JOB.*Job_time;

   }

  }

 }

}


ENDIF;

