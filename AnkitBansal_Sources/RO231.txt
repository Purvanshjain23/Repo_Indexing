     h option(*SRCSTMT:*NODEBUGIO)
      *
      * ENVIRONMENT: Pork Division
      * SYSTEM:      Resource Optimization
      * PROGRAM:     RO231
      * TITLE:       Byproduct--Product Exceptions to Detail
      * PROGRAMMER:  Alice Brownfield
      * CREATED:     07/02/08
      *
      * FUNCTION:    This program processes all the records in the TF Product Exception
      *              file to find the ones that are NOT System Generated for the week we are
      *              working with.  It also looks for only records that have a Meat Cost
      *              Group Code.  It then calls the program that writes these records
      *              to the ByProduct Detail file.
      *
      ***************************************************************************************
      * MODIFICATIONS:
      ***************************************************************************************
      * DATE      PROGRAMMER
      *
      * 11/21/08  LeAnne Ramsey
      *           As part of synchronizing the LDAs between the TFS Margin Adjustment Close
      *           and the Meat Costing, we changed the LDA positions.
      /EJECT
      ***************************************************************************************
      * FILE SPECIFICATION
      ***************************************************************************************
      *
     ftfl019b   if   e           k disk
      *  TF Product exception
      *
      /eject
      ****************************************************************
      * DEFINITION SPECIFICATIONS
      ****************************************************************
      *
      ****************************************************************
      * CONSTANTS
      ****************************************************************
      *
     D yes             c                   'Y'
     D no              c                   'N'
      *
      ****************************************************************
      * ARRAYS AND TABLES
      ****************************************************************
      *
      ****************************************************************
      * STANDALONE FIELDS
      ****************************************************************
      *
      * Parms
     D xxsn            s                   like(pepesn)
      *
      ****************************************************************
      * DATA STRUCTURES
      ****************************************************************
      *
      *---------------------------------------------------------------
      * Standard program status data structure
      *---------------------------------------------------------------
      *    externally defined as UTPGFR (record format: PGMDSR)
     D pgmds         esds                  extname(utpgfr)
      *
      *---------------------------------------------------------------
      * Local data area
      *---------------------------------------------------------------
      *
     Dlda             uds                  dtaara(*lda)
     D  ldwedt                29     36  0
      *
      * The following is a dummy C-spec to keep the D-specs from
      * running over into the C-specs on the compile listing. It
      * serves no other purpose and can be deleted at any time.
      *
     C                   if        sdpgm = *blank
     C                   endif
      /EJECT
      **********************************************************************************
      * Mainline
      **********************************************************************************
      *
      * Process each record in the TF Product Exception file where:
      *   1.  WeekEnding Date is the week we are processing
      *   2.  NOT System Generated (MANUAL)
      *   3.  Meat Cost Group Code <> blank
      *
     C     ldwedt        setll     tfl019b
      *
     C                   dou       *in90 = *on                                  Main do
     C     ldwedt        reade     tfl019b                                90
     C                   if        *in90 = *off and pesysfl = 'N'               If process
     c                             and pecgcd <> *blank
      *
     C                   call      'RO220'
     C                   parm      pepesn        xxsn
      *
     C                   endif                                                  If process
     C                   enddo                                                  Main do
      *
      * EOF processing
     C                   seton                                        lr
      /eject
      *---------------------------------------------------------------
      * Initialization
      *---------------------------------------------------------------
      *
     C     *inzsr        begsr
      *
     C                   endsr
      /eject
