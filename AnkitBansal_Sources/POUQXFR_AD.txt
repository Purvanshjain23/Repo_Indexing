// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POUQXFR
// ?Date: 14.08.2025 Time: 03:39:05
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Chg Kill/Prod Day Sts RT) TYPE(RTVOBJ) FILE(CAAFREP)           AC1662944;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Production_Date);
PARAMETER('N');
PARAMETER('N');
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Chg Kill/Prod Day Sts CH) TYPE(CHGOBJ) FILE(CAAFREP)           AC1662945;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Post_to_G_L_Date);
 PARAMETER(PAR.Kill_Day_Status);
 PARAMETER(PAR.Production_Day_Status);
}


EXECUTE FUNCTION(UPS Del Sched/Plan    RT) TYPE(RTVOBJ) FILE(PDJCCPP)           AC1301456;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Production_Type);
PARAMETER(PAR.Production_Date);
{
 //?USER: Process Data record

 //?Delete the Production Header record
 EXECUTE FUNCTION(DLT Production Hdr     DL) TYPE(DLTOBJ) FILE(PDJCCPP)          AC1265993;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Production_Type);
 PARAMETER(DB1.Production_Date);
}


EXECUTE FUNCTION(UPS Delete Dept Sch   RT) TYPE(RTVOBJ) FILE(PDLMCPP)           AC1646357;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Production_Type);
PARAMETER(PAR.Production_Date);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Delete PS Prod Dept Sched) TYPE(DLTOBJ) FILE(PDLMCPP)          AC1475026;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Production_Type);
 PARAMETER(DB1.Production_Date);
 PARAMETER(DB1.Department_Code);
}


EXECUTE FUNCTION(UPS Del Schd/Plan Dtl RT) TYPE(RTVOBJ) FILE(PDI8CPP)           AC1301459;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Production_Type);
PARAMETER(PAR.Production_Date);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(DLT Production Dtl     DL) TYPE(DLTOBJ) FILE(PDI8CPP)          AC1261198;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Production_Type);
 PARAMETER(DB1.Production_Date);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Warehouse_Code);
 CASE;

 // IF PGM.*Return code is *Data update error
 IF PGM.*Return_code = 'Y2U0004';

 // Retrieve message - 'Delete Error:  Key &1, &2, &3, &4, &5'
 WRK.Office_Message_USR = RTVMSG(USR2305);
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Production_Type);
 PARAMETER(DB1.Production_Date);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Warehouse_Code);

 // Call program SND Pager Msg (MPLUS) UP.
 CALL PROGRAM(SND Pager Msg (MPLUS) UP) ('POMSUPC');
 PARAMETER('PRKDEV');
 PARAMETER(WRK.Office_Message_USR);

 ENDIF;

}


EXECUTE FUNCTION(UPS Re-Alc Item Prod  RT) TYPE(RTVOBJ) FILE(PDKNCPP)           AC1662764;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Production_Date);
{
 //?USER: Initialize routine

 //?***** PA PROCESS - USE REQUESTED SHIP DATE FOR Ship Date USR *****
 //?USER: Process Data record

 //?Deallocate
 EXECUTE FUNCTION(RTV Qty/Wgt Ord/Sched RT) TYPE(RTVOBJ) FILE(OPBGWKP)           AC1648058;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Order_Sequence_Number);
 PARAMETER(DB1.Order_Secondary_Line_Seq);
 PARAMETER(WRK.Detail_Line_Status);
 PARAMETER(PAR.Quantity_Ordered);
 PARAMETER(PAR.Weight_Ordered);
 PARAMETER(PAR.Quantity_Scheduled);
 PARAMETER(PAR.Weight_Scheduled);
 PARAMETER(PAR.Requested_Ship_Date);
 PARAMETER(WRK.Consumed_Item_Code);
 PARAMETER(PAR.Item_Age_Days);
 PARAMETER(PAR.Production_Ovr_AgeDte_Fr);
 PARAMETER(PAR.Production_Ovr_AgeDte_To);
 PARAMETER(WRK.Record_Found_USR);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  // PAR.Record Found USR = CND.Record Not Found
  PAR.Record_Found_USR = 'N';

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

  // PAR.Record Found USR = CND.Record Found
  PAR.Record_Found_USR = 'Y';

 }

 EXECUTE FUNCTION(RTV Ship To Info       RT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC1541823;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(LCL.Ship_To_Customer);
 PARAMETER(WRK.Ship_To_Name);
 PARAMETER(WRK.Ship_To_City);
 PARAMETER(WRK.Ship_To_State_Code);
 PARAMETER(WRK.Customer_Purchase_Order_#);
 {
  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 // LCL.Quantity Ordered = CON.*ZERO
 LCL.Quantity_Ordered = *ZERO;

 // LCL.Weight Ordered = CON.*ZERO
 LCL.Weight_Ordered = *ZERO;

 // LCL.Quantity Scheduled = PAR.Quantity Scheduled
 LCL.Quantity_Scheduled = PAR.Quantity_Scheduled;

 // LCL.Weight Scheduled = PAR.Weight Scheduled
 LCL.Weight_Scheduled = PAR.Weight_Scheduled;

 // Call program UPD Avail-To-Sell  ORD XF.
 CALL PROGRAM(UPD Avail-To-Sell  ORD XF) ('PDQNXFR');
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Order_Sequence_Number);
 PARAMETER(DB1.Order_Secondary_Line_Seq);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Warehouse_Code);
 PARAMETER(PAR.Requested_Ship_Date);
 PARAMETER(LCL.Quantity_Ordered);
 PARAMETER(LCL.Weight_Ordered);
 PARAMETER(LCL.Quantity_Scheduled);
 PARAMETER(LCL.Weight_Scheduled);
 PARAMETER('OD');
 PARAMETER(JOB.*PROGRAM);
 PARAMETER(PAR.Item_Age_Days);
 PARAMETER(PAR.Production_Ovr_AgeDte_Fr);
 PARAMETER(PAR.Production_Ovr_AgeDte_To);

 EXECUTE FUNCTION(Chg Qty/Wgt Scheduled CH) TYPE(CHGOBJ) FILE(OPBGWKP)           AC1425232;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Order_Sequence_Number);
 PARAMETER(DB1.Order_Secondary_Line_Seq);
 PARAMETER(LCL.Quantity_Scheduled);
 PARAMETER(LCL.Weight_Scheduled);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 //?Allocate
 // LCL.Quantity Ordered = PAR.Quantity Ordered
 LCL.Quantity_Ordered = PAR.Quantity_Ordered;

 // LCL.Weight Ordered = PAR.Weight Ordered
 LCL.Weight_Ordered = PAR.Weight_Ordered;

 // LCL.Quantity Scheduled = CON.*ZERO
 LCL.Quantity_Scheduled = *ZERO;

 // LCL.Weight Scheduled = CON.*ZERO
 LCL.Weight_Scheduled = *ZERO;

 // Call program UPD Avail-To-Sell  ORD XF.
 CALL PROGRAM(UPD Avail-To-Sell  ORD XF) ('PDQNXFR');
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Order_Sequence_Number);
 PARAMETER(DB1.Order_Secondary_Line_Seq);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Warehouse_Code);
 PARAMETER(PAR.Requested_Ship_Date);
 PARAMETER(LCL.Quantity_Ordered);
 PARAMETER(LCL.Weight_Ordered);
 PARAMETER(LCL.Quantity_Scheduled);
 PARAMETER(LCL.Weight_Scheduled);
 PARAMETER('OA');
 PARAMETER(JOB.*PROGRAM);
 PARAMETER(PAR.Item_Age_Days);
 PARAMETER(PAR.Production_Ovr_AgeDte_Fr);
 PARAMETER(PAR.Production_Ovr_AgeDte_To);

 EXECUTE FUNCTION(Chg Qty/Wgt Scheduled CH) TYPE(CHGOBJ) FILE(OPBGWKP)           AC1425232;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Order_Sequence_Number);
 PARAMETER(DB1.Order_Secondary_Line_Seq);
 PARAMETER(LCL.Quantity_Scheduled);
 PARAMETER(LCL.Weight_Scheduled);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 //?Schedule As Ordered
 CASE;

 // IF LCL.Quantity Ordered NE LCL.Quantity Scheduled
 IF LCL.Quantity_Ordered <> LCL.Quantity_Scheduled;

 // Call program UPD Avail-To-Sell  ORD XF.
 CALL PROGRAM(UPD Avail-To-Sell  ORD XF) ('PDQNXFR');
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Order_Sequence_Number);
 PARAMETER(DB1.Order_Secondary_Line_Seq);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Warehouse_Code);
 PARAMETER(PAR.Requested_Ship_Date);
 PARAMETER(LCL.Quantity_Ordered);
 PARAMETER(LCL.Weight_Ordered);
 PARAMETER(LCL.Quantity_Scheduled);
 PARAMETER(LCL.Weight_Scheduled);
 PARAMETER('AO');
 PARAMETER(JOB.*PROGRAM);
 PARAMETER(PAR.Item_Age_Days);
 PARAMETER(PAR.Production_Ovr_AgeDte_Fr);
 PARAMETER(PAR.Production_Ovr_AgeDte_To);

 EXECUTE FUNCTION(Chg Qty/Wgt Scheduled CH) TYPE(CHGOBJ) FILE(OPBGWKP)           AC1425232;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Order_Sequence_Number);
 PARAMETER(DB1.Order_Secondary_Line_Seq);
 PARAMETER(LCL.Quantity_Scheduled);
 PARAMETER(LCL.Weight_Scheduled);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 ENDIF;

 // Call program EDT Post Open Orders   XF.
 CALL PROGRAM(EDT Post Open Orders   XF) ('PDHRXFR');
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(LCL.Ship_To_Customer);
 PARAMETER(WRK.Unused_Parm_Value_USR);
 PARAMETER(WRK.Order_Weight_Total);
 PARAMETER('PS');

}


// Call program Upd Kill/Cut Pln 4OMS XF.
CALL PROGRAM(Upd Kill/Cut Pln 4OMS XF) ('PLDBXFR');
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Production_Date);
PARAMETER(*ZERO);
PARAMETER(*ZERO);

