// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PNS2XFR
// ?Date: 14.08.2025 Time: 03:46:27
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modification History
DO;

//?E3199 JJH 07/14/14 Added logic to correct the following RTVOBJ:
//?      Rtv Pricing Defaults  RT -  DBF IP Cust Pricing Dtl.  Then
//?      recompiled this program.  Due to current data set up existing
//?      processing will not be affected.
ENDDO;

EXECUTE FUNCTION(Rtv CustItem Prc Dtls RT) TYPE(RTVOBJ) FILE(PNF3REP)           AC1987948;
PARAMETER(PAR.Ship_To_Customer);
PARAMETER(PAR.Item_Code);
PARAMETER(NLL.Price_Sheet_Item_Sts);
PARAMETER(NLL.Order_Form_Print_Sts);
PARAMETER(PAR.OE_Dft_Commodity_Market);
PARAMETER(PAR.OE_Dft_Price_Method_Code);
PARAMETER(PAR.OE_Dft_Market_Date_Method);
PARAMETER(LCL.Record_Found_USR);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 // PAR.Record Found USR = CND.Record Not Found
 PAR.Record_Found_USR = 'N';

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

 // PAR.Record Found USR = CND.Record Found
 PAR.Record_Found_USR = 'Y';

}


EXECUTE FUNCTION(Rtv Pricing Defaults  RT) TYPE(RTVOBJ) FILE(PNF4REP)           AC1994285;
PARAMETER(PAR.Ship_To_Customer);
PARAMETER(LCL.OE_Dft_Commodity_Market);
PARAMETER(LCL.OE_Dft_Price_Method_Code);
PARAMETER(LCL.OE_Dft_Market_Date_Method);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


EXECUTE FUNCTION(Rtv OE Pricing Dflts  RT) TYPE(RTVOBJ) FILE(CABZREP)           AC1994286;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Item_Code);
PARAMETER(LCL.Default_Commod_Mark_basis);
PARAMETER(LCL.Price_Method_Default);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


//?DEFAULT: Price Method Code (Inter Company)
CASE;

// IF PAR.Type Code is Inter Company
IF PAR.Type_Code = 'IC';

// PAR.Price Method Code = CND.Manual
PAR.Price_Method_Code = 'MAN';

ENDIF;

//?DEFAULT: Price Method Code (Inter-Company Sales Adjustment)
CASE;

// IF PAR.Price Method Code is Blank
IF PAR.Price_Method_Code = *BLANK;

CASE;

// IF PAR.Type Code is Inter-Comp Sales Agreemnt
IF PAR.Type_Code = 'IS';

// PAR.Price Method Code = CND.Market-Auto Audit
PAR.Price_Method_Code = 'MKA';

ENDIF;

ENDIF;

//?DEFAULT: Price Method Code (3rd Party)
CASE;

// IF PAR.Price Method Code is Blank
IF PAR.Price_Method_Code = *BLANK;

CASE;

// IF PAR.OE Dft Price Method Code is Not Blank
IF PAR.OE_Dft_Price_Method_Code <> *BLANK;

//?Customer Item Default
// PAR.Price Method Code = PAR.OE Dft Price Method Code
PAR.Price_Method_Code = PAR.OE_Dft_Price_Method_Code;

// IF LCL.OE Dft Price Method Code is Not Blank
IF LCL.OE_Dft_Price_Method_Code <> *BLANK;

//?Customer Default
// PAR.Price Method Code = LCL.OE Dft Price Method Code
PAR.Price_Method_Code = LCL.OE_Dft_Price_Method_Code;

// IF LCL.Price Method Default is Not Blank
IF LCL.Price_Method_Default <> *BLANK;

//?Item Default
// PAR.Price Method Code = LCL.Price Method Default
PAR.Price_Method_Code = LCL.Price_Method_Default;

// IF *OTHERWISE
IF *OTHERWISE;

// PAR.Price Method Code = CND.Manual
PAR.Price_Method_Code = 'MAN';

ENDIF;

ENDIF;

EXECUTE FUNCTION(RTV Prc Mth Typ/Prc TyRT) TYPE(RTVOBJ) FILE(PDIHREP)           AC1989095;
PARAMETER(PAR.Price_Method_Code);
PARAMETER(LCL.Price_Method_Type);
PARAMETER(LCL.PMH_Price_Type);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

 QUIT;

}


CASE;

// IF LCL.Price Method Type is Manual/Contract
IF LCL.Price_Method_Type = 'Q'/'M';

// IF *OTHERWISE
IF *OTHERWISE;

//?DEFAULT: Commodity Market Code
CASE;

// IF PAR.Commodity Market Code is Not Entered
IF PAR.Commodity_Market_Code = *BLANK;

CASE;

// IF PAR.OE Dft Commodity Market is Entered
IF PAR.OE_Dft_Commodity_Market <> *BLANK;

//?Customer Item Default
// PAR.Commodity Market Code = PAR.OE Dft Commodity Market
PAR.Commodity_Market_Code = PAR.OE_Dft_Commodity_Market;

// IF LCL.OE Dft Commodity Market is Entered
IF LCL.OE_Dft_Commodity_Market <> *BLANK;

//?Customer Default
// PAR.Commodity Market Code = LCL.OE Dft Commodity Market
PAR.Commodity_Market_Code = LCL.OE_Dft_Commodity_Market;

// IF LCL.Default Commod Mark basis is Entered
IF LCL.Default_Commod_Mark_basis <> *BLANK;

//?Item Default
// PAR.Commodity Market Code = LCL.Default Commod Mark basis
PAR.Commodity_Market_Code = LCL.Default_Commod_Mark_basis;

ENDIF;

ENDIF;

//?DEFAULT: Market Date Method
CASE;

// IF PAR.Date Method Code is Not Entered
IF PAR.Date_Method_Code = *BLANK;

// AND PAR.Market Pricing Date is EQ Zero
AND PAR.Market_Pricing_Date = *ZERO;

// AND PAR.OD Market Begin Date is not entered
AND PAR.OD_Market_Begin_Date = *ZERO;

// AND PAR.OD Market Ending Date is not entered
AND PAR.OD_Market_Ending_Date = *ZERO;

CASE;

// IF PAR.OE Dft Market Date Method is Entered
IF PAR.OE_Dft_Market_Date_Method <> *BLANK;

//?Customer Item Default
// PAR.Date Method Code = PAR.OE Dft Market Date Method
PAR.Date_Method_Code = PAR.OE_Dft_Market_Date_Method;

// IF LCL.OE Dft Market Date Method is Entered
IF LCL.OE_Dft_Market_Date_Method <> *BLANK;

//?Customer Default
// PAR.Date Method Code = LCL.OE Dft Market Date Method
PAR.Date_Method_Code = LCL.OE_Dft_Market_Date_Method;

// IF *OTHERWISE
IF *OTHERWISE;

CASE;

// IF PAR.Price Method Code is Not Blank
IF PAR.Price_Method_Code <> *BLANK;

EXECUTE FUNCTION(Rtv Date Method Code  RT) TYPE(RTVOBJ) FILE(PMCEREP)           AC1847958;
PARAMETER(PAR.Price_Method_Code);
PARAMETER(PAR.Date_Method_Code);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


ENDIF;

ENDIF;

ENDIF;

ENDIF;

