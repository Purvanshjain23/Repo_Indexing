             PGM        PARM(&RTNCDE &MANUAL)
   /*-------------------------------------------------------------*/
   /* iSeries data and prep for the data for the IHUB to take     */
   /* this data at 2:30 am.                                       */
   /*-------------------------------------------------------------*/
   /* PULL THE DATA FROM THE PLBUCPP using sequel                 */
   /* and select the records and summary the data into the        */
   /* SPACTUALPF Then read SPACTUALPF and write a record          */
   /* to the Sp Actual File PLBYCPP                               */
   /*-------------------------------------------------------------*/
   /* Select the previous period hot weight and the current period*/
   /* data.                                                       */
   /*                                                             */
   /* Calculate Beginning Date and Calculate Endding Date         */
   /*                                                             */
   /* BASED ON THE CURRENT DATE AND GET THE PREVIOUS PERIOD       */
   /* BEGINNING DATE, AND THEN USE THE CURRENT DATA AND GET       */
   /* THE CURRENT PERIOD ENDING DATE                              */
   /*                                                             */
   /* CLRPFM THE SP ACTUAL BEFORE GETTING STARTED.                */
   /*                                                             */
   /* PERFORM THE SEQUEL THAT WILL THEN SELET THE DATA BASED      */
   /* ON PREVIOUS BEGINNING THRU THE CURRENT PERIOD ENDDING       */
   /* DATE.                                                       */
   /*                                                             */
   /* COUNT THE RECORDS AND SUMMARIZE THE DATA                    */
   /* THEN READ THIS DATA AND WRITE THE DATA INTO THE IHUB        */
   /* DATA - WHICH IS THE SP ACTUAL                               */
   /*-------------------------------------------------------------*/

   /*-------------------*/
   /* Declare Variables */
   /*-------------------*/
             DCL        VAR(&CMPCDE) TYPE(*CHAR) LEN(3)
             DCL        VAR(&RTNCDE) TYPE(*CHAR) LEN(7)
             DCL        VAR(&MANUAL) TYPE(*CHAR) LEN(1)
             DCL        VAR(&STEP) TYPE(*CHAR) LEN(3)

             DCL        VAR(&FDATE) TYPE(*DEC) LEN(7 0)
             DCL        VAR(&TDATE) TYPE(*DEC) LEN(7 0)
             DCL        VAR(&FDAT) TYPE(*DEC) LEN(7 0)
             DCL        VAR(&TDAT) TYPE(*DEC) LEN(7 0)
             DCL        VAR(&CURDAT) TYPE(*DEC) LEN(7 0)
             DCL        VAR(&FDATEA) TYPE(*CHAR) LEN(7)
             DCL        VAR(&TDATEA) TYPE(*CHAR) LEN(7)
             DCL        VAR(&JOBDATE) TYPE(*CHAR) LEN(6)
             DCL        VAR(&JOBDTE) TYPE(*CHAR) LEN(7)
             DCL        VAR(&NODAYS) TYPE(*DEC) LEN(5 0) VALUE(10)
             DCL        VAR(&WEEK) TYPE(*DEC) LEN(2 0)
             DCL        VAR(&PDATE) TYPE(*DEC) LEN(7 0)

   /*-------------------*/
   /* Parameter Fields */
   /*--FOR INDIVIDUAL---*/
   /*--DATA          ---*/
   /*-------------------*/
             DCL        VAR(&SPPROD) TYPE(*CHAR) LEN(30)
             DCL        VAR(&SPLOCA) TYPE(*CHAR) LEN(20)
             DCL        VAR(&SPKILD) TYPE(*DEC) LEN(8 0)
             DCL        VAR(&SPHEADA) TYPE(*CHAR) LEN(14)
             DCL        VAR(&SPHEAD) TYPE(*DEC) LEN(14 4)

             DCLF       FILE(HPEDEVGEN/SPACTUALPF)
  /* - - - - - - - - - - - - - - - - - - - - - - - - - - - */
  /* THIS WILL BE BY FROM AND TO DATE                      */
  /* SEQUEL HAS 7/27/2014 - 8/23/2014                      */
  /* - - - - - - - - - - - - - - - - - - - - - - - - - - - */

             IF         COND(&MANUAL *EQ 'H') THEN(DO)
             CHGVAR     VAR(&STEP) VALUE(001)
             EXECUTE    VIEW(HPEDEVGEN/SPACTUALSH) +
                          OUTFILE(HPEDEVGEN/SPACTUALPF) MSG(*NO)
                          ENDDO

  /* NEXT read the data from SPACTUALPF and write a record */
  /* to PLBYCPP  SPACTUAL                                  */
             CLRPFM     FILE(PLBYCPP)

 LOOP:       RCVF
             MONMSG     MSGID(CPF0889) EXEC(GOTO CMDLBL(ENDPGM))
             MONMSG     MSGID(CPF0000) EXEC(GOTO ENDPGM)

             CHGVAR     VAR(&SPPROD) VALUE(&BUZDTX)
             CHGVAR     VAR(&SPLOCA) VALUE(&BUZCTX)
             CHGVAR     VAR(&SPKILD) VALUE(&KLDTE)
             CHGVAR     VAR(&SPHEADA) VALUE(&CNTSTAR)
             CHGVAR     VAR(&SPHEAD) VALUE(&SPHEADA)

  /* Write a record to PLBYCPP                             */
             CALL       PGM(PLVFXFR) PARM(' ' &SPPROD &SPLOCA &SPKILD +
                          &SPHEAD)

             GOTO LOOP

ENDPGM:

             ENDPGM

