/*********************************************************************/
/*                                                                   */
/*  SYNOPSIS -  USE SEQUEL TO BUILD AND SEND THE SSI CONTROL         */
/*              RECORD TO THE SSI WORK FILE FOR CANCELLED            */
/*              TRANSACTION RECORDS                                  */
/*                                                                   */
/*  SYSTEM    - OMS                                                  */
/*  PROGRAM   - PMAFUPC - SEND SSI CONTROL TO THE SSI WORK FILE      */
/*  DATE      - 10/21/2008                                           */
/*********************************************************************/
/*  USE SEQUEL'S EXECUTE COMMAND TO CONCATONATE LONG FIELDS WITH     */
/*  A '~' BETWEEN THEM AND AT THE END OF THE LAST FIELD.             */
/*  THE VIEW REQUIRES A LENGTH BE EXPLICITLY DEFINED FOR THE         */
/*  EXECUTE TO WORK PROPERLY.                                        */
/*********************************************************************/
/*  MODIFICATIONS:                                                   */
/*                                                                   */
/*********************************************************************/
 PMAFUPC:    PGM        PARM(&SEQIDA &RETURN)

             DCL        VAR(&RETURN) TYPE(*CHAR) LEN(7)
             DCL        VAR(&SEQIDA) TYPE(*CHAR) LEN(9)
             DCL        VAR(&FROM)   TYPE(*CHAR) LEN(4)
             DCL        VAR(&TO)     TYPE(*CHAR) LEN(2)

             MONMSG     MSGID(CPF0000) EXEC(GOTO CMDLBL(ERROR))
             CHGVAR     VAR(&FROM) VALUE('FROM')
             CHGVAR     VAR(&TO) VALUE('TO')

/*-------------------------------------------------------------------*/
/* SEND THE SSI START OF RECORD                                      */
/*-------------------------------------------------------------------*/
             EXECUTE    VIEW(*LIBL/PMERREPV1) +
                          OUTFILE(*LIBL/PNESCPP) MBROPT(*ADD) +
                          NBRRCDS(*ALL) REPLACE(*NO) SETVAR((&SEQID +
                          &SEQIDA) (&FROM &FROM) (&TO &TO)) +
                          UNIQUEKEY(*NONE)
             GOTO       CMDLBL(END)

 ERROR:      CHGVAR     VAR(&RETURN) VALUE('Y2U0032')

 END:        ENDPGM
