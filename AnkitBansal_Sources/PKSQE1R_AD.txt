// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKSQE1R
// ?Date: 14.08.2025 Time: 02:52:39
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?091699  created
//?History log of changes
DO;

//?091699  created
//?11/02/2020 ISE H16853 - CHANGE BUY ORDER NUMBER FIELD LENGTH FROM 5 TO 7
ENDDO;

//?USER: Change DBF record

//?11/02/2020 ISE H16853 - CHANGE BUY ORDER NUMBER FIELD LENGTH FROM 5 TO 7
EXECUTE FUNCTION(Chg Paid 2 Week Avg   CH) TYPE(CHGOBJ) FILE(PKA1CPP)           AB1223658;
PARAMETER(DTL.BOH_Company_Number);
PARAMETER(DTL.BOH_Buy_Order_Number);
PARAMETER(DTL.BOL_Load_Number);
PARAMETER(DTL.TH_Tattoo_Number);
PARAMETER(DTL.TH_Kill_Date);
PARAMETER(DTL.TH_Paid_2_Week_Avg_Y_N);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Rtv Change Stamp      IF) TYPE(EXCINTFUN)                      AB1100934;
 PARAMETER(DB1.RS_User_Changed);
 PARAMETER(DB1.RS_Date_Changed);
 PARAMETER(DB1.RS_Time_Changed);
 PARAMETER(DB1.RS_Job);
 PARAMETER(DB1.RS_Program);
 {
  //?Execute internal function

  // PAR.RS User Changed = JOB.*USER
  PAR.RS_User_Changed = JOB.*USER;

  // PAR.RS Date Changed = JOB.*Job date
  PAR.RS_Date_Changed = JOB.*Job_date;

  // PAR.RS Time Changed = JOB.*Job time
  PAR.RS_Time_Changed = JOB.*Job_time;

  // PAR.RS Job = JOB.*JOB
  PAR.RS_Job = JOB.*JOB;

  // PAR.RS Program = JOB.*PROGRAM
  PAR.RS_Program = JOB.*PROGRAM;

 }

 EXECUTE FUNCTION(Chg/Crt Tatto/Spc Flds IF) TYPE(EXCINTFUN)                     AB1189848;
 PARAMETER(DB1.TH_Payment_Sts);
 PARAMETER(DB1.TH_Payment_Type);
 {
  //?Execute internal function

  EXECUTE FUNCTION(HPE056 Payment Type) TYPE(EXCINTFUN)                           AB1189849;
  {
   //?Execute internal function

   //?1/10/96  HPE056   Allow payment type to be update based on
   //?                  what the payment status is at the time this
   //?                  tattoo is being updated
  }

  //?Function Description:  If there are any fields that need to be
  //?Changed/Created during the Change functions or Create function
  //?Presently: Payment Type
  //?Add this routine to all of the change objects and create object
  //?that update the Payment Type
  CASE;

  // IF PAR.TH Payment Sts is Live anything
  IF PAR.TH_Payment_Sts = 'ML'/'PL'/'NL'/'SL'/'IL';

  // PAR.TH Payment Type = CND.Live
  PAR.TH_Payment_Type = 'L';

  // IF *OTHERWISE
  IF *OTHERWISE;

  // PAR.TH Payment Type = CND.Carcass Merit
  PAR.TH_Payment_Type = 'C';

  ENDIF;

 }

}


