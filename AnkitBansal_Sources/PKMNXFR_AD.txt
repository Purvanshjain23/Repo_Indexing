// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKMNXFR
// ?Date: 14.08.2025 Time: 02:52:11
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications and Comments
DO;

//?H16853 ISE 11/09/2020 - Recompiled due to change in Buy Order Number
ENDDO;

// PAR.Head Total Usr 2 = CON.*ZERO
PAR.Head_Total_Usr_2 = *ZERO;

// PAR.Head Total (5.0) USR = CON.*ZERO
PAR.Head_Total_5_0_USR = *ZERO;

// PAR.Yard Dead             USR = CON.*ZERO
PAR.Yard_Dead_USR = *ZERO;

// PAR.Live Weight           USR = CON.*ZERO
PAR.Live_Weight_USR = *ZERO;

EXECUTE FUNCTION(Rtv Int/Rsl Hd Select RT) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1204027;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.TH_Kill_Date);
PARAMETER(PAR.Head_Total_Usr_2);
PARAMETER(PAR.Head_Total_5_0_USR);
PARAMETER(PAR.Yard_Dead_USR);
PARAMETER(PAR.Live_Weight_USR);
PARAMETER(PAR.Avg_Live_Wgt_Usr_Rep);
{
 //?USER: Process Data record

 //?Resale internal with Select/mark for future
 CASE;

 // IF DB1.TH Resale Spread Sts is Select/Mark for Future
 IF DB1.TH_Resale_Spread_Sts = 'M'/'S';

 // PAR.Head Total (5.0) USR = PAR.Head Total (5.0) USR + DB1.TH Head Received
 PAR.Head_Total_5_0_USR = PAR.Head_Total_5_0_USR + DB1.TH_Head_Received;

 // WRK.TH Live Wgt = PAR.Avg Live Wgt Usr Rep * DB1.TH Head Received *
 WRK.TH_Live_Wgt = PAR.Avg_Live_Wgt_Usr_Rep * DB1.TH_Head_Received;

 // PAR.Live Weight           USR = PAR.Live Weight           USR + WRK.TH Live Wgt
 PAR.Live_Weight_USR = PAR.Live_Weight_USR + WRK.TH_Live_Wgt;

 // PAR.Yard Dead             USR = PAR.Yard Dead             USR + DB1.TH Yard Dead
 PAR.Yard_Dead_USR = PAR.Yard_Dead_USR + DB1.TH_Yard_Deads;

 ENDIF;

 //?Resale internal with Select for Spread
 CASE;

 // IF DB1.TH Resale Spread Sts is Select for Spread
 IF DB1.TH_Resale_Spread_Sts = 'S';

 // Compute: Head Selected
 PAR.Head_Total_Usr_2 = ( PAR.Head_Total_Usr_2 + DB1.TH_Head_Received ) - DB1.TH_Yard_Deads;

 ENDIF;

}


