// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDWOXFR
// ?Date: 14.08.2025 Time: 03:30:17
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?02/08/2010 LJB E000512  Recompile for new field added and updates
//?RMC 3/24/05 OMS036 Changes for the Deposit Time
//? & Changes to allow for printing Cash Journal for posted deposits
//?   Input parm par.Status - Y or N  will be YES when the cash journal
//?   is printed for not yet posted deposits.  So when it's no, files
//?     other than  A/R Posting and Reporting wont be updated.
// Send information message - 'Loading Cash Journal File'
MESSAGE(USR2098 *INFO);

// Call program CHG Deposit Listing    XF.
CALL PROGRAM(CHG Deposit Listing    XF) ('PDX4XFR');
PARAMETER(PAR.Bank_Code);
PARAMETER(PAR.Deposit_Date);
PARAMETER(PAR.Deposit_Time);
PARAMETER('R');
PARAMETER(PAR.Status_Y_or_N);

// Send information message - 'Printing Cash Journal'
MESSAGE(USR2099 *INFO);

// Call program PRT A/R Cash Journal   PF.
CALL PROGRAM(PRT A/R Cash Journal   PF) ('PDVKPFR');
PARAMETER(PAR.Bank_Code);
PARAMETER(PAR.Deposit_Date);
PARAMETER(*ZERO);
PARAMETER(PAR.Deposit_Time);

//?... OMS036 RMC 4/4/05  if update sts is yes
CASE;

// IF PAR.Status - Y or N is yes
IF PAR.Status_Y_or_N = 'Y';

EXECUTE FUNCTION(RTV Chg Process Code   RT) TYPE(RTVOBJ) FILE(PDJ2CPP)          AC1344687;
PARAMETER(PAR.Bank_Code);
PARAMETER(PAR.Deposit_Date);
PARAMETER(PAR.Deposit_Time);
PARAMETER('R');
{
 //?USER: Process Data record

 CASE;

 // IF DB1.A/R Processing Status is Avail. and Posted
 IF DB1.A_R_Processing_Status = 'A'/'P';

 // IF *OTHERWISE
 IF *OTHERWISE;

 EXECUTE FUNCTION(CHG Process Code       CH) TYPE(CHGOBJ) FILE(PDJ2CPP)          AC1344695;
 PARAMETER(PAR.Bank_Code);
 PARAMETER(PAR.Deposit_Date);
 PARAMETER(PAR.Deposit_Time);
 PARAMETER(PAR.A_R_Processing_Status);
 PARAMETER(DB1.CD_TF_Internal_Batch_Nbr);
 PARAMETER(DB1.CD_TF_Immediate_Fund_Amt);
 PARAMETER(DB1.CD_TF_1_Day_Fund_Amt);
 PARAMETER(DB1.CD_TF_2_Day_Fund_Amt);
 PARAMETER(DB1.CD_SB_Exempt_Immed_Amt);
 PARAMETER(DB1.CD_SB_1_Day_Exempt_Immed);
 PARAMETER(DB1.CD_SB_2_Day_Exempt_Immed);
 PARAMETER(DB1.SBD_Exempt_Total_Amount);
 PARAMETER(DB1.ARBD_Unused_Amt_2);
 PARAMETER(DB1.ARBD_Unused_Amt_3);
 PARAMETER(DB1.ARBD_Unused_Amt_4);
 PARAMETER(DB1.ARBD_Unused_Amt_5);
 ENDIF;

}


ENDIF;

// Send information message - 'Report has been printed.'
MESSAGE(USR2100 *INFO);

