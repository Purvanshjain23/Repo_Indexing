// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POO1XFR
// ?Date: 14.08.2025 Time: 03:38:22
// ?------------------------------------------------------------------------------------------------

//?Execute user function

// LCL.From Date             USR = PAR.From Date             USR
LCL.From_Date_USR = PAR.From_Date_USR;

//?Read Matrix file and output one record per kill/shift/srce/wt range
// DOW LCL.From Date             USR LE PAR.To Date               USR
DOW LCL.From_Date_USR <= PAR.To_Date_USR;

EXECUTE FUNCTION(Rtv Crt W015          RT) TYPE(RTVOBJ) FILE(PDI1REP)           AC1642106;
PARAMETER(PAR.Company);
PARAMETER(PAR.Cutout_Matrix_Code);
PARAMETER(LCL.From_Date_USR);
{
 //?USER: Process Data record

 //?Write External records - 1st shift and 2nd shift
 EXECUTE FUNCTION(Crt W015 Weight Rnge  CR) TYPE(CRTOBJ) FILE(POBVCPP)           AC1642102;
 PARAMETER(PAR.Company_Number);
 PARAMETER(PAR.Kill_Date);
 PARAMETER('E');
 PARAMETER('1');
 PARAMETER(DB1.Min_Carcass_Weight);
 PARAMETER(DB1.Max_Carcass_Weight);
 PARAMETER(DB1.Min_Live_Weight);
 PARAMETER(DB1.Max_Live_Weight);
 PARAMETER(*ZERO);
 EXECUTE FUNCTION(Crt W015 Weight Rnge  CR) TYPE(CRTOBJ) FILE(POBVCPP)           AC1642102;
 PARAMETER(PAR.Company_Number);
 PARAMETER(PAR.Kill_Date);
 PARAMETER('E');
 PARAMETER('2');
 PARAMETER(DB1.Min_Carcass_Weight);
 PARAMETER(DB1.Max_Carcass_Weight);
 PARAMETER(DB1.Min_Live_Weight);
 PARAMETER(DB1.Max_Live_Weight);
 PARAMETER(*ZERO);
 //?Write Internal record - 1st shift and 2nd shift
 EXECUTE FUNCTION(Crt W015 Weight Rnge  CR) TYPE(CRTOBJ) FILE(POBVCPP)           AC1642102;
 PARAMETER(PAR.Company_Number);
 PARAMETER(PAR.Kill_Date);
 PARAMETER('I');
 PARAMETER('1');
 PARAMETER(DB1.Min_Carcass_Weight);
 PARAMETER(DB1.Max_Carcass_Weight);
 PARAMETER(DB1.Min_Live_Weight);
 PARAMETER(DB1.Max_Live_Weight);
 PARAMETER(*ZERO);
 EXECUTE FUNCTION(Crt W015 Weight Rnge  CR) TYPE(CRTOBJ) FILE(POBVCPP)           AC1642102;
 PARAMETER(PAR.Company_Number);
 PARAMETER(PAR.Kill_Date);
 PARAMETER('I');
 PARAMETER('2');
 PARAMETER(DB1.Min_Carcass_Weight);
 PARAMETER(DB1.Max_Carcass_Weight);
 PARAMETER(DB1.Min_Live_Weight);
 PARAMETER(DB1.Max_Live_Weight);
 PARAMETER(*ZERO);
}


// LCL.From Date             USR = LCL.From Date             USR + CON.1 *DAYS
LCL.From_Date_USR = DATEINCR(LCL.From_Date_USR 1 'DY' 1111111 'NONE' 'N' 1);

ENDDO;

