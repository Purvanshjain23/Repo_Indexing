/***************************************************************** */
/*                                                                 */
/*  PROGRAM:         PWOLUPC                                       */
/*  PROGRAM NAME:    PURGE REPAYMENT BACKUP FILES IJS CALL         */
/*  PROGRAMMER:      BRAD BADEN                                    */
/*  CREATE DATE:     11/29/2021                                    */
/*                                                                 */
/*  DESCRIPTION:     Call this CLP from the IJS weekly to purge    */
/*                   the Repayment backup files in library         */
/*                   PRKFSAV.  Files that are 6 weeks or older are */
/*                   purged.                                       */
/*                                                                 */
/*******************************************************************/
/*  Modification History                                           */
/*                                                                 */
/*******************************************************************/
             PGM

             DCL        VAR(&SAVELIB) TYPE(*CHAR) LEN(10)
             DCL        VAR(&LIBRARY) TYPE(*CHAR) LEN(10)
             DCL        VAR(&USRCLS)  TYPE(*CHAR) LEN(10)
             DCL        VAR(&RETURN)  TYPE(*CHAR) LEN(7)

             CHGVAR     VAR(&SAVELIB) VALUE('PRKFSAV   ')

             RTVUSRPRF  USRCLS(&USRCLS)

/* Process GUYMON Repayment backup files */
GUY:         CHGVAR     VAR(&LIBRARY) VALUE('PRKFGUP   ')
             IF         COND(&USRCLS *EQ '*PGMR    ') THEN(CHGVAR +
                          VAR(&LIBRARY) VALUE('PRKFTSTGUP'))

             /* Remove and/or add Guymon data library */
             RMVLIBLE   LIB(&LIBRARY)
             MONMSG     MSGID(CPF2104)
             ADDLIBLE   LIB(&LIBRARY)        /* Top of library list */

             CALL       PGM(PWOJXFR) PARM(&RETURN &SAVELIB)

             RMVLIBLE   LIB(&LIBRARY)
             MONMSG     MSGID(CPF2104)

/* Process SEABOARD TRIUMPH FOODS Repayment backup files */
STF:         CHGVAR     VAR(&LIBRARY) VALUE('PRKFSTP   ')
             IF         COND(&USRCLS *EQ '*PGMR    ') THEN(CHGVAR +
                          VAR(&LIBRARY) VALUE('PRKFTSTSTP'))

             /* Remove and/or add STF data library */
             RMVLIBLE   LIB(&LIBRARY)
             MONMSG     MSGID(CPF2104)
             ADDLIBLE   LIB(&LIBRARY)        /* Top of library list */

             CALL       PGM(PWOJXFR) PARM(&RETURN &SAVELIB)

             RMVLIBLE   LIB(&LIBRARY)
             MONMSG     MSGID(CPF2104)

/* Process TRIUMPH FOODS Repayment backup files */
TF:          CHGVAR     VAR(&LIBRARY) VALUE('PRKFTFP   ')
             IF         COND(&USRCLS *EQ '*PGMR    ') THEN(CHGVAR +
                          VAR(&LIBRARY) VALUE('PRKFTSTTFP'))

             /* Remove and/or add STF data library */
             RMVLIBLE   LIB(&LIBRARY)
             MONMSG     MSGID(CPF2104)
             ADDLIBLE   LIB(&LIBRARY)        /* Top of library list */

             CALL       PGM(PWOJXFR) PARM(&RETURN &SAVELIB)

             RMVLIBLE   LIB(&LIBRARY)
             MONMSG     MSGID(CPF2104)

 ENDIT:      ENDPGM
