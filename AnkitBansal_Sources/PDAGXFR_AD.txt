// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDAGXFR
// ?Date: 14.08.2025 Time: 03:30:49
// ?------------------------------------------------------------------------------------------------

//?Execute user function

CASE;

// IF PAR.Financial Type is Accrual Charge
IF PAR.Financial_Type = 'A';

EXECUTE FUNCTION(RTV G/L Codes For Accr RT) TYPE(RTVOBJ) FILE(OMHLREP)          AC1368554;
PARAMETER(PAR.USR_Finan_Accrual_Code);
PARAMETER(PAR.Fin_Acc_Code_Description);
PARAMETER(PAR.Sub_Ledger_Code);
PARAMETER(PAR.G_L_Code_Dr);
PARAMETER(PAR.G_L_Code_Cr);
PARAMETER(PAR.Use_G_L_Code_Dr_Cr);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 // PGM.*Return code = CND.*Normal
 PGM.*Return_code = *BLANK;

 // PAR.Sub Ledger Code = DB1.Sub Ledger Code
 PAR.Sub_Ledger_Code = DB1.Sub_Ledger_Code;

 CASE;

 // IF PAR.Use G/L Code Dr/Cr is yes
 IF PAR.Use_G_L_Code_Dr_Cr = 'Y';

 // PAR.G/L Code Dr = DB1.G/L Code Dr
 PAR.G_L_Code_Dr = DB1.G_L_Code_Dr;

 // PAR.G/L Code Cr = DB1.G/L Code Cr
 PAR.G_L_Code_Cr = DB1.G_L_Code_Cr;

 // IF *OTHERWISE
 IF *OTHERWISE;

 // PAR.G/L Code Dr = DB1.G/L Code Difference Dr
 PAR.G_L_Code_Dr = DB1.G_L_Sub_Account_Code;

 // PAR.G/L Code Cr = DB1.G/L Code Difference Cr
 PAR.G_L_Code_Cr = DB1.Sales_History_Exp_Bucket;

 ENDIF;

 // PAR.Accrual Description = DB1.Accrual Description
 PAR.Accrual_Description = DB1.Accrual_Description;

}


ENDIF;

CASE;

// IF PAR.Financial Type is Non Accruals
IF PAR.Financial_Type = 'F'/'S';

EXECUTE FUNCTION(RTV G/L Codes          RT) TYPE(RTVOBJ) FILE(PDJ6REP)          AC1368553;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.USR_Finan_Accrual_Code);
PARAMETER(PAR.Fin_Acc_Code_Description);
PARAMETER(PAR.G_L_Code_Dr);
PARAMETER(PAR.G_L_Code_Cr);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 // PGM.*Return code = CND.*Normal
 PGM.*Return_code = *BLANK;

 MOVE *ALL (To: PAR From: DB1);

}


ENDIF;

CASE;

// IF PGM.*Return code is *Normal
IF PGM.*Return_code = *BLANK;

// IF *OTHERWISE
IF *OTHERWISE;

// PGM.*Return code = CND.Error Found
PGM.*Return_code = 'ERROR';

ENDIF;

