// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDBYXFR
// ?Date: 14.08.2025 Time: 03:33:58
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(CNV Add Label Date     RT) TYPE(RTVOBJ) FILE(CAB1REP)          AC1480184;
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Warehouse Code is Guymon Fresh
 IF DB1.Warehouse_Code = 'GP1';

 CASE;

 // IF DB1.Production Date NE WRK.ZERO
 IF DB1.Production_Date <> WRK.ZERO;

 // AND DB1.Production Date NE DB1.Label Date
 AND DB1.Production_Date <> DB1.Label_Date;

 EXECUTE FUNCTION(Rtv Chilling Time     IF) TYPE(EXCINTFUN)                      AC1430022;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Item_Code);
 PARAMETER(PAR.Fresh_Chilling_Time);
 PARAMETER(DB1.Warehouse_Code);
 {
  //?Execute internal function

  EXECUTE FUNCTION(Rtv Chill Time        RT) TYPE(RTVOBJ) FILE(CABZREP)           AC1304403;
  PARAMETER(PAR.Company_Number);
  PARAMETER(PAR.Item_Code);
  PARAMETER(PAR.Fresh_Chilling_Time);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

  }

  EXECUTE FUNCTION(Rtv Whs Typ/FZNCHLTME IF) TYPE(EXCINTFUN)                      AC1423925;
  PARAMETER(PAR.Company_Number);
  PARAMETER(PAR.Warehouse_Code);
  PARAMETER(WRK.Warehouse_Type);
  PARAMETER(PAR.Fresh_Chilling_Time);
  {
   //?Execute internal function

   EXECUTE FUNCTION(RTV Warehouse Type     RT) TYPE(RTVOBJ) FILE(CAADREP)          AC1285482;
   PARAMETER(PAR.Warehouse_Code);
   PARAMETER(PAR.Warehouse_Type);
   {
    //?USER: Processing if Data record not found

    MOVE *ALL (To: PAR From: CON);

    //?USER: Process Data record

    MOVE *ALL (To: PAR From: DB1);

   }

   CASE;

   // IF PAR.Warehouse Type is Frozen
   IF PAR.Warehouse_Type = 'FZ';

   EXECUTE FUNCTION(RTV Numeric Value      RT) TYPE(RTVOBJ) FILE(PDKMREP)          AC1394480;
   PARAMETER(PAR.Company_Number);
   PARAMETER('FZNCHLTME');
   PARAMETER(PAR.System_Value_Numeric);
   {
    //?USER: Processing if Data record not found

    // PGM.*Return code = CND.*Record does not exist
    PGM.*Return_code = 'Y2U0005';

    //?USER: Process Data record

    MOVE *ALL (To: PAR From: DB1);

   }

   // PAR.Fresh Chilling Time = PAR.System Value Numeric
   PAR.Fresh_Chilling_Time = PAR.System_Value_Numeric;

   ENDIF;

  }

 }

 CASE;

 // IF PAR.Fresh Chilling Time is Not Entered
 IF PAR.Fresh_Chilling_Time = *ZERO;

 EXECUTE FUNCTION(Del Item Balance Dtl  DL) TYPE(DLTOBJ) FILE(CAB1REP)           AC1544111;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Warehouse_Code);
 PARAMETER(DB1.Production_Date);
 EXECUTE FUNCTION(Crt Item Bal. Detail   CR) TYPE(CRTOBJ) FILE(CAB1REP)          AC1120962;
 PARAMETER(999);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Warehouse_Code);
 PARAMETER(DB1.Label_Date);
 PARAMETER(DB1.Physical_Count_Weight);
 PARAMETER(DB1.Physical_Count_Qty_UOM1);
 PARAMETER(DB1.Physical_Count_Qty_UOM2);
 PARAMETER(DB1.Physical_Count_Qty_UOM3);
 PARAMETER(DB1.Physical_Count_Status);
 PARAMETER(DB1.Quantity_on_Hand_Weight);
 PARAMETER(DB1.Quantity_on_Hand_UOM1);
 PARAMETER(DB1.Quantity_on_Hand_UOM2);
 PARAMETER(DB1.Quantity_on_Hand_UOM3);
 PARAMETER(DB1.Quantity_In_Chill);
 PARAMETER(DB1.Weight_In_Chill);
 PARAMETER(DB1.Update_Exception_Status);
 PARAMETER(DB1.Physical_Start_Weight);
 PARAMETER(DB1.Physical_Start_UOM1);
 PARAMETER(DB1.Physical_Start_UOM2);
 PARAMETER(DB1.Physical_Start_UOM3);
 PARAMETER(DB1.Physical_Start_Date);
 PARAMETER(DB1.Unit_Cost_Per_Pound);
 PARAMETER(DB1.Last_Cost);
 PARAMETER(DB1.Value_of_On_Hand_Inventor);
 PARAMETER(DB1.Label_Date);
 PARAMETER(DB1.Item_Structure_Class_Code);
 PARAMETER(DB1.Item_Structure_Group_Code);
 PARAMETER(DB1.Item_Structure_Type_Code);
 PARAMETER(DB1.EDI_Status_1);
 PARAMETER(DB1.EDI_Status_2);
 PARAMETER(DB1.EDI_Status_3);
 PARAMETER(DB1.Record_Status);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Date/Time Stamp   IF) TYPE(EXCINTFUN)                      AC1142219;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*JOB
   PAR.Job_Name = JOB.*JOB;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

  // Call program RTV System Date/Time   UP.
  CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
  PARAMETER(DB1.Job_Date);
  PARAMETER(DB1.Job_Time);

 }

 ENDIF;

 ENDIF;

 ENDIF;

}


