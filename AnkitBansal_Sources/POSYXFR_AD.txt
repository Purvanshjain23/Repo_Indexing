// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POSYXFR
// ?Date: 14.08.2025 Time: 03:38:56
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Upd Req Delv Dte/Tme  RT) TYPE(RTVOBJ) FILE(OMHSTPP)           AC1656532;
{
 //?USER: Initialize routine

 // LCL.Order Number = CON.*ZERO
 LCL.Order_Number = *ZERO;

 //?USER: Process Data record

 CASE;

 // IF DB1.Order Number NE LCL.Order Number
 IF DB1.Order_Number <> LCL.Order_Number;

 EXECUTE FUNCTION(RTV Req Delv/Hdr Sts  RT) TYPE(RTVOBJ) FILE(OPBFCPP)           AC1598298;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(WRK.Header_Status);
 PARAMETER(LCL.Requested_Delivery_Date);
 PARAMETER(LCL.Requested_Delivery_Time);
 {
  //?USER: Processing if Data record not found

  // PGM.*Return code = CND.*Record does not exist
  PGM.*Return_code = 'Y2U0005';

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 //?R15161 DN 07/15/19-Set Unused WRK Fields to NLL.
 EXECUTE FUNCTION(RTV Export Fields      RT) TYPE(RTVOBJ) FILE(OMFJCPP)          AC1448235;
 PARAMETER(DB1.Load_ID);
 PARAMETER(NLL.Export_Status);
 PARAMETER(NLL.Shipping_Line);
 PARAMETER(NLL.Port_Delv_Terminal);
 PARAMETER(LCL.Vessel_Name);
 PARAMETER(NLL.Voyage);
 PARAMETER(NLL.Sail_Date);
 PARAMETER(NLL.Booking_Number);
 PARAMETER(NLL.Discharge_Port);
 PARAMETER(LCL.Arrival_Date);
 PARAMETER(NLL.Container_Number);
 PARAMETER(NLL.Date_In);
 PARAMETER(NLL.Time_In);
 PARAMETER(NLL.Date_Out);
 PARAMETER(NLL.Time_Out);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  // PGM.*Return code = CND.*Record does not exist
  PGM.*Return_code = 'Y2U0005';

  //?USER: Process Data record

  // PGM.*Return code = CND.*Record already exists
  PGM.*Return_code = 'Y2U0003';

  MOVE *ALL (To: PAR From: DB1);

 }

 // LCL.Order Number = DB1.Order Number
 LCL.Order_Number = DB1.Order_Number;

 ENDIF;

 //?R15161 DN 07/15/19-Removed Updating of Unnecessary Fields.
 EXECUTE FUNCTION(Chg Req Delv Dte/Tme  CH) TYPE(CHGOBJ) FILE(OMHSTPP)           AC1656549;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Order_Sequence_Number);
 PARAMETER(DB1.Order_Secondary_Line_Seq);
 PARAMETER(LCL.Arrival_Date);
 PARAMETER(LCL.Requested_Delivery_Date);
 PARAMETER(LCL.Requested_Delivery_Time);
 PARAMETER(LCL.Vessel_Name);
 {
  //?USER: Processing after Data read

  // DB1.Data Mart Process Sts = CND.no
  DB1.Data_Mart_Process_Sts = 'N';

 }

}


