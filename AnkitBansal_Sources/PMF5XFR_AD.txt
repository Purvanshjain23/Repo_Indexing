// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMF5XFR
// ?Date: 14.08.2025 Time: 03:45:00
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Rtv Upd CIE from ItmSpRT) TYPE(RTVOBJ) FILE(PMFDREP)           AC1926247;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Item_Code);
PARAMETER(PAR.Produce_on_Sunday_Sts);
PARAMETER(PAR.Produce_on_Monday_Sts);
PARAMETER(PAR.Produce_on_Tuesday_Sts);
PARAMETER(PAR.Produce_on_Wednesday_Sts);
PARAMETER(PAR.Produce_on_Thursday_Sts);
PARAMETER(PAR.Produce_on_Friday_Sts);
PARAMETER(PAR.Produce_on_Saturday_Sts);
PARAMETER(PAR.Plan_Production_Sts);
PARAMETER(PAR.Allocation_Method);
PARAMETER(PAR.CIE_Use_Age_Days_over_Max);
PARAMETER(PAR.CIE_MPR_Report_to_USDA);
PARAMETER(PAR.CIE_Capacity_Code);
{
 //?USER: Processing if Data record not found

 EXECUTE FUNCTION(Crt Company Item Ext  CR) TYPE(CRTOBJ) FILE(PMFDREP)           AC1926035;
 PARAMETER(PAR.Company_Number);
 PARAMETER(PAR.Item_Code);
 PARAMETER(PAR.Produce_on_Sunday_Sts);
 PARAMETER(PAR.Produce_on_Monday_Sts);
 PARAMETER(PAR.Produce_on_Tuesday_Sts);
 PARAMETER(PAR.Produce_on_Wednesday_Sts);
 PARAMETER(PAR.Produce_on_Thursday_Sts);
 PARAMETER(PAR.Produce_on_Friday_Sts);
 PARAMETER(PAR.Produce_on_Saturday_Sts);
 PARAMETER(PAR.Plan_Production_Sts);
 PARAMETER(PAR.Allocation_Method);
 PARAMETER(LCL.Adjust_Credit_Pieces);
 PARAMETER(PAR.CIE_Use_Age_Days_over_Max);
 PARAMETER(PAR.CIE_MPR_Report_to_USDA);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*BLANK);
 PARAMETER(PAR.CIE_Capacity_Code);
 PARAMETER('A');
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Crt Date/Time      IF) TYPE(EXCINTFUN)                     AC1523477;
  PARAMETER(DB1.Record_Status);
  PARAMETER(DB1.Create_Date);
  PARAMETER(DB1.Create_Time);
  PARAMETER(DB1.Create_User);
  PARAMETER(DB1.Create_Program);
  PARAMETER(DB1.Change_Date);
  PARAMETER(DB1.Change_Time);
  PARAMETER(DB1.Change_User);
  PARAMETER(DB1.Change_Program);
  {
   //?Execute internal function

   //?*** Set RECORD STATUS field. ***
   // PAR.Record Status = CND.Active
   PAR.Record_Status = 'A';

   //?*** Set CREATE fields. ***
   // PAR.Create Date = JOB.*Job date
   PAR.Create_Date = JOB.*Job_date;

   // PAR.Create Time = JOB.*Job time
   PAR.Create_Time = JOB.*Job_time;

   // PAR.Create User = JOB.*USER
   PAR.Create_User = JOB.*USER;

   // PAR.Create Program = JOB.*PROGRAM
   PAR.Create_Program = JOB.*PROGRAM;

   //?*** Set CHANGE fields. ***
   // PAR.Change Date = CON.*ZERO
   PAR.Change_Date = *ZERO;

   // PAR.Change Time = CON.*ZERO
   PAR.Change_Time = *ZERO;

   // PAR.Change User = CON.*BLANK
   PAR.Change_User = *BLANK;

   // PAR.Change Program = CON.*BLANK
   PAR.Change_Program = *BLANK;

  }

 }

 //?USER: Process Data record

 //?S16263 DN 03/10/20-Update Production Plan Sts in OD for Open Orders.
 CASE;

 // IF DB1.Plan Production Sts is No
 IF DB1.Plan_Production_Sts = 'N';

 // AND PAR.Plan Production Sts is Yes
 AND PAR.Plan_Production_Sts = *BLANK;

 //?If Plan Production Sts goes from 'N' to 'blank' then update the OD
 //?  Production Plan Sts to blank in the O.D. file for open Orders.
 EXECUTE FUNCTION(Upd Production Plan StsRT) TYPE(RTVOBJ) FILE(OPBGWKP)          AC2183296;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Item_Code);
 PARAMETER(PAR.Plan_Production_Sts);
 {
  //?USER: Process Data record

  //?Access path selects Open Orders only.
  EXECUTE FUNCTION(Chg Production Plan StsCH) TYPE(CHGOBJ) FILE(OPBGWKP)          AC2183297;
  PARAMETER(DB1.Company_Number);
  PARAMETER(DB1.Order_Number);
  PARAMETER(DB1.Order_Sequence_Number);
  PARAMETER(DB1.Order_Secondary_Line_Seq);
  PARAMETER(PAR.OD_Production_Plan_Sts);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Date/Time Stamp 2 IF) TYPE(EXCINTFUN)                      AC2165057;
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*PROGRAM
    PAR.Job_Name = JOB.*PROGRAM;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

  }

 }

 ENDIF;

 EXECUTE FUNCTION(Chg Company Item Ext  CH) TYPE(CHGOBJ) FILE(PMFDREP)           AC1926036;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Item_Code);
 PARAMETER(PAR.Produce_on_Sunday_Sts);
 PARAMETER(PAR.Produce_on_Monday_Sts);
 PARAMETER(PAR.Produce_on_Tuesday_Sts);
 PARAMETER(PAR.Produce_on_Wednesday_Sts);
 PARAMETER(PAR.Produce_on_Thursday_Sts);
 PARAMETER(PAR.Produce_on_Friday_Sts);
 PARAMETER(PAR.Produce_on_Saturday_Sts);
 PARAMETER(PAR.Plan_Production_Sts);
 PARAMETER(PAR.Allocation_Method);
 PARAMETER(DB1.Adjust_Credit_Pieces);
 PARAMETER(PAR.CIE_Use_Age_Days_over_Max);
 PARAMETER(PAR.CIE_MPR_Report_to_USDA);
 PARAMETER(DB1.CIE_Unused_Number);
 PARAMETER(DB1.CIE_Unused_Number_2);
 PARAMETER(DB1.CIE_Unused_Date);
 PARAMETER(DB1.CIE_TPM_Equipment_Code);
 PARAMETER(PAR.CIE_Capacity_Code);
 PARAMETER(DB1.Record_Status);
 PARAMETER(DB1.Create_Date);
 PARAMETER(DB1.Create_Time);
 PARAMETER(DB1.Create_User);
 PARAMETER(DB1.Create_Program);
 PARAMETER(DB1.Change_Date);
 PARAMETER(DB1.Change_Time);
 PARAMETER(DB1.Change_User);
 PARAMETER(DB1.Change_Program);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Chg Date/Time      IF) TYPE(EXCINTFUN)                     AC1523476;
  PARAMETER(DB1.Change_Date);
  PARAMETER(DB1.Change_Time);
  PARAMETER(DB1.Change_User);
  PARAMETER(DB1.Change_Program);
  {
   //?Execute internal function

   // PAR.Change Date = JOB.*Job date
   PAR.Change_Date = JOB.*Job_date;

   // PAR.Change Time = JOB.*Job time
   PAR.Change_Time = JOB.*Job_time;

   // PAR.Change User = JOB.*USER
   PAR.Change_User = JOB.*USER;

   // PAR.Change Program = JOB.*PROGRAM
   PAR.Change_Program = JOB.*PROGRAM;

  }

 }

}


