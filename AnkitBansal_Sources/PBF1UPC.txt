/********************************************************************/
/*                                                                  */
/*  SYNOPSIS - CL PROGRAM FOR SENDING LS89 SBM COMPLETION MSG      */
/*             E2247  - NEW 01/07/2013                             */
/*                                                                  */
/*                                                                  */
/*  SYSTEM    - OMS                                                 */
/*  DATE      - 10/16/2012                                          */
/*  DEVELOPER - ROSE CENTONZE                                       */
/*                                                                  */
/********************************************************************/
/* MODIFICATIONS:                                                   */
/********************************************************************/
/* 07/07/16 JBB E6180 - Change pager name to use underscore instead */
/*                      of dashes                                   */
/* 02/28/17 JBB E9064 - Add company 440 processing                  */
/********************************************************************/
             PGM        PARM(&MSGNBR &PLTCO)

/* WORK FIELDS */
             DCL        VAR(&USRCLS) TYPE(*CHAR) LEN(10)
             DCL        VAR(&DIST) TYPE(*CHAR) LEN(10)
             DCL        VAR(&RPTDTE) TYPE(*CHAR) LEN(6)  /*REPORTING D AY STS */
             DCL        VAR(&TIME)   TYPE(*CHAR) LEN(6)   /*SYSTEM TIME       */
             DCL        VAR(&MSGNBR) TYPE(*CHAR) LEN(1)
             DCL        VAR(&MSG) TYPE(*CHAR) LEN(132)
             DCL        VAR(&PLTCO) TYPE(*CHAR) LEN(3)
/*-----------------------------------------------------------------*/
/* INITILIZATION                                                   */
/*-----------------------------------------------------------------*/
/* RETREIVE USER CLASS */
             RTVUSRPRF  USRCLS(&USRCLS)
             IF COND(&USRCLS *EQ '*PGMR') THEN(DO)
                CHGVAR VAR(&DIST) VALUE('PRKDEV2')
                ENDDO
      /*          ELSE IF COND(&PLTCO *EQ '360')  +
               THEN(CHGVAR VAR(&DIST) VALUE('PRKLS89-GU')) */
      /*          ELSE IF COND(&PLTCO *EQ '960')  +
               THEN(CHGVAR VAR(&DIST) VALUE('PRKLS89-TF')) */
      /*** Change Pager names to use underscore instead of dash **/
                  ELSE IF COND(&PLTCO *EQ '360')  +
               THEN(CHGVAR VAR(&DIST) VALUE('PRKLS89_GU'))
                  ELSE IF COND(&PLTCO *EQ '440')  +
               THEN(CHGVAR VAR(&DIST) VALUE('PRKLS89_ST'))
                  ELSE IF COND(&PLTCO *EQ '960')  +
               THEN(CHGVAR VAR(&DIST) VALUE('PRKLS89_TF'))

/*-----------------------------------------------------------------*/
/* MAINLINE                                                        */
/*-----------------------------------------------------------------*/
             /* SET UP DATE AND TIME */
             RTVSYSVAL  SYSVAL(QDATE) RTNVAR(&RPTDTE)
             RTVSYSVAL  SYSVAL(QTIME) RTNVAR(&TIME)
             IF COND(&MSGNBR *EQ '3') THEN(DO)
             CHGVAR     VAR(&MSG) VALUE('MPR - Morning LS89 +
                          Wholesale Pork Job has completed +
                          normally' *BCAT &PLTCO *BCAT &RPTDTE +
                          *BCAT &TIME)
                          ENDDO
             IF COND(&MSGNBR *EQ '4') THEN(DO)
             CHGVAR     VAR(&MSG) VALUE('MPR - Afternoon LS89 +
                          Wholesale Pork Job has completed +
                          normally' *BCAT &PLTCO *BCAT &RPTDTE +
                          *BCAT &TIME)
                          ENDDO
             IF COND(&MSGNBR *EQ 'T') THEN(DO)
             CHGVAR     VAR(&MSG) VALUE('TESTING. LOGON')
                          ENDDO
/*           SNDDST     TYPE(*MSG) TOUSRID((&DIST BIGBYTE)) +
                          DSTD('Pork MPR') MSG(&MSG)            */
             SNDPGRMSG  TOPGR(&DIST) MSG(&MSG) CONFMSG(*NO)

/*-----------------------------------------------------------------*/
/* END PROGRAM                                                     */
/*-----------------------------------------------------------------*/
 ENDPGM:

             ENDPGM
