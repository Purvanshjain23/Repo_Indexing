// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PWG1PVR
// ?Date: 14.08.2025 Time: 02:56:25
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?E13511 JJH 08/06/18 - Auto-Create Kill Cut Plan
DO;

//?- Delete records if the Kill Sts = N on the AS/400 Calendar within
//?  the specified date range.
ENDDO;

//?E13511 JJH 07/30/18 - Auto-Create Kill Cut Plan
DO;

//?- This function will auto-create Kill/Cut Plan records for the
//?- The function is currently only allowed for 360, 440, and 960.
//?  specified Company and Date Range.
//?- Will create records if the Kill Sts = Y on the AS/400 Calendar.
//?- This function will only Create records, and will not override an
//? existing record.
ENDDO;

//?USER: Validate fields

//?Validate Company = 360, 440, or 960.
CASE;

// IF DTL.KP Company Number is SBD Farms of Guymon, Ok
IF DTL.KP_Company_Number = 360;

// OR DTL.KP Company Number is Sioux City
OR DTL.KP_Company_Number = 440;

// OR DTL.KP Company Number is Triumph Foods Market
OR DTL.KP_Company_Number = 960;

//?Validate Company = 360, 440, or 960.
// IF *OTHERWISE
IF *OTHERWISE;

// Send error message - 'Company must be 360, 440, or 960.'
ERROR(PRK1509);
MSGPARM(DTL.KP_Company_Number);

ENDIF;

//?Validate Date Range
CASE;

// IF DTL.KP Kill/Cut Date GT DTL.Date End USR
IF DTL.KP_Kill_Cut_Date > DTL.Date_End_USR;

// Send error message - 'Invalid Date Range.'
ERROR(PRK1510);
MSGPARM(DTL.KP_Kill_Cut_Date);
MSGPARM(DTL.Date_End_USR);

ENDIF;

//?USER: User defined action

// Call program Ext Crt Kill/Cut Pln  XF.
CALL PROGRAM(Ext Crt Kill/Cut Pln  XF) ('PWG2XFR');
PARAMETER(DTL.KP_Company_Number);
PARAMETER(DTL.KP_Kill_Cut_Date);
PARAMETER(DTL.KP_Planned_Kill);
PARAMETER(DTL.KP_Planned_Cut);
PARAMETER(DTL.Date_End_USR);

