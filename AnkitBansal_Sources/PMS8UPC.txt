/********************************************************************/
/*  SYSTEM    - TF CLASSIFICATION EXCEPTION ESEND                   */
/*  PROGRAM   - PRT MARGIN ADJUSTMENT ITEMS                         */
/*  DATE      - 03/25/08                                            */
/*  PROGRAMMER- SUSAN MASON                                         */
/*                                                                  */
/********************************************************************/
/*             M A I N T E N A N C E    L O G                      */
/*-----------------------------------------------------------------*/
/* 99/99/99 XXX DESCRIPTION OF CHANGE                              */
/*                                                                 */
/* 05/30/08 SLM ADD THE DISTRO LIT TO ENDSEND MSG                  */
/* 03/27/09 SLM Only send out is a record was printed              */
/*              add &RECFND to program PPH1PFR                     */
/*                                                                 */
/*                                                                 */
/********************************************************************/
 PMS8UPC:    PGM        PARM(&RETURN &APPLIC &TFCLS &STRTYP &STRGRP +
                          &STRCLS &ACTSTS &CRDSTS &ASGN &OUTQ &HOLD +
                          &SAVE &COPY &DISTL1 &SUBJECT)

/* PARMS                                                                      */
        DCL    &RETURN     *CHAR   (7)           /* Return Code               */
        DCL    &APPLIC     *CHAR   (06)          /* Application Code          */
        DCL    &TFCLS      *CHAR   (05)          /* TF CLASSIFICATION         */
        DCL    &STRCLS     *DEC   LEN(3 0)       /* ITEM STR CLASS */
        DCL    &STRGRP     *DEC   LEN(3 0)       /* ITEM STR GROUP */
        DCL    &STRTYP     *DEC   LEN(3 0)       /* ITEM STR TYPE  */
        DCL    &ACTSTS     *CHAR  LEN(01)        /* ACTIVE STS     */
        DCL    &CRDSTS     *CHAR  LEN(01)        /* CREDIT ITEM STS*/
        DCL    &ASGN       *CHAR  LEN(01)        /* CREDIT ITEM STS*/
        DCL    &OUTQ       *CHAR   (10)          /* Output Queue              */
        DCL    &HOLD       *CHAR   (4)           /* Hold Status               */
        DCL    &SAVE       *CHAR   (4)           /* Save Status               */
        DCL    &COPY       *DEC    (2 0)         /* Number of copies          */
        DCL    &DISTL1     *CHAR LEN(40)
        DCL    &SUBJECT    *CHAR LEN(50)
        DCL    &RECFND     *CHAR LEN(1)


/* INTERNAL FIELDS                                                            */
        DCL    &COMMAND    *CHAR   (512)         /* message                   */
/*-----------------------------------------------------------------*/
/*                     INITIALIZATION                              */
/*-----------------------------------------------------------------*/

/*-----------------------------------------------------------------*/
/*                           MAIN                                  */
/*-----------------------------------------------------------------*/
             SBDPRTOVR  CMDVAR(&COMMAND) FILE(PPH1PFR$) OUTQ(&OUTQ) +
                          COPIES(&COPY) HOLD(&HOLD) SAVE(&SAVE)
             CALL       PGM(QCMDEXC) PARM(&COMMAND 512)

             CALL       PGM(PPH1PFR) PARM(' ' &TFCLS &STRCLS &STRGRP +
                          &STRTYP &ACTSTS &CRDSTS &ASGN &RECFND)

             IF         COND(&RECFND *EQ 'Y') THEN(DO)
             ESNDMAIL   RECIPIENT(&DISTL1) SUBJECT(&SUBJECT) +
                          MSG(&DISTL1) ATTLIST((* *PDF *N PPH1PFR$))
             ENDDO

             DLTSPLF    FILE(PPH1PFR$) SPLNBR(*LAST)

             MONMSG     MSGID(CFP0000) EXEC(GOTO CMDLBL(ENDPGM))

/*-----------------------------------------------------------------*/
/*                      PROGRAM END                                */
/*-----------------------------------------------------------------*/
 ENDPGM:
             DLTOVR     FILE(*ALL)

 END:        ENDPGM
