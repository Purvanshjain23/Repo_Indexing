// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PPVFPFR
// ?Date: 14.08.2025 Time: 12:06:42
// ?------------------------------------------------------------------------------------------------

//?USER: Print required level headings

// SUPPRESSED PRINT Company Number header format

// SUPPRESSED PRINT Item Code header format

//?USER: On print of detail format

// WRK.Error Flag            USR = CND.Blank
WRK.Error_Flag_USR = *BLANK;

EXECUTE FUNCTION(Chk Item for Existing) TYPE(RTVOBJ) FILE(OMBYREP)              AC1764372;
PARAMETER(CUR.Item_Code);
{
 //?USER: Processing if Data record not found

 // PAR.Record Status 2 Usr = CND.*blank
 PAR.Record_Status_2_Usr = *BLANK;

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PAR.Record Status 2 Usr = DB1.Record Status
 PAR.Record_Status_2_Usr = DB1.Record_Status;

 // PGM.*Return code = CND.*Normal
 PGM.*Return_code = *BLANK;

}


CASE;

// IF PGM.*Return code is *Record does not exist
IF PGM.*Return_code = 'Y2U0005';

// CUR.Description 21a 1 Usr = CON.*Item Default NF
CUR.Description_21a_1_Usr = *Item Default NF;

// IF *OTHERWISE
IF *OTHERWISE;

CASE;

// IF CUR.Record Status 2 Usr is Deleted & Inactive
IF CUR.Record_Status_2_Usr = 'D'/'I';

// CUR.Description 21a 1 Usr = CON.Item Del/Inactive
CUR.Description_21a_1_Usr = 'Item Del/Inactive';

ENDIF;

ENDIF;

EXECUTE FUNCTION(Chk co/Item for Existing) TYPE(RTVOBJ) FILE(CABZREP)           AC1764371;
PARAMETER(CUR.Company_Number);
PARAMETER(CUR.Item_Code);
PARAMETER(CUR.Record_Status_1_Usr);
{
 //?USER: Processing if Data record not found

 // PAR.Record Status 1 Usr = CND.*blank
 PAR.Record_Status_1_Usr = *BLANK;

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PAR.Record Status 1 Usr = DB1.Record Status
 PAR.Record_Status_1_Usr = DB1.Record_Status;

 // PGM.*Return code = CND.*Normal
 PGM.*Return_code = *BLANK;

}


CASE;

// IF PGM.*Return code is *Record does not exist
IF PGM.*Return_code = 'Y2U0005';

// CUR.Description 21a 2 Usr = CON.*Co/Item NF
CUR.Description_21a_2_Usr = *Co/Item NF;

// WRK.Error Flag            USR = CND.Yes
WRK.Error_Flag_USR = 'Y';

EXECUTE FUNCTION(DLT Item BOM           DL) TYPE(DLTOBJ) FILE(PDIOREP)          AC1261543;
PARAMETER(CUR.Company_Number);
PARAMETER(CUR.Item_Code);
PARAMETER(CUR.Component_Item_Code);

// IF *OTHERWISE
IF *OTHERWISE;

CASE;

// IF CUR.Record Status 1 Usr is Deleted & Inactive
IF CUR.Record_Status_1_Usr = 'D'/'I';

// CUR.Description 21a 1 Usr = CON.CoItem Del/Inactive
CUR.Description_21a_1_Usr = 'CoItem Del/Inactive';

ENDIF;

ENDIF;

CASE;

// IF WRK.Error Flag            USR is Yes
IF WRK.Error_Flag_USR = 'Y';

// IF *OTHERWISE
IF *OTHERWISE;

// PGM.*Print format = CND.Do not print format
PGM.*Print_format = 'N';

ENDIF;

//?USER: Print required level totals

// SUPPRESSED PRINT Item Code totals format

// SUPPRESSED PRINT Company Number totals format

