// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLLGXFR
// ?Date: 14.08.2025 Time: 02:54:36
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Read the edi files and send out to the web side
EXECUTE FUNCTION(Rtv Payment Processing RT) TYPE(RTVOBJ) FILE(PKC4REP)          AB1147409;
PARAMETER(PAR.CC_Company_Number);
PARAMETER(NLL.Pmt_Current_Payment_Date);
PARAMETER(WRK.Pmt_Current_Payment_Step);
PARAMETER(WRK.PP_Commission_Paym_Error);
PARAMETER(WRK.PP_Payment_Error);
PARAMETER(WRK.PP_Unused_Nbr_1);
PARAMETER(WRK.PP_Repayment_Status);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


// LCL.Office Dist List USR = CON.PRKHPPST
LCL.Office_Dist_List_USR = 'PRKHPPST';

// WRK.Date Alpha USR = CVTVAR(PAR.Pmt Current Payment Date)
WRK.Date_Alpha_USR = CVTVAR(PAR.Pmt_Current_Payment_Date);

//?EDI:Selection on Carcass Summary/Detail- for All Producer that
DO;

//?If this is Guymon, then the cl will read all of the sequels
//?and process them all right behind each other
//?If this is the TF
//?Then all Edi producer will be read to get the trading partner
//?and then the producer event file will be read.  And if there is
//?a one event for this trading number then the edi will be sent.
//?Read The Company Value for - HPEEDICSD
//?This company value record is used to determine which way to
//?process the EDI, at the present time there are two ways
//?One is for Guymon
//?and one is for TF
// Call program Rtv Company Values    XF.
CALL PROGRAM(Rtv Company Values    XF) ('PDGKXFR');
PARAMETER(PAR.CC_Company_Number);
PARAMETER('HPEEDICSD');
PARAMETER(LCL.EDI_Selection_Process_Usr);

// WRK.EDI Sel Process Pgm Usr = CND.EDISUMDTL
WRK.EDI_Sel_Process_Pgm_Usr = 'EDISUMDTL';

CASE;

// IF LCL.EDI Selection Process Usr EQ WRK.EDI Sel Process Pgm Usr
IF LCL.EDI_Selection_Process_Usr = WRK.EDI_Sel_Process_Pgm_Usr;

// Call program EDI Carcass Sum/DtlGUYUP.
CALL PROGRAM(EDI Carcass Sum/DtlGUYUP) ('EDISUMDTL');
PARAMETER(WRK.Date_Alpha_USR);
PARAMETER(*BLANK);

// IF *OTHERWISE
IF *OTHERWISE;

// WRK.EDI Sel Process Pgm Usr = CND.EDISUMDTTF
WRK.EDI_Sel_Process_Pgm_Usr = 'EDISUMDTTF';

CASE;

// IF LCL.EDI Selection Process Usr EQ WRK.EDI Sel Process Pgm Usr
IF LCL.EDI_Selection_Process_Usr = WRK.EDI_Sel_Process_Pgm_Usr;

// Call program Crt EDI CarcSumDtlEvn XF.
CALL PROGRAM(Crt EDI CarcSumDtlEvn XF) ('PLGDXFR');
PARAMETER(PAR.CC_Company_Number);
PARAMETER(WRK.Date_Alpha_USR);

// IF *OTHERWISE
IF *OTHERWISE;

//?Neither was selected
ENDIF;

ENDIF;

ENDDO;

