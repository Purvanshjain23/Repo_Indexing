// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDUPXFR
// ?Date: 14.08.2025 Time: 03:36:12
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?05/11/04 SLM PKTR01 Multi-Company - Order Header TRG Remove Co
//?                                    from Logical View
EXECUTE FUNCTION(Rtv/Crt Z003 file      RT) TYPE(RTVOBJ) FILE(PDLHCPP)          AC1560311;
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Crt Z003 Load/Order Ch CR) TYPE(CRTOBJ) FILE(PDM4CPP)          AC1560308;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Created_Date);
 PARAMETER(DB1.Created_Time);
 PARAMETER(DB1.Sequence_Number);
 PARAMETER(DB1.Load_ID);
 PARAMETER(DB1.Stop_Drop);
 PARAMETER(DB1.Load_Change_Type);
 PARAMETER(DB1.Department_Control_Code);
 PARAMETER(DB1.Change_Log_Prior_Value);
 PARAMETER(DB1.Change_Log_New_Value);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Carrier_Code);
 PARAMETER(DB1.Carrier_Broker_Carrier_Co);
 PARAMETER(DB1.Order_Number);
}


EXECUTE FUNCTION(Rtv/Crt Z004 file     RT) TYPE(RTVOBJ) FILE(OMFLCPP)           AC1560361;
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Crt Z004 OM Load Dtl  RT) TYPE(CRTOBJ) FILE(PDM6CPP)           AC1560365;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Load_ID);
 PARAMETER(DB1.Stop_Drop_Sequence_Number);
 PARAMETER(DB1.Stop_Drop);
 PARAMETER(DB1.Miles_to_next_stop);
 PARAMETER(DB1.Freight_Stop_Charge);
 PARAMETER(DB1.Rated_Freight);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Ship_Status);
 PARAMETER(DB1.Appointment_Confirm_Date);
 PARAMETER(DB1.Appointment_Confirm_Time);
 PARAMETER(DB1.Deadline_Depart_DT_HDR);
 PARAMETER(DB1.Deadline_Depart_Time_HDR);
 PARAMETER(DB1.MPC_Number);
 PARAMETER(DB1.Load_Dtl_On_Time_Flag);
 PARAMETER(DB1.On_Time_Addl_Rsn_Unused);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
}


EXECUTE FUNCTION(ZZtv/Crt Z005 file     RT) TYPE(RTVOBJ) FILE(OMFJCPP)          AC1560381;
{
 //?USER: Process Data record

 // WRK.Z U/M All Orders = CON.*BLANK
 WRK.U_M_All_Orders = *BLANK;

 //?05/11/04 SLM PKTR01 Multi-Company - Function was changed
 //?                                    to remove Company RST or Pos
 EXECUTE FUNCTION(RTV UM/Whs Code        RT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC1541555;
 PARAMETER(*ZERO);
 PARAMETER(DB1.Load_ID);
 PARAMETER(WRK.U_M_All_Orders);
 {
  //?USER: Initialize routine

  // PAR.USR Unit of Measure = CON.*BLANK
  PAR.USR_Unit_of_Measure = *BLANK;

  // LCL.Boxes Total Quantity = CON.*ZERO
  LCL.Boxes_Total_Quantity = *ZERO;

  // WRK.First Time Flag = CND.Yes
  WRK.First_Time_Flag = 'Y';

  //?USER: Processing if Data record not found

  QUIT;

  //?USER: Process Data record

  EXECUTE FUNCTION(RTV UM/Whs Code,BX Qty RT) TYPE(RTVOBJ) FILE(OPBGWKP)          AC1625244;
  PARAMETER(DB1.Company_Number);
  PARAMETER(DB1.Order_Number);
  PARAMETER(1);
  PARAMETER(PAR.USR_Unit_of_Measure);
  PARAMETER(LCL.Boxes_Total_Quantity);
  {
   //?USER: Initialize routine

   // WRK.First Time Flag = CND.Yes
   WRK.First_Time_Flag = 'Y';

   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   // PGM.*Return code = CND.*Normal
   PGM.*Return_code = *BLANK;

   QUIT;

   //?USER: Process Data record

   CASE;

   // IF DB1.Detail Line Status is Cancelled
   IF DB1.Detail_Line_Status = 'X';

   // IF *OTHERWISE
   IF *OTHERWISE;

   //?S17054 DN 04/08/21-Beyond this point, changed all 'U/M - Ordered'
   //?  to reference LCL Context instead of DB1.
   //?S17054 DN 04/08/21-Count Type 'Cases' (CS) as 'Boxes' (BX).
   CASE;

   // IF *OTHERWISE
   IF *OTHERWISE;

   // LCL.U/M - Ordered = DB1.U/M - Ordered
   LCL.U_M_Ordered = DB1.U_M_Ordered;

   CASE;

   // IF LCL.U/M - Ordered is Cases
   IF LCL.U_M_Ordered = 'CS';

   // LCL.U/M - Ordered = CND.EQ Boxes
   LCL.U_M_Ordered = 'BX';

   ENDIF;

   ENDIF;

   //?Accumulate the Box Quantity for slotting consideration  6/12/01
   CASE;

   // IF LCL.U/M - Ordered is EQ Boxes
   IF LCL.U_M_Ordered = 'BX';

   // PAR.Boxes Total Quantity = PAR.Boxes Total Quantity + DB1.Quantity Ordered
   PAR.Boxes_Total_Quantity = PAR.Boxes_Total_Quantity + DB1.Quantity_Ordered;

   ENDIF;

   CASE;

   // IF PAR.USR Unit of Measure is *Blank
   IF PAR.USR_Unit_of_Measure = *BLANK;

   // PAR.USR Unit of Measure = LCL.U/M - Ordered
   PAR.USR_Unit_of_Measure = LCL.U_M_Ordered;

   // IF *OTHERWISE
   IF *OTHERWISE;

   CASE;

   // IF LCL.U/M - Ordered EQ PAR.USR Unit of Measure
   IF LCL.U_M_Ordered = PAR.USR_Unit_of_Measure;

   // IF *OTHERWISE
   IF *OTHERWISE;

   // PAR.USR Unit of Measure = CND.Mixed
   PAR.USR_Unit_of_Measure = 'MX';

   ENDIF;

   ENDIF;

   ENDIF;

  }

  //?If doing for one Order, because it isnt tied to a load yet
  CASE;

  // IF DB1.Load ID is Blank
  IF DB1.Load_ID = *ZERO;

  CASE;

  // IF PAR.USR Unit of Measure is Mixed
  IF PAR.USR_Unit_of_Measure = 'MX';

  EXECUTE FUNCTION(RTV Numeric Value      RT) TYPE(RTVOBJ) FILE(PDKMREP)          AC1394480;
  PARAMETER(DB1.Company_Number);
  PARAMETER('BOXLOAD');
  PARAMETER(LCL.Box_Load_Min_Box_Qty_USR);
  {
   //?USER: Processing if Data record not found

   // PGM.*Return code = CND.*Record does not exist
   PGM.*Return_code = 'Y2U0005';

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

  }

  CASE;

  // IF LCL.Boxes Total Quantity LT LCL.Box Load Min Box Qty USR
  IF LCL.Boxes_Total_Quantity < LCL.Box_Load_Min_Box_Qty_USR;

  // PAR.USR Unit of Measure = CND.Combos
  PAR.USR_Unit_of_Measure = 'CB';

  // IF *OTHERWISE
  IF *OTHERWISE;

  // PAR.USR Unit of Measure = CND.Boxed
  PAR.USR_Unit_of_Measure = 'BX';

  ENDIF;

  ENDIF;

  QUIT;

  ENDIF;

  //?orig code
  //?USER: Exit processing

  CASE;

  // IF PAR.USR Unit of Measure is Mixed
  IF PAR.USR_Unit_of_Measure = 'MX';

  EXECUTE FUNCTION(RTV Numeric Value      RT) TYPE(RTVOBJ) FILE(PDKMREP)          AC1394480;
  PARAMETER(DB1.Company_Number);
  PARAMETER('BOXLOAD');
  PARAMETER(LCL.Box_Load_Min_Box_Qty_USR);
  {
   //?USER: Processing if Data record not found

   // PGM.*Return code = CND.*Record does not exist
   PGM.*Return_code = 'Y2U0005';

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

  }

  CASE;

  // IF LCL.Boxes Total Quantity LT LCL.Box Load Min Box Qty USR
  IF LCL.Boxes_Total_Quantity < LCL.Box_Load_Min_Box_Qty_USR;

  // PAR.USR Unit of Measure = CND.Combos
  PAR.USR_Unit_of_Measure = 'CB';

  // IF *OTHERWISE
  IF *OTHERWISE;

  // PAR.USR Unit of Measure = CND.Boxed
  PAR.USR_Unit_of_Measure = 'BX';

  ENDIF;

  ENDIF;

 }

 EXECUTE FUNCTION(Crt Late Delv XLS    CR) TYPE(CRTOBJ) FILE(PDM7CPP)            AC1560362;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Load_ID);
 PARAMETER(DB1.Scheduled_Ship_Date);
 PARAMETER(DB1.LTL_Flag);
 PARAMETER(DB1.Load_Status);
 PARAMETER(DB1.Total_Load_Order_Weight);
 PARAMETER(DB1.Flat_Amount);
 PARAMETER(DB1.Allocate_Pounds_Miles);
 PARAMETER(DB1.Total_Stops);
 PARAMETER(DB1.Trailer_Id);
 PARAMETER(DB1.Carrier_Code);
 PARAMETER(DB1.Truck_Size);
 PARAMETER(DB1.Ship_Status);
 PARAMETER(DB1.Load_Type);
 PARAMETER(DB1.Number_Pallets_Loaded);
 PARAMETER(DB1.Actual_Departure_Date);
 PARAMETER(DB1.Departure_Time);
 PARAMETER(DB1.Schedule_Sequence_Number);
 PARAMETER(DB1.Total_Load_Miles);
 PARAMETER(DB1.Shipping_Method);
 PARAMETER(DB1.Warehouse_Code);
 PARAMETER(DB1.Ship_To_State_Code);
 PARAMETER(DB1.Carrier_Broker);
 PARAMETER(DB1.Export_Status);
 PARAMETER(DB1.Actual_Ship_Date);
 PARAMETER(DB1.On_Time_Y_N);
 PARAMETER(DB1.Truck_Ready_Date);
 PARAMETER(DB1.Truck_Ready_Time);
 PARAMETER(DB1.Spotted_Date);
 PARAMETER(DB1.Spotted_Time);
 PARAMETER(DB1.Load_Finished_Date);
 PARAMETER(DB1.Load_Finished_Time);
 PARAMETER(DB1.BOL_Complete_Date);
 PARAMETER(DB1.BOL_Complete_Time);
 PARAMETER(DB1.BOL_Received_Date);
 PARAMETER(DB1.BOL_Received_Time);
 PARAMETER(DB1.Truck_Departure_Date);
 PARAMETER(DB1.Truck_Departure_Time);
 PARAMETER(DB1.Adjusted_Departure_Date);
 PARAMETER(DB1.Adjusted_Departure_Time);
 PARAMETER(DB1.Shipping_Line);
 PARAMETER(DB1.Port_Delv_Terminal);
 PARAMETER(DB1.Vessel_Name);
 PARAMETER(DB1.Voyage);
 PARAMETER(DB1.Sail_Date);
 PARAMETER(DB1.Booking_Number);
 PARAMETER(DB1.Discharge_Port);
 PARAMETER(DB1.Arrival_Date);
 PARAMETER(DB1.Container_Number);
 PARAMETER(DB1.Load_Total_Freight);
 PARAMETER(DB1.Scheduled_Delivery_Date);
 PARAMETER(DB1.Scheduled_Delivery_Time);
 PARAMETER(DB1.LH_Unused_Sts);
 PARAMETER(DB1.Requested_Delivery_Date);
 PARAMETER(DB1.Load_Acceptance_Flag);
 PARAMETER(DB1.On_Yard_Date);
 PARAMETER(DB1.On_Yard_Time);
 PARAMETER(DB1.Deadline_Departure_Date);
 PARAMETER(DB1.Deadline_Departure_Time);
 PARAMETER(DB1.Load_Held_Over);
 PARAMETER(DB1.Load_Held_Over_Reason);
 PARAMETER(DB1.Load_Shag_Flag);
 PARAMETER(DB1.Load_Wash_Flag);
 PARAMETER(DB1.EDI_Status_1);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(WRK.U_M_All_Orders);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
}


EXECUTE FUNCTION(Rtv/Crt Z006 file     RT) TYPE(RTVOBJ) FILE(OPBFCPP)           AC1560392;
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Crt Z006 PD Order Hdr CR) TYPE(CRTOBJ) FILE(PDM8CPP)           AC1560372;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Order_Type_Sales);
 PARAMETER(DB1.AR_Customer_Number);
 PARAMETER(DB1.Ship_To_Customer);
 PARAMETER(DB1.Ship_To_Name);
 PARAMETER(DB1.Ship_To_Address_Line_1);
 PARAMETER(DB1.Ship_To_Address_Line_2);
 PARAMETER(DB1.Ship_To_Address_Line_3);
 PARAMETER(DB1.Ship_To_City);
 PARAMETER(DB1.Ship_To_State_Code);
 PARAMETER(DB1.Ship_To_Zip_Postal_Code);
 PARAMETER(DB1.Customer_Purchase_Order_#);
 PARAMETER(DB1.Order_Date);
 PARAMETER(DB1.Requested_Ship_Date);
 PARAMETER(DB1.Actual_Shipped_Date);
 PARAMETER(DB1.Cancel_Date);
 PARAMETER(DB1.Carrier_Code);
 PARAMETER(DB1.Scheduled_Ship_Date);
 PARAMETER(DB1.Order_Value_Total);
 PARAMETER(DB1.Order_Weight_Total);
 PARAMETER(DB1.Requested_Delivery_Date);
 PARAMETER(DB1.Requested_Delivery_Time);
 PARAMETER(DB1.Load_ID);
 PARAMETER(DB1.Absorbed_Freight_Rate_CWT);
 PARAMETER(DB1.Rated_Freight);
 PARAMETER(DB1.Export_Status);
 PARAMETER(DB1.Palletize);
 PARAMETER(DB1.Shrink_Wrap);
 PARAMETER(DB1.Reefer_Temperature);
 PARAMETER(DB1.Load_Type);
 PARAMETER(DB1.Load_Plan_Order);
 PARAMETER(DB1.Sales_Route_Code);
 PARAMETER(DB1.Manager_Level_Code);
 PARAMETER(DB1.VP_Level_Code);
 PARAMETER(DB1.Attach_to_Order_Number);
 PARAMETER(DB1.A_R_order_Value_Total);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
}


EXECUTE FUNCTION(Rtv/Crt Z007 file     RT) TYPE(RTVOBJ) FILE(OPBGWKP)           AC1560394;
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Crt Z007 PD Order Dtl CR) TYPE(CRTOBJ) FILE(PDM9CPP)           AC1560375;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Order_Sequence_Number);
 PARAMETER(DB1.Order_Secondary_Line_Seq);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Warehouse_Code);
 PARAMETER(DB1.Ship_To_Customer);
 PARAMETER(DB1.Extended_Amount);
 PARAMETER(DB1.U_M_Ordered);
 PARAMETER(DB1.Order_Desc_Line_One);
 PARAMETER(DB1.Order_Desc_Line_Two);
 PARAMETER(DB1.Palletize);
 PARAMETER(DB1.Rated_Freight);
 PARAMETER(DB1.Quantity_Ordered);
 PARAMETER(DB1.Weight_Ordered);
 PARAMETER(DB1.Quantity_Scheduled);
 PARAMETER(DB1.Weight_Scheduled);
 PARAMETER(DB1.Quantity_Shipped_Total);
 PARAMETER(DB1.Weight_Shipped_Total);
 PARAMETER(DB1.Requested_Ship_Date);
 PARAMETER(DB1.Scheduled_Ship_Date);
 PARAMETER(DB1.Actual_Shipped_Date);
 PARAMETER(DB1.Sales_Route_Code);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
}


