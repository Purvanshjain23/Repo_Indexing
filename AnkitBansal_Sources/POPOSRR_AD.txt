// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POPOSRR
// ?Date: 14.08.2025 Time: 03:39:37
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

// LCL.First Time Flag = CND.Yes
LCL.First_Time_Flag = 'Y';

//?USER: Load subfile record from DBF record

CASE;

// IF LCL.First Time Flag is Yes
IF LCL.First_Time_Flag = 'Y';

// CTL.Price End Date = JOB.*Job date
CTL.Price_End_Date = JOB.*Job_date;

// LCL.First Time Flag = CND.NO
LCL.First_Time_Flag = 'N';

ENDIF;

//?SEL: Price Start Date
CASE;

// IF CTL.Price Start Date is Entered
IF CTL.Price_Start_Date > *ZERO;

CASE;

// IF RCD.Price Start Date LT CTL.Price Start Date
IF RCD.Price_Start_Date < CTL.Price_Start_Date;

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

ENDIF;

// LCL.Price Start Date = CTL.Price Start Date
LCL.Price_Start_Date = CTL.Price_Start_Date;

//?SEL: Price End Date
CASE;

// IF CTL.Price End Date is Entered
IF CTL.Price_End_Date > *ZERO;

CASE;

// IF RCD.Price End Date LT CTL.Price End Date
IF RCD.Price_End_Date < CTL.Price_End_Date;

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

ENDIF;

// LCL.Price End Date = CTL.Price End Date
LCL.Price_End_Date = CTL.Price_End_Date;

//?USER: Process subfile control

CASE;

// IF CTL.Price Start Date NE LCL.Price Start Date
IF CTL.Price_Start_Date <> LCL.Price_Start_Date;

// PGM.*Reload subfile = CND.*YES
PGM.*Reload_subfile = 'Y';

QUIT;

ENDIF;

CASE;

// IF CTL.Price End Date NE LCL.Price End Date
IF CTL.Price_End_Date <> LCL.Price_End_Date;

// PGM.*Reload subfile = CND.*YES
PGM.*Reload_subfile = 'Y';

QUIT;

ENDIF;

//?USER: Process changed subfile record

CASE;

// IF RCD.*SFLSEL is *Display
IF RCD.*SFLSEL = '5'/'5';

// Call program Dsp Customer Price    DT.
CALL PROGRAM(Dsp Customer Price    DT) ('PPAMDTR');
PARAMETER(RCD.Ship_To_Customer);
PARAMETER(RCD.Price_Code);

ENDIF;

