// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for E1HYXFR
// ?Date: 14.08.2025 Time: 02:43:42
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?SDN 465 JDE to E1 RMC 4/24/2020
//?  Read staged table from E1 for the address book and update E1IDEVMDL
//?   table E101151 - process ADDS and CHANGES
EXECUTE FUNCTION(Rtv Prc From F01151   RT) TYPE(RTVOBJ) FILE(EZ01151)           AA1101872;
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Transaction Action Z is Delete
 IF DB1.Transaction_Action_Z = 'D';

 EXECUTE FUNCTION(Rtv/Del E101151 f/EZ   RT) TYPE(RTVOBJ) FILE(E101151)          AA1104092;
 PARAMETER(DB1.Address_Number);
 PARAMETER(DB1.Who_s_Who_Line_Nbr_ID);
 PARAMETER(DB1.Line_Number_ID);
 {
  //?USER: Process Data record

  EXECUTE FUNCTION(Del E101151 from Stage DL) TYPE(DLTOBJ) FILE(E101151)          AA1101705;
  PARAMETER(DB1.Address_Number);
  PARAMETER(DB1.Who_s_Who_Line_Nbr_ID);
  PARAMETER(DB1.Line_Number_ID);
 }

 // IF *OTHERWISE
 IF *OTHERWISE;

 EXECUTE FUNCTION(Rtv CrtChg From Stg   RT) TYPE(RTVOBJ) FILE(E101151)           AA1101875;
 PARAMETER(DB1.Address_Number);
 PARAMETER(DB1.Who_s_Who_Line_Nbr_ID);
 PARAMETER(DB1.Line_Number_ID);
 PARAMETER(DB1.Electronic_Address_Type);
 PARAMETER(DB1.Electronic_Address);
 PARAMETER(DB1.User_ID);
 PARAMETER(DB1.Program_ID);
 PARAMETER(DB1.Date_Updated_1);
 PARAMETER(DB1.Work_Station_ID);
 PARAMETER(DB1.Time_Last_Updated_1);
 PARAMETER(DB1.Messaging_Indicator);
 PARAMETER(DB1.Email_Format);
 PARAMETER(DB1.Electronic_Address_Catg);
 PARAMETER(DB1.Generic_Number_1);
 PARAMETER(DB1.Generic_Information_1);
 PARAMETER(DB1.Future_Flag_Use);
 PARAMETER(DB1.Synchronization_Status);
 PARAMETER(DB1.Server_Status);
 {
  //?USER: Processing if Data record not found

  //?dont create rcd if Address Master doesnt exist
  EXECUTE FUNCTION(Rtv Val Addr Nbr      RT) TYPE(RTVOBJ) FILE(E10101)            AA1103672;
  PARAMETER(PAR.Address_Number);
  {
   //?USER: Processing if Data record not found

   // PGM.*Return code = CND.*Record does not exist
   PGM.*Return_code = 'Y2U0005';

   //?USER: Process Data record

   // PGM.*Return code = CND.*Normal
   PGM.*Return_code = *BLANK;

  }

  CASE;

  // IF PGM.*Return code is *Normal
  IF PGM.*Return_code = *BLANK;

  EXECUTE FUNCTION(Crt Electronic Address) TYPE(CRTOBJ) FILE(E101151)             AA1101703;
  PARAMETER(PAR.Address_Number);
  PARAMETER(PAR.Who_s_Who_Line_Nbr_ID);
  PARAMETER(PAR.Line_Number_ID);
  PARAMETER(PAR.Electronic_Address_Type);
  PARAMETER(PAR.Electronic_Address);
  PARAMETER(PAR.User_ID);
  PARAMETER(PAR.Program_ID);
  PARAMETER(PAR.Date_Updated_1);
  PARAMETER(PAR.Work_Station_ID);
  PARAMETER(PAR.Time_Last_Updated_1);
  PARAMETER(PAR.Messaging_Indicator);
  PARAMETER(PAR.Email_Format);
  PARAMETER(PAR.Electronic_Address_Catg);
  PARAMETER(PAR.Generic_Number_1);
  PARAMETER(PAR.Generic_Information_1);
  PARAMETER(PAR.Future_Flag_Use);
  PARAMETER(PAR.Synchronization_Status);
  PARAMETER(PAR.Server_Status);
  ENDIF;

  //?USER: Process Data record

  EXECUTE FUNCTION(Chg Electronic Address) TYPE(CHGOBJ) FILE(E101151)             AA1101704;
  PARAMETER(DB1.Address_Number);
  PARAMETER(DB1.Who_s_Who_Line_Nbr_ID);
  PARAMETER(DB1.Line_Number_ID);
  PARAMETER(PAR.Electronic_Address_Type);
  PARAMETER(PAR.Electronic_Address);
  PARAMETER(PAR.User_ID);
  PARAMETER(PAR.Program_ID);
  PARAMETER(PAR.Date_Updated_1);
  PARAMETER(PAR.Work_Station_ID);
  PARAMETER(PAR.Time_Last_Updated_1);
  PARAMETER(PAR.Messaging_Indicator);
  PARAMETER(PAR.Email_Format);
  PARAMETER(PAR.Electronic_Address_Catg);
  PARAMETER(PAR.Generic_Number_1);
  PARAMETER(PAR.Generic_Information_1);
  PARAMETER(PAR.Future_Flag_Use);
  PARAMETER(PAR.Synchronization_Status);
  PARAMETER(PAR.Server_Status);
 }

 ENDIF;

 EXECUTE FUNCTION(Chg EZ01151 to Prcd   CH) TYPE(CHGOBJ) FILE(EZ01151)           AA1101869;
 PARAMETER(DB1.Address_Number);
 PARAMETER(DB1.Who_s_Who_Line_Nbr_ID);
 PARAMETER(DB1.Line_Number_ID);
 PARAMETER(DB1.Date_Time_Stamp);
 PARAMETER(DB1.Transaction_Action_Z);
 PARAMETER(DB1.Electronic_Address_Type);
 PARAMETER(DB1.Electronic_Address);
 PARAMETER(DB1.User_ID);
 PARAMETER(DB1.Program_ID);
 PARAMETER(DB1.Date_Updated_1);
 PARAMETER(DB1.Work_Station_ID);
 PARAMETER(DB1.Time_Last_Updated_1);
 PARAMETER(DB1.Messaging_Indicator);
 PARAMETER(DB1.Email_Format);
 PARAMETER(DB1.Electronic_Address_Catg);
 PARAMETER(DB1.Generic_Number_1);
 PARAMETER(DB1.Generic_Information_1);
 PARAMETER(DB1.Future_Flag_Use);
 PARAMETER(DB1.Synchronization_Status);
 PARAMETER(DB1.Server_Status);
 PARAMETER(1);
 PARAMETER(JOB.*Job_date);
 PARAMETER(JOB.*Job_time);
}


