// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMCXXFR
// ?Date: 14.08.2025 Time: 03:44:45
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Rtv/Chg LdSchPsProcSeqRT) TYPE(RTVOBJ) FILE(PDMJCPP)           AC1913454;
{
 //?USER: Initialize routine

 //?FP1054 changes due to the accounting co, and production warehouse
 //?USER: Process Data record

 // PGM.*Record selected = CND.*YES
 PGM.*Record_selected = 'Y';

 CASE;

 // IF PGM.*Record selected is *YES
 IF PGM.*Record_selected = 'Y';

 // LCL.Break = CND.No
 LCL.Break = 'N';

 //?Break Logic to restart sequence number
 DO;

 CASE;

 // IF DB1.LSPK Accounting Company NE LCL.LSPK Accounting Company
 IF DB1.LSPK_Accounting_Company <> LCL.LSPK_Accounting_Company;

 // LCL.Break = CND.Yes
 LCL.Break = 'Y';

 // IF DB1.LSPK Production Whse NE LCL.LSPK Production Whse
 IF DB1.LSPK_Production_Whse <> LCL.LSPK_Production_Whse;

 // LCL.Break = CND.Yes
 LCL.Break = 'Y';

 // IF DB1.LSPK Order Company NE LCL.LSPK Order Company
 IF DB1.LSPK_Order_Company <> LCL.LSPK_Order_Company;

 // LCL.Break = CND.Yes
 LCL.Break = 'Y';

 // IF DB1.LSPK Order Warehouse NE LCL.LSPK Order Warehouse
 IF DB1.LSPK_Order_Warehouse <> LCL.LSPK_Order_Warehouse;

 // LCL.Break = CND.Yes
 LCL.Break = 'Y';

 // IF DB1.Item Code NE LCL.Item Code
 IF DB1.Item_Code <> LCL.Item_Code;

 // LCL.Break = CND.Yes
 LCL.Break = 'Y';

 ENDIF;

 CASE;

 // IF LCL.Break is Yes
 IF LCL.Break = 'Y';

 // LCL.Prc Sequence = CON.*ZERO
 LCL.Process_Sequence = 0;

 // LCL.LSPK Accounting Company = DB1.LSPK Accounting Company
 LCL.LSPK_Accounting_Company = DB1.LSPK_Accounting_Company;

 // LCL.LSPK Production Whse = DB1.LSPK Production Whse
 LCL.LSPK_Production_Whse = DB1.LSPK_Production_Whse;

 // LCL.LSPK Order Company = DB1.LSPK Order Company
 LCL.LSPK_Order_Company = DB1.LSPK_Order_Company;

 // LCL.LSPK Order Warehouse = DB1.LSPK Order Warehouse
 LCL.LSPK_Order_Warehouse = DB1.LSPK_Order_Warehouse;

 // LCL.Item Code = DB1.Item Code
 LCL.Item_Code = DB1.Item_Code;

 ENDIF;

 ENDDO;

 // LCL.Process Sequence = LCL.Process Sequence + CON.1
 LCL.Process_Sequence = LCL.Process_Sequence + 1;

 EXECUTE FUNCTION(Chg LDSchPstn - PrcSeqCO) TYPE(CHGOBJ) FILE(PDMJCPP)           AC1913577;
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.LSPK_Accounting_Company);
 PARAMETER(DB1.LSPK_Production_Whse);
 PARAMETER(DB1.LSPK_Order_Company);
 PARAMETER(DB1.LSPK_Order_Warehouse);
 PARAMETER(DB1.Sequence);
 PARAMETER(DB1.Schedule_Sequence_Number);
 PARAMETER(LCL.Process_Sequence);
 ENDIF;

}


