// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PPUWXFR
// ?Date: 14.08.2025 Time: 03:42:00
// ?------------------------------------------------------------------------------------------------

//?Execute user function

// LCL.Company Number ReadW UsR = CON.*ZERO
LCL.Company_Number_ReadW_UsR = *ZERO;

// LCL.Company Number ProcW Usr = CON.*ZERO
LCL.Company_Number_ProcW_Usr = *ZERO;

// LCL.End of Plant Process Usr = CND.blank
LCL.End_of_Plant_Process_Usr = *BLANK;

// Call program Zzz Next Plant Co Prc XF.
CALL PROGRAM(Zzz Next Plant Co Prc XF) ('PPUVXFR');
PARAMETER(LCL.Company_Number_ReadW_UsR);
PARAMETER(LCL.Company_Number_ProcW_Usr);
PARAMETER(LCL.End_of_Plant_Process_Usr);

// DOW LCL.End of Plant Process Usr is Not Yes
DOW LCL.End_of_Plant_Process_Usr = *BLANK/'N';

CASE;

// IF LCL.Company Number ProcW Usr is not equal to zero
IF LCL.Company_Number_ProcW_Usr <> *ZERO;

//?Built parm and Submit job for pre-edit or pre invoice
DO;

// LCL.PRT Description = CON.IC Pre-invoice Register
LCL.PRT_Description = 'IC Pre-invoice Register';

// Call program RTV Revenue Dates     UP.
CALL PROGRAM(RTV Revenue Dates     UP) ('TF817');
PARAMETER(LCL.From_Date_USR);
PARAMETER(LCL.To_Date_USR);

// LCL.Company Number Pass   USR = LCL.Company Number ProcW Usr
LCL.Company_Number_Pass_USR = LCL.Company_Number_ProcW_Usr;

// LCL.Order Number 1  PASS  USR = CON.*ZERO
LCL.Order_Number_1_PASS_USR = *ZERO;

// LCL.Order Number 2  PASS  USR = CON.*ZERO
LCL.Order_Number_2_PASS_USR = *ZERO;

// LCL.Thru Date Pass        USR = LCL.To Date               USR
LCL.Thru_Date_Pass_USR = LCL.To_Date_USR;

// WRK.USR Active Flag = CND.Record Not Found
WRK.USR_Active_Flag = 'N';

// LCL.System Value Numeric = CON.*ZERO
LCL.System_Value_Numeric = *ZERO;

//?Set values from the menu options
// LCL.Application Code = CND.Accounts Receivable
LCL.Application_Code = 'A/R';

// LCL.Invoice/Pre-Invoice = CND.Pre-Invoice
LCL.Invoice_Pre_Invoice = 'P';

// LCL.Billing Activity Type = CND.Invoice
LCL.Billing_Activity_Type = 1;

// LCL.USR Print Pre-Invc Reg = CND.yes
LCL.USR_Print_Pre_Invc_Reg = 'Y';

// LCL.USR Print Pre-Invc Except = CND.yes
LCL.USR_Print_Pre_Invc_Except = 'Y';

// LCL.A/R Customer Num Pass USR = CON.*ZERO
LCL.A_R_Customer_Num_Pass_USR = *ZERO;

// LCL.Process Cust Types Usr = CND.Inter-Co Customer's
LCL.Process_Cust_Types_Usr = 'IC';

// LCL.PRT Night Queue Run Sts = CND.blank
LCL.PRT_Night_Queue_Run_Sts = *BLANK;

//?Set CL program which prints
CASE;

// IF LCL.Invoice/Pre-Invoice is Invoice
IF LCL.Invoice_Pre_Invoice = 'I';

// LCL.Program name USR = CON.PDR4PCLP
LCL.Program_name_USR = 'PDR4PCLP';

//?Set CL program which prints
// IF *OTHERWISE
IF *OTHERWISE;

// LCL.Program name USR = CON.PDULPCLP
LCL.Program_name_USR = 'PDULPCLP';

ENDIF;

// Call program Zzz Inv/Pre-Inv  Reg  UP.
CALL PROGRAM(Zzz Inv/Pre-Inv  Reg  UP) ('PPUXUPC');
PARAMETER(PGM.*Return_code);
PARAMETER(LCL.Program_name_USR);
PARAMETER(LCL.Program_name_USR);
PARAMETER(PAR.Application_Code);
PARAMETER(LCL.Billing_Activity_Type);
PARAMETER(LCL.PRT_Description);
PARAMETER(PAR.PRT_Printer_Device);
PARAMETER(PAR.PRT_Hold_Output_Sts);
PARAMETER(PAR.PRT_Save_Output_Sts);
PARAMETER(LCL.PRT_Night_Queue_Run_Sts);
PARAMETER(PAR.PRT_Night_Queue);
PARAMETER(LCL.Company_Number_Pass_USR);
PARAMETER(LCL.Thru_Date_Pass_USR);
PARAMETER(LCL.Order_Number_1_PASS_USR);
PARAMETER(LCL.Order_Number_2_PASS_USR);
PARAMETER(PAR.System_Value_Numeric);
PARAMETER(WRK.USR_Active_Flag);
PARAMETER(LCL.USR_Print_Pre_Invc_Reg);
PARAMETER(LCL.USR_Print_Pre_Invc_Except);
PARAMETER(LCL.Invoice_Pre_Invoice);
PARAMETER(LCL.A_R_Customer_Num_Pass_USR);
PARAMETER(LCL.Process_Cust_Types_Usr);

CASE;

// IF PGM.*Return code is *Normal
IF PGM.*Return_code = *BLANK;

// Send information message - 'Print has been submitted.'
MESSAGE(USR1832 *INFO);

// IF *OTHERWISE
IF *OTHERWISE;

// PGM.*Return code = CND.*Normal
PGM.*Return_code = *BLANK;

ENDIF;

ENDDO;

// LCL.Company Number ReadW UsR = LCL.Company Number ProcW Usr
LCL.Company_Number_ReadW_UsR = LCL.Company_Number_ProcW_Usr;

// Call program Zzz Next Plant Co Prc XF.
CALL PROGRAM(Zzz Next Plant Co Prc XF) ('PPUVXFR');
PARAMETER(LCL.Company_Number_ReadW_UsR);
PARAMETER(LCL.Company_Number_ProcW_Usr);
PARAMETER(LCL.End_of_Plant_Process_Usr);

// IF *OTHERWISE
IF *OTHERWISE;

// LCL.End of Plant Process Usr = CND.yes
LCL.End_of_Plant_Process_Usr = 'Y';

ENDIF;

ENDDO;

