// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLFQSRR
// ?Date: 14.08.2025 Time: 02:54:07
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?Modifications and Comments
DO;

//?E11249 JJH 08/09/17 - Select Record Modifications
//?- Recompile because access path modified to Sective Active
//?R7522 SLM 02/07/17 - Do not display records if the Producer Site's
//?  RS Record Status = I or D.
//?E3814 JJH 10/07/15 - Display PS Premises ID
ENDDO;

//?USER: Load subfile record from DBF record

// PGM.*Record selected = CND.*YES
PGM.*Record_selected = 'Y';

//?E3814 JJH 10/05/15 - Display PS Premises ID
EXECUTE FUNCTION(Rtv PrdSite Inform    RT) TYPE(RTVOBJ) FILE(PLATREP)           AB1273272;
PARAMETER(RCD.PD_Producer_Code);
PARAMETER(RCD.PS_Site_ID);
PARAMETER(RCD.Description_30_USR);
PARAMETER(NLL.PS_Manager);
PARAMETER(NLL.PS_Address);
PARAMETER(NLL.PS_City);
PARAMETER(RCD.PS_State);
PARAMETER(NLL.PS_Zip_Code);
PARAMETER(NLL.PS_Latitude);
PARAMETER(NLL.PS_Longitude);
PARAMETER(NLL.PS_User_Mileage_1);
PARAMETER(NLL.PS_User_Mileage_2);
PARAMETER(NLL.PS_Facility_Type_County);
PARAMETER(NLL.PS_Status_1);
PARAMETER(NLL.PS_Status_2);
PARAMETER(NLL.PS_Status_3);
PARAMETER(NLL.PS_Trace_Sequence_#);
PARAMETER(NLL.PS_Veterinarian);
PARAMETER(NLL.PS_Nutritionist);
PARAMETER(RCD.PS_Premises_ID);
PARAMETER(LCL.RS_Record_Status);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


CASE;

// IF LCL.RS Record Status is Flag for Purge
IF LCL.RS_Record_Status = 'D';

// OR LCL.RS Record Status is InActive
OR LCL.RS_Record_Status = 'I';

//?R7522 SLM  2/7/2017 This section was * out unrestrict do not
//?load records that are flagged as I=Inactive or D=Delete
// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

// IF RCD.Description 30 USR EQ WRK.Blank USR
IF RCD.Description_30_USR = WRK.Blank_USR;

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

//?USER: Exit program processing

MOVE *ALL ();

//?USER: Process subfile control

EXECUTE FUNCTION(Producer Name         DRV) TYPE(DRVFLD)                        AB1100361;
PARAMETER(CTL.Producer_Name_DRV);
PARAMETER(CTL.PD_Producer_Code);
{
 //?Calculate derived field

 EXECUTE FUNCTION(Rtv Producer Name     RT) TYPE(RTVOBJ) FILE(PKACREP)           AB1101542;
 PARAMETER(PAR.PD_Producer_Code);
 PARAMETER(PAR.Producer_Name_DRV);
 {
  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

}


