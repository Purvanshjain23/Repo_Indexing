/*  PROGRAM NUMBER:  PWJNPVRCLP                                    */
/*                                                                 */
/*  PROGRAM NAME:    Perform history from                          */
/*                   reporting for 2007 - 2018.                    */
/*                                                                 */
/*  PROGRAMMER:      Susan Mason                                   */
/*  ************     ********************************************* */
/*  Function:        This cl was developed to allow the user       */
/*                   to pick which year and the year will be       */
/*                   history that we will be using in the          */
/*                   enviorment that has been restore from tape    */
/*                   Year 2007 - 2018                              */
/*                   FUNCTION FILE : STR ORDER MANAGEMENT SYS      */
/*                   FUNCTION. . . : VAL APPLICATION/USER  IF      */
/*                   Will be used to pull the company for this      */
/*                   user.                                         */
/*                                                                 */
/*                   Help desk will restore each yearly libs       */
/*                   Tapes will restore to 07 - 18 enviorments     */
/*******************************************************************/
/* &OPTION selection                                               */
/*  01 HOG PROCUREMENT PERF. REPORT PKUDPVR ' '                    */
/*  03 HOG POPULATION REPORT PKUUPVR ' '                           */
/*  05 PURCHASE JOURNAL BY DATE PKUDFVR ' '                        */
/*                                                                 */
/*                   Then the option will state which report to    */
/*                   run,                                          */
/*******************************************************************/
/*  Modification History                                           */
/*  8/6/2019  Creation Susan L, Blakey                             */
/*******************************************************************/
             PGM        PARM(&OPTION)

             DCL        VAR(&OPTION) TYPE(*CHAR) LEN(2)
             DCL        VAR(&YEARLY) TYPE(*DEC) LEN(4)
             DCL        VAR(&Y2D) TYPE(*DEC) LEN(2)
             DCL        VAR(&CO)     TYPE(*DEC) LEN(3) VALUE(000)

/*PERFORM PSHLIBL TO KEEP THE LIBRARY LIST BEFORE WE START.       */
             PSHLIBL

/* &CO Based on the User profile which is used inside this progran */
             CALL       PGM(PWJNPVR) PARM(' ' &YEARLY &Y2D &CO)

             IF         COND(&CO *EQ 360) THEN(DO)
/*  SETLIBL FOR 360                                               */
             SETLIBL PRKTSTGUP
             GOTO YR2018
             ENDDO
/*  SETLIBL FOR 960                                               */
             IF         COND(&CO *EQ 960) THEN(DO)
             SETLIBL PRKTSTTFP
             GOTO YR2018
             ENDDO
/*  SETLIBL FOR 440                                               */
             IF         COND(&CO *EQ 440) THEN(DO)
             SETLIBL PRKTSTSTP
             GOTO YR2018
             ENDDO

             GOTO NOSEL

YR2018:
             DMPCLPGM

             IF         COND(&YEARLY *EQ 2018) THEN(DO)
/*           ADDLIBLE   LIB(PRKPLIB18) POSITION(*BEFORE PRKPLIB))  */
/*           ADDLIBLE   LIB(PRKFLIB18) POSITION(*BEFORE TPMTESTF)  */
/*  ADDLIBLE LIBR FOR YEAR AND GUYMON FOODS                       */
             IF         COND(&CO *EQ 360) THEN(DO)
/*           ADDLIBLE   LIB(PRKFGUP18) POSITION(*BEFORE PRKFTSTGUP)*/
             ENDDO
/*  ADDLIBLE LIBR FOR YEAR AND TRIUMPH FOODS                      */
             IF         COND(&CO *EQ 960) THEN(DO)
/*           ADDLIBLE   LIB(PRKFTFP18) POSITION(*BEFORE PRKFTSTTFP)*/
             ENDDO
/*  ADDLIBLE LIBR FOR YEAR AND SEABOARD TRIUMPH FOODS             */
             IF         COND(&CO *EQ 440) THEN(DO)
/*           ADDLIBLE   LIB(PRKFSTP18) POSITION(*BEFORE PRKFTSTSTP)*/
             ENDDO
             ENDDO
YR2017:
             IF         COND(&YEARLY *EQ 2017) THEN(DO)
/*           ADDLIBLE   LIB(PRKPLIB17) POSITION(*BEFORE PRKPLIB))  */
/*           ADDLIBLE   LIB(PRKFLIB17) POSITION(*BEFORE TPMTESTF)  */
/*  ADDLIBLE LIBR FOR YEAR AND GUYMON FOODS                       */
             IF         COND(&CO *EQ 360) THEN(DO)
/*           ADDLIBLE   LIB(PRKFGUP17) POSITION(*BEFORE PRKFTSTGUP)*/
             ENDDO
/*  ADDLIBLE LIBR FOR YEAR AND TRIUMPH FOODS                      */
             IF         COND(&CO *EQ 960) THEN(DO)
/*           ADDLIBLE   LIB(PRKFTFP17) POSITION(*BEFORE PRKFTSTTFP)*/
             ENDDO
/*  ADDLIBLE LIBR FOR YEAR AND SEABOARD TRIUMPH FOODS             */
             IF         COND(&CO *EQ 440) THEN(DO)
/*           ADDLIBLE   LIB(PRKFSTP17) POSITION(*BEFORE PRKFTSTSTP)*/
             ENDDO
             ENDDO
YR2016:
             IF         COND(&YEARLY *EQ 2016) THEN(DO)
/*           ADDLIBLE   LIB(PRKPLIB16) POSITION(*BEFORE PRKPLIB))  */
/*           ADDLIBLE   LIB(PRKFLIB16) POSITION(*BEFORE TPMTESTF)  */
/*  ADDLIBLE LIBR FOR YEAR AND GUYMON FOODS                       */
             IF         COND(&CO *EQ 360) THEN(DO)
/*           ADDLIBLE   LIB(PRKFGUP16) POSITION(*BEFORE PRKFTSTGUP)*/
             ENDDO
/*  ADDLIBLE LIBR FOR YEAR AND TF FOODS                           */
             IF         COND(&CO *EQ 960) THEN(DO)
/*           ADDLIBLE   LIB(PRKFTFP16) POSITION(*BEFORE PRKFTSTTFP)*/
             ENDDO
/*  ADDLIBLE LIBR FOR YEAR AND ST FOODS                           */
             IF         COND(&CO *EQ 440) THEN(DO)
/*           ADDLIBLE   LIB(PRKFSTP16) POSITION(*BEFORE PRKFTSTSTP)*/
             ENDDO
             ENDDO

RUNRPTS:
             DSPLIBL

/*   Now run the report that was selected from the menu          */
IF COND(&OPTION *EQ '01') THEN(DO)
/***  01 Hog Procurement Perf. Report PKUDPVR ' '              ***/
             CALL       PGM(PKUDPVR) PARM('')
             ENDDO
IF COND(&OPTION *EQ '03') THEN(DO)
/***  03 Hog Population Report PKUUPVR ' '                     ***/
             CALL       PGM(PKUUPVR) PARM('')
             ENDDO
IF COND(&OPTION *EQ '05') THEN(DO)
/***  05 Purchase Journal by Date PKUDFVR ' '                  ***/
             CALL       PGM(PKUDFVR) PARM('')
             ENDDO

NOSEL:

ENDRPT:
/*   Now push the library list back                              */
             POPLIBL
             DSPLIBL    OUTPUT(*PRINT)

             DLTOVR     FILE(*ALL)
ENDPGM

