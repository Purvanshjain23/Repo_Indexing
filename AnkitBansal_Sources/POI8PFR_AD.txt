// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POI8PFR
// ?Date: 14.08.2025 Time: 12:06:12
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?Print MPH before cert #, print date at bottom in company totals
//?USER: Print required level headings

CASE;

IF NEW Company_Number;
// SUPPRESSED PRINT Company Number header format

ENDIF;

CASE;

IF NEW Order_Number;
// SUPPRESSED PRINT Order Number header format

ENDIF;

CASE;

IF NEW ED_Export_Document_Type;
// SUPPRESSED PRINT ED Export Document Type header format

ENDIF;

//?USER: Process before print of detail format

// CUR.Text USR 20 = CUR.ED Production mo/yr
CUR.Text_USR_20 = CUR.ED_Unused_prd_mo_yr;

// CUR.USR Uom = CON.Lbs
CUR.USR_Uom = 'Lbs';

//?New 5/26/09
CASE;

// IF DB1.ED Document Date is Not entered
IF DB1.ED_Document_Date = *ZERO;

// CUR.Date                  USR = JOB.*Job date
CUR.Date_USR = JOB.*Job_date;

//?New 5/26/09
// IF *OTHERWISE
IF *OTHERWISE;

// CUR.Date                  USR = DB1.ED Document Date
CUR.Date_USR = DB1.ED_Document_Date;

ENDIF;

// LCL.Date                  USR = CUR.Date                  USR
LCL.Date_USR = CUR.Date_USR;

//?USER: On print of detail format

// CUR.USR Plant Nbr 1 = CUR.ED Plant Number
CUR.USR_Plant_Nbr_1 = CUR.ED_Plant_Number;

// CUR.USR Plant Nbr 2 = CUR.ED Plant Number
CUR.USR_Plant_Nbr_2 = CUR.ED_Plant_Number;

// CUR.Text USR 40 = DB1.ED Date of Slaughter
CUR.Text_USR_40 = DB1.ED_Date_of_Slaughter;

// CUR.Text Usr 40 2 = DB1.ED Date of Processing
CUR.Text_Usr_40_2 = DB1.ED_Date_of_Processing;

// WRK.ED Cold Storage Plant Nbr = DB1.ED Cold Storage Plant Nbr
WRK.ED_Cold_Storage_Plant_Nbr = DB1.ED_Cold_Storage_Plant_Nbr;

//?USER: Print required level totals

// SUPPRESSED PRINT ED Export Document Type totals format

// SUPPRESSED PRINT Order Number totals format

CASE;

IF NEW Company_Number;
// WRK.Date (Alpha) USR = CVTVAR(LCL.Date                  USR)
WRK.Date_Alpha_USR = CVTVAR(LCL.Date_USR);

// WRK.Month/Day Alpha MMDD = SUBSTRING(WRK.Date (Alpha) USR,CON.4,CON.4)
WRK.Month_Day_Alpha_MMDD = SUBSTRING(WRK.Date_Alpha_USR:4:4);

// WRK.Year  (Char) USR = SUBSTRING(WRK.Date (Alpha) USR,CON.2,CON.2)
WRK.Year_Char_USR = SUBSTRING(WRK.Date_Alpha_USR:2:2);

// WRK.Year Alpha (YYYY) USR = CONCAT(CON.20,WRK.Year  (Char) USR,CON.*ZERO)
WRK.Year_Alpha_YYYY_USR = '20' + WRK.Year_Char_USR (*ZERO);

// WRK.Date (Char-8) USR = CONCAT(WRK.Month/Day Alpha MMDD,WRK.Year Alpha (YYYY) USR,CON.*ZERO)
WRK.Date_Char_8_USR = WRK.Month_Day_Alpha_MMDD + WRK.Year_Alpha_YYYY_USR (*ZERO);

// CUR.Date 8.0 USR = CVTVAR(WRK.Date (Char-8) USR)
CUR.Date_8_0_USR = CVTVAR(WRK.Date_Char_8_USR);

// Print Company Number totals format
PRINT Company Number totals format;

ENDIF;

