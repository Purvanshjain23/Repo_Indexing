// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBWTXFR
// ?Date: 14.08.2025 Time: 03:49:35
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Rtv Add Alc Qty WkAhd RT) TYPE(RTVOBJ) FILE(PBB1CPP)           AC2121491;
PARAMETER(PAR.PFS_Company_Number);
PARAMETER(PAR.PFS_Batch_Date);
PARAMETER(PAR.PFS_Batch_Time);
PARAMETER(PAR.PFS_User_ID);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.PFS Baseline Schedule is Work Ahead
 IF DB1.PFS_Baseline_Schedule = 'W';

 // AND DB1.PFS Primary UOM is Combo
 AND DB1.PFS_Primary_UOM = 'CB';

 // AND DB1.PFS Fill Qty Prod is GT Zero
 AND DB1.PFS_Fill_Qty_Prod > *ZERO;

 // AND DB1.PFS Inventory Alloc Qty is Not Entered
 AND DB1.PFS_Inventory_Alloc_Qty = *ZERO;

 EXECUTE FUNCTION(Rtv Add Alc Qty RgPrd RT) TYPE(RTVOBJ) FILE(PBB1CPP)           AC2121493;
 PARAMETER(DB1.PFS_Company_Number);
 PARAMETER(DB1.PFS_Batch_Date);
 PARAMETER(DB1.PFS_Batch_Time);
 PARAMETER(DB1.PFS_User_ID);
 PARAMETER(DB1.PFS_Item_Code);
 PARAMETER(DB1.PFS_Order_Number);
 PARAMETER(LCL.PFS_Inventory_Alloc_Qty);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  CASE;

  // IF NOT DB1.PFS Baseline Schedule is Work Ahead
  IF ! DB1.PFS_Baseline_Schedule = 'W';

  // AND DB1.PFS Fill Qty Prod is Zero
  AND DB1.PFS_Fill_Qty_Prod = *ZERO;

  // AND DB1.PFS Inventory Alloc Qty is Entered
  AND DB1.PFS_Inventory_Alloc_Qty > *ZERO;

  // PAR.PFS Inventory Alloc Qty = DB1.PFS Inventory Alloc Qty
  PAR.PFS_Inventory_Alloc_Qty = DB1.PFS_Inventory_Alloc_Qty;

  QUIT;

  ENDIF;

 }

 CASE;

 // IF LCL.PFS Inventory Alloc Qty is Entered
 IF LCL.PFS_Inventory_Alloc_Qty > *ZERO;

 //?R15794 DN 11/19/19-Default New Fields.
 EXECUTE FUNCTION(Chg PFS Prd Sch Bt Dt CH) TYPE(CHGOBJ) FILE(PBB1CPP)           AC2109266;
 PARAMETER(DB1.PFS_Company_Number);
 PARAMETER(DB1.PFS_Batch_Date);
 PARAMETER(DB1.PFS_Batch_Time);
 PARAMETER(DB1.PFS_User_ID);
 PARAMETER(DB1.PFS_Batch_Seq);
 PARAMETER(DB1.PFS_Production_Date);
 PARAMETER(DB1.PFS_Item_Code);
 PARAMETER(DB1.PFS_Label_Type);
 PARAMETER(DB1.PFS_Order_Number);
 PARAMETER(DB1.PFS_Order_Line_Item_Nbr);
 PARAMETER(DB1.PFS_Order_Line_Sts);
 PARAMETER(DB1.PFS_Ordered_Qty);
 PARAMETER(LCL.PFS_Inventory_Alloc_Qty);
 PARAMETER(DB1.PFS_Fill_Qty_Prod);
 PARAMETER(DB1.PFS_Fill_Qty_Ship_Day_0);
 PARAMETER(DB1.PFS_Fill_Qty_Ship_Day_1);
 PARAMETER(DB1.PFS_Fill_Qty_Ship_Day_2);
 PARAMETER(DB1.PFS_Load_ID);
 PARAMETER(DB1.PFS_Loading_Sequence);
 PARAMETER(DB1.PFS_Scheduled_Ship_Date);
 PARAMETER(DB1.PFS_Load_Deadline_Date);
 PARAMETER(DB1.PFS_Load_Deadline_Time);
 PARAMETER(DB1.PFS_Item_Structure_Type);
 PARAMETER(DB1.PFS_Item_Structure_Group);
 PARAMETER(DB1.PFS_Item_Structure_Class);
 PARAMETER(DB1.PFS_Primary_UOM);
 PARAMETER(DB1.PFS_Fresh_Frozen);
 PARAMETER(DB1.PFS_Base_Converted);
 PARAMETER(DB1.PFS_Baseline_Schedule);
 PARAMETER(DB1.PFS_Palletize);
 PARAMETER(DB1.PFS_Pallet_Type);
 PARAMETER(DB1.PFS_Slip_Sheet);
 PARAMETER(DB1.PFS_Customer_Name);
 PARAMETER(DB1.PFS_Record_Status);
 PARAMETER(DB1.PFS_Process_Status);
 PARAMETER(DB1.PFS_Error_Reason);
 PARAMETER(DB1.PFS_Create_Date);
 PARAMETER(DB1.PFS_Create_Time);
 PARAMETER(DB1.PFS_Change_Date);
 PARAMETER(DB1.PFS_Change_Time);
 ENDIF;

 ENDIF;

}


