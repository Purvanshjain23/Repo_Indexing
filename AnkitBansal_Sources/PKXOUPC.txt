/********************************************************************/
/*                                                                  */
/*  SYNOPSIS - CL PROGRAM FOR PRINTING HEAVY HOG REPORT  (CARC DTL) */
/*                                                                  */
/*  SYSTEM    - HOG PROCUREMENT AND EVALUATION                      */
/*  DATE      - 10/18/01                                            */
/*  DEVELOPER - ROSE CENTONZE                                       */
/*                                                                  */
/********************************************************************/
/* MODIFICATIONS:                                                   */
/********************************************************************/
             PGM        PARM(&DATEFA &DATETA &COA &CUTOUT &EFFDYA +
      &MINWTA  &PDEV &HOLD &SAVE &XCOPIES &APP)

/* PRINT OPTION PARMS                                             */
             DCL        VAR(&RTN) TYPE(*CHAR) LEN(7)
             DCL        VAR(&PDEV) TYPE(*CHAR) LEN(10)
             DCL        VAR(&HOLD) TYPE(*CHAR) LEN(4)
             DCL        VAR(&SAVE) TYPE(*CHAR) LEN(4)
             DCL        VAR(&XCOPIES) TYPE(*CHAR) LEN(15)
             DCL        VAR(&COPIES) TYPE(*DEC) LEN(2 0)
             DCL        VAR(&APP) TYPE(*CHAR) LEN(33)
             DCL        VAR(&LPP) TYPE(*CHAR) LEN(40)

/* INPUT FIELDS */
             DCL        VAR(&COA) TYPE(*CHAR) LEN(3)  /*COMPANY NO       */
             DCL        VAR(&DATEFA) TYPE(*CHAR) LEN(7)  /*DATE FROM   E     */
             DCL        VAR(&DATETA) TYPE(*CHAR) LEN(7)  /*DATE TO     ATE   */
             DCL        VAR(&CUTOUT) TYPE(*CHAR) LEN(6)  /*CUTOUT      ATE   */
             DCL        VAR(&EFFDYA) TYPE(*CHAR) LEN(4)  /*EFFECTV DY  ATE   */
             DCL        VAR(&MINWTA) TYPE(*CHAR) LEN(3)  /*MIN CRC WT  ATE   */

/* SBDPRTOVR VARIABLE                                          */
             DCL        VAR(&CMD) TYPE(*CHAR) LEN(512)

             DCL        VAR(&CO) TYPE(*DEC)  LEN(3)  /*COMPANY NO        */
             DCL        VAR(&DATEF) TYPE(*DEC) LEN(7)  /*DATE FROM     E     */
             DCL        VAR(&DATET) TYPE(*DEC) LEN(7)  /*DATE TO       ATE   */
             DCL        VAR(&EFFDY) TYPE(*DEC) LEN(4)  /*EFFECTV DY    ATE   */
             DCL        VAR(&MINWT) TYPE(*DEC) LEN(3)  /*MIN WT        ATE   */

/* OPEN QUERY  */
             DCL        VAR(&QDATA) TYPE(*CHAR) LEN(90)

/* CHANGE ALPHA PARMS TO NUMERIC VARIABLES                       */
             CHGVAR     VAR(&COPIES) VALUE(&XCOPIES)
             CHGVAR     VAR(&CO) VALUE(&COA)
             CHGVAR     VAR(&DATEF) VALUE(&DATEFA)
             CHGVAR     VAR(&DATET) VALUE(&DATETA)
             CHGVAR     VAR(&EFFDY) VALUE(&EFFDYA)
             CHGVAR     VAR(&MINWT) VALUE(&MINWTA)

             CHGVAR     VAR(&LPP) VALUE(&APP)

/*-----------------------------------------------------------------*/
/* INITILIZATION                                                   */
/*-----------------------------------------------------------------*/

/*-----------------------------------------------------------------*/
/* MAINLINE                                                        */
/*-----------------------------------------------------------------*/

/********************************************************************/

/*------------------------------------------------------------------*/
/*  SET UP OPEN QUERY STATEMENT                                     */
/*------------------------------------------------------------------*/

/*  ALWAYS SELECT ONLY THE SPECIFIED COMPANY                     */

             CHGVAR     VAR(%SST(&QDATA 1 10)) VALUE('B1HMNB *EQ')
             CHGVAR     VAR(%SST(&QDATA 12 3)) VALUE(&COA)


/*  KILL DATE RANGE                                              */

             CHGVAR     VAR(%SST(&QDATA 16 17)) VALUE('*AND B1B0DT *GE ')
             CHGVAR     VAR(%SST(&QDATA 33 7)) VALUE(&DATEFA)
             CHGVAR     VAR(%SST(&QDATA 41 17)) VALUE('*AND B1B0DT *LE ')
             CHGVAR     VAR(%SST(&QDATA 58 7)) VALUE(&DATETA)

/*  HOT WEIGHT                                                */

             CHGVAR     VAR(%SST(&QDATA 66 16)) VALUE('*AND B1EWNB *GE ')
             CHGVAR     VAR(%SST(&QDATA 82 3)) VALUE(&MINWT)

/*------------------------------------------------------------------*/
/*  RUN QUERY OVER CARCASS DETAIL                                   */
/*------------------------------------------------------------------*/

             OVRDBF     FILE(PKB1CPL4) SHARE(*YES)
             OPNQRYF    FILE((PKB1CPL4)) QRYSLT(&QDATA) KEYFLD(*FILE)

/*******************************************************************/
/* PRINT REPORT                                                   */
/*******************************************************************/

             SBDPRTOVR  CMDVAR(&CMD) FILE(PKXPPFR$) OUTQ(&PDEV) +
                          COPIES(&COPIES) HOLD(&HOLD) SAVE(&SAVE)
             CALL       PGM(QCMDEXC) PARM(&CMD 512)

             CALL       PGM(PKXPPFR) PARM(' ' &CO &DATEF &DATET +
                                &CUTOUT &EFFDY  &LPP)



/*-----------------------------------------------------------------*/
/* END PROGRAM                                                     */
/*-----------------------------------------------------------------*/

             CLOF       OPNID(PKB1CPL4)
             DLTOVR     FILE(*ALL)

 ENDPGM:     ENDPGM
