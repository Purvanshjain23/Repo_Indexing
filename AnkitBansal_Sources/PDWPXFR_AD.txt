// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDWPXFR
// ?Date: 14.08.2025 Time: 03:33:27
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(CNV Build Mileage Tabl RT) TYPE(RTVOBJ) FILE(OMFJCPP)          AC1454212;
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Total Stops is One Stop
 IF DB1.Total_Stops = 1;

 // AND DB1.Total Load Miles NE WRK.ZERO
 AND DB1.Total_Load_Miles <> WRK.ZERO;

 // AND DB1.Ship From Warehouse NE WRK.BLANK
 AND DB1.Ship_From_Warehouse <> WRK.BLANK;

 EXECUTE FUNCTION(RTV Ship To City/St-Ld RT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC1454218;
 PARAMETER(DB1.Load_ID);
 PARAMETER(PAR.Ship_To_City);
 PARAMETER(PAR.Ship_To_State_Code);
 {
  //?USER: Initialize routine

  //?05/14/04 SLM PKTR01 Multi-Company - Funct chg remove Company RST or Pos
  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

  QUIT;

 }

 // Execute function CVT Str to Upper Alpha US.
 EXECUTE FUNCTION(CVT Str to Upper Alpha US) TYPE(EXCUSRSRC) ('PDWEUFR');
 PARAMETER(PAR.Ship_To_City);
 PARAMETER(PAR.To_City);
 {
  PDWEUFR:  PGM PARM(&STRIN &STROUT)

  CHGVAR VAR(&FLDOUT) VALUE('%XLATE(UPTEXT &STRIN)')
 }

 EXECUTE FUNCTION(RTV Warehouse Address  RT) TYPE(RTVOBJ) FILE(CAADREP)          AC1211418;
 PARAMETER(DB1.Ship_From_Warehouse);
 PARAMETER(WRK.Warehouse_Description);
 PARAMETER(WRK.Address_Line_1);
 PARAMETER(WRK.Address_Line_2);
 PARAMETER(WRK.Address_Line_3);
 PARAMETER(PAR.City);
 PARAMETER(WRK.Zip_Postal_Code);
 PARAMETER(PAR.From_State);
 {
  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 // Execute function CVT Str to Upper Alpha US.
 EXECUTE FUNCTION(CVT Str to Upper Alpha US) TYPE(EXCUSRSRC) ('PDWEUFR');
 PARAMETER(PAR.City);
 PARAMETER(PAR.From_City);
 {
  PDWEUFR:  PGM PARM(&STRIN &STROUT)

  CHGVAR VAR(&FLDOUT) VALUE('%XLATE(UPTEXT &STRIN)')
 }

 EXECUTE FUNCTION(CRT Mileage Bet Cities CR) TYPE(CRTOBJ) FILE(PDLFREP)          AC1453971;
 PARAMETER(PAR.From_City);
 PARAMETER(PAR.From_State);
 PARAMETER(PAR.To_City);
 PARAMETER(PAR.Ship_To_State_Code);
 PARAMETER(DB1.Total_Load_Miles);
 // PGM.*Return code = CND.*Normal
 PGM.*Return_code = *BLANK;

 ENDIF;

}


