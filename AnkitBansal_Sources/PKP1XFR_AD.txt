// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKP1XFR
// ?Date: 14.08.2025 Time: 02:50:11
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications and Comments
DO;

//?H16853 ISE 11/02/20 - Increased the Buy Order Number field
//?                      length from 5 to 7.
ENDDO;

// Call program Val Application/User  XF.
CALL PROGRAM(Val Application/User  XF) ('PDGXXFR');
PARAMETER(PAR.Oms_Warehouse_Code);
PARAMETER(WRK.BOH_Company_Number);
PARAMETER('P/S');
PARAMETER(PAR.Oms_SalesPerson_Code);
PARAMETER(PAR.Oms_Allow_Multi_Company);
PARAMETER(PAR.Oms_Default_Printer);
PARAMETER(PAR.Oms_Name);
PARAMETER(PAR.Oms_System_Value_Alpha);
PARAMETER(PAR.Oms_Access_Denied_Y_N);

// Call program Del Cutout Value 2 OMS XF.
CALL PROGRAM(Del Cutout Value 2 OMS XF) ('PDKFXFR');
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.TH_Kill_Date);

// Call program Rtv Dflt Cut Mtx 2 OMS XF.
CALL PROGRAM(Rtv Dflt Cut Mtx 2 OMS XF) ('PDKHXFR');
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.Cutout_Matrix_Code_USR);
PARAMETER(PAR.Effective_Month_Day_USR);

// Call program Rtv Coolr Shrnk% 2 OMS XF.
CALL PROGRAM(Rtv Coolr Shrnk% 2 OMS XF) ('PDAWXFR');
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.Cooler_Shrink_Percent_USR);

EXECUTE FUNCTION(Clc Cutout Value      RT) TYPE(RTVOBJ) FILE(PKB1CPP)           AB1138226;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.TH_Kill_Date);
PARAMETER(PAR.Cutout_Matrix_Code_USR);
PARAMETER(PAR.Effective_Month_Day_USR);
PARAMETER(PAR.Cooler_Shrink_Percent_USR);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.CD Record Add/Del Sts is Delete
 IF DB1.CD_Record_Add_Del_Sts = 'D';

 // IF *OTHERWISE
 IF *OTHERWISE;

 // WRK.Lean % 3.0 USR = DB1.CD Lean Percent
 WRK.Lean_3_0_USR = DB1.CD_Lean_Percent;

 // Call program Upd Cutout Items 2 OMS XF.
 CALL PROGRAM(Upd Cutout Items 2 OMS XF) ('PDKEXFR');
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.TH_Kill_Date);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.CD_Carcass_Hot_Weight);
 PARAMETER(WRK.Lean_3_0_USR);
 PARAMETER(PAR.Cutout_Matrix_Code_USR);
 PARAMETER(PAR.Effective_Month_Day_USR);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(PAR.Cooler_Shrink_Percent_USR);

 ENDIF;

}


