// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDSCXFR
// ?Date: 14.08.2025 Time: 03:32:55
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(UPS Rtc RM Avail CRD  RT) TYPE(RTVOBJ) FILE(PDIOREP)           AC1439305;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Item_Code);
PARAMETER(PAR.Weight_Available_USR);
PARAMETER(PAR.Production_Type);
PARAMETER(PAR.Production_Date);
PARAMETER(PAR.Record_Found_PS_PD_USR);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(UPS Rtv RM Avail CRD  RT) TYPE(RTVOBJ) FILE(PDI8CPP)           AC1439304;
 PARAMETER(DB1.Company_Number);
 PARAMETER(PAR.Production_Type);
 PARAMETER(PAR.Production_Date);
 PARAMETER(DB1.Component_Item_Code);
 PARAMETER(PAR.Weight_Available_USR);
 PARAMETER(PAR.Record_Found_PS_PD_USR);
 {
  //?USER: Initialize routine

  // PAR.Weight Available USR = CON.*ZERO
  PAR.Weight_Available_USR = *ZERO;

  //?USER: Processing if Data record not found

  // PAR.Record Found -PS PD USR = CND.Record Not Found
  PAR.Record_Found_PS_PD_USR = 'N';

  //?USER: Process Data record

  CASE;

  // IF PAR.Production Date EQ JOB.*Job date
  IF PAR.Production_Date = JOB.*Job_date;

  // Weight Avail Prod
  PAR.Weight_Available_USR = PAR.Weight_Available_USR + ( ( ( ( (
  DB1.PS_Weight_Planned_Prod + DB1.PS_Weight_Inv_On_Hand ) + DB1.PS_Weight_Standard )
  - DB1.PS_Weight_Converted ) - DB1.PS_Weight_Fab_Needs ) - DB1.PS_Weight_Sched_Shipment );

  // IF *OTHERWISE
  IF *OTHERWISE;

  // Weight Avail Prod
  PAR.Weight_Available_USR = PAR.Weight_Available_USR + ( ( ( ( DB1.PS_Weight_Planned_Prod
  + DB1.PS_Weight_Standard ) - DB1.PS_Weight_Converted ) - DB1.PS_Weight_Fab_Needs )
  - DB1.PS_Weight_Ordered );

  ENDIF;

  // PAR.Record Found -PS PD USR = CND.Record Found
  PAR.Record_Found_PS_PD_USR = 'Y';

 }

}


