// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLA1XFR
// ?Date: 14.08.2025 Time: 03:42:31
// ?------------------------------------------------------------------------------------------------

//?Execute user function

CASE;

// IF PAR.Email Selection usr is Email Selected
IF PAR.Email_Selection_usr = 'E';

// LCL.PRT Hold Output Sts = CND.*YES
LCL.PRT_Hold_Output_Sts = *YES;

// IF *OTHERWISE
IF *OTHERWISE;

// LCL.PRT Hold Output Sts = PAR.PRT Hold Output Sts
LCL.PRT_Hold_Output_Sts = PAR.PRT_Hold_Output_Sts;

ENDIF;

//?1. Override Printer File.
DO;

// PAR.Nbr of Copies-Alpha   USR = CVTVAR(PAR.PRT Number of Copies)
PAR.Nbr_of_Copies_Alpha_USR = CVTVAR(PAR.PRT_Number_of_Copies);

// Call program EXC Command OVRPRTF    UP.
CALL PROGRAM(EXC Command OVRPRTF    UP) ('PDQVUPC');
PARAMETER('PLA0PFR$');
PARAMETER(PAR.PRT_Printer_Device);
PARAMETER(PAR.PRT_Hold_Output_Sts);
PARAMETER(PAR.PRT_Save_Output_Sts);
PARAMETER(PAR.Nbr_of_Copies_Alpha_USR);

ENDDO;

//?2. Print Report with email or without distro list selection
DO;

CASE;

// IF PAR.Email Selection usr is Email Selected
IF PAR.Email_Selection_usr = 'E';

EXECUTE FUNCTION(RTV default Company    IF) TYPE(EXCINTFUN)                     AC1592222;
PARAMETER(LCL.Company_Number);
{
 //?Execute internal function

 EXECUTE FUNCTION(Rtv Profile Model     RT) TYPE(RTVOBJ) FILE(CADRREP)           AC1445577;
 PARAMETER(JOB.*USER);
 PARAMETER(PAR.User_Code_Model);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 CASE;

 // IF PAR.User Code Model is equal to blank
 IF PAR.User_Code_Model = *BLANK;

 EXECUTE FUNCTION(RTV Appl. Default Co   RT) TYPE(RTVOBJ) FILE(CADTREP)          AC1143068;
 PARAMETER(JOB.*USER);
 PARAMETER('P/S');
 PARAMETER(PAR.Company_Number);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 // IF *OTHERWISE
 IF *OTHERWISE;

 EXECUTE FUNCTION(RTV Appl. Default Co   RT) TYPE(RTVOBJ) FILE(CADTREP)          AC1143068;
 PARAMETER(PAR.User_Code_Model);
 PARAMETER('P/S');
 PARAMETER(PAR.Company_Number);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 ENDIF;

}


EXECUTE FUNCTION(RTV Alpha Value        RT) TYPE(RTVOBJ) FILE(PDKMREP)          AC1381513;
PARAMETER(LCL.Company_Number);
PARAMETER('CLMEXPPND');
PARAMETER(LCL.System_Value_Alpha);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


// LCL.Distr List Usr = LCL.System Value Alpha
LCL.Distr_List_Usr = LCL.System_Value_Alpha;

// IF *OTHERWISE
IF *OTHERWISE;

// LCL.Distr List Usr = CON.*BLANK
LCL.Distr_List_Usr = *BLANK;

ENDIF;

// Call program PRT Claim Exp Pnd     CLP.
CALL PROGRAM(PRT Claim Exp Pnd     CLP) ('PLA2UPC');
PARAMETER(LCL.Distr_List_Usr);
PARAMETER('Prt Claim Expense Pending');

ENDDO;

//?3. Delete Overrides.
DO;

// Execute command - 'DLTOVR'
EXECUTE COMMAND(USR2787);

ENDDO;

