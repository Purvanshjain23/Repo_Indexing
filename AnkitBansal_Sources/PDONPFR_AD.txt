// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDONPFR
// ?Date: 14.08.2025 Time: 12:04:13
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

// WRK.USR Counter = CON.*ZERO
WRK.USR_Counter = *ZERO;

// PAR.USR Page number = CON.*ZERO
PAR.USR_Page_number = *ZERO;

//?USER: Record selection processing

// PGM.*Record selected = CND.*YES
PGM.*Record_selected = 'Y';

CASE;

// IF WRK.USR Counter is GE 1
IF WRK.USR_Counter >= 1;

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

//?USER: Process top of page

// TOP.USR Transaction Date Code = PAR.Transaction Date Code
TOP_USR_Transaction_Date_Code = PAR.Transaction_Date_Code;

// TOP.USR Time = JOB.*Job time
TOP_USR_Time = JOB.*Job_time;

// PAR.USR Page number = PAR.USR Page number + CON.1
PAR.USR_Page_number = PAR.USR_Page_number + 1;

// TOP.USR Page number = PAR.USR Page number
TOP_USR_Page_number = PAR.USR_Page_number;

//?USER: Print required level headings

// SUPPRESSED PRINT Accounting Company Number header format

// SUPPRESSED PRINT Transaction Date Code header format

// SUPPRESSED PRINT Transfer Batch Number header format

//?USER: On print of detail format

// PGM.*Print format = CND.Print format
PGM.*Print_format = 'Y';

CASE;

// IF WRK.USR Counter is GE 1
IF WRK.USR_Counter >= 1;

// PGM.*Print format = CND.Do not print format
PGM.*Print_format = 'N';

// IF *OTHERWISE
IF *OTHERWISE;

// CUR.Transfer Batch Number = PAR.Transfer Batch Number
CUR.Transfer_Batch_Number = PAR.Transfer_Batch_Number;

EXECUTE FUNCTION(RTV Warehouse Address  RT) TYPE(RTVOBJ) FILE(CAADREP)          AC1211418;
PARAMETER(PAR.USR_Warehouse_Code);
PARAMETER(CUR.USR_Warehouse_description);
PARAMETER(CUR.USR_Address_Line_1);
PARAMETER(CUR.USR_Address_Line_2);
PARAMETER(WRK.Address_Line_3);
PARAMETER(CUR.USR_City);
PARAMETER(CUR.USR_zip_code_11);
PARAMETER(CUR.USR_State_ATR);
{
 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


ENDIF;

//?PRTOBJ calls after print of detail format

//?Embedded PRTOBJ : Prt Transfer B.O.L.    PO
EXECUTE FUNCTION(Prt Transfer B.O.L.    PO) TYPE(PRTOBJ);
PARAMETER(CUR.Company_Number);
PARAMETER(CUR.Warehouse_Code);
PARAMETER(CUR.Transaction_Date_Code);
PARAMETER(CUR.Transfer_Batch_Number);
PARAMETER(PAR.USR_Warehouse_Code);
PARAMETER(WRK.USR_Quantity_Accumulated);
PARAMETER(WRK.BOL_Net_Weight);
PARAMETER(WRK.BOL_Gross_Weight);
{
 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


//?USER: Process after print of detail format

// WRK.USR Counter = WRK.USR Counter + CON.1
WRK.USR_Counter = WRK.USR_Counter + 1;

//?USER: Print required level totals

// SUPPRESSED PRINT Transfer Batch Number totals format

// SUPPRESSED PRINT Transaction Date Code totals format

CASE;

IF NEW Company_Number;
// CUR.USR Quantity Accumulated = WRK.USR Quantity Accumulated
CUR.USR_Quantity_Accumulated = WRK.USR_Quantity_Accumulated;

// CUR.BOL Net Weight = WRK.BOL Net Weight
CUR.BOL_Net_Weight = WRK.BOL_Net_Weight;

// CUR.BOL Gross Weight = WRK.BOL Gross Weight
CUR.BOL_Gross_Weight = WRK.BOL_Gross_Weight;

// Print Accounting Company Number totals format
PRINT Accounting Company Number totals format;

ENDIF;

