// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PWGAXFR
// ?Date: 14.08.2025 Time: 02:56:22
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?This function is intended to be ran one-time to populate the
//?Movement Number in the Buy Order Load with the Movment Number in
//?the Tattoo Header, If 1) Producer = SBD, 2) Kill Date LE 03/19/18,
//?BOL HPS Movement Number = 0.
//?Modification history
//?11/04/2020 ISE H16853 - Recompiled due to change in Buy Order Number
EXECUTE FUNCTION(Fix Movement Number=0 RT) TYPE(RTVOBJ) FILE(PKAXCPP)           AB1343941;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.BOL_Kill_Date);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.BOL HPS Movement Number is Not entered
 IF DB1.BOL_HPS_Movement_Number = *ZERO;

 // AND DB1.PD Producer Code is SBD
 AND DB1.PD_Producer_Code = 'SBD';

 EXECUTE FUNCTION(Rtv TH Movement NumberRT) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1343943;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(LCL.TH_HPS_Movement_Ref_#);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  CASE;

  // IF DB1.TH HPS Movement Ref # is Entered
  IF DB1.TH_HPS_Movement_Ref_# <> *ZERO;

  MOVE *ALL (To: PAR From: DB1);

  QUIT;

  ENDIF;

 }

 CASE;

 // IF LCL.TH HPS Movement Ref # is Entered
 IF LCL.TH_HPS_Movement_Ref_# <> *ZERO;

 EXECUTE FUNCTION(Chg Movement# Bol     CO) TYPE(CHGOBJ) FILE(PKAXCPP)           AB1313522;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(LCL.TH_HPS_Movement_Ref_#);
 ENDIF;

 ENDIF;

}


