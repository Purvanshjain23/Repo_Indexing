// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLSTXFR
// ?Date: 14.08.2025 Time: 02:55:22
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications
//?11/05/2020 ISE H16853 - Recompiled due to change in Buy Order Number
//?Read the deliery schedule upl for the split records
//?find the split records for this movement
//?use the fields from the 1st record and populate the shell
//?and then on the splits pass farm and building information
EXECUTE FUNCTION(ZRtv MTech RecordsSplitRT) TYPE(RTVOBJ) FILE(PLBJCPP)          AB1312007;
PARAMETER(PAR.DSU_Company_Number);
PARAMETER(PAR.DSU_Transaction_Date);
PARAMETER(PAR.DSU_Transaction_Time);
PARAMETER(PAR.DSU_Transaction_Seq);
PARAMETER(00002);
PARAMETER(PAR.DSU_Movement_Number);
PARAMETER(PAR.DSH_Kill_Date);
PARAMETER(PAR.DSD_Delivery_Date);
PARAMETER(PAR.DSD_Delivery_Time);
PARAMETER(PAR.DSD_Delivery_Time_Seq);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Crt Delv Sched Split  CR) TYPE(CRTOBJ) FILE(PLAGCPP)           AB1244776;
 PARAMETER(PAR.DSU_Company_Number);
 PARAMETER(PAR.DSH_Kill_Date);
 PARAMETER(PAR.DSD_Delivery_Date);
 PARAMETER(PAR.DSD_Delivery_Time);
 PARAMETER(PAR.DSD_Delivery_Time_Seq);
 PARAMETER(DB1.DSU_Split_Sequence);
 PARAMETER(DB1.DSU_Building);
 PARAMETER(DB1.DSU_Room);
 PARAMETER(DB1.DSU_Sire_Line_Code);
 PARAMETER(DB1.DSU_Hog_Group_Code);
 PARAMETER(DB1.DSU_Scheduled_Delv_Head);
 PARAMETER(WRK.RS_User_Changed);
 PARAMETER(WRK.RS_Date_Changed);
 PARAMETER(WRK.RS_Time_Changed);
 PARAMETER('A');
 PARAMETER(WRK.RS_Job);
 PARAMETER(WRK.RS_Program);
 PARAMETER(WRK.RS_User_Added);
 PARAMETER(WRK.RS_Date_Added);
 PARAMETER(WRK.RS_Time_Added);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Rtv Add Stamp         IF) TYPE(EXCINTFUN)                      AB1100935;
  PARAMETER(DB1.RS_Record_Status);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  PARAMETER(DB1.RS_User_Added);
  PARAMETER(DB1.RS_Date_Added);
  PARAMETER(DB1.RS_Time_Added);
  {
   //?Execute internal function

   // PAR.RS Record Status = CND.Active
   PAR.RS_Record_Status = 'A';

   // PAR.RS User Added = JOB.*USER
   PAR.RS_User_Added = JOB.*USER;

   // PAR.RS Date Added = JOB.*Job date
   PAR.RS_Date_Added = JOB.*Job_date;

   // PAR.RS Time Added = JOB.*Job time
   PAR.RS_Time_Added = JOB.*Job_time;

   // PAR.RS Program = JOB.*PROGRAM
   PAR.RS_Program = JOB.*PROGRAM;

   // PAR.RS Job = JOB.*JOB
   PAR.RS_Job = JOB.*JOB;

  }

 }

}


