// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKLBXFR
// ?Date: 14.08.2025 Time: 02:52:02
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications and Comments
DO;

//?H16853 ISE 11/09/2020 - Recompiled due to change in Buy Order Number
ENDDO;

EXECUTE FUNCTION(Bld Sum Dta in QTEMP  RT) TYPE(RTVOBJ) FILE(PKD1CPP)           AB1200505;
PARAMETER(PAR.PC_Contract_Code);
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.TH_Kill_Date);
PARAMETER(PAR.Date_To_USR);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.TH Kill Date GT PAR.Date To   USR
 IF DB1.TH_Kill_Date > PAR.Date_To_USR;

 QUIT;

 // IF *OTHERWISE
 IF *OTHERWISE;

 EXECUTE FUNCTION(Crt Prd Cntrct Damage CR) TYPE(CRTOBJ) FILE(PKD1CPP)           AB1199082;
 PARAMETER(DB1.PC_Contract_Code);
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.TH_Kill_Date);
 PARAMETER(DB1.Calendar_Year);
 PARAMETER(DB1.Calendar_Quarter);
 PARAMETER(DB1.TH_Live_Wgt);
 PARAMETER(DB1.TH_Adj_Live_Wgt);
 PARAMETER(DB1.TH_Avg_Live_Wgt);
 PARAMETER(DB1.TH_Head_Killed);
 PARAMETER(DB1.TH_Hot_Wgt);
 PARAMETER(DB1.TH_Avg_Hot_Wgt);
 PARAMETER(DB1.TH_Head_Accepted);
 PARAMETER(DB1.Head_Analyzed_Percent);
 PARAMETER(DB1.TH_Payment_Gross);
 PARAMETER(DB1.Additional_Rep_Cost_Amt);
 PARAMETER(DB1.Actual_Rep_Cost_Amt);
 PARAMETER(DB1.Actual_Rep_Cost_Hd);
 PARAMETER(DB1.Actual_Rep_Cost_Lv_CWT);
 PARAMETER(DB1.Contract_Payment_Gross);
 PARAMETER(DB1.Additional_Contract_Amt);
 PARAMETER(DB1.Contract_Cost_Amt);
 PARAMETER(DB1.Contract_Cost_Hd);
 PARAMETER(DB1.Contract_Cost_Lv_CWT);
 PARAMETER(DB1.Actual_Contract_Hd);
 PARAMETER(DB1.Actual_Contract_Lv_CWT);
 PARAMETER(DB1.PD_Producer_Code);
 PARAMETER(DB1.PL_Location_Code);
 PARAMETER(DB1.RS_User_Changed);
 PARAMETER(DB1.RS_Date_Changed);
 PARAMETER(DB1.RS_Time_Changed);
 PARAMETER(DB1.RS_Record_Status);
 PARAMETER(DB1.RS_Job);
 PARAMETER(DB1.RS_Program);
 PARAMETER(DB1.RS_User_Added);
 PARAMETER(DB1.RS_Date_Added);
 PARAMETER(DB1.RS_Time_Added);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Rtv Add Stamp         IF) TYPE(EXCINTFUN)                      AB1100935;
  PARAMETER(DB1.RS_Record_Status);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  PARAMETER(DB1.RS_User_Added);
  PARAMETER(DB1.RS_Date_Added);
  PARAMETER(DB1.RS_Time_Added);
  {
   //?Execute internal function

   // PAR.RS Record Status = CND.Active
   PAR.RS_Record_Status = 'A';

   // PAR.RS User Added = JOB.*USER
   PAR.RS_User_Added = JOB.*USER;

   // PAR.RS Date Added = JOB.*Job date
   PAR.RS_Date_Added = JOB.*Job_date;

   // PAR.RS Time Added = JOB.*Job time
   PAR.RS_Time_Added = JOB.*Job_time;

   // PAR.RS Program = JOB.*PROGRAM
   PAR.RS_Program = JOB.*PROGRAM;

   // PAR.RS Job = JOB.*JOB
   PAR.RS_Job = JOB.*JOB;

  }

 }

 ENDIF;

}


