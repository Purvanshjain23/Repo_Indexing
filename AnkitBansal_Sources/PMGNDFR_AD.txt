// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMGNDFR
// ?Date: 14.08.2025 Time: 03:45:10
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

// CTL.Record Status = CND.Active
CTL.Record_Status = 'A';

//?USER: Process subfile control (Pre-confirm)

CASE;

// IF CTL.*CMD key is *Create
IF CTL.*CMD_key = '06';

// CTL.PCG Code = CND.Blank
CTL.PCG_Code = *BLANK;

// CTL.PCG From Library = CND.*Blanks
CTL.PCG_From_Library = *BLANK;

// CTL.File Name = CND.Blanks
CTL.File_Name = *BLANK;

// Call program EDT WF PrePurge Cntrl  E1.
CALL PROGRAM(EDT WF PrePurge Cntrl  E1) ('PMGLE1R');
PARAMETER(CTL.PCG_Code);
PARAMETER(CTL.PCG_From_Library);
PARAMETER(CTL.File_Name);

// PGM.*Reload subfile = CND.*YES
PGM.*Reload_subfile = 'Y';

ENDIF;

//?USER: Process subfile record (Pre-confirm)

//?** 2 = Edit record
CASE;

// IF RCD.*SFLSEL is *Edit
IF RCD.*SFLSEL = '2'/'2';

// Call program EDT WF PrePurge Cntrl  E1.
CALL PROGRAM(EDT WF PrePurge Cntrl  E1) ('PMGLE1R');
PARAMETER(RCD.PCG_Code);
PARAMETER(RCD.PCG_From_Library);
PARAMETER(RCD.File_Name);

// PGM.*Reload subfile = CND.*YES
PGM.*Reload_subfile = 'Y';

// PGM.*Defer confirm = CND.Defer confirm
PGM.*Defer_confirm = 'Y';

ENDIF;

//?** 4 = Delete record
CASE;

// IF RCD.*SFLSEL is *Delete
IF RCD.*SFLSEL = '4'/'4';

EXECUTE FUNCTION(Delete WF PrePurge Contro) TYPE(DLTOBJ) FILE(PMFECPP)          AC1927753;
PARAMETER(RCD.PCG_Code);
PARAMETER(RCD.PCG_From_Library);
PARAMETER(RCD.File_Name);

// PGM.*Reload subfile = CND.*YES
PGM.*Reload_subfile = 'Y';

ENDIF;

