// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDC7XFR
// ?Date: 14.08.2025 Time: 03:34:15
// ?------------------------------------------------------------------------------------------------

//?Execute user function

// PAR.Day of the Week # USR = JOB.*Job date *DAY OF WEEK
PAR.Day_of_the_Week_#_USR = DATEDTLS(JOB.*Job_date 'DW' 1111111 'NONE' 'N' 1);

//?If Current Date is Monday Get Fri,Sat,Sun Otherwise get Previous day
CASE;

// IF PAR.Day of the Week # USR is Monday
IF PAR.Day_of_the_Week_#_USR = 1;

// PAR.*Date2 (beginning) = JOB.*Job date
PAR.*Date2_beginning = JOB.*Job_date;

// PAR.*Date1 (ending) = PAR.*Date2 (beginning) + CON.-3 *DAYS
PAR.*Date1_ending = DATEINCR(PAR.*Date2_beginning '-3' 'DY' 1111111 'NONE' 'N' 1);

//?If Current Date is Monday Get Fri,Sat,Sun Otherwise get Previous day
// IF *OTHERWISE
IF *OTHERWISE;

// PAR.*Date2 (beginning) = JOB.*Job date
PAR.*Date2_beginning = JOB.*Job_date;

// PAR.*Date1 (ending) = PAR.*Date2 (beginning) + CON.-1 *DAYS
PAR.*Date1_ending = DATEINCR(PAR.*Date2_beginning '-1' 'DY' 1111100 'NONE' 'N' 1);

ENDIF;

