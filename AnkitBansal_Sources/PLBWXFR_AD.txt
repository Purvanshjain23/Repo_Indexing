// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLBWXFR
// ?Date: 14.08.2025 Time: 02:53:40
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?H16853 ISE 11/05/2020-Recompiled due to change in Buy Order Number
EXECUTE FUNCTION(Rtv Val DelvDt/Tm BOL RT) TYPE(RTVOBJ) FILE(PLAFCPP)           AB1247552;
PARAMETER(PAR.CC_Company_Number);
PARAMETER(PAR.DSH_Kill_Date);
PARAMETER(PAR.DT_Delivery_Date);
PARAMETER(PAR.DT_Delivery_Time);
PARAMETER(LCL.DT_Delivery_Time_Seq);
PARAMETER(WRK.DT_Arrive_@_Plant_Date);
PARAMETER(WRK.DT_Arrive_@_Plant_Time);
PARAMETER(PAR.Return_Code_USR);
{
 //?USER: Processing if Data record not found

 // PAR.Return Code USR = CND.*Record does not exist
 PAR.Return_Code_USR = 'Y2U0005';

 // PAR.DT Delivery Time Seq = CON.*ZERO
 PAR.DT_Delivery_Time_Seq = 0;

 // PAR.DT Arrive @ Plant Date = CON.*ZERO
 PAR.DT_Arrive_@_Plant_Date = *ZERO;

 // PAR.DT Arrive @ Plant Time = CON.*ZERO
 PAR.DT_Arrive_@_Plant_Time = *ZERO;

 //?USER: Process Data record

 // PAR.Return Code USR = CND.*Record already exists
 PAR.Return_Code_USR = 'Y2U0003';

 // PAR.DT Delivery Time Seq = DB1.DT Delivery Time Seq
 PAR.DT_Delivery_Time_Seq = DB1.DT_Delivery_Time_Seq;

 // PAR.DT Arrive @ Plant Date = DB1.DT Arrive @ Plant Date
 PAR.DT_Arrive_@_Plant_Date = DB1.DT_Arrive_@_Plant_Date;

 // PAR.DT Arrive @ Plant Time = DB1.DT Arrive @ Plant Time
 PAR.DT_Arrive_@_Plant_Time = DB1.DT_Arrive_@_Plant_Time;

}


CASE;

// IF PAR.Return Code USR is *Record does not exist
IF PAR.Return_Code_USR = 'Y2U0005';

EXECUTE FUNCTION(Rtv Next Seq Num      RT) TYPE(RTVOBJ) FILE(PLAECPP)           AB1248408;
PARAMETER(PAR.CC_Company_Number);
PARAMETER(PAR.DSH_Kill_Date);
PARAMETER(PAR.DT_Delivery_Date);
PARAMETER(PAR.DT_Delivery_Time);
PARAMETER(PAR.DT_Delivery_Time_Seq);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 // PAR.DSD Delivery Time Seq = CON.1
 PAR.DSD_Delivery_Time_Seq = 1;

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

 // PAR.DSD Delivery Time Seq = DB1.DSD Delivery Time Seq + CON.1
 PAR.DSD_Delivery_Time_Seq = DB1.DSD_Delivery_Time_Seq + 1;

 QUIT;

}


// IF *OTHERWISE
IF *OTHERWISE;

// PAR.DT Delivery Time Seq = LCL.DT Delivery Time Seq + CON.1
PAR.DT_Delivery_Time_Seq = LCL.DT_Delivery_Time_Seq + 1;

ENDIF;

