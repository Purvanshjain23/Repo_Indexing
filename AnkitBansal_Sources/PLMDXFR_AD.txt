// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLMDXFR
// ?Date: 14.08.2025 Time: 02:54:40
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Rtv Payment Processing RT) TYPE(RTVOBJ) FILE(PKC4REP)          AB1147409;
PARAMETER(PAR.CC_Company_Number);
PARAMETER(WRK.Pmt_Current_Payment_Date);
PARAMETER(WRK.Pmt_Current_Payment_Step);
PARAMETER(WRK.PP_Commission_Paym_Error);
PARAMETER(WRK.PP_Payment_Error);
PARAMETER(WRK.PP_Unused_Nbr_1);
PARAMETER(WRK.PP_Repayment_Status);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


CASE;

// IF WRK.PP Payment Error is No Errors
IF WRK.PP_Payment_Error = 'N';

//?Step 6 Producer Posting
CASE;

// IF WRK.Pmt Current Payment Step is Less or Equal to Step 6
IF WRK.Pmt_Current_Payment_Step <= 00006;

//?Step 6  Payment posting and producer Post/Create Producer Vouchers
DO;

CASE;

// IF WRK.Pmt Current Payment Step is Greater then or Equal 5
IF WRK.Pmt_Current_Payment_Step >= 00005;

// Call program Prt Pay Chk Post Rep  PF.
CALL PROGRAM(Prt Pay Chk Post Rep  PF) ('PKT1PFR');
PARAMETER(PAR.CC_Company_Number);
PARAMETER(WRK.Pmt_Current_Payment_Date);
PARAMETER('P');
PARAMETER(PAR.Oms_System_Value_Alpha);
PARAMETER('U');
PARAMETER(WRK.@Payment_Error);

//?This report will print a report by producer, and create checks
ENDIF;

ENDDO;

ENDIF;

//?Step 7 Reports
// IF *OTHERWISE
IF *OTHERWISE;

ENDIF;

