// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBINPVR
// ?Date: 14.08.2025 Time: 03:48:09
// ?------------------------------------------------------------------------------------------------

//?USER: User defined action

//?F20=Post
CASE;

// IF DTL.*CMD key is *Post/Update Open Order
IF DTL.*CMD_key = '20';

// WRK.Print (Yes/No) USR = CND.Yes
WRK.Print_Yes_No_USR = 'Y';

// WRK.Status Flag 5  Y/N = CND.Yes
WRK.Status_Flag_5_Y_N = 'Y';

//?** 12/03/08 LJB Add Fax to Customer
// WRK.Status Flag 7  Y/N = CND.No
WRK.Status_Flag_7_Y_N = 'N';

//?** 03/14/13 slm Add Email of Acknowledgement
// WRK.Status Flag 8  Y/N = CND.No
WRK.Status_Flag_8_Y_N = 'N';

// WRK.Email to Warehouse Code = CON.*BLANK
WRK.Email_to_Warehouse_Code = *BLANK;

// Call program SEL Confirm Prompt     PV.
CALL PROGRAM(SEL Confirm Prompt     PV) ('PDS0PVR');
PARAMETER(WRK.Status_Y_or_N);
PARAMETER(DTL.Company_Number);
PARAMETER(DTL.Order_Number);
PARAMETER(DTL.Ship_To_Customer);
PARAMETER(DTL.Block_Order_Flag);
PARAMETER(DTL.OH_Load_Plan_Ready);
PARAMETER(WRK.Print_Yes_No_USR);
PARAMETER(WRK.Status_Flag_2_Y_N);
PARAMETER(WRK.Status_Flag_3_Y_N);
PARAMETER(WRK.Status_Flag_4_Y_N);
PARAMETER(WRK.Status_Flag_5_Y_N);
PARAMETER(WRK.Status_Flag_6_Y_N);
PARAMETER(WRK.Status_Flag_7_Y_N);
PARAMETER(WRK.Status_Flag_8_Y_N);
PARAMETER(WRK.Status_Flag_12_Y_N);
PARAMETER(WRK.Email_to_Warehouse_Code);
PARAMETER(WRK.Email_Selection_usr);
PARAMETER(WRK.Salesperson_Code);
PARAMETER(WRK.Salesperson_Name);

CASE;

// IF WRK.Status - Y or N is no
IF WRK.Status_Y_or_N = 'N';

// IF *OTHERWISE
IF *OTHERWISE;

//?Print Acknowledgement if flag is yes from the confirm prompt
CASE;

// IF WRK.Print (Yes/No) USR is Yes
IF WRK.Print_Yes_No_USR = 'Y';

// OR WRK.Status Flag 8  Y/N is Yes
OR WRK.Status_Flag_8_Y_N = 'Y';

// WRK.PRT Night Queue Run Sts = CND.no
WRK.PRT_Night_Queue_Run_Sts = 'N';

// Call program PMT Prt Opt w/PSz SHR  PV.
CALL PROGRAM(PMT Prt Opt w/PSz SHR  PV) ('PDV8PVR');
PARAMETER('Print Acknowledgement');
PARAMETER(WRK.PRT_Printer_Device);
PARAMETER(WRK.PRT_Hold_Output_Sts);
PARAMETER(WRK.PRT_Save_Output_Sts);
PARAMETER(WRK.PRT_Number_of_Copies);
PARAMETER(WRK.PRT_Night_Queue_Run_Sts);
PARAMETER(WRK.PRT_Night_Queue);
PARAMETER('OMS');
PARAMETER(*MISSING);
PARAMETER(WRK.Paper_Type_USR);

CASE;

// IF PGM.*Return code is *User QUIT requested
IF PGM.*Return_code = 'Y2U9999';

// PGM.*Return code = CND.*Normal
PGM.*Return_code = *BLANK;

// IF *OTHERWISE
IF *OTHERWISE;

// Call program PRT Acknowledgements UP.
SBMJOB;
CALL PROGRAM(PRT Acknowledgements UP) ('PDJWPCLP');
PARAMETER(DTL.Company_Number);
PARAMETER(DTL.Order_Number);
PARAMETER(DTL.Order_Number);
PARAMETER(*ZERO);
PARAMETER(*ZERO);
PARAMETER(*ZERO);
PARAMETER(*BLANK);
PARAMETER(WRK.Blank_for_4_USR);
PARAMETER(1);
PARAMETER('A');
PARAMETER(*BLANK);
PARAMETER(*BLANK);
PARAMETER(*BLANK);
PARAMETER(*BLANK);
PARAMETER(*BLANK);
PARAMETER(*BLANK);
PARAMETER(*BLANK);
PARAMETER(*BLANK);
PARAMETER(*BLANK);
PARAMETER(*BLANK);
PARAMETER('S');
PARAMETER(WRK.PRT_Printer_Device);
PARAMETER(WRK.PRT_Hold_Output_Sts);
PARAMETER(WRK.PRT_Save_Output_Sts);
PARAMETER(WRK.PRT_Number_of_Copies);
PARAMETER(*JOBD);
PARAMETER(*ZERO);
PARAMETER(WRK.Status_Flag_8_Y_N);
PARAMETER(WRK.Email_to_Warehouse_Code);
SBMJOBOVR JOB(ORDER_ACK);
SBMJOBEND;

ENDIF;

ENDIF;

//?Print Get Ready Report if flag is yes from the confirm prompt
CASE;

// IF WRK.Status Flag 5  Y/N is Yes
IF WRK.Status_Flag_5_Y_N = 'Y';

// WRK.PRT Night Queue Run Sts = CND.no
WRK.PRT_Night_Queue_Run_Sts = 'N';

// Call program PMT Prt Opt w/PSz SHR  PV.
CALL PROGRAM(PMT Prt Opt w/PSz SHR  PV) ('PDV8PVR');
PARAMETER('Print Get Ready Report');
PARAMETER(WRK.PRT_Printer_Device);
PARAMETER(WRK.PRT_Hold_Output_Sts);
PARAMETER(WRK.PRT_Save_Output_Sts);
PARAMETER(WRK.PRT_Number_of_Copies);
PARAMETER(WRK.PRT_Night_Queue_Run_Sts);
PARAMETER(WRK.PRT_Night_Queue);
PARAMETER('OMS');
PARAMETER(*MISSING);
PARAMETER(WRK.Paper_Type_USR);

CASE;

// IF PGM.*Return code is *User QUIT requested
IF PGM.*Return_code = 'Y2U9999';

// PGM.*Return code = CND.*Normal
PGM.*Return_code = *BLANK;

// IF *OTHERWISE
IF *OTHERWISE;

// Call program Zzz Get Ready Report   UP.
SBMJOB;
CALL PROGRAM(Zzz Get Ready Report   UP) ('PMH5UPC');
PARAMETER(DTL.Company_Number);
PARAMETER(DTL.Order_Number);
PARAMETER(DTL.Order_Number);
PARAMETER(*ZERO);
PARAMETER(*ZERO);
PARAMETER(WRK.PRT_Printer_Device);
PARAMETER(WRK.PRT_Hold_Output_Sts);
PARAMETER(WRK.PRT_Save_Output_Sts);
PARAMETER(WRK.PRT_Number_of_Copies);
PARAMETER(*JOBD);
PARAMETER(*BLANK);
SBMJOBOVR JOB(GETREADY);
SBMJOBOVR JOBD(*USRPRF);
SBMJOBEND;

ENDIF;

ENDIF;

//?Fax Acknwlg to buyer/rep/brkr/Cust if slctd at confirm pmt 12/03/08
CASE;

// IF WRK.Status Flag 4  Y/N is yes
IF WRK.Status_Flag_4_Y_N = 'Y';

// OR WRK.Status Flag 2  Y/N is Yes
OR WRK.Status_Flag_2_Y_N = 'Y';

// OR WRK.Status Flag 3  Y/N is Yes
OR WRK.Status_Flag_3_Y_N = 'Y';

// OR WRK.Status Flag 7  Y/N is Yes
OR WRK.Status_Flag_7_Y_N = 'Y';

//?RMC  06/23/04        LJB 12/03/2008
// Call program EXC Fax Acknwgmnt     XF.
CALL PROGRAM(EXC Fax Acknwgmnt     XF) ('PPFDXFR');
PARAMETER(DTL.Company_Number);
PARAMETER(DTL.Order_Number);
PARAMETER(DTL.Ship_To_Customer);
PARAMETER(WRK.HPB_Ship_to_Warehouse);
PARAMETER(WRK.Salesperson_Code);
PARAMETER(WRK.Status_Flag_2_Y_N);
PARAMETER(WRK.Status_Flag_3_Y_N);
PARAMETER(WRK.Status_Flag_4_Y_N);
PARAMETER(WRK.Status_Flag_7_Y_N);

ENDIF;

ENDIF;

ENDIF;

