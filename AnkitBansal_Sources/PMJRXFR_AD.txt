// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMJRXFR
// ?Date: 14.08.2025 Time: 03:43:19
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?*** Creation/Modification log ***
DO;

//?TPA071707 - One time conversion program to populate the Sales
//?Route Authortiy file based on the Sales Route file.
//?Logic: Only create records on Sales Route Authority when
//?       the Authorized Salesperson is not blank and is different
//?       to the Salesperson on the Sales Route file.
//?       The record status will be passed on.
ENDDO;

EXECUTE FUNCTION(RTV Conv to Sls Rt AuthRT) TYPE(RTVOBJ) FILE(PDJEREP)          AC1836494;
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Authorized Salesperson Sa is entered
 IF DB1.Authorized_Salesperson_Sa <> *BLANK;

 // AND DB1.Authorized Salesperson Sa NE DB1.Salesperson Code
 AND DB1.Authorized_Salesperson_Sa <> DB1.Salesperson_Code;

 //?Didn't use standard CRT since it defaults an 'Active' status.
 EXECUTE FUNCTION(CRT Status not default CR) TYPE(CRTOBJ) FILE(PMA7REP)          AC1836521;
 PARAMETER(DB1.Sales_Route_Code);
 PARAMETER(DB1.Authorized_Salesperson_Sa);
 PARAMETER('CL');
 PARAMETER(DB1.Record_Status);
 {
  //?USER: Processing before Data update

  //?*** Set CREATE fields. ***
  // DB1.Create Date = JOB.*Job date
  DB1.Create_Date = JOB.*Job_date;

  // DB1.Create Time = JOB.*Job time
  DB1.Create_Time = JOB.*Job_time;

  // DB1.Create User = JOB.*USER
  DB1.Create_User = JOB.*USER;

  // DB1.Create Program = JOB.*PROGRAM
  DB1.Create_Program = JOB.*PROGRAM;

 }

 EXECUTE FUNCTION(CRT Status not default CR) TYPE(CRTOBJ) FILE(PMA7REP)          AC1836521;
 PARAMETER(DB1.Sales_Route_Code);
 PARAMETER(DB1.Authorized_Salesperson_Sa);
 PARAMETER('PA');
 PARAMETER(DB1.Record_Status);
 {
  //?USER: Processing before Data update

  //?*** Set CREATE fields. ***
  // DB1.Create Date = JOB.*Job date
  DB1.Create_Date = JOB.*Job_date;

  // DB1.Create Time = JOB.*Job time
  DB1.Create_Time = JOB.*Job_time;

  // DB1.Create User = JOB.*USER
  DB1.Create_User = JOB.*USER;

  // DB1.Create Program = JOB.*PROGRAM
  DB1.Create_Program = JOB.*PROGRAM;

 }

 ENDIF;

}


