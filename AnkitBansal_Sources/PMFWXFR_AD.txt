// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMFWXFR
// ?Date: 14.08.2025 Time: 03:44:59
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?FP1054 call this after the sched is built for both plants
// PAR.Production Date USR = PAR.Production Date + CON.-1 *DAYS
PAR.Production_Date_USR = DATEINCR(PAR.Production_Date '-1' 'DY' 1111111 'NONE' 'N' 1);

EXECUTE FUNCTION(Del One Time Prod Adj RT) TYPE(RTVOBJ) FILE(PDI9CPP)           AC1337089;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Production_Date_USR);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(DLT Prod. Adjustment   DL) TYPE(DLTOBJ) FILE(PDI9CPP)          AC1261450;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Production_Date);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Warehouse_Code);
 PARAMETER(DB1.PS_Adjustment_Type);
 PARAMETER(DB1.PS_Adjustment_Number);
}


EXECUTE FUNCTION(Rtv Kill/Prod Day Sts RT) TYPE(RTVOBJ) FILE(CAAFREP)           AC1461011;
PARAMETER(PAR.Company_Number);
PARAMETER(JOB.*Job_date);
PARAMETER(PAR.Kill_Day_Status);
PARAMETER(PAR.Production_Day_Status);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


//?Roll Current Kill Date to Next Kill Date
CASE;

// IF PAR.Kill Day Status is yes
IF PAR.Kill_Day_Status = 'Y';

// Call program UPS Upd Kill Dat-new  XF.
CALL PROGRAM(UPS Upd Kill Dat-new  XF) ('PMFXXFR');
PARAMETER(PAR.Company_Number);

ENDIF;

