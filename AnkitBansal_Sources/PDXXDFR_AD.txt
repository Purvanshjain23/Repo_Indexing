// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDXXDFR
// ?Date: 14.08.2025 Time: 03:36:28
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize subfile record from DBF record

CASE;

// IF RCD.Header Status is Cancelled
IF RCD.Header_Status = 'X';

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

// IF *OTHERWISE
IF *OTHERWISE;

// PGM.*Re-read Subfile Record = CND.*YES
PGM.*Re_read_Subfile_Record = 1;

ENDIF;

//?USER: Process subfile record (Pre-confirm)

// PGM.*Re-read Subfile Record = CND.*YES
PGM.*Re_read_Subfile_Record = 1;

//?USER: Process subfile record (Post-confirm)

// Call program UPD Cancel Order       XF.
CALL PROGRAM(UPD Cancel Order       XF) ('OPV9XFR');
PARAMETER(RCD.Company_Number);
PARAMETER(RCD.Order_Number);
PARAMETER(RCD.AR_Customer_Number);
PARAMETER(RCD.Ship_To_Customer);
PARAMETER(RCD.Billing_Activity_Type);

//?USER: Final processing (Post-confirm)

// PAR.Cancelled Flag USR = CND.Yes
PAR.Cancelled_Flag_USR = 'Y';

RETURN;

