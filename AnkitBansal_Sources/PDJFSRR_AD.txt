// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDJFSRR
// ?Date: 14.08.2025 Time: 03:32:02
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?Modification Log
DO;

//?PIO 03/06/24 CHANGED FILENAME FROM OPBFCPLI TO OPBFCPOB
ENDDO;

//?USER: Load subfile record from DBF record

CASE;

// IF DB1.Load ID is Blank
IF DB1.Load_ID = *ZERO;

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

// IF *OTHERWISE
IF *OTHERWISE;

//?Check for Load Detail records
EXECUTE FUNCTION(RTV All Orders on Load RT) TYPE(RTVOBJ) FILE(OMFLCPP)          AC1292741;
PARAMETER(DB1.Load_ID);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Normal
 PGM.*Return_code = *BLANK;

 QUIT;

}


CASE;

// IF PGM.*Return code is *Normal
IF PGM.*Return_code = *BLANK;

EXECUTE FUNCTION(RTV Check Pick Event   RT) TYPE(RTVOBJ) FILE(OPEYCPP)          AC1198676;
PARAMETER(DB1.Company_Number);
PARAMETER(DB1.Order_Number);
PARAMETER('04');
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // PGM.*Return code = CND.*Normal
 PGM.*Return_code = *BLANK;

 QUIT;

}


CASE;

// IF PGM.*Return code is *Record does not exist
IF PGM.*Return_code = 'Y2U0005';

EXECUTE FUNCTION(RTV Load Schd. Seq. #  RT) TYPE(RTVOBJ) FILE(OMFJCPP)          AC1314022;
PARAMETER(DB1.Load_ID);
PARAMETER(PAR.Load_Status);
PARAMETER(WRK.Carrier_Code);
PARAMETER(PAR.Schedule_Sequence_Number);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

 // PGM.*Return code = CND.*Normal
 PGM.*Return_code = *BLANK;

}


CASE;

// IF PAR.Load Status is Shipped or Invoiced
IF PAR.Load_Status = 'I'/'S';

// OR PAR.Schedule Sequence Number is Zero
OR PAR.Schedule_Sequence_Number = *ZERO;

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

// IF *OTHERWISE
IF *OTHERWISE;

// PGM.*Record selected = CND.*YES
PGM.*Record_selected = 'Y';

ENDIF;

// IF *OTHERWISE
IF *OTHERWISE;

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

// IF *OTHERWISE
IF *OTHERWISE;

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

ENDIF;

