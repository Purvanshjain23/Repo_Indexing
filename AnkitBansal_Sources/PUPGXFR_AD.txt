// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PUPGXFR
// ?Date: 14.08.2025 Time: 03:51:03
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Crt PUBTCPP By SST     RT) TYPE(RTVOBJ) FILE(PBB6REP)          AC2181542;
PARAMETER(PAR.Sales_Sold_To_Code);
PARAMETER(PAR.Ship_To_Customer);
PARAMETER(PAR.Sales_Channel_Code_Before);
PARAMETER(PAR.Sales_Channel_Code_After);
PARAMETER(PAR.SC_Market_Code_Before);
PARAMETER(PAR.SC_Market_Code_After);
PARAMETER(PAR.Sales_Sold_To_Slsprsn_Bef);
PARAMETER(PAR.Sales_Sold_To_Slsprsn_Aft);
{
 //?USER: Process Data record

 //?Bypass Same Ship To Cust Since Log Already Created from PBT6E1R.
 CASE;

 // IF PAR.Ship To Customer NE DB1.Ship To Customer
 IF PAR.Ship_To_Customer <> DB1.Ship_To_Customer;

 EXECUTE FUNCTION(RTV Ship To Flag       RT) TYPE(RTVOBJ) FILE(CABBREP)          AC1464722;
 PARAMETER(DB1.Ship_To_Customer);
 PARAMETER(LCL.Ship_To_Customer_Flag);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  // PGM.*Return code = CND.*Record does not exist
  PGM.*Return_code = 'Y2U0005';

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 CASE;

 // IF LCL.Ship To Customer Flag is Allow Use as Ship To Cust
 IF LCL.Ship_To_Customer_Flag = 'Y';

 EXECUTE FUNCTION(Crt Sales Cust Sold To CR) TYPE(CRTOBJ) FILE(PUBTCPP)          AC2180649;
 PARAMETER(DB1.Ship_To_Customer);
 PARAMETER(PAR.Sales_Sold_To_Code);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(PAR.Sales_Channel_Code_Before);
 PARAMETER(PAR.Sales_Channel_Code_After);
 PARAMETER(PAR.SC_Market_Code_Before);
 PARAMETER(PAR.SC_Market_Code_After);
 PARAMETER(PAR.Sales_Sold_To_Slsprsn_Bef);
 PARAMETER(PAR.Sales_Sold_To_Slsprsn_Aft);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 {
  //?USER: Processing before Data update

  // Execute function Get System Date/Time  US.
  EXECUTE FUNCTION(Get System Date/Time  US) TYPE(EXCUSRSRC) ('PUPFUFR');
  PARAMETER(LCL.System_Date_Nbr_USR);
  PARAMETER(LCL.System_Time_USR);
  {
   * Get System Date & Time
   C                     MOVE *DATE     #OC0NZ           CCYYMMDD
   C                     TIME           #OENTM           HHMMSS
  }

  // LCL.System Date D8# USR = LCL.System Date Nbr USR
  LCL.System_Date_D8#_USR = LCL.System_Date_Nbr_USR;

  // DB1.SCSTL Created Date = LCL.System Date D8# USR
  DB1.SCSTL_Created_Date = LCL.System_Date_D8#_USR;

  // DB1.SCSTL Created Time = LCL.System Time USR
  DB1.SCSTL_Created_Time = LCL.System_Time_USR;

  // DB1.SCSTL Created User = JOB.*USER
  DB1.SCSTL_Created_User = JOB.*USER;

  // DB1.SCSTL Created Program = JOB.*PROGRAM
  DB1.SCSTL_Created_Program = JOB.*PROGRAM;

 }

 ENDIF;

 ENDIF;

}


