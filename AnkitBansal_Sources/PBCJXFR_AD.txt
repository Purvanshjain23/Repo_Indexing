// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBCJXFR
// ?Date: 14.08.2025 Time: 03:47:27
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Put the Load Plan Start dt/time in the deadl departure date time:
//? this will be in the file in QTEMP for the report run only.
EXECUTE FUNCTION(RTV Chg DDt to Lpt    RT) TYPE(RTVOBJ) FILE(PDMHCPP)           AC2038263;
PARAMETER(PAR.LSP_Accounting_Co);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Load ID is NE Blank
 IF DB1.Load_ID <> *ZERO;

 //?06/13/22 DN W100270-Commented Out. Get Load Plan Start Date/Time from LH.
 EXECUTE FUNCTION(Rtv Ld Plan Start Dt/TmRT) TYPE(RTVOBJ) FILE(OMFJCPP)          AC2206128;
 PARAMETER(DB1.Load_ID);
 PARAMETER(LCL.LPT_Load_Plan_Date);
 PARAMETER(LCL.LPT_Load_Plan_Start_Tm);
 {
  //?USER: Initialize routine

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 //?06/13/22 DN W100270-Commented Out. Use 'LPT Load Plan Start Tm'.
 //?Force 000000 to print last on the load sched summ rpt
 CASE;

 // IF LCL.LPT Load Plan Date is not entered
 IF LCL.LPT_Load_Plan_Date = *ZERO;

 // LCL.LPT Load Plan Date = CND.High Values
 LCL.LPT_Load_Plan_Date = 9999999;

 ENDIF;

 //?06/13/22 DN W100270-Use 'LPT Load Plan Start Tm'.
 EXECUTE FUNCTION(Chg Load Schdlng Pstn CH) TYPE(CHGOBJ) FILE(PDMHCPP)           AC1514134;
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.LSP_Accounting_Co);
 PARAMETER(DB1.LSP_Prodution_Warehouse);
 PARAMETER(DB1.LSP_Order_Company);
 PARAMETER(DB1.LSP_Order_Warehouse);
 PARAMETER(DB1.Sequence);
 PARAMETER(DB1.Record_Type);
 PARAMETER(DB1.Thru_Scheduled_Ship_Date);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Load_ID);
 PARAMETER(DB1.Scheduled_Ship_Date);
 PARAMETER(DB1.Event_Code);
 PARAMETER(DB1.Actual_Inventory);
 PARAMETER(DB1.Picked_Inventory);
 PARAMETER(DB1.Available_Inventory);
 PARAMETER(DB1.Actual_Production);
 PARAMETER(DB1.Scheduled_Production);
 PARAMETER(DB1.Available_Production);
 PARAMETER(DB1.Scheduled_Quantity);
 PARAMETER(DB1.Scheduling_Position);
 PARAMETER(LCL.LPT_Load_Plan_Date);
 PARAMETER(LCL.LPT_Load_Plan_Start_Tm);
 PARAMETER(DB1.Order_Grade);
 PARAMETER(DB1.Load_Grade);
 PARAMETER(DB1.Multiple_Warehouses);
 PARAMETER(DB1.SSI_Download_Flag);
 PARAMETER(DB1.unused_status_2);
 PARAMETER(DB1.Schedule_Sequence_Number);
 PARAMETER(DB1.Stop_Drop);
 PARAMETER(DB1.LSP_Order_Aged_Code);
 PARAMETER(DB1.LSP_Production_Date);
 PARAMETER(DB1.Process_Sequence);
 PARAMETER(DB1.Item_Age_Days);
 PARAMETER(DB1.Production_Ovr_AgeDte_Fr);
 PARAMETER(DB1.Production_Ovr_AgeDte_To);
 PARAMETER(DB1.Production_AgeDte_Fr);
 PARAMETER(DB1.Production_AgeDte_To);
 PARAMETER(DB1.EDI_Status_1);
 PARAMETER(DB1.EDI_Status_2);
 PARAMETER(DB1.EDI_Status_3);
 PARAMETER(DB1.Record_Status);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 ENDIF;

}


