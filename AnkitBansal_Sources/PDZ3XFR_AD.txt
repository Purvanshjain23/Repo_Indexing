// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDZ3XFR
// ?Date: 14.08.2025 Time: 03:33:46
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(RTV by A/R Customer    RT) TYPE(RTVOBJ) FILE(PDJ4CPP)          AC1471996;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Job_Name_CDE);
PARAMETER(PAR.Cover_Sheet_Name);
PARAMETER(PAR.Job_Number_Cde);
{
 //?USER: Initialize routine

 //?***** Change Log
 DO;

 //?*****
 //?** R14851 RMC 4/16/19  NEW PROCESS TO SEND ONE EMAIL/INVOICE - NEW
 //?   CDE Destination Type of "O", new printfile for Inv PUMFPFR, new email
 //?   process PUMGXFR
 //?*****
 //?** 04/01/2010 LJB P000198 (sub task: E000673)
 //?** Change to fax and/or email to one or multiple recipients.
 //?** Now stored in Cust Distribution Entry file.
 //?** Delete spooled files in this function AFTER all faxes
 //?** and emails have been sent.
 //?*****
 //?** FP1110 RMC 7/21/08  HPB Only - fax bol with invoice, use
 //?** spool file selection 2 parm to pass to cl
 //?*****
 //?** 04/19/2006 LJB
 //?** Don't fax if the amount and weight are zeros.
 //?** There is no spooled file so the program errs out.
 //?*****
 //?** 05/16/2006 LJB
 //?** The fax work fields have been changed from 12 to 25 characters
 //?*****
 //?** 07/02/2007 SLM DLY029 invoice (std and custom)invoice faxing
 //?*****
 ENDDO;

 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 //?Job Name same
 CASE;

 // IF DB1.Job Name CDE EQ PAR.Job Name CDE
 IF DB1.Job_Name_CDE = PAR.Job_Name_CDE;

 // LCL.Spool File Selection 2 = CON.*BLANK
 LCL.Spool_File_Selection_2 = *BLANK;

 //?ship to customer on this file is really A/R Customer.
 // PAR.A/R Customer Number = DB1.Ship To Customer
 PAR.AR_Customer_Number = DB1.Ship_To_Customer;

 // Call program Rtv One Invoice /PO   XP.
 CALL PROGRAM(Rtv One Invoice /PO   XP) ('PMCOXFR');
 PARAMETER(DB1.Ship_to_Customer_Ship_To);
 PARAMETER(LCL.One_Invoice_Per_PO);

 EXECUTE FUNCTION(RTV Info for Invc Prt  RT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC1324121;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(LCL.Order_Type_Sales);
 PARAMETER(LCL.AR_Customer_Number);
 PARAMETER(LCL.Ship_To_Customer);
 PARAMETER(LCL.Ship_To_Name);
 PARAMETER(LCL.Ship_To_Address_Line_1);
 PARAMETER(LCL.Ship_To_Address_Line_2);
 PARAMETER(LCL.Ship_To_Address_Line_3);
 PARAMETER(LCL.Ship_To_City);
 PARAMETER(LCL.Ship_To_State_Code);
 PARAMETER(LCL.Ship_To_Zip_Postal_Code);
 PARAMETER(LCL.Bill_to_Customer);
 PARAMETER(LCL.Bill_to_Name);
 PARAMETER(LCL.Bill_to_Address_Line_1);
 PARAMETER(LCL.Bill_to_Address_Line_2);
 PARAMETER(LCL.Bill_to_Address_Line_3);
 PARAMETER(LCL.Bill_to_City);
 PARAMETER(LCL.Bill_to_State_Code);
 PARAMETER(LCL.Bill_to_Zip_Postal_Code);
 PARAMETER(LCL.Customer_Purchase_Order_#);
 PARAMETER(LCL.Order_Date);
 PARAMETER(LCL.Actual_Shipped_Date);
 PARAMETER(LCL.Terms_Code);
 PARAMETER(LCL.Carrier_Code);
 PARAMETER(LCL.Order_Value_Total);
 PARAMETER(LCL.Order_Weight_Total);
 PARAMETER(LCL.Load_ID);
 PARAMETER(LCL.Sales_Route_Code);
 PARAMETER(LCL.Invoice_Number);
 PARAMETER(LCL.Invoice_Date);
 PARAMETER(LCL.Billing_Activity_Type);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 //?4/15/19 RMC R14851 If customer has 1 One Email/Inv type - dont del workf
 // LCL.Status Flag 1  Y/N = CND.No
 LCL.Status_Flag_1_Y_N = 'N';

 EXECUTE FUNCTION(RTV One Email/inv     RT) TYPE(RTVOBJ) FILE(PNF7REP)           AC2170471;
 PARAMETER(DB1.Ship_To_Customer);
 PARAMETER('AR-INVOICE');
 PARAMETER(1);
 PARAMETER('O');
 PARAMETER(LCL.Status_Flag_1_Y_N);
 {
  //?USER: Initialize routine

  // PAR.Status Flag 1  Y/N = CND.No
  PAR.Status_Flag_1_Y_N = 'N';

  //?USER: Process Data record

  //?Return 1st active record with an email address- set matching par
  CASE;

  // IF DB1.CDE Destination Type EQ PAR.CDE Destination Type
  IF DB1.CDE_Destination_Type = PAR.CDE_Destination_Type;

  CASE;

  // IF DB1.Record Status is Active
  IF DB1.Record_Status = 'A';

  // PAR.Status Flag 1  Y/N = CND.Yes
  PAR.Status_Flag_1_Y_N = 'Y';

  QUIT;

  ENDIF;

  ENDIF;

 }

 //?print invoice
 CASE;

 // IF LCL.One Invoice Per PO is Yes
 IF LCL.One_Invoice_Per_PO = 'Y';

 // AND LCL.Billing Activity Type is Invoice or Debit Memo
 AND LCL.Billing_Activity_Type = '3'/'1';

 // AND DB1.Order Value Total is not equal to zeros
 AND DB1.Order_Value_Total <> *ZERO;

 // AND DB1.Order Weight Total is Not equal zero
 AND DB1.Order_Weight_Total <> *ZERO;

 //?SLM 122206 Add a record to the WF Invoice/Combine file
 //?           only if onepo is Y
 //?           and billing type is Y
 //?           delete the WF Invoice record no longer needed
 EXECUTE FUNCTION(Crt WF Invoice/Combine CR) TYPE(CRTOBJ) FILE(PMAFCPP)          AC1802039;
 PARAMETER(PAR.Job_Name_CDE);
 PARAMETER(PAR.Job_Number_Cde);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Bill_to_Name);
 PARAMETER(DB1.Order_Value_Total);
 PARAMETER(DB1.Order_Weight_Total);
 PARAMETER(DB1.Ship_To_Name);
 PARAMETER('Y');
 PARAMETER('Y');
 PARAMETER(LCL.Customer_Purchase_Order_#);
 PARAMETER('N');
 PARAMETER(LCL.Billing_Activity_Type);
 PARAMETER(LCL.Actual_Shipped_Date);
 PARAMETER(DB1.Ship_to_Customer_Ship_To);
 PARAMETER(LCL.Bill_to_Customer);
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Invoice_Number);
 PARAMETER(DB1.Invoice_Suffix);
 PARAMETER('A');
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Crt Date/Time      IF) TYPE(EXCINTFUN)                     AC1523477;
  PARAMETER(DB1.Record_Status);
  PARAMETER(DB1.Create_Date);
  PARAMETER(DB1.Create_Time);
  PARAMETER(DB1.Create_User);
  PARAMETER(DB1.Create_Program);
  PARAMETER(DB1.Change_Date);
  PARAMETER(DB1.Change_Time);
  PARAMETER(DB1.Change_User);
  PARAMETER(DB1.Change_Program);
  {
   //?Execute internal function

   //?*** Set RECORD STATUS field. ***
   // PAR.Record Status = CND.Active
   PAR.Record_Status = 'A';

   //?*** Set CREATE fields. ***
   // PAR.Create Date = JOB.*Job date
   PAR.Create_Date = JOB.*Job_date;

   // PAR.Create Time = JOB.*Job time
   PAR.Create_Time = JOB.*Job_time;

   // PAR.Create User = JOB.*USER
   PAR.Create_User = JOB.*USER;

   // PAR.Create Program = JOB.*PROGRAM
   PAR.Create_Program = JOB.*PROGRAM;

   //?*** Set CHANGE fields. ***
   // PAR.Change Date = CON.*ZERO
   PAR.Change_Date = *ZERO;

   // PAR.Change Time = CON.*ZERO
   PAR.Change_Time = *ZERO;

   // PAR.Change User = CON.*BLANK
   PAR.Change_User = *BLANK;

   // PAR.Change Program = CON.*BLANK
   PAR.Change_Program = *BLANK;

  }

 }

 EXECUTE FUNCTION(DLT PD Invoice List Wk DL) TYPE(DLTOBJ) FILE(PDJ4CPP)          AC1339741;
 PARAMETER(DB1.Job_Name_CDE);
 PARAMETER(DB1.Order_Number);
 //?print invoice
 // IF *OTHERWISE
 IF *OTHERWISE;

 // Call program RTV CDD for Overlays   XF.
 CALL PROGRAM(RTV CDD for Overlays   XF) ('PMG9XFR');
 PARAMETER(PAR.Company_Number);
 PARAMETER('IN');
 PARAMETER('INCFX1');
 PARAMETER(NLL.CDD_Name_of_Overlay);
 PARAMETER(LCL.CDD_Program_Name);
 PARAMETER(LCL.CDD_Printer_File_Name);
 PARAMETER(NLL.CDD_Additional_Object);
 PARAMETER(NLL.CDD_Sender_Phone);
 PARAMETER(NLL.CDD_Sender_Fax);
 PARAMETER(NLL.Output_Queue);
 PARAMETER(NLL.Hold_File);
 PARAMETER(NLL.Save_File);
 PARAMETER(NLL.Source_Drawer);
 PARAMETER(NLL.Printer_Device_Type);
 PARAMETER(NLL.Page_Length_2);
 PARAMETER(NLL.Page_Width_2);
 PARAMETER(NLL.Page_LPI);
 PARAMETER(NLL.Page_CPI);
 PARAMETER(NLL.Page_Overflow);
 PARAMETER(NLL.Page_Rotation);
 PARAMETER(NLL.CDD_Comment_1);
 PARAMETER(NLL.CDD_Comment_2);
 PARAMETER(NLL.CDD_Comment_3);
 PARAMETER(NLL.CDD_Comment_4);
 PARAMETER(NLL.CDD_Comment_5);
 PARAMETER(NLL.Record_Status);

 CASE;

 // IF LCL.CDD Program Name is Not entered
 IF LCL.CDD_Program_Name = *BLANK;

 // Call program PRT Inv/Fast Fax 6LPI  PF.
 CALL PROGRAM(PRT Inv/Fast Fax 6LPI  PF) ('PDVGPFR');
 PARAMETER(PAR.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(PAR.AR_Customer_Number);
 PARAMETER(WRK.Printed_Status);
 PARAMETER(LCL.Status_Flag_1_Y_N);
 PARAMETER(PAR.Job_Name_CDE);

 // LCL.Spool File Selection = CON.PDVGPFR$
 LCL.Spool_File_Selection = 'PDVGPFR$';

 // IF *OTHERWISE
 IF *OTHERWISE;

 EXECUTE FUNCTION(Rtv Plant Co/Org      RT) TYPE(RTVOBJ) FILE(PDJYREP)           AC1826265;
 PARAMETER(DB1.Company_Number);
 PARAMETER(NLL.Plant_Company_Sts);
 PARAMETER(LCL.Company_Organization);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 CASE;

 // IF LCL.Company Organization is Daily's
 IF LCL.Company_Organization = 'D';

 //?062707 slm    /custom faxing pgm
 // Call program Zzz Inv/Fast Fax 8LPIDLPF.
 CALL PROGRAM(Zzz Inv/Fast Fax 8LPIDLPF) ('PMJHPFR');
 PARAMETER(PAR.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(PAR.AR_Customer_Number);
 PARAMETER(WRK.Printed_Status);
 PARAMETER(PAR.Job_Name_CDE);

 // LCL.Spool File Selection = LCL.CDD Printer File Name
 LCL.Spool_File_Selection = LCL.CDD_Printer_File_Name;

 // IF LCL.Company Organization is High Plains Biodiesel
 IF LCL.Company_Organization = 'H';

 //?Print BOLs for fax for Cust if Ord from a meter reading whse
 //? meaning that it has RIN nbr that was just assigned in the invoice process
 // Call program PRT BillofLd-mlt/Fx/InvXF.
 CALL PROGRAM(PRT BillofLd-mlt/Fx/InvXF) ('PMW1XFR');
 PARAMETER(DB1.Job_Name_CDE);
 PARAMETER(PAR.AR_Customer_Number);
 PARAMETER(DB1.Company_Number);
 PARAMETER(LCL.Spool_File_Selection_2);

 //?Print Invoice to fax
 //?08/27/19 DN S15356-Added Parm 'Status Flag 1  Y/N' for One Email/Invoice.
 //?- We will delete the WF Invoice List Work record in PUNRPFR.
 //?12/18/19 DN S15948-Commented Out & Moved Below.
 // Call program PRT Inv/Fast Fax 8LPIHPPF.
 CALL PROGRAM(PRT Inv/Fast Fax 8LPIHPPF) ('PMROPFR');
 PARAMETER(PAR.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(PAR.AR_Customer_Number);
 PARAMETER(WRK.Printed_Status);
 PARAMETER(DB1.Job_Name_CDE);
 PARAMETER(LCL.Status_Flag_1_Y_N);

 // LCL.Spool File Selection = LCL.CDD Printer File Name
 LCL.Spool_File_Selection = LCL.CDD_Printer_File_Name;

 ENDIF;

 ENDIF;

 //?** Fax/email unless the amount and weight are zeros.   04/19/06 LJB
 CASE;

 // IF DB1.Order Value Total is equal to zero
 IF DB1.Order_Value_Total = *ZERO;

 // AND DB1.Order Weight Total is Equal to zero
 AND DB1.Order_Weight_Total = *ZERO;

 //?** Fax/email unless the amount and weight are zeros.   04/19/06 LJB
 // IF *OTHERWISE
 IF *OTHERWISE;

 // Call program PRC Fax One Customer   XF.
 CALL PROGRAM(PRC Fax One Customer   XF) ('PDVPXFR');
 PARAMETER(DB1.Company_Number);
 PARAMETER(PAR.AR_Customer_Number);
 PARAMETER(LCL.Spool_File_Selection);
 PARAMETER(PAR.Cover_Sheet_Name);
 PARAMETER(PAR.Fax_Recipient);
 PARAMETER(PAR.Fax_Area_Code);
 PARAMETER(PAR.Fax_Phone_Number);
 PARAMETER(LCL.Spool_File_Selection_2);
 PARAMETER(PAR.Use_Credit_Contact_Info);

 ENDIF;

 ENDIF;

 //?4/15/19 RMC R14851 If customer has One Email/Invoice call other routine
 //?Do new inv print/email -  1 email per invoice -NEW PRINTFILE PUMFPFR
 CASE;

 // IF LCL.Status Flag 1  Y/N is Yes
 IF LCL.Status_Flag_1_Y_N = 'Y';

 //?print invoice - NEW ONE EMAIL/INVOICE
 CASE;

 // IF LCL.One Invoice Per PO is Yes
 IF LCL.One_Invoice_Per_PO = 'Y';

 // AND LCL.Billing Activity Type is Invoice or Debit Memo
 AND LCL.Billing_Activity_Type = '3'/'1';

 // AND DB1.Order Value Total is not equal to zeros
 AND DB1.Order_Value_Total <> *ZERO;

 // AND DB1.Order Weight Total is Not equal zero
 AND DB1.Order_Weight_Total <> *ZERO;

 //?SLM 122206 Add a record to the WF Invoice/Combine file
 //?           only if onepo is Y
 //?           and billing type is Y
 //?           delete the WF Invoice record no longer needed
 //?print invoice - NEW ONE EMAIL/INVOICE
 // IF *OTHERWISE
 IF *OTHERWISE;

 // Call program RTV CDD for Overlays   XF.
 CALL PROGRAM(RTV CDD for Overlays   XF) ('PMG9XFR');
 PARAMETER(PAR.Company_Number);
 PARAMETER('IN');
 PARAMETER('INCFX1');
 PARAMETER(NLL.CDD_Name_of_Overlay);
 PARAMETER(LCL.CDD_Program_Name);
 PARAMETER(LCL.CDD_Printer_File_Name);
 PARAMETER(NLL.CDD_Additional_Object);
 PARAMETER(NLL.CDD_Sender_Phone);
 PARAMETER(NLL.CDD_Sender_Fax);
 PARAMETER(NLL.Output_Queue);
 PARAMETER(NLL.Hold_File);
 PARAMETER(NLL.Save_File);
 PARAMETER(NLL.Source_Drawer);
 PARAMETER(NLL.Printer_Device_Type);
 PARAMETER(NLL.Page_Length_2);
 PARAMETER(NLL.Page_Width_2);
 PARAMETER(NLL.Page_LPI);
 PARAMETER(NLL.Page_CPI);
 PARAMETER(NLL.Page_Overflow);
 PARAMETER(NLL.Page_Rotation);
 PARAMETER(NLL.CDD_Comment_1);
 PARAMETER(NLL.CDD_Comment_2);
 PARAMETER(NLL.CDD_Comment_3);
 PARAMETER(NLL.CDD_Comment_4);
 PARAMETER(NLL.CDD_Comment_5);
 PARAMETER(NLL.Record_Status);

 CASE;

 // IF LCL.CDD Program Name is Not entered
 IF LCL.CDD_Program_Name = *BLANK;

 //?wf invoice list gets deleted in this prtf
 // Call program PRT Inv/Email6LPI-1 em PF.
 CALL PROGRAM(PRT Inv/Email6LPI-1 em PF) ('PUMFPFR');
 PARAMETER(PAR.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(PAR.AR_Customer_Number);
 PARAMETER(WRK.Printed_Status);
 PARAMETER(PAR.Job_Name_CDE);

 // LCL.Spool File Selection = CON.PUMFPFR$
 LCL.Spool_File_Selection = 'PUMFPFR$';

 // IF *OTHERWISE
 IF *OTHERWISE;

 EXECUTE FUNCTION(Rtv Plant Co/Org      RT) TYPE(RTVOBJ) FILE(PDJYREP)           AC1826265;
 PARAMETER(DB1.Company_Number);
 PARAMETER(NLL.Plant_Company_Sts);
 PARAMETER(LCL.Company_Organization);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 //?08/26/19 DN S15356-HPB Now Have Access to use ONE EMAIL/INVOICE.
 CASE;

 // IF LCL.Company Organization is High Plains Biodiesel
 IF LCL.Company_Organization = 'H';

 //?HPB is now Seaboard Energy as of 6/11/2019.
 //?Print BOLs for fax for Cust if Ord from a meter reading whse
 //? meaning that it has RIN nbr that was just assigned in the invoice process
 // Call program PRT BillLd-mlt/Fx/InvSEXF.
 CALL PROGRAM(PRT BillLd-mlt/Fx/InvSEXF) ('PUNSXFR');
 PARAMETER(DB1.Job_Name_CDE);
 PARAMETER(PAR.AR_Customer_Number);
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(LCL.Spool_File_Selection_2);

 //?Print Invoice to fax
 // Call program PRT Inv/Fast Fax 8LPISEPF.
 CALL PROGRAM(PRT Inv/Fast Fax 8LPISEPF) ('PUNRPFR');
 PARAMETER(PAR.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(PAR.AR_Customer_Number);
 PARAMETER(WRK.Printed_Status);
 PARAMETER(PAR.Job_Name_CDE);

 // LCL.Spool File Selection = CON.PUNRPFR$
 LCL.Spool_File_Selection = 'PUNRPFR$';

 ENDIF;

 ENDIF;

 //?** Fax/email unless the amount and weight are zeros.   04/19/06 LJB
 CASE;

 // IF DB1.Order Value Total is equal to zero
 IF DB1.Order_Value_Total = *ZERO;

 // AND DB1.Order Weight Total is Equal to zero
 AND DB1.Order_Weight_Total = *ZERO;

 //?** Fax/email unless the amount and weight are zeros.   04/19/06 LJB
 // IF *OTHERWISE
 IF *OTHERWISE;

 // Call program PRC Eml One inv /eml  XF.
 CALL PROGRAM(PRC Eml One inv /eml  XF) ('PUMGXFR');
 PARAMETER(DB1.Company_Number);
 PARAMETER(PAR.AR_Customer_Number);
 PARAMETER(LCL.Spool_File_Selection);
 PARAMETER(PAR.Cover_Sheet_Name);
 PARAMETER(PAR.Fax_Recipient);
 PARAMETER(PAR.Fax_Area_Code);
 PARAMETER(PAR.Fax_Phone_Number);
 PARAMETER(LCL.Spool_File_Selection_2);
 PARAMETER(PAR.Use_Credit_Contact_Info);

 ENDIF;

 ENDIF;

 ENDIF;

 ENDIF;

}


EXECUTE FUNCTION(RTV InvRep Fax         RT) TYPE(RTVOBJ) FILE(PMAFCPP)          AC1805094;
PARAMETER(PAR.Job_Name_CDE);
PARAMETER(PAR.Job_Number_Cde);
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Cover_Sheet_Name);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // LCL.Break = CND.No
 LCL.Break = 'N';

 //?This process is already restricting by Job and company
 CASE;

 // IF DB1.WF Inv/Comb Billing Type is Invoice or Debit Memo
 IF DB1.WF_Inv_Comb_Billing_Type = '3'/'1';

 // AND DB1.One Invoice Per PO is Yes
 AND DB1.One_Invoice_Per_PO = 'Y';

 //?BRK: Actual Shipped Date/Ship To Customer/Customer PO
 CASE;

 // IF LCL.Actual Shipped Date NE DB1.Actual Shipped Date
 IF LCL.Actual_Shipped_Date <> DB1.Actual_Shipped_Date;

 // LCL.Break = CND.Yes
 LCL.Break = 'Y';

 //?BRK: Actual Shipped Date/Ship To Customer/Customer PO
 // IF LCL.Ship To Customer NE DB1.Ship To Customer
 IF LCL.Ship_To_Customer <> DB1.Ship_To_Customer;

 // LCL.Break = CND.Yes
 LCL.Break = 'Y';

 //?BRK: Actual Shipped Date/Ship To Customer/Customer PO
 // IF LCL.Customer Purchase Order # NE DB1.Customer Purchase Order #
 IF LCL.Customer_Purchase_Order_# <> DB1.Customer_Purchase_Order_#;

 // LCL.Break = CND.Yes
 LCL.Break = 'Y';

 ENDIF;

 //?FAX or Email: Invoice
 //?Print the combined invoice on break
 CASE;

 // IF LCL.Break is Yes
 IF LCL.Break = 'Y';

 //?* first logic break, only print combined invoice when the ship to
 //?* or customer po or actual ship date changes
 // Call program PRT Inv/Fast FaxCMB 6LPPF.
 CALL PROGRAM(PRT Inv/Fast FaxCMB 6LPPF) ('PMCKPFR');
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Ship_To_Customer);
 PARAMETER(DB1.Customer_Purchase_Order_#);
 PARAMETER(DB1.Actual_Shipped_Date);
 PARAMETER(LCL.Status_Y_or_N);
 PARAMETER(DB1.Job_Name_CDE);
 PARAMETER(DB1.Job_Number_Cde);

 // Call program PRC Fax One Cust Combo XF.
 CALL PROGRAM(PRC Fax One Cust Combo XF) ('PMC6XFR');
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Bill_to_Customer_Ship_To);
 PARAMETER(PAR.Fax_Recipient);

 // LCL.Ship To Customer = DB1.Ship To Customer
 LCL.Ship_To_Customer = DB1.Ship_To_Customer;

 // LCL.Customer Purchase Order # = DB1.Customer Purchase Order #
 LCL.Customer_Purchase_Order_# = DB1.Customer_Purchase_Order_#;

 // LCL.Actual Shipped Date = DB1.Actual Shipped Date
 LCL.Actual_Shipped_Date = DB1.Actual_Shipped_Date;

 ENDIF;

 ENDIF;

}


