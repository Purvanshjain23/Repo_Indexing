// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDIUXFR
// ?Date: 14.08.2025 Time: 03:34:50
// ?------------------------------------------------------------------------------------------------

//?Execute user function

// PAR.Date To               USR = CVTVAR(PAR.Date To Alpha         USR)
PAR.Date_To_USR = CVTVAR(PAR.Date_To_Alpha_USR);

EXECUTE FUNCTION(CNV Actual Dlvry Dt/Tm RT) TYPE(RTVOBJ) FILE(OMFJCPP)          AC1507314;
PARAMETER(PAR.Carrier_Code);
PARAMETER(PAR.Date_To_USR);
{
 //?USER: Process Data record

 //?For loads with sched ship date prior to parm date, init. actual delvry
 CASE;

 // IF DB1.Scheduled Ship Date LT PAR.Date To               USR
 IF DB1.Scheduled_Ship_Date < PAR.Date_To_USR;

 EXECUTE FUNCTION(CNV Actual Dlvry Dt/Tm RT) TYPE(RTVOBJ) FILE(OMFLCPP)          AC1507245;
 PARAMETER(DB1.Load_ID);
 PARAMETER(1);
 PARAMETER(DB1.Requested_Delivery_Date);
 {
  //?USER: Initialize routine

  // WRK.Stop/Drop = CON.*ZERO
  WRK.Stop_Drop = *ZERO;

  //?USER: Process Data record

  CASE;

  // IF DB1.Stop/Drop NE WRK.Stop/Drop
  IF DB1.Stop_Drop <> WRK.Stop_Drop;

  // WRK.Stop/Drop = DB1.Stop/Drop
  WRK.Stop_Drop = DB1.Stop_Drop;

  CASE;

  // IF DB1.Actual Delivery Date is Entered
  IF DB1.Actual_Delivery_Date <> *ZERO;

  // IF *OTHERWISE
  IF *OTHERWISE;

  //?Put Req Delivery from load header into Actual Delivery
  EXECUTE FUNCTION(CHG Actual Dlvry Dt/Tm CH) TYPE(CHGOBJ) FILE(OMFLCPP)          AC1507246;
  PARAMETER(DB1.Load_ID);
  PARAMETER(DB1.Stop_Drop_Sequence_Number);
  PARAMETER(DB1.Company_Number);
  PARAMETER(PAR.Requested_Delivery_Date);
  PARAMETER(DB1.Actual_Delivery_time);
  ENDIF;

  ENDIF;

 }

 ENDIF;

}


