// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMWSXFR
// ?Date: 14.08.2025 Time: 03:44:22
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?FP1110- This will DELETE all RINs for a batch/order
//?FP1322- And adjust RIN gallons sold and net to sell
EXECUTE FUNCTION(RTV HPB fields         RT) TYPE(RTVOBJ) FILE(PMAMREP)          AC1853458;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Order_Number);
PARAMETER(LCL.HPB_COA_Batch_Number);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


CASE;

// IF LCL.HPB COA Batch Number is Entered
IF LCL.HPB_COA_Batch_Number > *ZERO;

EXECUTE FUNCTION(Rtv Delet RINS f/unshp RT) TYPE(RTVOBJ) FILE(PMDACPP)          AC1891760;
PARAMETER(PAR.Order_Number);
PARAMETER(PAR.Company_Number);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.COA Batch Header RIN is Eq Blank
 IF DB1.COA_Batch_Header_RIN = *BLANK;

 EXECUTE FUNCTION(Del COA Batch Hdr RIN DO) TYPE(DLTOBJ) FILE(PMDACPP)           AC1858628;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.COA_ULSD_Company_#);
 PARAMETER(DB1.COA_Batch_Number);
 PARAMETER(DB1.COA_Batch_Header_RIN_Seq);
 PARAMETER(DB1.COA_Batch_Hdr_RIN_Seq_Sec);
 ENDIF;

 //?If order is from an external warehouse, then update the BUY RIN
 //?that was selected for shipment -- fully sold sts and reduce gallons sold
}


ENDIF;

