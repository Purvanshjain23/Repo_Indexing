// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBTXXFR
// ?Date: 14.08.2025 Time: 03:49:22
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?E4230 11/05/15 Update file in qtemp , Null fields with cust and Sales#
//?  for a sql to kevin
EXECUTE FUNCTION(Rtv to Upd QTemp      RT) TYPE(RTVOBJ) FILE(PBAOCPP)           AC2113652;
PARAMETER(PAR.MPR_Reporting_Date);
{
 //?USER: Process Data record

 // LCL.Order Number Alpha = SUBSTRING(DB1.MPR Lot Identification,CON.1,CON.7)
 LCL.Order_Number_Alpha = SUBSTRING(DB1.MPR_Lot_Identification:1:7);

 // LCL.Order Number = CVTVAR(LCL.Order Number Alpha)
 LCL.Order_Number = CVTVAR(LCL.Order_Number_Alpha);

 EXECUTE FUNCTION(RTV Cust & Sls#       RT) TYPE(RTVOBJ) FILE(OPBFCPP)           AC2113655;
 PARAMETER(LCL.Order_Number);
 PARAMETER(LCL.Ship_To_Customer);
 PARAMETER(LCL.Sales_Route_Code);
 {
  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 // LCL.MPR Null = CVTVAR(LCL.Ship To Customer)
 LCL.MPR_Null = CVTVAR(LCL.Ship_To_Customer);

 // LCL.MPR Null 1 = CVTVAR(LCL.Sales Route Code)
 LCL.MPR_Null_1 = CVTVAR(LCL.Sales_Route_Code);

 EXECUTE FUNCTION(Chg Null in Qtemp     CH) TYPE(CHGOBJ) FILE(PBAOCPP)           AC2113656;
 PARAMETER(DB1.MPR_Identification_Num);
 PARAMETER(DB1.MPR_Reporting_Date);
 PARAMETER(DB1.MPR_Reporting_Time);
 PARAMETER(DB1.MPR_Lot_Identification);
 PARAMETER(DB1.MPR_Item_Code);
 PARAMETER(LCL.MPR_Null);
 PARAMETER(LCL.MPR_Null_1);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Chg Date/Time      IF) TYPE(EXCINTFUN)                     AC1523476;
  PARAMETER(DB1.Change_Date);
  PARAMETER(DB1.Change_Time);
  PARAMETER(DB1.Change_User);
  PARAMETER(DB1.Change_Program);
  {
   //?Execute internal function

   // PAR.Change Date = JOB.*Job date
   PAR.Change_Date = JOB.*Job_date;

   // PAR.Change Time = JOB.*Job time
   PAR.Change_Time = JOB.*Job_time;

   // PAR.Change User = JOB.*USER
   PAR.Change_User = JOB.*USER;

   // PAR.Change Program = JOB.*PROGRAM
   PAR.Change_Program = JOB.*PROGRAM;

  }

 }

}


