// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDRNXFR
// ?Date: 14.08.2025 Time: 03:35:55
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?*** Determine which printer to use. ***
EXECUTE FUNCTION(RTV System Value Alpha RT) TYPE(RTVOBJ) FILE(CADPREP)          AC1530745;
PARAMETER('CLAIM_PRT');
PARAMETER(PAR.PRT_Printer_Device);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


//?*** Find today's Salesperson Approved claims, then print them. ***
EXECUTE FUNCTION(PRT Todays Sls Aprv Cl RT) TYPE(RTVOBJ) FILE(PDMKCPP)          AC1537319;
PARAMETER(PAR.PRT_Printer_Device);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Claim Status is Sls Approved
 IF DB1.Claim_Status = 'S';

 // AND DB1.Sales Approved Date EQ JOB.*Job date
 AND DB1.Sales_Approved_Date = JOB.*Job_date;

 // Call program Prt Claim-Claim All   XF.
 CALL PROGRAM(Prt Claim-Claim All   XF) ('PPL7XFR');
 PARAMETER(DB1.Claim_Number);
 PARAMETER(DB1.Claim_Company_Number);
 PARAMETER(PAR.PRT_Printer_Device);
 PARAMETER(*YES);
 PARAMETER(*YES);
 PARAMETER(01);
 PARAMETER('N');
 PARAMETER(LCL.Online_Report_USR);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(*ZERO);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(*NO);
 PARAMETER(*NO);
 PARAMETER('R');

 ENDIF;

}


//?*** PURGE Claims that are more than one year old. ***
//?*** Create CB/DB memos for all (A)pproved Claims. ***
// Call program CRT CB/DB for Approved XF.
CALL PROGRAM(CRT CB/DB for Approved XF) ('PDX6XFR');

