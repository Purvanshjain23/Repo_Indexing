/********************************************************************/
/*                                                                  */
/*  SYNOPSIS -  THIS PROGRAM IS EXECUTED BY INFORMATICA AS A        */
/*              STORED PROCEDURE.                                   */
/*              PROCESS WILL SET THE LIBRARY LIST ACCORDINGLY       */
/*              BASED ON USER GROUP PROFILE THEN IT WILL RUN BLOCK  */
/*              ORDER AUTOMATION PROCESSING.                        */
/*                                                                  */
/*  SYSTEM    - ORDER MANAGEMENT SYSTEM                             */
/*  PROGRAM   - AUTOMATED BLOCK ORDER PROCESSING                    */
/*  DATE      - 09/28/2023                                          */
/*  PROGRAMMER- S.L. HENRY                                          */
/*                                                                  */
/********************************************************************/
/* MM/DD/YY BY  PROJECT & DESCRIPTION                               */
/* -------- --- ----------------------------------------------------*/
/********************************************************************/

             PGM


             DCL        VAR(&GRPPRFL)  TYPE(*CHAR) LEN(10)
             DCL        VAR(&JOBD)  TYPE(*CHAR) LEN(10)

             CHGJOB     LOG(4 99 *SECLVL) LOGCLPGM(*YES)


/*********************************************************************/
/*  Retrieve the user's Group Profile.  Set the JOBD                 */
/*  based on the group profile.                                      */
/*********************************************************************/

             RTVUSRPRF  GRPPRF(&GRPPRFL)

             SELECT

             WHEN       COND(&GRPPRFL = 'SBDPGMR') THEN(CHGVAR +
                          VAR(&JOBD) VALUE('TPMTESTJD'))
             OTHERWISE  CMD(CHGVAR VAR(&JOBD) VALUE('PRKPRDGUY'))


             ENDSELECT


             SBMJOB     CMD(CALL PGM(PVATXFR) PARM(' ')) +
                          JOB(ETLBLOCK) JOBD(&JOBD) JOBQ(PRKJS1) +
                          INLLIBL(*JOBD)


/*********************************************************************/
/*  Restore saved library list in case this CL called interactively  */
/*********************************************************************/
       /*    POPLIBL      */


 END:        ENDPGM

