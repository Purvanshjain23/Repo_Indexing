// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKOYXFR
// ?Date: 14.08.2025 Time: 02:52:22
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications and Comments
DO;

//?H16853 ISE 11/02/20 - Increased the Buy Order Number field
//?                       length from 5 to 7.
ENDDO;

EXECUTE FUNCTION(CNV Hpe138 Src Type   RT) TYPE(RTVOBJ) FILE(PKBSCPP)           AB1210600;
{
 //?USER: Process Data record

 //?Break on buy order:  get source type
 CASE;

 // IF DB1.BOH Company Number NE PAR.BOH Company Number
 IF DB1.BOH_Company_Number <> PAR.BOH_Company_Number;

 // OR DB1.BOH Buy Order Number NE PAR.BOH Buy Order Number
 OR DB1.BOH_Buy_Order_Number <> PAR.BOH_Buy_Order_Number;

 EXECUTE FUNCTION(Rtv Src Typ/Prd       RT) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1210062;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.TH_Kill_Date);
 PARAMETER(PAR.TH_Source_Type);
 PARAMETER(WRK.Txt_Field_Not_Needed);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 // PAR.BOH Company Number = DB1.BOH Company Number
 PAR.BOH_Company_Number = DB1.BOH_Company_Number;

 // PAR.BOH Buy Order Number = DB1.BOH Buy Order Number
 PAR.BOH_Buy_Order_Number = DB1.BOH_Buy_Order_Number;

 ENDIF;

 EXECUTE FUNCTION(CNV HPE138 Src Type   CH) TYPE(CHGOBJ) FILE(PKBSCPP)           AB1210601;
 PARAMETER(DB1.LTN_Company_Number);
 PARAMETER(DB1.LTN_Kill_Date);
 PARAMETER(DB1.LTN_Record_Number);
 PARAMETER(PAR.TH_Source_Type);
}


