// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBVQPFR
// ?Date: 14.08.2025 Time: 12:03:33
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?Modifications and Comments
//?01/21/16 JJH E4890 - Item Balance 960 COPACK Warehouses
// LCL.Count Records         USR = CON.*ZERO
LCL.Count_Records_USR = *ZERO;

//?USER: Record selection processing

EXECUTE FUNCTION(Rtv ItmBal 960/COPACK RT) TYPE(RTVOBJ) FILE(CAB0REP)           AC2117972;
PARAMETER(PAR.Company_Number);
PARAMETER(DB1.Item_Code);
PARAMETER(LCL.Record_Found_ItmBal_USR);
{
 //?USER: Initialize routine

 // PAR.Record Found -ItmBal USR = CND.Record Not Found
 PAR.Record_Found_ItmBal_USR = 'N';

 //?USER: Process Data record

 EXECUTE FUNCTION(Rtv Acct Co          RT) TYPE(RTVOBJ) FILE(CAADREP)            AC1802492;
 PARAMETER(DB1.Warehouse_Code);
 PARAMETER(LCL.Accounting_Company);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 CASE;

 // IF LCL.Accounting Company is St. Joseph
 IF LCL.Accounting_Company = 960;

 // PAR.Record Found -ItmBal USR = CND.Record Found
 PAR.Record_Found_ItmBal_USR = 'Y';

 QUIT;

 ENDIF;

}


CASE;

// IF LCL.Record Found -ItmBal USR is Record Not Found
IF LCL.Record_Found_ItmBal_USR = 'N';

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

//?USER: On print of first page format

// 1PG.Remove Records Flag = PAR.Remove Records Flag
X1PG_Remove_Records_Flag = PAR.Remove_Records_Flag;

//?USER: Print required level headings

// SUPPRESSED PRINT Item Structure Type Code header format

// SUPPRESSED PRINT Item Structure Group Code header format

// SUPPRESSED PRINT Item Structure Class Code header format

// SUPPRESSED PRINT Item Code header format

//?PRTOBJ calls after print of detail format

//?Embedded PRTOBJ : Pro ItmBal 960/COPACK PO
EXECUTE FUNCTION(Pro ItmBal 960/COPACK PO) TYPE(PRTOBJ);
PARAMETER(PAR.Company_Number);
PARAMETER(CUR.Item_Code);
PARAMETER(PAR.Remove_Records_Flag);
PARAMETER(LCL.Count_USR);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


//?USER: Process after print of detail format

// LCL.Count Records         USR = LCL.Count Records         USR + LCL.Count USR
LCL.Count_Records_USR = LCL.Count_Records_USR + LCL.Count_USR;

//?USER: Print required level totals

// SUPPRESSED PRINT Item Code totals format

// SUPPRESSED PRINT Item Structure Class Code totals format

// SUPPRESSED PRINT Item Structure Group Code totals format

// SUPPRESSED PRINT Item Structure Type Code totals format

//?USER: On print of final totals format

// CUR.Company count = LCL.Count Records         USR
CUR.Company_count = LCL.Count_Records_USR;

