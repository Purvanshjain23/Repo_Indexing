// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDU5PVR
// ?Date: 14.08.2025 Time: 03:30:08
// ?------------------------------------------------------------------------------------------------

//?USER: Process command keys

EXECUTE FUNCTION(RTV Cust Name/Addr/Ph  RT) TYPE(RTVOBJ) FILE(CABBREP)          AC1332483;
PARAMETER(DTL.AR_Customer_Number);
PARAMETER(DTL.Customer_Name);
PARAMETER(DTL.Address_Line_1);
PARAMETER(DTL.Address_Line_2);
PARAMETER(DTL.Address_Line_3);
PARAMETER(DTL.City);
PARAMETER(DTL.State_Code);
PARAMETER(DTL.Zip_Postal_Code);
PARAMETER(DTL.Telephone_Number_FF);
{
 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


//?USER: Validate fields

// PAR.USR A/R Customer Number = DTL.A/R Customer Number
PAR.USR_A_R_Customer_Number = DTL.AR_Customer_Number;

EXECUTE FUNCTION(VAL A/R Customer       RT) TYPE(RTVOBJ) FILE(CABBREP)          AC1452402;
PARAMETER(DTL.AR_Customer_Number);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 QUIT;

}


CASE;

// IF PGM.*Return code is *Record does not exist
IF PGM.*Return_code = 'Y2U0005';

// Send error message - 'A/R Customer is invalid.'
ERROR(USR2110);
MSGPARM(DTL.AR_Customer_Number);

// IF *OTHERWISE
IF *OTHERWISE;

EXECUTE FUNCTION(RTV Cust Name/Addr/Ph  RT) TYPE(RTVOBJ) FILE(CABBREP)          AC1332483;
PARAMETER(DTL.AR_Customer_Number);
PARAMETER(DTL.Customer_Name);
PARAMETER(DTL.Address_Line_1);
PARAMETER(DTL.Address_Line_2);
PARAMETER(DTL.Address_Line_3);
PARAMETER(DTL.City);
PARAMETER(DTL.State_Code);
PARAMETER(DTL.Zip_Postal_Code);
PARAMETER(DTL.Telephone_Number_FF);
{
 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


ENDIF;

//?USER: User defined action

// Call program WW A/R Spread Trans    DF.
CALL PROGRAM(WW A/R Spread Trans    DF) ('PDUTDFR');
PARAMETER(*ZERO);
PARAMETER(PAR.Invoice_Number);
PARAMETER(PAR.Invoice_Suffix);
PARAMETER(PAR.Remaining_Balance_Due);
PARAMETER(DTL.AR_Customer_Number);
PARAMETER(WRK.Adjustment_Type_Code);
PARAMETER(PAR.Invoice_Number);
PARAMETER(PAR.Invoice_Suffix);
PARAMETER(PAR.USR_A_R_Customer_Number);
PARAMETER(PAR.Company_Number);

//?USER: Exit program processing

// DTL.Customer Name = CND.blanks
DTL.Customer_Name = *BLANK;

// DTL.Address Line 1 = CND.Blank
DTL.Address_Line_1 = *BLANK;

// DTL.Address Line 2 = CND.Blank
DTL.Address_Line_2 = *BLANK;

// DTL.Address Line 3 = CND.Blank
DTL.Address_Line_3 = *BLANK;

// DTL.City = CND.Blank
DTL.City = *BLANK;

// DTL.State Code = CND.*Blanks
DTL.State_Code = *BLANK;

// DTL.County Code = CND.blank
DTL.County_Code = *BLANK;

// DTL.Zip/Postal Code = CND.Blank
DTL.Zip_Postal_Code = *BLANK;

// DTL.Telephone Number FF = CND.Equal to blanks
DTL.Telephone_Number_FF = *BLANK;

// DTL.Fax Number FF = CND.Equal to blanks
DTL.Fax_Number_FF = *BLANK;

