// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLUDXFR
// ?Date: 14.08.2025 Time: 02:55:27
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?MODIFICATIONS
//?11/02/2020 ISE H16853 - CHANGE BUY ORDER NUMBER FIELD LENGTH FROM 5 TO 7
EXECUTE FUNCTION(Crt/Chg Tattoo MTech  RT) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1318534;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.BOH_Buy_Order_Number);
PARAMETER(PAR.BOL_Load_Number);
PARAMETER(PAR.TH_Tattoo_Number);
PARAMETER(PAR.TM_Tattoo_MTech_Reference);
PARAMETER(PAR.Delete_Record_Usr);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Upd Tattoo/Mtech ReferRT) TYPE(RTVOBJ) FILE(PLBQCPP)           AB1318535;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.TH_Kill_Date);
 PARAMETER(PAR.TM_Tattoo_MTech_Reference);
 PARAMETER(PAR.Delete_Record_Usr);
 {
  //?USER: Processing if Data record not found

  CASE;

  // IF PAR.Delete Record Usr is No
  IF PAR.Delete_Record_Usr = 'N';

  EXECUTE FUNCTION(Crt Tattoo/MTech ReferCo) TYPE(CRTOBJ) FILE(PLBQCPP)           AB1318290;
  PARAMETER(PAR.TM_Company_Number);
  PARAMETER(PAR.TM_Tattoo_Number);
  PARAMETER(PAR.TM_Kill_Date);
  PARAMETER(PAR.TM_Tattoo_MTech_Reference);
  PARAMETER(WRK.RS_User_Changed);
  PARAMETER(WRK.RS_Date_Changed);
  PARAMETER(WRK.RS_Time_Changed);
  PARAMETER('A');
  PARAMETER(WRK.RS_Job);
  PARAMETER(WRK.RS_Program);
  PARAMETER(WRK.RS_User_Added);
  PARAMETER(WRK.RS_Date_Added);
  PARAMETER(WRK.RS_Time_Added);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Rtv Change Stamp-SysDtIF) TYPE(EXCINTFUN)                      AB1237006;
   PARAMETER(DB1.RS_User_Changed);
   PARAMETER(DB1.RS_Date_Changed);
   PARAMETER(DB1.RS_Time_Changed);
   PARAMETER(DB1.RS_Job);
   PARAMETER(DB1.RS_Program);
   {
    //?Execute internal function

    // PAR.RS User Changed = JOB.*USER
    PAR.RS_User_Changed = JOB.*USER;

    // Call program Rtv System Date & Tim UP.
    CALL PROGRAM(Rtv System Date & Tim UP) ('PKWDUPC');
    PARAMETER(PAR.RS_Date_Changed);
    PARAMETER(PAR.RS_Time_Changed);

    // PAR.RS Job = JOB.*JOB
    PAR.RS_Job = JOB.*JOB;

    // PAR.RS Program = JOB.*PROGRAM
    PAR.RS_Program = JOB.*PROGRAM;

   }

  }

  ENDIF;

  //?USER: Process Data record

  CASE;

  // IF PAR.Delete Record Usr is No
  IF PAR.Delete_Record_Usr = 'N';

  EXECUTE FUNCTION(Chg Tattoo/MTech ReferCH) TYPE(CHGOBJ) FILE(PLBQCPP)           AB1318291;
  PARAMETER(DB1.TM_Company_Number);
  PARAMETER(DB1.TM_Tattoo_Number);
  PARAMETER(DB1.TM_Kill_Date);
  PARAMETER(PAR.TM_Tattoo_MTech_Reference);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Rtv Change Stamp-SysDtIF) TYPE(EXCINTFUN)                      AB1237006;
   PARAMETER(DB1.RS_User_Changed);
   PARAMETER(DB1.RS_Date_Changed);
   PARAMETER(DB1.RS_Time_Changed);
   PARAMETER(DB1.RS_Job);
   PARAMETER(DB1.RS_Program);
   {
    //?Execute internal function

    // PAR.RS User Changed = JOB.*USER
    PAR.RS_User_Changed = JOB.*USER;

    // Call program Rtv System Date & Tim UP.
    CALL PROGRAM(Rtv System Date & Tim UP) ('PKWDUPC');
    PARAMETER(PAR.RS_Date_Changed);
    PARAMETER(PAR.RS_Time_Changed);

    // PAR.RS Job = JOB.*JOB
    PAR.RS_Job = JOB.*JOB;

    // PAR.RS Program = JOB.*PROGRAM
    PAR.RS_Program = JOB.*PROGRAM;

   }

  }

  // IF PAR.Delete Record Usr is Yes
  IF PAR.Delete_Record_Usr = 'Y';

  EXECUTE FUNCTION(Dlt Tattoo/MTech ReferDo) TYPE(DLTOBJ) FILE(PLBQCPP)           AB1318292;
  PARAMETER(PAR.TM_Company_Number);
  PARAMETER(PAR.TM_Tattoo_Number);
  PARAMETER(PAR.TM_Kill_Date);
  ENDIF;

 }

}


