// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDQ7XFR
// ?Date: 14.08.2025 Time: 03:29:30
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?FP1054 output ps production warehouse to pdi8cpp
EXECUTE FUNCTION(UPS Rtv FG Items      RT) TYPE(RTVOBJ) FILE(CABZREP)           AC1324661;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Production_Type);
PARAMETER(PAR.Production_Date);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(BPS Set Up Item Id    IF) TYPE(EXCINTFUN)                      AC1332905;
 PARAMETER(DB1.Item_Type_Code);
 PARAMETER(DB1.Base_Conv_Loss_Item);
 PARAMETER(DB1.Variety_Rendered_Cut);
 PARAMETER(DB1.Credit_Item_Status);
 PARAMETER(DB1.Seconds_Item);
 PARAMETER(PAR.PS_Item_Id);
 {
  //?Execute internal function

  CASE;

  // IF PAR.Item Type Code is Raw Materials
  IF PAR.Item_Type_Code = 'RM';

  // PAR.PS Item Identification = CND.RM Base
  PAR.PS_Item_Id = 'RMB';

  // IF *OTHERWISE
  IF *OTHERWISE;

  CASE;

  // IF PAR.Seconds Item is Yes
  IF PAR.Seconds_Item = 'Y';

  // PAR.PS Item Identification = CND.FG Seconds
  PAR.PS_Item_Id = 'FSC';

  // IF *OTHERWISE
  IF *OTHERWISE;

  CASE;

  // IF PAR.Variety/Rendered/Cut is Variety
  IF PAR.Variety_Rendered_Cut = 'V';

  // PAR.PS Item Identification = CND.FG Variety
  PAR.PS_Item_Id = 'FVR';

  // IF PAR.Variety/Rendered/Cut is Rendered
  IF PAR.Variety_Rendered_Cut = 'R';

  // PAR.PS Item Identification = CND.FG Rendered
  PAR.PS_Item_Id = 'FRD';

  // IF PAR.Variety/Rendered/Cut is Cut
  IF PAR.Variety_Rendered_Cut = 'C';

  //?Base/Converted/Fabricated
  CASE;

  // IF PAR.Credit Item Status is yes
  IF PAR.Credit_Item_Status = 'Y';

  //?Setup Base/Converted/Fabricated Credit
  CASE;

  // IF PAR.Converted/Base Item is Base
  IF PAR.Base_Conv_Loss_Item = 'B';

  // PAR.PS Item Identification = CND.FG Base Credit
  PAR.PS_Item_Id = 'FBC';

  //?Setup Base/Converted/Fabricated Credit
  // IF PAR.Converted/Base Item is Converted
  IF PAR.Base_Conv_Loss_Item = 'C';

  // PAR.PS Item Identification = CND.FG Converted Credit
  PAR.PS_Item_Id = 'FCC';

  //?Setup Base/Converted/Fabricated Credit
  // IF PAR.Converted/Base Item is Fabricated
  IF PAR.Base_Conv_Loss_Item = 'F';

  // PAR.PS Item Identification = CND.FG Fabricated Credit
  PAR.PS_Item_Id = 'FFC';

  //?Setup Base/Converted/Fabricated Credit
  // IF PAR.Converted/Base Item is Loss
  IF PAR.Base_Conv_Loss_Item = 'L';

  // PAR.PS Item Identification = CND.FG Loss Credit
  PAR.PS_Item_Id = 'FLC';

  ENDIF;

  //?Base/Converted/Fabricated
  // IF *OTHERWISE
  IF *OTHERWISE;

  //?Setup Base/Converted/Fabricated
  CASE;

  // IF PAR.Converted/Base Item is Base
  IF PAR.Base_Conv_Loss_Item = 'B';

  // PAR.PS Item Identification = CND.FG Base
  PAR.PS_Item_Id = 'FGB';

  //?Setup Base/Converted/Fabricated
  // IF PAR.Converted/Base Item is Converted
  IF PAR.Base_Conv_Loss_Item = 'C';

  // PAR.PS Item Identification = CND.FG Converted
  PAR.PS_Item_Id = 'FCV';

  //?Setup Base/Converted/Fabricated
  // IF PAR.Converted/Base Item is Fabricated
  IF PAR.Base_Conv_Loss_Item = 'F';

  // PAR.PS Item Identification = CND.FG Fabricated
  PAR.PS_Item_Id = 'FFB';

  //?Setup Base/Converted/Fabricated
  // IF PAR.Converted/Base Item is Loss
  IF PAR.Base_Conv_Loss_Item = 'L';

  // PAR.PS Item Identification = CND.FG Loss
  PAR.PS_Item_Id = 'FLS';

  ENDIF;

  ENDIF;

  ENDIF;

  ENDIF;

  ENDIF;

 }

 EXECUTE FUNCTION(Ups Crt Prod Dtl Rec  RT) TYPE(RTVOBJ) FILE(CAB0REP)           AC1414961;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Item_Code);
 PARAMETER(PAR.Production_Type);
 PARAMETER(PAR.Production_Date);
 PARAMETER(PAR.PS_Weight_Planned_Prod);
 PARAMETER(PAR.PS_Pieces_Planned_Prod);
 PARAMETER(PAR.PS_Pct_of_Carcass_Yield);
 PARAMETER(PAR.PS_Avg_Piece_Wgt);
 PARAMETER(PAR.PS_Weight_Inv_On_Hand);
 PARAMETER(PAR.PS_Pieces_Inv_On_Hand);
 PARAMETER(PAR.PS_Weight_Standard);
 PARAMETER(PAR.PS_Pieces_Standard);
 PARAMETER(PAR.PS_Weight_Converted);
 PARAMETER(PAR.PS_Pieces_Converted);
 PARAMETER(PAR.PS_Weight_Shipping_Adj);
 PARAMETER(PAR.PS_Pieces_Shipping_Adj);
 PARAMETER(PAR.PS_Weight_Prod_Adj);
 PARAMETER(PAR.PS_Pieces_Prod_Adj);
 PARAMETER(PAR.PS_Weight_Inv_Adj);
 PARAMETER(PAR.PS_Pieces_Inv_Adj);
 PARAMETER(PAR.PS_Weight_Ship_Cut_Adj);
 PARAMETER(PAR.PS_Pieces_Ship_Cut_Adj);
 PARAMETER(PAR.PS_Weight_Prod_Allocated);
 PARAMETER(PAR.PS_Pieces_Prod_Allocated);
 PARAMETER(PAR.PS_Weight_Inv_Allocated);
 PARAMETER(PAR.PS_Pieces_Inv_Allocated);
 PARAMETER(DB1.Unit_Weight);
 PARAMETER(PAR.PS_Pieces_Whs_Tfr_Adj);
 PARAMETER(PAR.PS_Weight_Whs_Tfr_Adj);
 PARAMETER(PAR.PS_Pieces_Unused_2);
 PARAMETER(PAR.PS_Weight_Unused_3);
 PARAMETER(PAR.PS_Pieces_Unused_3);
 PARAMETER(PAR.PS_Weight_Unused_4);
 PARAMETER(PAR.PS_Pieces_Unused_4);
 PARAMETER(PAR.PS_Weight_Unused_5);
 PARAMETER(PAR.PS_Pieces_Unused_5);
 PARAMETER(PAR.PS_Weight_Unused_6);
 PARAMETER(PAR.PS_Pieces_Unused_6);
 PARAMETER(PAR.PS_Item_Id);
 PARAMETER(PAR.PS_Lock_Status);
 PARAMETER(DB1.Export_Domestic);
 PARAMETER(DB1.Print_On_Schedule);
 PARAMETER(DB1.Piece_Count_Item);
 PARAMETER(PAR.PS_Unused_Sts_1);
 PARAMETER(PAR.PS_Unused_Sts_2);
 PARAMETER(PAR.PS_Unused_Sts_3);
 PARAMETER(PAR.PS_Unused_Sts_4);
 PARAMETER(PAR.PS_Item_Sched_Need_Sts);
 PARAMETER(PAR.PS_Production_Warehouse);
 PARAMETER(PAR.PS_Weight_Ordered);
 PARAMETER(PAR.PS_Pieces_Ordered);
 PARAMETER(PAR.PS_Weight_FC_Adjusted);
 PARAMETER(PAR.PS_Pieces_FC_Adjusted);
 PARAMETER(PAR.PS_Weight_FX_Adjusted);
 PARAMETER(PAR.PS_Pieces_FX_Adjusted);
 PARAMETER(PAR.PS_Weight_Sched_Shipment);
 PARAMETER(PAR.PS_Pieces_Sched_Shipment);
 PARAMETER(PAR.PS_Weight_Available_Prod);
 PARAMETER(PAR.PS_Pieces_Available_Prod);
 PARAMETER(PAR.PS_Weight_Production_Need);
 PARAMETER(PAR.PS_Pieces_Production_Need);
 PARAMETER(PAR.PS_Weight_Fab_Needs);
 PARAMETER(PAR.PS_Pieces_Fab_Needs);
 PARAMETER(PAR.PS_Weight_Sched_Prod);
 PARAMETER(PAR.PS_Pieces_Sched_Prod);
 PARAMETER(PAR.PS_Weight_Sched_Need);
 PARAMETER(PAR.PS_Pieces_Sched_Need);
 PARAMETER(DB1.Department_Code);
 PARAMETER(DB1.Item_Structure_Type_Code);
 PARAMETER(DB1.Item_Structure_Group_Code);
 PARAMETER(DB1.Item_Structure_Class_Code);
 PARAMETER(DB1.Primal_Group_Code);
 PARAMETER(PAR.EDI_Status_1);
 PARAMETER(PAR.EDI_Status_2);
 PARAMETER(PAR.EDI_Status_3);
 PARAMETER(PAR.Record_Status);
 PARAMETER(PAR.Job_Time);
 PARAMETER(PAR.User_Id);
 PARAMETER(PAR.Job_Name);
 PARAMETER(PAR.Job_Date);
 PARAMETER(DB1.Fresh_Chilling_Time);
 PARAMETER(DB1.Piece_Count_Item);
 PARAMETER(DB1.Export_Domestic);
 PARAMETER(DB1.Print_On_Schedule);
 {
  //?USER: Process Data record

  // PAR.Chilling Time USR = PAR.Chilling Time
  PAR.Chilling_Time_USR = PAR.Fresh_Chilling_Time;

  EXECUTE FUNCTION(Rtv Whs Typ/FZNCHLTME IF) TYPE(EXCINTFUN)                      AC1423925;
  PARAMETER(PAR.Company_Number);
  PARAMETER(DB1.Warehouse_Code);
  PARAMETER(PAR.Warehouse_Type);
  PARAMETER(PAR.Chilling_Time_USR);
  {
   //?Execute internal function

   EXECUTE FUNCTION(RTV Warehouse Type     RT) TYPE(RTVOBJ) FILE(CAADREP)          AC1285482;
   PARAMETER(PAR.Warehouse_Code);
   PARAMETER(PAR.Warehouse_Type);
   {
    //?USER: Processing if Data record not found

    MOVE *ALL (To: PAR From: CON);

    //?USER: Process Data record

    MOVE *ALL (To: PAR From: DB1);

   }

   CASE;

   // IF PAR.Warehouse Type is Frozen
   IF PAR.Warehouse_Type = 'FZ';

   EXECUTE FUNCTION(RTV Numeric Value      RT) TYPE(RTVOBJ) FILE(PDKMREP)          AC1394480;
   PARAMETER(PAR.Company_Number);
   PARAMETER('FZNCHLTME');
   PARAMETER(PAR.System_Value_Numeric);
   {
    //?USER: Processing if Data record not found

    // PGM.*Return code = CND.*Record does not exist
    PGM.*Return_code = 'Y2U0005';

    //?USER: Process Data record

    MOVE *ALL (To: PAR From: DB1);

   }

   // PAR.Fresh Chilling Time = PAR.System Value Numeric
   PAR.Fresh_Chilling_Time = PAR.System_Value_Numeric;

   ENDIF;

  }

  EXECUTE FUNCTION(UPS Clc Avail Shp Dte RT) TYPE(RTVOBJ) FILE(CAAFREP)           AC1324967;
  PARAMETER(PAR.Company_Number);
  PARAMETER(PAR.Production_Date);
  PARAMETER(PAR.Chilling_Time_USR);
  PARAMETER(PAR.PS_Available_Ship_Date);
  {
   //?USER: Initialize routine

   // WRK.Count USR = CON.*ZERO
   WRK.Count_USR = *ZERO;

   //?USER: Process Data record

   CASE;

   // IF WRK.Count USR EQ PAR.Chilling Time
   IF WRK.Count_USR = PAR.Fresh_Chilling_Time;

   // PAR.PS Available Ship Date = DB1.Post to G/L Date
   PAR.PS_Available_Ship_Date = DB1.Post_to_G_L_Date;

   QUIT;

   ENDIF;

   //?Skip Saturday
   CASE;

   // IF DB1.Day of Week is Saturday
   IF DB1.Day_of_Week = '7';

   //?Skip Saturday
   // IF *OTHERWISE
   IF *OTHERWISE;

   // WRK.Count USR = WRK.Count USR + CON.1
   WRK.Count_USR = WRK.Count_USR + 1;

   ENDIF;

  }

  EXECUTE FUNCTION(Rtv Productin Whs     RT) TYPE(RTVOBJ) FILE(CAADREP)           AC1498428;
  PARAMETER(DB1.Warehouse_Code);
  PARAMETER(LCL.Production_Warehouse_Code);
  PARAMETER(NLL.Accounting_Company);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

  }

  // LCL.PS Production Warehouse = LCL.Production Warehouse Code
  LCL.PS_Production_Warehouse = LCL.Production_Warehouse_Code;

  EXECUTE FUNCTION(UPS Crt Prd Dtl Rec   CR) TYPE(CRTOBJ) FILE(PDI8CPP)           AC1307056;
  PARAMETER(PAR.Company_Number);
  PARAMETER(PAR.Production_Type);
  PARAMETER(PAR.Production_Date);
  PARAMETER(PAR.Item_Code);
  PARAMETER(DB1.Warehouse_Code);
  PARAMETER(PAR.PS_Available_Ship_Date);
  PARAMETER(PAR.PS_Weight_Planned_Prod);
  PARAMETER(PAR.PS_Pieces_Planned_Prod);
  PARAMETER(PAR.PS_Pct_of_Carcass_Yield);
  PARAMETER(PAR.PS_Avg_Piece_Wgt);
  PARAMETER(PAR.PS_Weight_Inv_On_Hand);
  PARAMETER(PAR.PS_Pieces_Inv_On_Hand);
  PARAMETER(PAR.PS_Weight_Standard);
  PARAMETER(PAR.PS_Pieces_Standard);
  PARAMETER(PAR.PS_Weight_Converted);
  PARAMETER(PAR.PS_Pieces_Converted);
  PARAMETER(PAR.PS_Weight_Shipping_Adj);
  PARAMETER(PAR.PS_Pieces_Shipping_Adj);
  PARAMETER(PAR.PS_Weight_Prod_Adj);
  PARAMETER(PAR.PS_Pieces_Prod_Adj);
  PARAMETER(PAR.PS_Weight_Inv_Adj);
  PARAMETER(PAR.PS_Pieces_Inv_Adj);
  PARAMETER(PAR.PS_Weight_Ship_Cut_Adj);
  PARAMETER(PAR.PS_Pieces_Ship_Cut_Adj);
  PARAMETER(PAR.PS_Weight_Prod_Allocated);
  PARAMETER(PAR.PS_Pieces_Prod_Allocated);
  PARAMETER(PAR.PS_Weight_Inv_Allocated);
  PARAMETER(PAR.PS_Pieces_Inv_Allocated);
  PARAMETER(PAR.PS_Unit_Weight);
  PARAMETER(PAR.PS_Pieces_Whs_Tfr_Adj);
  PARAMETER(PAR.PS_Weight_Whs_Tfr_Adj);
  PARAMETER(PAR.PS_Pieces_Unused_2);
  PARAMETER(PAR.PS_Weight_Unused_3);
  PARAMETER(PAR.PS_Pieces_Unused_3);
  PARAMETER(PAR.PS_Weight_Unused_4);
  PARAMETER(PAR.PS_Pieces_Unused_4);
  PARAMETER(PAR.PS_Weight_Unused_5);
  PARAMETER(PAR.PS_Pieces_Unused_5);
  PARAMETER(PAR.PS_Weight_Unused_6);
  PARAMETER(PAR.PS_Pieces_Unused_6);
  PARAMETER(PAR.PS_Item_Id);
  PARAMETER(PAR.Warehouse_Type);
  PARAMETER(PAR.PS_Lock_Status);
  PARAMETER(PAR.PS_Export_Domestic);
  PARAMETER(PAR.PS_Print_On_Schedule);
  PARAMETER(PAR.PS_Piece_Count_Item);
  PARAMETER(PAR.PS_Unused_Sts_1);
  PARAMETER(PAR.PS_Unused_Sts_2);
  PARAMETER(PAR.PS_Unused_Sts_3);
  PARAMETER(PAR.PS_Unused_Sts_4);
  PARAMETER(PAR.PS_Item_Sched_Need_Sts);
  PARAMETER(LCL.PS_Production_Warehouse);
  PARAMETER(PAR.PS_Weight_Ordered);
  PARAMETER(PAR.PS_Pieces_Ordered);
  PARAMETER(PAR.PS_Weight_FC_Adjusted);
  PARAMETER(PAR.PS_Pieces_FC_Adjusted);
  PARAMETER(PAR.PS_Weight_FX_Adjusted);
  PARAMETER(PAR.PS_Pieces_FX_Adjusted);
  PARAMETER(PAR.PS_Weight_Sched_Shipment);
  PARAMETER(PAR.PS_Pieces_Sched_Shipment);
  PARAMETER(PAR.PS_Weight_Available_Prod);
  PARAMETER(PAR.PS_Pieces_Available_Prod);
  PARAMETER(PAR.PS_Weight_Production_Need);
  PARAMETER(PAR.PS_Pieces_Production_Need);
  PARAMETER(PAR.PS_Weight_Fab_Needs);
  PARAMETER(PAR.PS_Pieces_Fab_Needs);
  PARAMETER(PAR.PS_Weight_Sched_Prod);
  PARAMETER(PAR.PS_Pieces_Sched_Prod);
  PARAMETER(PAR.PS_Weight_Sched_Need);
  PARAMETER(PAR.PS_Pieces_Sched_Need);
  PARAMETER(PAR.Department_Code);
  PARAMETER(PAR.Item_Structure_Type_Code);
  PARAMETER(PAR.Item_Structure_Group_Code);
  PARAMETER(PAR.Item_Structure_Class_Code);
  PARAMETER(PAR.Primal_Group_Code);
  PARAMETER(PAR.EDI_Status_1);
  PARAMETER(PAR.EDI_Status_2);
  PARAMETER(PAR.EDI_Status_3);
  PARAMETER(PAR.Record_Status);
  PARAMETER(PAR.Job_Time);
  PARAMETER(PAR.User_Id);
  PARAMETER(PAR.Job_Name);
  PARAMETER(PAR.Job_Date);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(UPS CRTOBJ Stamp      IF) TYPE(EXCINTFUN)                      AC1359517;
   PARAMETER(DB1.Record_Status);
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Record Status = CND.Active
    PAR.Record_Status = 'A';

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*PROGRAM
    PAR.Job_Name = JOB.*PROGRAM;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

   // DB1.PS Lock Status = CND.NOT LOCKED
   DB1.PS_Lock_Status = 'N';

   //?USER: Processing if Data record already exists

   // PGM.*Return code = CND.*Normal
   PGM.*Return_code = *BLANK;

  }

 }

}


