// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLF2XFR
// ?Date: 14.08.2025 Time: 02:54:10
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?MODIFICATIONS
//?11/02/2020 ISE H16853 - CHANGE BUY ORDER NUMBER FIELD LENGTH FROM 5 TO 7
// PAR.Shipped Head Usr = CND.*Zeros
PAR.Shipped_Head_Usr = *ZERO;

// PAR.Resale Head Recv USR = CND.*Zeros
PAR.Resale_Head_Recv_USR = *ZERO;

EXECUTE FUNCTION(Rtv Shp, Resale       RT) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1265368;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.BOH_Buy_Order_Number);
PARAMETER(PAR.BOL_Load_Number);
PARAMETER(PAR.TH_Purchase_Date);
PARAMETER(PAR.Shipped_Head_Usr);
PARAMETER(PAR.Resale_Head_Recv_USR);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 QUIT;

 //?USER: Process Data record

 CASE;

 // IF PAR.TH Purchase Date EQ DB1.TH Purchase Date
 IF PAR.TH_Purchase_Date = DB1.TH_Purchase_Date;

 // PAR.Shipped Head Usr = DB1.TH Head Received + PAR.Shipped Head Usr
 PAR.Shipped_Head_Usr = DB1.TH_Head_Received + PAR.Shipped_Head_Usr;

 // PAR.Shipped Head Usr = DB1.TH Dead On Arrival + PAR.Shipped Head Usr
 PAR.Shipped_Head_Usr = DB1.TH_Dead_On_Arrival + PAR.Shipped_Head_Usr;

 CASE;

 // IF DB1.TH Hog Class Type is Resale
 IF DB1.TH_Hog_Class_Type = 'R';

 // PAR.Resale Head Recv USR = DB1.TH Head Received + PAR.Resale Head Recv USR
 PAR.Resale_Head_Recv_USR = DB1.TH_Head_Received + PAR.Resale_Head_Recv_USR;

 ENDIF;

 // IF *OTHERWISE
 IF *OTHERWISE;

 QUIT;

 ENDIF;

}


