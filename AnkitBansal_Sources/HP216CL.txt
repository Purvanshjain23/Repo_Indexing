/*                                                                 */
/*  PROGRAM NUMBER --> HP216CL                                     */
/*  PROGRAM NAME ----> DATAMART FIN: BUILD REPORTED DAILY ACTIVITY */
/*  PROGRAMMER ------> LEANNE FEDOR                                */
/*  DATE ------------> 10/23/02                                    */
/*                                                                 */
/*                                                                 */
/***************************************************************** */
/*  MODIFIED:                                                      */
/***************************************************************** */

             PGM        PARM(&PROCFL &CURBEGDT)

             DCL        VAR(&PROCFL) TYPE(*CHAR) LEN(1)
             DCL        VAR(&CURBEGDT) TYPE(*DEC) LEN(8)
             DCL        VAR(&QDATA) TYPE(*CHAR) LEN(19)


/*-------------------------------------------------------------------*/
/* IF YOU ARE MAKING A 'CURRENT' RUN, SET UP/RUN AN OPEN QUERY       */
/* OVER THE HPS REPORTED DAILY ACTIVITY.                             */
/*-------------------------------------------------------------------*/

/* ONLY SELECT RECORDS WITH A 'DAILY DATE' ON OR AFTER THE BEGINNING  */
/* WEEK DATE FOR 'CURRENT' PROCESSING IN THE DATA AREA               */

             IF         COND(&PROCFL *EQ ' ') THEN(DO)

             CHGVAR     VAR(%SST(&QDATA 1 10)) VALUE('RDDYDT *GE')
             CHGVAR     VAR(%SST(&QDATA 12 8)) VALUE(&CURBEGDT)

             OVRDBF     FILE(HSP103) SHARE(*YES)
             OPNQRYF    FILE((HSP103)) QRYSLT(&QDATA) SEQONLY(*YES)
             ENDDO


/*------------------------------------------------------------------*/
/*  CALL THE PROGRAM                                                */
/*------------------------------------------------------------------*/

             CALL       PGM(HP216) PARM(&PROCFL &CURBEGDT)

/*------------------------------------------------------------------*/
/*  IF YOU WERE DOING CURRENT PROCESSING, REMOVE THE OVERRIDES      */
/*------------------------------------------------------------------*/

             IF         COND(&PROCFL *EQ ' ') THEN(DO)
             CLOF       OPNID(HSP103)
             DLTOVR     FILE(HSP103)
             ENDDO

             ENDPGM

