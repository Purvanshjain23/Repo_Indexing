// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PUGWXFR
// ?Date: 14.08.2025 Time: 03:50:21
// ?------------------------------------------------------------------------------------------------

//?Execute user function

// Execute function Cnv Read DLDPTDTTM-BegUS.
EXECUTE FUNCTION(Cnv Read DLDPTDTTM-BegUS) TYPE(EXCUSRSRC) ('PUGXUFR');
PARAMETER(PAR.Load_ID);
PARAMETER(PAR.Deadline_Departure_Date);
PARAMETER(PAR.Deadline_Departure_Time);
{
 *
 Fdldptdttm if   e           k disk                                         DLn Dpt DtTm RawData
 *
 C                   dow       not %eof(dldptdttm)
 C                   read      dldptdttm
 *
 C                   eval      #ORMNB = DDLOAD                              Load ID
 C                   eval      #OKZDT = DDDATE                              Deadline Dpt Date
 C                   eval      #OAXTM = DDTIME                              Deadline Dpt Time
 *
}


//?Update Deadline Departure Date & Time for Load Hdr/Dtl & Order Dtl Files.
EXECUTE FUNCTION(Cnv Upd Dln Dpt Dte/TmeRT) TYPE(RTVOBJ) FILE(OMFJCPP)          AC2148881;
PARAMETER(PAR.Load_ID);
PARAMETER(PAR.Deadline_Departure_Date);
PARAMETER(PAR.Deadline_Departure_Time);
{
 //?USER: Process Data record

 //?Update Only If Deadline Departure Date or Time is Different.
 CASE;

 // IF PAR.Deadline Departure Date NE DB1.Deadline Departure Date
 IF PAR.Deadline_Departure_Date <> DB1.Deadline_Departure_Date;

 // OR PAR.Deadline Departure Time NE DB1.Deadline Departure Time
 OR PAR.Deadline_Departure_Time <> DB1.Deadline_Departure_Time;

 EXECUTE FUNCTION(CHG Deadline Dep D/T   CH) TYPE(CHGOBJ) FILE(OMFJCPP)          AC1493670;
 PARAMETER(DB1.Load_ID);
 PARAMETER(PAR.Deadline_Departure_Date);
 PARAMETER(PAR.Deadline_Departure_Time);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Date/Time Stamp   IF) TYPE(EXCINTFUN)                      AC1142219;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*JOB
   PAR.Job_Name = JOB.*JOB;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 //?Update Load Detail.
 EXECUTE FUNCTION(Cnv Upd Dln Dpt Dte/TmeRT) TYPE(RTVOBJ) FILE(OMFLCPP)          AC2148882;
 PARAMETER(DB1.Load_ID);
 PARAMETER(PAR.Deadline_Departure_Date);
 PARAMETER(PAR.Deadline_Departure_Time);
 {
  //?USER: Process Data record

  EXECUTE FUNCTION(CHG Deadline Date/Time CH) TYPE(CHGOBJ) FILE(OMFLCPP)          AC1496963;
  PARAMETER(DB1.Load_ID);
  PARAMETER(DB1.Stop_Drop_Sequence_Number);
  PARAMETER(PAR.Deadline_Depart_DT_HDR);
  PARAMETER(PAR.Deadline_Depart_Time_HDR);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Date/Time Stamp   IF) TYPE(EXCINTFUN)                      AC1142219;
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*JOB
    PAR.Job_Name = JOB.*JOB;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

   //?USER: Processing after Data update

   EXECUTE FUNCTION(Upd Deadline Dte/Tme  RT) TYPE(RTVOBJ) FILE(OPBGWKP)           AC1648968;
   PARAMETER(DB1.Company_Number);
   PARAMETER(DB1.Order_Number);
   PARAMETER(DB1.Deadline_Depart_DT_HDR);
   PARAMETER(DB1.Deadline_Depart_Time_HDR);
   {
    //?USER: Process Data record

    EXECUTE FUNCTION(Chg Deadline Dte/Tme  CH) TYPE(CHGOBJ) FILE(OPBGWKP)           AC1648969;
    PARAMETER(DB1.Company_Number);
    PARAMETER(DB1.Order_Number);
    PARAMETER(DB1.Order_Sequence_Number);
    PARAMETER(DB1.Order_Secondary_Line_Seq);
    PARAMETER(PAR.Deadline_Depart_Date_LH);
    PARAMETER(PAR.Deadline_Depart_Time_LH);
    {
     //?USER: Processing before Data update

     EXECUTE FUNCTION(Set Date/Time Stamp   IF) TYPE(EXCINTFUN)                      AC1142219;
     PARAMETER(DB1.Job_Time);
     PARAMETER(DB1.User_Id);
     PARAMETER(DB1.Job_Name);
     PARAMETER(DB1.Job_Date);
     {
      //?Execute internal function

      // PAR.Job Time = JOB.*Job time
      PAR.Job_Time = JOB.*Job_time;

      // PAR.User Id = JOB.*USER
      PAR.User_Id = JOB.*USER;

      // PAR.Job Name = JOB.*JOB
      PAR.Job_Name = JOB.*JOB;

      // PAR.Job Date = JOB.*Job date
      PAR.Job_Date = JOB.*Job_date;

     }

    }

   }

  }

 }

 ENDIF;

}


// Execute function Cnv Read DLDPTDTTM-EndUS.
EXECUTE FUNCTION(Cnv Read DLDPTDTTM-EndUS) TYPE(EXCUSRSRC) ('PUGYUFR');
{
 *
 C                   enddo                                                  dow not %eof
 *
}


