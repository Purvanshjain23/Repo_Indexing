// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PUWRXFR
// ?Date: 14.08.2025 Time: 03:51:34
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?** 06/24/22   RMC fix to update ext amounts on orders - go thru the
//?  the price audit routine to calc
// LCL.Scheduled Ship Date = PAR.Scheduled Ship Date
LCL.Scheduled_Ship_Date = PAR.Scheduled_Ship_Date;

CASE;

// IF PAR.Scheduled Ship Date is not entered
IF PAR.Scheduled_Ship_Date = *ZERO;

// LCL.Scheduled Ship Date = JOB.*Job date
LCL.Scheduled_Ship_Date = JOB.*Job_date;

ENDIF;

EXECUTE FUNCTION(RTV Opn orders to POST RT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC2206314;
PARAMETER(LCL.Scheduled_Ship_Date);
{
 //?USER: Process Data record

 //?LF includes "A" and "H" and "R"-so exclude R here
 CASE;

 // IF DB1.Scheduled Ship Date GT PAR.Scheduled Ship Date
 IF DB1.Scheduled_Ship_Date > PAR.Scheduled_Ship_Date;

 QUIT;

 ENDIF;

 CASE;

 // IF DB1.Order in Use is yes
 IF DB1.Order_in_Use = 'Y';

 // OR DB1.Header Status is Confirmed
 OR DB1.Header_Status = 'R';

 // OR DB1.Order Value Total is greater than zero
 OR DB1.Order_Value_Total > *ZERO;

 // OR DB1.Order Type - Sales is Not Regular Order
 OR DB1.Order_Type_Sales <> 'OR';

 // IF *OTHERWISE
 IF *OTHERWISE;

 // WRK.Order Value Total = DB1.Order Value Total
 WRK.Order_Value_Total = DB1.Order_Value_Total;

 // WRK.Order Weight Total = DB1.Order Weight Total
 WRK.Order_Weight_Total = DB1.Order_Weight_Total;

 // Call program EDT Post Open Orders   XF.
 CALL PROGRAM(EDT Post Open Orders   XF) ('PDHRXFR');
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Ship_To_Customer);
 PARAMETER(WRK.Order_Value_Total);
 PARAMETER(WRK.Order_Weight_Total);
 PARAMETER('OE');

 ENDIF;

}


