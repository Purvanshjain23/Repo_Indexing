// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBWEDFR
// ?Date: 14.08.2025 Time: 03:49:33
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?Modifications and Comments
DO;

//?E4687 JJH 02/24/16 - Load Scheduling Position for Mercury Gate
//?- Display MG Load Stop, a file that is uploaded from Mercury Gate
ENDDO;

// LCL.First Time Flag = CND.Yes
LCL.First_Time_Flag = 'Y';

//?USER: Initialize subfile control

CASE;

// IF LCL.First Time Flag is Yes
IF LCL.First_Time_Flag = 'Y';

// CTL.MG Scheduled Ship Date = JOB.*Job date
CTL.MG_Scheduled_Ship_Date = JOB.*Job_date;

// LCL.First Time Flag = CND.NO
LCL.First_Time_Flag = 'N';

// IF CTL.MG Scheduled Ship Date is not entered
IF CTL.MG_Scheduled_Ship_Date = *ZERO;

// CTL.MG Scheduled Ship Date = JOB.*Job date
CTL.MG_Scheduled_Ship_Date = JOB.*Job_date;

ENDIF;

//?USER: Initialize subfile record from DBF record

EXECUTE FUNCTION(MG Load Stop Type Des DRV) TYPE(DRVFLD)                        AC2120524;
PARAMETER(RCD.MG_Load_Stop_Type_Des_DRV);
PARAMETER(RCD.MG_Load_Stop_Type);

//?USER: Process subfile record (Pre-confirm)

//?5=Display Load Stop Orders
CASE;

// IF RCD.*SFLSEL is *5
IF RCD.*SFLSEL = '5';

// Call program Dsp MG Load Stop      DT.
CALL PROGRAM(Dsp MG Load Stop      DT) ('PBWDDTR');
PARAMETER(*MISSING);
PARAMETER(RCD.MG_Load_ID);
PARAMETER(RCD.MG_Load_Stop_Seq);

ENDIF;

