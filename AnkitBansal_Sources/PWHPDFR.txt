// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PWHPDFR
// ?Date: 14.08.2025 Time: 02:56:29
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?Modification history
DO;

//?11/08/2018 JBB E13669 - Fixing Negative Checks
//?   When a Tattoo is entered on the WW Re-Evaluation Unpaid Tattoos
//?   screen PKA3DFR, and F16 is pressed to select a Tattoo for
//?   repayment, this screen will show all Tattoos on the same Buy
//?   Order Load.  All Tattoos on the Buy Order Load need to be
//?   recalculated so that the spread can be calculated correctly.
ENDDO;

EXECUTE FUNCTION(Rtv Buy Order & Load# RT) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1347211;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.TH_Kill_Date);
PARAMETER(PAR.TH_Tattoo_Number);
PARAMETER(PAR.BOH_Buy_Order_Number);
PARAMETER(PAR.BOL_Load_Number);

//?USER: Initialize subfile control

// CTL.TH Kill Date = PAR.TH Kill Date
CTL.TH_Kill_Date = PAR.TH_Kill_Date;

//?USER: Initialize subfile record from DBF record

// PGM.*Re-read Subfile Record = CND.*YES
PGM.*Re_read_Subfile_Record = 1;

//?USER: Process subfile record (Post-confirm)

// Call program Chg Re-Evl UnpTatCarc XF.
CALL PROGRAM(Chg Re-Evl UnpTatCarc XF) ('PLWSXFR');
PARAMETER(RCD.BOH_Company_Number);
PARAMETER(RCD.TH_Tattoo_Number);
PARAMETER(RCD.TH_Kill_Date);
PARAMETER(*BLANK);
PARAMETER(*BLANK);
PARAMETER('T');
PARAMETER(PAR.Kill_Date_2_USR);
PARAMETER(PAR.Carcass_Detail_Remove_Usr);

//?USER: Final processing (Post-confirm)

RETURN;

