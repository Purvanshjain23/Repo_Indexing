// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBQTXFR
// ?Date: 14.08.2025 Time: 03:49:02
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(RTV/CHG GTIN by Item   RT) TYPE(RTVOBJ) FILE(PBBTREP)          AC2103308;
PARAMETER(1);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 EXECUTE FUNCTION(RTV GTIN by item       RT) TYPE(RTVOBJ) FILE(PBBYCPP)          AC2103306;
 PARAMETER(DB1.Item_Code);
 PARAMETER(PAR.IDE_GTIN);
 {
  //?USER: Processing if Data record not found

  // PGM.*Return code = CND.*Record does not exist
  PGM.*Return_code = 'Y2U0005';

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

  // PGM.*Return code = CND.*Normal
  PGM.*Return_code = *BLANK;

 }

 CASE;

 // IF PGM.*Return code is *Normal
 IF PGM.*Return_code = *BLANK;

 EXECUTE FUNCTION(Chg Item Default Ext  CH) TYPE(CHGOBJ) FILE(PBBTREP)           AC2094782;
 PARAMETER(DB1.Item_Code);
 PARAMETER(PAR.IDE_GTIN);
 PARAMETER(DB1.IDE_Forecast_in_DP);
 PARAMETER(DB1.IDE_Unused_Sts_1_2);
 PARAMETER(DB1.IDE_Report_to_USDA_MPR);
 PARAMETER(DB1.IDE_Regulation_Code_ID);
 PARAMETER(DB1.IDE_Unused_Sts_2_3);
 PARAMETER(DB1.IDE_Unused_Sts_2_4);
 PARAMETER(DB1.IDE_Pallet_Tiers);
 PARAMETER(DB1.IDE_Pallet_Blocks);
 PARAMETER(DB1.Spanish_Description);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(DB1.Record_Status);
 PARAMETER(DB1.Create_Date);
 PARAMETER(DB1.Create_Time);
 PARAMETER(DB1.Create_User);
 PARAMETER(DB1.Create_Program);
 PARAMETER(DB1.Change_Date);
 PARAMETER(DB1.Change_Time);
 PARAMETER(DB1.Change_User);
 PARAMETER(DB1.Change_Program);
 {
  //?USER: Processing before Data update

  // DB1.Change Date = JOB.*Job date
  DB1.Change_Date = JOB.*Job_date;

  // DB1.Change Time = JOB.*Job time
  DB1.Change_Time = JOB.*Job_time;

  // DB1.Change User = JOB.*USER
  DB1.Change_User = JOB.*USER;

  // DB1.Change Program = JOB.*PROGRAM
  DB1.Change_Program = JOB.*PROGRAM;

 }

 ENDIF;

}


