// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PUPTXFR
// ?Date: 14.08.2025 Time: 03:51:05
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?**************************************************************************
//?** PR1 Parms Represent Old Record Fields (Will be blank for Insert).
//?** PR2 Parms Represent New Record Fields (Will be blank for Delete).
//?**************************************************************************
//?Trigger Processing for Insert Event.
CASE;

// IF PR3.TRG Database Event is Insert
IF PR3.TRG_Database_Event = '1';

EXECUTE FUNCTION(Crt Order Dtl SchedTRG CR) TYPE(CRTOBJ) FILE(PUBWCPP)          AC2182293;
PARAMETER(PR2.Company_Number);
PARAMETER(PR2.Order_Number);
PARAMETER(PR2.Order_Sequence_Number);
PARAMETER(PR2.Order_Secondary_Line_Seq);
PARAMETER(PR2.OD_Production_Date);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.ODS_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


//?If Record Already Exist.
CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Date);
PARAMETER(LCL.Current_System_Time);

// WRK.Current System Time = LCL.Current System Time
WRK.Current_System_Time = LCL.Current_System_Time;

//?S17018 DN 12/14/20-Loop Until System Time Changes.
// DOW LCL.Current System Time EQ WRK.Current System Time
DOW LCL.Current_System_Time = WRK.Current_System_Time;

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Date);
PARAMETER(WRK.Current_System_Time);

ENDDO;

EXECUTE FUNCTION(Crt Order Dtl SchedTRG CR) TYPE(CRTOBJ) FILE(PUBWCPP)          AC2182293;
PARAMETER(PR1.Company_Number);
PARAMETER(PR1.Order_Number);
PARAMETER(PR1.Order_Sequence_Number);
PARAMETER(PR1.Order_Secondary_Line_Seq);
PARAMETER(PR1.OD_Production_Date);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.ODS_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

ENDIF;

//?Trigger Processing for Update Event.
CASE;

// IF PR3.TRG Database Event is Update
IF PR3.TRG_Database_Event = '3';

//?Update If Any Non-Key Fields Have Changed.
CASE;

// IF PR1.Scheduled Ship Date NE PR2.Scheduled Ship Date
IF PR1.Scheduled_Ship_Date <> PR2.Scheduled_Ship_Date;

// OR PR1.Warehouse Code NE PR2.Warehouse Code
OR PR1.Warehouse_Code <> PR2.Warehouse_Code;

// OR PR1.Order From Warehouse NE PR2.Order From Warehouse
OR PR1.Order_From_Warehouse <> PR2.Order_From_Warehouse;

// OR PR1.Item Code NE PR2.Item Code
OR PR1.Item_Code <> PR2.Item_Code;

// OR PR1.OD Qty/Cnsmd Pieces Sched NE PR2.OD Qty/Cnsmd Pieces Sched
OR PR1.OD_Qty_Cnsmd_Pieces_Sched <> PR2.OD_Qty_Cnsmd_Pieces_Sched;

// OR PR1.OD Weight Scheduled NE PR2.OD Weight Scheduled
OR PR1.OD_Weight_Scheduled <> PR2.OD_Weight_Scheduled;

// OR PR1.OD Quantity Inv Sched NE PR2.OD Quantity Inv Sched
OR PR1.OD_Quantity_Inv_Sched <> PR2.OD_Quantity_Inv_Sched;

// OR PR1.OD Weight Inv Sched NE PR2.OD Weight Inv Sched
OR PR1.OD_Weight_Inv_Sched <> PR2.OD_Weight_Inv_Sched;

// OR PR1.OD Quantity Unused 1 NE PR2.OD Quantity Unused 1
OR PR1.OD_Quantity_Unused_1 <> PR2.OD_Quantity_Unused_1;

// OR PR1.OD Unused weight 1 NE PR2.OD Unused weight 1
OR PR1.OD_Unused_weight_1 <> PR2.OD_Unused_weight_1;

// OR PR1.OD Added to Sched Today NE PR2.OD Added to Sched Today
OR PR1.OD_Added_to_Sched_Today <> PR2.OD_Added_to_Sched_Today;

// OR PR1.OD Reallocate Sts NE PR2.OD Reallocate Sts
OR PR1.OD_Reallocate_Sts <> PR2.OD_Reallocate_Sts;

// OR PR1.OD Status Unused 3 NE PR2.OD Status Unused 3
OR PR1.OD_Status_Unused_3 <> PR2.OD_Status_Unused_3;

// OR PR1.EDI Status 1 NE PR2.EDI Status 1
OR PR1.EDI_Status_1 <> PR2.EDI_Status_1;

// OR PR1.EDI Status 2 NE PR2.EDI Status 2
OR PR1.EDI_Status_2 <> PR2.EDI_Status_2;

// OR PR1.EDI Status 3 NE PR2.EDI Status 3
OR PR1.EDI_Status_3 <> PR2.EDI_Status_3;

// OR PR1.Record Status NE PR2.Record Status
OR PR1.Record_Status <> PR2.Record_Status;

EXECUTE FUNCTION(Crt Order Dtl SchedTRG CR) TYPE(CRTOBJ) FILE(PUBWCPP)          AC2182293;
PARAMETER(PR2.Company_Number);
PARAMETER(PR2.Order_Number);
PARAMETER(PR2.Order_Sequence_Number);
PARAMETER(PR2.Order_Secondary_Line_Seq);
PARAMETER(PR2.OD_Production_Date);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.ODS_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


//?If Record Already Exist.
CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Date);
PARAMETER(LCL.Current_System_Time);

// WRK.Current System Time = LCL.Current System Time
WRK.Current_System_Time = LCL.Current_System_Time;

//?S17018 DN 11/24/20-Loop Until System Time Changes.
// DOW LCL.Current System Time EQ WRK.Current System Time
DOW LCL.Current_System_Time = WRK.Current_System_Time;

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Date);
PARAMETER(WRK.Current_System_Time);

ENDDO;

EXECUTE FUNCTION(Crt Order Dtl SchedTRG CR) TYPE(CRTOBJ) FILE(PUBWCPP)          AC2182293;
PARAMETER(PR1.Company_Number);
PARAMETER(PR1.Order_Number);
PARAMETER(PR1.Order_Sequence_Number);
PARAMETER(PR1.Order_Secondary_Line_Seq);
PARAMETER(PR1.OD_Production_Date);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.ODS_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

ENDIF;

ENDIF;

//?Trigger Processing for Delete Event.
CASE;

// IF PR3.TRG Database Event is Delete
IF PR3.TRG_Database_Event = '2';

EXECUTE FUNCTION(Crt Order Dtl SchedTRG CR) TYPE(CRTOBJ) FILE(PUBWCPP)          AC2182293;
PARAMETER(PR1.Company_Number);
PARAMETER(PR1.Order_Number);
PARAMETER(PR1.Order_Sequence_Number);
PARAMETER(PR1.Order_Secondary_Line_Seq);
PARAMETER(PR1.OD_Production_Date);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.ODS_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


//?If Record Already Exist.
CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Date);
PARAMETER(LCL.Current_System_Time);

// WRK.Current System Time = LCL.Current System Time
WRK.Current_System_Time = LCL.Current_System_Time;

//?S17018 DN  12/14/20-Loop Until System Time Changes.
// DOW LCL.Current System Time EQ WRK.Current System Time
DOW LCL.Current_System_Time = WRK.Current_System_Time;

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Date);
PARAMETER(WRK.Current_System_Time);

ENDDO;

EXECUTE FUNCTION(Crt Order Dtl SchedTRG CR) TYPE(CRTOBJ) FILE(PUBWCPP)          AC2182293;
PARAMETER(PR1.Company_Number);
PARAMETER(PR1.Order_Number);
PARAMETER(PR1.Order_Sequence_Number);
PARAMETER(PR1.Order_Secondary_Line_Seq);
PARAMETER(PR1.OD_Production_Date);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.ODS_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

ENDIF;

