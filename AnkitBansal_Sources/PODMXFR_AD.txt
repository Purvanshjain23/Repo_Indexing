// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PODMXFR
// ?Date: 14.08.2025 Time: 03:36:48
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Read all rcds to purge) TYPE(RTVOBJ) FILE(OMF0CPP)             AC1592661;
PARAMETER(PAR.Purge_Date_USR);
{
 //?USER: Initialize routine

 // WRK.First Time Flag = CND.Yes
 WRK.First_Time_Flag = 'Y';

 // WRK.Commodity Market Code USR = CON.ZZZ
 WRK.Commodity_Market_Code_USR = 'ZZZ';

 //?***** Change Log and Comments
 DO;

 //?*****
 //?** 05/01/2008 LJB FP1009
 //?** Skip purging any commodity code of "ZZZ" regardless of
 //?** the date
 //?*****
 //?** 09/13/2007 LJB FP1009
 //?** Remove from and to date, pass in the purge through date
 //?*****
 ENDDO;

 //?USER: Process Data record

 //?** Skip purging Commodity Mkt Code of "ZZZ", purge the rest by date
 CASE;

 // IF DB1.Commodity Market Code NE WRK.Commodity Market Code USR
 IF DB1.Commodity_Market_Code <> WRK.Commodity_Market_Code_USR;

 EXECUTE FUNCTION(CRT OM Comm Mkt Prc-Purge) TYPE(CRTOBJ) FILE(OMF0CPP)          AC1592666;
 PARAMETER(DB1.Commodity_Market_Code);
 PARAMETER(DB1.Commodity_Price_Group);
 PARAMETER(DB1.Market_Price_Date);
 PARAMETER(DB1.Commodity_Market_Price);
 PARAMETER(DB1.Projected_Market_Price);
 PARAMETER(DB1.EDI_Status_1);
 PARAMETER(DB1.EDI_Status_2);
 PARAMETER(DB1.EDI_Status_3);
 PARAMETER(DB1.Record_Status);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
 EXECUTE FUNCTION(DLT OM Commod Mrkt/Prc DL) TYPE(DLTOBJ) FILE(OMF0CPP)          AC1185927;
 PARAMETER(DB1.Commodity_Market_Code);
 PARAMETER(DB1.Commodity_Price_Group);
 PARAMETER(DB1.Market_Price_Date);
 ENDIF;

}


