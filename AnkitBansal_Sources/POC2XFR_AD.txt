// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POC2XFR
// ?Date: 14.08.2025 Time: 03:36:46
// ?------------------------------------------------------------------------------------------------

//?Execute user function

CASE;

// IF PAR.Commodity Market Code is Not Seaboard
IF PAR.Commodity_Market_Code <> 'SBD';

EXECUTE FUNCTION(RTV Copy Commod Mkt Pr1RT) TYPE(RTVOBJ) FILE(OMFZREP)          AC1593745;
PARAMETER(PAR.Commodity_Market_Code);
PARAMETER(PAR.Date_From_USR);
PARAMETER(PAR.Date_To_USR);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Commodity Price Group is CUTOUT
 IF DB1.Commodity_Price_Group = 'CUTOUT';

 // AND PAR.Commodity Market Code is Default Market Code(USD)
 AND PAR.Commodity_Market_Code = 'USD';

 // IF *OTHERWISE
 IF *OTHERWISE;

 EXECUTE FUNCTION(RTV Previous to Copy1  RT) TYPE(RTVOBJ) FILE(OMF0CPP)          AC1593661;
 PARAMETER(PAR.Commodity_Market_Code);
 PARAMETER(DB1.Commodity_Price_Group);
 PARAMETER(PAR.Date_From_USR);
 PARAMETER(PAR.Date_To_USR);
 {
  //?USER: Processing if Data record not found

  CASE;

  // IF PAR.Commodity Market Code is Seaboard
  IF PAR.Commodity_Market_Code = 'SBD';

  EXECUTE FUNCTION(CRT OM Commod Mrkt/Prc CR) TYPE(CRTOBJ) FILE(OMF0CPP)          AC1185925;
  PARAMETER(PAR.Commodity_Market_Code);
  PARAMETER(PAR.Commodity_Price_Group);
  PARAMETER(PAR.Date_To_USR);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*BLANK);
  PARAMETER(*BLANK);
  PARAMETER(*BLANK);
  PARAMETER('A');
  PARAMETER(*ZERO);
  PARAMETER(*BLANK);
  PARAMETER(*BLANK);
  PARAMETER(*ZERO);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Date/Time Stamp   IF) TYPE(EXCINTFUN)                      AC1142219;
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*JOB
    PAR.Job_Name = JOB.*JOB;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

  }

  ENDIF;

  //?USER: Process Data record

  EXECUTE FUNCTION(CRT OM Commod Mrkt/Prc CR) TYPE(CRTOBJ) FILE(OMF0CPP)          AC1185925;
  PARAMETER(DB1.Commodity_Market_Code);
  PARAMETER(DB1.Commodity_Price_Group);
  PARAMETER(PAR.Date_To_USR);
  PARAMETER(DB1.Commodity_Market_Price);
  PARAMETER(DB1.Projected_Market_Price);
  PARAMETER(DB1.EDI_Status_1);
  PARAMETER(DB1.EDI_Status_2);
  PARAMETER(DB1.EDI_Status_3);
  PARAMETER(DB1.Record_Status);
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Date/Time Stamp   IF) TYPE(EXCINTFUN)                      AC1142219;
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*JOB
    PAR.Job_Name = JOB.*JOB;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

  }

 }

 // Call program UPD Prc Ad Mkt Prc ADD XF.
 CALL PROGRAM(UPD Prc Ad Mkt Prc ADD XF) ('PDP3XFR');
 PARAMETER('OMF0CPP');
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(PAR.Commodity_Market_Code);
 PARAMETER(DB1.Commodity_Price_Group);
 PARAMETER(PAR.Date_To_USR);
 PARAMETER('N');
 PARAMETER('Y');
 PARAMETER('N');
 PARAMETER('N');

 ENDIF;

}


// IF *OTHERWISE
IF *OTHERWISE;

EXECUTE FUNCTION(Rtv Copy Market Prcs  RT) TYPE(RTVOBJ) FILE(PNF1REP)           AC1981722;
PARAMETER(PAR.Commodity_Market_Code);
PARAMETER(PAR.Sales_Type_Code);
PARAMETER(PAR.Date_From_USR);
PARAMETER(PAR.Date_To_USR);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(RTV Previous to Copy1  RT) TYPE(RTVOBJ) FILE(OMF0CPP)          AC1593661;
 PARAMETER(PAR.Commodity_Market_Code);
 PARAMETER(DB1.Commodity_Price_Group);
 PARAMETER(PAR.Date_From_USR);
 PARAMETER(PAR.Date_To_USR);
 {
  //?USER: Processing if Data record not found

  CASE;

  // IF PAR.Commodity Market Code is Seaboard
  IF PAR.Commodity_Market_Code = 'SBD';

  EXECUTE FUNCTION(CRT OM Commod Mrkt/Prc CR) TYPE(CRTOBJ) FILE(OMF0CPP)          AC1185925;
  PARAMETER(PAR.Commodity_Market_Code);
  PARAMETER(PAR.Commodity_Price_Group);
  PARAMETER(PAR.Date_To_USR);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*BLANK);
  PARAMETER(*BLANK);
  PARAMETER(*BLANK);
  PARAMETER('A');
  PARAMETER(*ZERO);
  PARAMETER(*BLANK);
  PARAMETER(*BLANK);
  PARAMETER(*ZERO);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Date/Time Stamp   IF) TYPE(EXCINTFUN)                      AC1142219;
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*JOB
    PAR.Job_Name = JOB.*JOB;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

  }

  ENDIF;

  //?USER: Process Data record

  EXECUTE FUNCTION(CRT OM Commod Mrkt/Prc CR) TYPE(CRTOBJ) FILE(OMF0CPP)          AC1185925;
  PARAMETER(DB1.Commodity_Market_Code);
  PARAMETER(DB1.Commodity_Price_Group);
  PARAMETER(PAR.Date_To_USR);
  PARAMETER(DB1.Commodity_Market_Price);
  PARAMETER(DB1.Projected_Market_Price);
  PARAMETER(DB1.EDI_Status_1);
  PARAMETER(DB1.EDI_Status_2);
  PARAMETER(DB1.EDI_Status_3);
  PARAMETER(DB1.Record_Status);
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Date/Time Stamp   IF) TYPE(EXCINTFUN)                      AC1142219;
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*JOB
    PAR.Job_Name = JOB.*JOB;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

  }

 }

 // Call program UPD Prc Ad Mkt Prc ADD XF.
 CALL PROGRAM(UPD Prc Ad Mkt Prc ADD XF) ('PDP3XFR');
 PARAMETER('OMF0CPP');
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(PAR.Commodity_Market_Code);
 PARAMETER(DB1.Commodity_Price_Group);
 PARAMETER(PAR.Date_To_USR);
 PARAMETER('N');
 PARAMETER('Y');
 PARAMETER('N');
 PARAMETER('N');

}


ENDIF;

// Call program EDT Edit Commd mrkt pr1EF.
CALL PROGRAM(EDT Edit Commd mrkt pr1EF) ('POC3EFR');
PARAMETER(PAR.Commodity_Market_Code);
PARAMETER(PAR.Date_To_USR);
PARAMETER(PAR.Date_From_USR);
PARAMETER(PAR.Sales_Type_Code);

