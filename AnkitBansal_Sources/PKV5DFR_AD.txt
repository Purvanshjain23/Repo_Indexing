// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKV5DFR
// ?Date: 14.08.2025 Time: 02:53:07
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?Modifications and comments
DO;

//?H16853 ISE 11/03/20 - Increased the Buy Order Number field
//?                      length from 5 to 7.
ENDDO;

//?USER: Initialize subfile control

EXECUTE FUNCTION(TH Avg Live Wgt DRV) TYPE(DRVFLD)                              AB1148655;
PARAMETER(CTL.TH_Avg_Live_Wgt_DRV);
PARAMETER(CTL.CC_Company_Number);
PARAMETER(WRK.@Status_Rnd_Trn);
{
 //?Calculate derived field

 CASE;

 // IF PAR.@Status (Rnd/Trn) is Rounded
 IF PAR.@Status_Rnd_Trn = 'R';

 // PAR.TH Avg Live Wgt DRV = PAR.TH Avg Live Wgt * CON.1 *Rounded
 PAR.TH_Avg_Live_Wgt_DRV = PAR.TH_Avg_Live_Wgt * 1 'H';

 // IF PAR.@Status (Rnd/Trn) is Truncated
 IF PAR.@Status_Rnd_Trn = 'T';

 // PAR.TH Avg Live Wgt DRV = PAR.TH Avg Live Wgt
 PAR.TH_Avg_Live_Wgt_DRV = PAR.TH_Avg_Live_Wgt;

 ENDIF;

}


//?CALC: Subfile control function fields

EXECUTE FUNCTION(TH Avg Live Wgt DRV) TYPE(DRVFLD)                              AB1148655;
PARAMETER(CTL.TH_Avg_Live_Wgt_DRV);
PARAMETER(*ZERO);
PARAMETER(WRK.@Status_Rnd_Trn);
{
 //?Calculate derived field

 CASE;

 // IF PAR.@Status (Rnd/Trn) is Rounded
 IF PAR.@Status_Rnd_Trn = 'R';

 // PAR.TH Avg Live Wgt DRV = PAR.TH Avg Live Wgt * CON.1 *Rounded
 PAR.TH_Avg_Live_Wgt_DRV = PAR.TH_Avg_Live_Wgt * 1 'H';

 // IF PAR.@Status (Rnd/Trn) is Truncated
 IF PAR.@Status_Rnd_Trn = 'T';

 // PAR.TH Avg Live Wgt DRV = PAR.TH Avg Live Wgt
 PAR.TH_Avg_Live_Wgt_DRV = PAR.TH_Avg_Live_Wgt;

 ENDIF;

}


