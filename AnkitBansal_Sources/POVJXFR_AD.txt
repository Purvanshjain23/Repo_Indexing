// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POVJXFR
// ?Date: 14.08.2025 Time: 03:39:10
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Pgm 25 Populate Yld Production Summ Rcds from Yld Dtl Trans,Yld Dtl Adj
EXECUTE FUNCTION(Rtv Crt Yld Prd Summ  RT) TYPE(RTVOBJ) FILE(POCPCPP)           AC1664737;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Department_Code);
PARAMETER(PAR.Production_Line_Code);
PARAMETER(PAR.Production_Date);
PARAMETER(PAR.Production_Shift);
{
 //?USER: Process Data record

 //?Item Code Break
 CASE;

 // IF DB1.Item Code NE PAR.Item Code
 IF DB1.Item_Code <> PAR.Item_Code;

 CASE;

 // IF PAR.Production Wgt is Not equal zero
 IF PAR.RM_Production_Wgt <> *ZERO;

 // OR PAR.Beginning Inventory Wgt is Not equal zero
 OR PAR.Beginning_WIP_Inv_Wgt <> *ZERO;

 // OR PAR.Ending Inventory Wgt is Not equal zero
 OR PAR.Ending_WIP_Inv_Wgt <> *ZERO;

 // OR PAR.Consumed Wgt is Not equal zero
 OR PAR.Product_Delete_Wgt <> *ZERO;

 EXECUTE FUNCTION(Rtv Upd YDP Summ      RT) TYPE(RTVOBJ) FILE(POCTCPP)           AC1664746;
 PARAMETER(PAR.Company_Number);
 PARAMETER(PAR.Department_Code);
 PARAMETER(PAR.Production_Line_Code);
 PARAMETER(PAR.Production_Date);
 PARAMETER(PAR.Production_Shift);
 PARAMETER(PAR.Item_Code);
 PARAMETER(PAR.Item_Type_Code);
 PARAMETER(PAR.Partial_Item_Code);
 PARAMETER(PAR.Credit_Item_Status);
 PARAMETER(PAR.Item_Structure_Type_Code);
 PARAMETER(PAR.Item_Structure_Group_Code);
 PARAMETER(PAR.Item_Structure_Class_Code);
 PARAMETER(PAR.Production_Qty);
 PARAMETER(PAR.RM_Production_Wgt);
 PARAMETER(PAR.Beginning_WIP_Inv_Qty);
 PARAMETER(PAR.Beginning_WIP_Inv_Wgt);
 PARAMETER(PAR.Ending_WIP_Inv_Qty);
 PARAMETER(PAR.Ending_WIP_Inv_Wgt);
 PARAMETER(PAR.Product_Delete_Qty);
 PARAMETER(PAR.Product_Delete_Wgt);
 {
  //?USER: Processing if Data record not found

  // Compute: Ending Inv qty
  LCL.Ending_WIP_Inv_Qty = ( PAR.Beginning_WIP_Inv_Qty - PAR.Product_Delete_Qty )
  + PAR.Ending_WIP_Inv_Qty;

  // Compute: Ending Inv wgt
  LCL.Ending_WIP_Inv_Wgt = ( PAR.Beginning_WIP_Inv_Wgt - PAR.Product_Delete_Wgt )
  + PAR.Ending_WIP_Inv_Wgt;

  EXECUTE FUNCTION(Crt Yld Dly Prod Sum  CR) TYPE(CRTOBJ) FILE(POCTCPP)           AC1664743;
  PARAMETER(PAR.Company_Number);
  PARAMETER(PAR.Department_Code);
  PARAMETER(PAR.Production_Line_Code);
  PARAMETER(PAR.Production_Date);
  PARAMETER(PAR.Production_Shift);
  PARAMETER(PAR.Item_Code);
  PARAMETER(PAR.Item_Type_Code);
  PARAMETER(PAR.Partial_Item_Code);
  PARAMETER(PAR.Credit_Item_Status);
  PARAMETER(PAR.Item_Structure_Type_Code);
  PARAMETER(PAR.Item_Structure_Group_Code);
  PARAMETER(PAR.Item_Structure_Class_Code);
  PARAMETER(PAR.Production_Qty);
  PARAMETER(PAR.RM_Production_Wgt);
  PARAMETER(PAR.Beginning_WIP_Inv_Qty);
  PARAMETER(PAR.Beginning_WIP_Inv_Wgt);
  PARAMETER(LCL.Ending_WIP_Inv_Qty);
  PARAMETER(LCL.Ending_WIP_Inv_Wgt);
  PARAMETER(PAR.Product_Delete_Qty);
  PARAMETER(PAR.Product_Delete_Wgt);
  PARAMETER(*BLANK);
  PARAMETER('O');
  PARAMETER(WRK.EDI_Status_1);
  PARAMETER(WRK.EDI_Status_2);
  PARAMETER(WRK.EDI_Status_3);
  PARAMETER('A');
  PARAMETER(*ZERO);
  PARAMETER(*BLANK);
  PARAMETER(*BLANK);
  PARAMETER(*ZERO);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(SET Record Stamp CRTOB IF) TYPE(EXCINTFUN)                     AC1282865;
   PARAMETER(DB1.Record_Status);
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Record Status = CND.Active
    PAR.Record_Status = 'A';

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*PROGRAM
    PAR.Job_Name = JOB.*PROGRAM;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

  }

  //?USER: Process Data record

  // LCL.Production Qty = DB1.Production Qty + PAR.Production Qty
  LCL.Production_Qty = DB1.Production_Qty + PAR.Production_Qty;

  // LCL.Production Wgt = DB1.Production Wgt + PAR.Production Wgt
  LCL.RM_Production_Wgt = DB1.RM_Production_Wgt + PAR.RM_Production_Wgt;

  // LCL.Beginning Inventory Qty = DB1.Beginning Inventory Qty + PAR.Beginning Inventory Qty
  LCL.Beginning_WIP_Inv_Qty = DB1.Beginning_WIP_Inv_Qty + PAR.Beginning_WIP_Inv_Qty;

  // LCL.Beginning Inventory Wgt = DB1.Beginning Inventory Wgt + PAR.Beginning Inventory Wgt
  LCL.Beginning_WIP_Inv_Wgt = DB1.Beginning_WIP_Inv_Wgt + PAR.Beginning_WIP_Inv_Wgt;

  // LCL.Consumed Qty = DB1.Consumed Qty + PAR.Consumed Qty
  LCL.Product_Delete_Qty = DB1.Product_Delete_Qty + PAR.Product_Delete_Qty;

  // LCL.Consumed Wgt = DB1.Consumed Wgt + PAR.Consumed Wgt
  LCL.Product_Delete_Wgt = DB1.Product_Delete_Wgt + PAR.Product_Delete_Wgt;

  // Compute: Ending Inv qty
  LCL.Ending_WIP_Inv_Qty = DB1.Ending_WIP_Inv_Qty + ( ( PAR.Beginning_WIP_Inv_Qty
  - PAR.Product_Delete_Qty ) + PAR.Ending_WIP_Inv_Qty );

  // Compute: Ending Inv wgt
  LCL.Ending_WIP_Inv_Wgt = DB1.Ending_WIP_Inv_Wgt + ( ( PAR.Beginning_WIP_Inv_Wgt
  - PAR.Product_Delete_Wgt ) + PAR.Ending_WIP_Inv_Wgt );

  EXECUTE FUNCTION(Chg Yld Dly Prod Sum  CH) TYPE(CHGOBJ) FILE(POCTCPP)           AC1664744;
  PARAMETER(DB1.Company_Number);
  PARAMETER(DB1.Department_Code);
  PARAMETER(DB1.Production_Line_Code);
  PARAMETER(DB1.Production_Date);
  PARAMETER(DB1.Production_Shift);
  PARAMETER(DB1.Item_Code);
  PARAMETER(DB1.Item_Type_Code);
  PARAMETER(DB1.Partial_Item_Code);
  PARAMETER(DB1.Credit_Item_Status);
  PARAMETER(DB1.Item_Structure_Type_Code);
  PARAMETER(DB1.Item_Structure_Group_Code);
  PARAMETER(DB1.Item_Structure_Class_Code);
  PARAMETER(LCL.Production_Qty);
  PARAMETER(LCL.RM_Production_Wgt);
  PARAMETER(LCL.Beginning_WIP_Inv_Qty);
  PARAMETER(LCL.Beginning_WIP_Inv_Wgt);
  PARAMETER(LCL.Ending_WIP_Inv_Qty);
  PARAMETER(LCL.Ending_WIP_Inv_Wgt);
  PARAMETER(LCL.Product_Delete_Qty);
  PARAMETER(LCL.Product_Delete_Wgt);
  PARAMETER(DB1.YDS_Comment);
  PARAMETER(DB1.YDS_Post_Status);
  PARAMETER(DB1.EDI_Status_1);
  PARAMETER(DB1.EDI_Status_2);
  PARAMETER(DB1.EDI_Status_3);
  PARAMETER(DB1.Record_Status);
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*PROGRAM
    PAR.Job_Name = JOB.*PROGRAM;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

  }

 }

 ENDIF;

 MOVE *ALL (To: PAR From: DB1);

 // PAR.Beginning Inventory Qty = CON.*ZERO
 PAR.Beginning_WIP_Inv_Qty = *ZERO;

 // PAR.Beginning Inventory Wgt = CON.*ZERO
 PAR.Beginning_WIP_Inv_Wgt = *ZERO;

 // PAR.Product Delete Qty = CON.*ZERO
 PAR.Product_Delete_Qty = *ZERO;

 // PAR.Product Delete Wgt = CON.*ZERO
 PAR.Product_Delete_Wgt = *ZERO;

 // PAR.Ending Inventory Qty = CON.*ZERO
 PAR.Ending_WIP_Inv_Qty = *ZERO;

 // PAR.Ending Inventory Wgt = CON.*ZERO
 PAR.Ending_WIP_Inv_Wgt = *ZERO;

 // PAR.Production Qty = CON.*ZERO
 PAR.Production_Qty = *ZERO;

 // PAR.Production Wgt = CON.*ZERO
 PAR.RM_Production_Wgt = *ZERO;

 ENDIF;

 //?Accum Transactions by Type
 CASE;

 // IF DB1.Yld Transaction Code is Production
 IF DB1.Yld_Transaction_Code = 'RR';

 // PAR.Production Qty = PAR.Production Qty + DB1.Yld Transaction Quantity
 PAR.Production_Qty = PAR.Production_Qty + DB1.Yld_Transaction_Quantity;

 // PAR.Production Wgt = PAR.Production Wgt + DB1.Yld Transaction Weight
 PAR.RM_Production_Wgt = PAR.RM_Production_Wgt + DB1.Yld_Transaction_Weight;

 ENDIF;

 //?USER: Exit processing

 //?Last Item
 EXECUTE FUNCTION(Rtv Upd YDP Summ      RT) TYPE(RTVOBJ) FILE(POCTCPP)           AC1664746;
 PARAMETER(PAR.Company_Number);
 PARAMETER(PAR.Department_Code);
 PARAMETER(PAR.Production_Line_Code);
 PARAMETER(PAR.Production_Date);
 PARAMETER(PAR.Production_Shift);
 PARAMETER(PAR.Item_Code);
 PARAMETER(PAR.Item_Type_Code);
 PARAMETER(PAR.Partial_Item_Code);
 PARAMETER(PAR.Credit_Item_Status);
 PARAMETER(PAR.Item_Structure_Type_Code);
 PARAMETER(PAR.Item_Structure_Group_Code);
 PARAMETER(PAR.Item_Structure_Class_Code);
 PARAMETER(PAR.Production_Qty);
 PARAMETER(PAR.RM_Production_Wgt);
 PARAMETER(PAR.Beginning_WIP_Inv_Qty);
 PARAMETER(PAR.Beginning_WIP_Inv_Wgt);
 PARAMETER(PAR.Ending_WIP_Inv_Qty);
 PARAMETER(PAR.Ending_WIP_Inv_Wgt);
 PARAMETER(PAR.Product_Delete_Qty);
 PARAMETER(PAR.Product_Delete_Wgt);
 {
  //?USER: Processing if Data record not found

  // Compute: Ending Inv qty
  LCL.Ending_WIP_Inv_Qty = ( PAR.Beginning_WIP_Inv_Qty - PAR.Product_Delete_Qty )
  + PAR.Ending_WIP_Inv_Qty;

  // Compute: Ending Inv wgt
  LCL.Ending_WIP_Inv_Wgt = ( PAR.Beginning_WIP_Inv_Wgt - PAR.Product_Delete_Wgt )
  + PAR.Ending_WIP_Inv_Wgt;

  EXECUTE FUNCTION(Crt Yld Dly Prod Sum  CR) TYPE(CRTOBJ) FILE(POCTCPP)           AC1664743;
  PARAMETER(PAR.Company_Number);
  PARAMETER(PAR.Department_Code);
  PARAMETER(PAR.Production_Line_Code);
  PARAMETER(PAR.Production_Date);
  PARAMETER(PAR.Production_Shift);
  PARAMETER(PAR.Item_Code);
  PARAMETER(PAR.Item_Type_Code);
  PARAMETER(PAR.Partial_Item_Code);
  PARAMETER(PAR.Credit_Item_Status);
  PARAMETER(PAR.Item_Structure_Type_Code);
  PARAMETER(PAR.Item_Structure_Group_Code);
  PARAMETER(PAR.Item_Structure_Class_Code);
  PARAMETER(PAR.Production_Qty);
  PARAMETER(PAR.RM_Production_Wgt);
  PARAMETER(PAR.Beginning_WIP_Inv_Qty);
  PARAMETER(PAR.Beginning_WIP_Inv_Wgt);
  PARAMETER(LCL.Ending_WIP_Inv_Qty);
  PARAMETER(LCL.Ending_WIP_Inv_Wgt);
  PARAMETER(PAR.Product_Delete_Qty);
  PARAMETER(PAR.Product_Delete_Wgt);
  PARAMETER(*BLANK);
  PARAMETER('O');
  PARAMETER(WRK.EDI_Status_1);
  PARAMETER(WRK.EDI_Status_2);
  PARAMETER(WRK.EDI_Status_3);
  PARAMETER('A');
  PARAMETER(*ZERO);
  PARAMETER(*BLANK);
  PARAMETER(*BLANK);
  PARAMETER(*ZERO);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(SET Record Stamp CRTOB IF) TYPE(EXCINTFUN)                     AC1282865;
   PARAMETER(DB1.Record_Status);
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Record Status = CND.Active
    PAR.Record_Status = 'A';

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*PROGRAM
    PAR.Job_Name = JOB.*PROGRAM;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

  }

  //?USER: Process Data record

  // LCL.Production Qty = DB1.Production Qty + PAR.Production Qty
  LCL.Production_Qty = DB1.Production_Qty + PAR.Production_Qty;

  // LCL.Production Wgt = DB1.Production Wgt + PAR.Production Wgt
  LCL.RM_Production_Wgt = DB1.RM_Production_Wgt + PAR.RM_Production_Wgt;

  // LCL.Beginning Inventory Qty = DB1.Beginning Inventory Qty + PAR.Beginning Inventory Qty
  LCL.Beginning_WIP_Inv_Qty = DB1.Beginning_WIP_Inv_Qty + PAR.Beginning_WIP_Inv_Qty;

  // LCL.Beginning Inventory Wgt = DB1.Beginning Inventory Wgt + PAR.Beginning Inventory Wgt
  LCL.Beginning_WIP_Inv_Wgt = DB1.Beginning_WIP_Inv_Wgt + PAR.Beginning_WIP_Inv_Wgt;

  // LCL.Consumed Qty = DB1.Consumed Qty + PAR.Consumed Qty
  LCL.Product_Delete_Qty = DB1.Product_Delete_Qty + PAR.Product_Delete_Qty;

  // LCL.Consumed Wgt = DB1.Consumed Wgt + PAR.Consumed Wgt
  LCL.Product_Delete_Wgt = DB1.Product_Delete_Wgt + PAR.Product_Delete_Wgt;

  // Compute: Ending Inv qty
  LCL.Ending_WIP_Inv_Qty = DB1.Ending_WIP_Inv_Qty + ( ( PAR.Beginning_WIP_Inv_Qty
  - PAR.Product_Delete_Qty ) + PAR.Ending_WIP_Inv_Qty );

  // Compute: Ending Inv wgt
  LCL.Ending_WIP_Inv_Wgt = DB1.Ending_WIP_Inv_Wgt + ( ( PAR.Beginning_WIP_Inv_Wgt
  - PAR.Product_Delete_Wgt ) + PAR.Ending_WIP_Inv_Wgt );

  EXECUTE FUNCTION(Chg Yld Dly Prod Sum  CH) TYPE(CHGOBJ) FILE(POCTCPP)           AC1664744;
  PARAMETER(DB1.Company_Number);
  PARAMETER(DB1.Department_Code);
  PARAMETER(DB1.Production_Line_Code);
  PARAMETER(DB1.Production_Date);
  PARAMETER(DB1.Production_Shift);
  PARAMETER(DB1.Item_Code);
  PARAMETER(DB1.Item_Type_Code);
  PARAMETER(DB1.Partial_Item_Code);
  PARAMETER(DB1.Credit_Item_Status);
  PARAMETER(DB1.Item_Structure_Type_Code);
  PARAMETER(DB1.Item_Structure_Group_Code);
  PARAMETER(DB1.Item_Structure_Class_Code);
  PARAMETER(LCL.Production_Qty);
  PARAMETER(LCL.RM_Production_Wgt);
  PARAMETER(LCL.Beginning_WIP_Inv_Qty);
  PARAMETER(LCL.Beginning_WIP_Inv_Wgt);
  PARAMETER(LCL.Ending_WIP_Inv_Qty);
  PARAMETER(LCL.Ending_WIP_Inv_Wgt);
  PARAMETER(LCL.Product_Delete_Qty);
  PARAMETER(LCL.Product_Delete_Wgt);
  PARAMETER(DB1.YDS_Comment);
  PARAMETER(DB1.YDS_Post_Status);
  PARAMETER(DB1.EDI_Status_1);
  PARAMETER(DB1.EDI_Status_2);
  PARAMETER(DB1.EDI_Status_3);
  PARAMETER(DB1.Record_Status);
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*PROGRAM
    PAR.Job_Name = JOB.*PROGRAM;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

  }

 }

}


