/**************************************************************************/
/*  PROGRAM:       PUQ8UPC                                                */
/*  PROGRAM DESC:  APPLY TRIGGER TO COMPANY ITEM (CABZREP) FILE.          */
/*  PROGRAMMER:    DANNY NGUYEN                                           */
/*  CREATE DATE:   12/13/2023                                             */
/*  PROJECT:       WI517 WAREHOUSE INVENTORY MANAGEMENT (WIM) RELEASE 1   */
/*                                                                        */
/*  PURPOSE:       THIS WILL APPLY PHYSICAL FILE TRIGGER TO THE COMPANY   */
/*                 ITEM (CABZREP) FILE FOR ALL TRIGGER DATABASE           */
/*                 EVENTS:                                                */
/*                   INSERT, UPDATE & DELETE.                             */
/*                                                                        */
/*                 ANY UPDATES TO CABZREP WILL ALSO UPDATE THE            */
/*                 PPA_COMPANY_ITEM TABLE WITHIN P2P APPLICATION.         */
/*                                                                        */
/* ˆCAUTION:       THIS SHOULD BE RUN FOR EACH ENVIRONMENTS YOU NEED THE  */
/*ˆ                TRIGGER TO APPLY FOR CABZREP:                          */
/*                ‚OMSDEVSQC                                              */
/*                ‚PRKTESTF                                               */
/*                ‚PRKUATF                                                */
/*                ‚PRKFLIB                                                */
/* -----------------------------------------------------------------------*/
/*  PARMS:                                                                */
/*                 N/A                                                    */
/**************************************************************************/
/* MODIFICATION HISTORY                                                   */
/**************************************************************************/
/* DATE     INT  PROJECT DESCRIPTION                                      */
/* -------- ---- ------- -------------------------------------------------*/
/*                                                                        */
/*                                                                        */
/**************************************************************************/

             PGM

             DCL        VAR(&DATA) TYPE(*CHAR) LEN(10)  /* DATA FILE LIB */
             DCL        VAR(&DATAH) TYPE(*CHAR) LEN(10) /* DATA FILE HIST LIB */
             DCL        VAR(&RETURN) TYPE(*CHAR) LEN(7)


/********************************************************************/
/* Retrieve Data Library name (&DATA). PROD OR TEST ENV?            */
/********************************************************************/

             CALL       PGM(CAQXXFR) PARM(&RETURN &DATA &DATAH)

/* REMOVE/ADD DATA LIBRARY FOR SPECIFIED ENVIRONMENT */
             RMVLIBLE   LIB(&DATA)
             MONMSG     MSGID(CPF0000)
             ADDLIBLE   LIB(&DATA) POSITION(*FIRST)
             MONMSG     MSGID(CPF0000)

/* ADD TRIGGER */
             IF         COND(&DATA *NE 'PRKFLIB') THEN(DO)
             RUNSQLSTM  SRCFILE(OMSDEVGEN/QSQLSRC) SRCMBR(TRGCABZREP)
             ENDDO
             IF         COND(&DATA *EQ 'PRKFLIB') THEN(DO)
             RUNSQLSTM  SRCFILE(PRKSYNSRC/QSQLSRC) SRCMBR(TRGCABZREP)
             ENDDO


/* REMOVE TRIGGER */
   /* NOT USED, PER MIKE FATINO, USE 'DROP TRIGGER' WHEN NEEDED. */


 END:        ENDPGM
