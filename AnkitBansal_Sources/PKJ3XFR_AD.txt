// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKJ3XFR
// ?Date: 14.08.2025 Time: 02:49:44
// ?------------------------------------------------------------------------------------------------

//?Execute user function

CASE;

// IF PAR.Market Price USR GE PAR.PSC Floor Price
IF PAR.Market_Price_USR >= PAR.PSC_Floor_Price;

// AND PAR.Market Price USR LE PAR.PSC Ceiling Price
AND PAR.Market_Price_USR <= PAR.PSC_Ceiling_Price;

// PAR.TH CM Base Mkt Price = PAR.Market Price USR
PAR.TH_CM_Base_Mkt_Price = PAR.Market_Price_USR;

// IF *OTHERWISE
IF *OTHERWISE;

CASE;

// IF PAR.Market Price USR LT PAR.PSC Floor Price
IF PAR.Market_Price_USR < PAR.PSC_Floor_Price;

//?Floor Price - ((Floor Price - Market Price) / 2)
// Mid Market & Floor
PAR.TH_CM_Base_Mkt_Price = PAR.PSC_Floor_Price - ( ( PAR.PSC_Floor_Price                           +
- PAR.Market_Price_USR ) / 2 );

// IF *OTHERWISE
IF *OTHERWISE;

CASE;

// IF PAR.Market Price USR GT PAR.PSC Ceiling Price
IF PAR.Market_Price_USR > PAR.PSC_Ceiling_Price;

//?Ceiling Price + ((Market Price - Ceiling Price) / 2)
// Mid Ceiling & Market
PAR.TH_CM_Base_Mkt_Price = PAR.PSC_Ceiling_Price + ( ( PAR.Market_Price_USR                        +
- PAR.PSC_Ceiling_Price ) / 2 );

ENDIF;

ENDIF;

ENDIF;

