// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PUPHXFR
// ?Date: 14.08.2025 Time: 03:51:03
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Crt PUBTCPP By SC/Mrkt RT) TYPE(RTVOBJ) FILE(PBCAREP)          AC2181609;
PARAMETER(PAR.Sales_Channel_Code);
PARAMETER(PAR.SC_Market_Code);
PARAMETER(PAR.Ship_To_Customer);
PARAMETER(PAR.Sales_Sold_To_Code);
PARAMETER(PAR.Field_Representative_Bef);
PARAMETER(PAR.Field_Representative_Aft);
PARAMETER(PAR.Broker_Code_Before);
PARAMETER(PAR.Broker_Code_After);
PARAMETER(PAR.SC_Territory_Code_Before);
PARAMETER(PAR.SC_Territory_Code_After);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Crt PUBTCPP By SC/Mrkt RT) TYPE(RTVOBJ) FILE(PBB5REP)          AC2181610;
 PARAMETER(PAR.Sales_Channel_Code);
 PARAMETER(PAR.SC_Market_Code);
 PARAMETER(PAR.Ship_To_Customer);
 PARAMETER(PAR.Sales_Sold_To_Code);
 PARAMETER(PAR.Field_Representative_Bef);
 PARAMETER(PAR.Field_Representative_Aft);
 PARAMETER(PAR.Broker_Code_Before);
 PARAMETER(PAR.Broker_Code_After);
 PARAMETER(PAR.SC_Territory_Code_Before);
 PARAMETER(PAR.SC_Territory_Code_After);
 {
  //?USER: Process Data record

  EXECUTE FUNCTION(Crt PUBTCPP By SC/Mrkt RT) TYPE(RTVOBJ) FILE(PBB6REP)          AC2181611;
  PARAMETER(DB1.Sales_Sold_To_Code);
  PARAMETER(PAR.Ship_To_Customer);
  PARAMETER(PAR.Field_Representative_Bef);
  PARAMETER(PAR.Field_Representative_Aft);
  PARAMETER(PAR.Broker_Code_Before);
  PARAMETER(PAR.Broker_Code_After);
  PARAMETER(PAR.SC_Territory_Code_Before);
  PARAMETER(PAR.SC_Territory_Code_After);
  PARAMETER(PAR.Sales_Sold_To_Code);
  {
   //?USER: Process Data record

   //?Bypass Same STC/SST Since Log Already Created from PBT4E1R.
   CASE;

   // IF PAR.Ship To Customer NE DB1.Ship To Customer
   IF PAR.Ship_To_Customer <> DB1.Ship_To_Customer;

   // AND PAR.Sales Sold To Code USR NE DB1.Sales Sold To Code
   AND PAR.Sales_Sold_To_Code_USR <> DB1.Sales_Sold_To_Code;

   EXECUTE FUNCTION(RTV Ship To Flag       RT) TYPE(RTVOBJ) FILE(CABBREP)          AC1464722;
   PARAMETER(DB1.Ship_To_Customer);
   PARAMETER(LCL.Ship_To_Customer_Flag);
   {
    //?USER: Processing if Data record not found

    MOVE *ALL (To: PAR From: CON);

    // PGM.*Return code = CND.*Record does not exist
    PGM.*Return_code = 'Y2U0005';

    //?USER: Process Data record

    MOVE *ALL (To: PAR From: DB1);

   }

   CASE;

   // IF LCL.Ship To Customer Flag is Allow Use as Ship To Cust
   IF LCL.Ship_To_Customer_Flag = 'Y';

   //?Per Rose, we don't have to check the Record Status.
   EXECUTE FUNCTION(Crt Sales Cust Sold To CR) TYPE(CRTOBJ) FILE(PUBTCPP)          AC2180649;
   PARAMETER(DB1.Ship_To_Customer);
   PARAMETER(PAR.Sales_Sold_To_Code);
   PARAMETER(*ZERO);
   PARAMETER(*ZERO);
   PARAMETER(*BLANK);
   PARAMETER(*BLANK);
   PARAMETER(*BLANK);
   PARAMETER(*BLANK);
   PARAMETER(*BLANK);
   PARAMETER(*BLANK);
   PARAMETER(PAR.Field_Representative_Bef);
   PARAMETER(PAR.Field_Representative_Aft);
   PARAMETER(PAR.Broker_Code_Before);
   PARAMETER(PAR.Broker_Code_After);
   PARAMETER(PAR.SC_Territory_Code_Before);
   PARAMETER(PAR.SC_Territory_Code_After);
   PARAMETER(*BLANK);
   PARAMETER(*BLANK);
   {
    //?USER: Processing before Data update

    // Execute function Get System Date/Time  US.
    EXECUTE FUNCTION(Get System Date/Time  US) TYPE(EXCUSRSRC) ('PUPFUFR');
    PARAMETER(LCL.System_Date_Nbr_USR);
    PARAMETER(LCL.System_Time_USR);
    {
     * Get System Date & Time
     C                     MOVE *DATE     #OC0NZ           CCYYMMDD
     C                     TIME           #OENTM           HHMMSS
    }

    // LCL.System Date D8# USR = LCL.System Date Nbr USR
    LCL.System_Date_D8#_USR = LCL.System_Date_Nbr_USR;

    // DB1.SCSTL Created Date = LCL.System Date D8# USR
    DB1.SCSTL_Created_Date = LCL.System_Date_D8#_USR;

    // DB1.SCSTL Created Time = LCL.System Time USR
    DB1.SCSTL_Created_Time = LCL.System_Time_USR;

    // DB1.SCSTL Created User = JOB.*USER
    DB1.SCSTL_Created_User = JOB.*USER;

    // DB1.SCSTL Created Program = JOB.*PROGRAM
    DB1.SCSTL_Created_Program = JOB.*PROGRAM;

   }

   ENDIF;

   ENDIF;

  }

 }

}


