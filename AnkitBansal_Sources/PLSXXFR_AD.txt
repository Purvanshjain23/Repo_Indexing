// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLSXXFR
// ?Date: 14.08.2025 Time: 02:55:23
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?MODIFICATIONS
//?11/02/2020 ISE H16853 - CHANGE BUY ORDER NUMBER FIELD LENGTH FROM 5 TO 7
EXECUTE FUNCTION(Upd Movement # BOL    RT) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1313546;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.BOH_Buy_Order_Number);
PARAMETER(PAR.BOL_Load_Number);
{
 //?USER: Initialize routine

 // LCL.Use Tattoo Movement # USR = CND.No
 LCL.Use_Tattoo_Movement_#_USR = 'N';

 EXECUTE FUNCTION(Rtv Movement Number   RT) TYPE(RTVOBJ) FILE(PKEJCPP)           AB1213938;
 PARAMETER(PAR.BOH_Company_Number);
 PARAMETER(LCL.BOLW_Movement_Number);
 PARAMETER(PAR.BOH_Buy_Order_Number);
 PARAMETER(PAR.BOL_Load_Number);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

  QUIT;

 }

 CASE;

 // IF LCL.BOLW Movement Number is Not entered
 IF LCL.BOLW_Movement_Number = *ZERO;

 // LCL.Use Tattoo Movement # USR = CND.Yes
 LCL.Use_Tattoo_Movement_#_USR = 'Y';

 ENDIF;

 // LCL.BOL HPS Movement Number = CON.*ZERO
 LCL.BOL_HPS_Movement_Number = *ZERO;

 //?USER: Process Data record

 CASE;

 // IF LCL.Use Tattoo Movement # USR is No
 IF LCL.Use_Tattoo_Movement_#_USR = 'N';

 QUIT;

 // IF *OTHERWISE
 IF *OTHERWISE;

 CASE;

 // IF DB1.TH Hog Class Type is Market
 IF DB1.TH_Hog_Class_Type = 'M';

 //?Find the 1st Market tattoo number
 // LCL.BOL HPS Movement Number = DB1.TH HPS Movement Ref #
 LCL.BOL_HPS_Movement_Number = DB1.TH_HPS_Movement_Ref_#;

 CASE;

 // IF LCL.BOL HPS Movement Number is Entered
 IF LCL.BOL_HPS_Movement_Number <> *ZERO;

 EXECUTE FUNCTION(Chg Movement# Bol     CO) TYPE(CHGOBJ) FILE(PKAXCPP)           AB1313522;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(LCL.BOL_HPS_Movement_Number);
 ENDIF;

 QUIT;

 ENDIF;

 ENDIF;

}


