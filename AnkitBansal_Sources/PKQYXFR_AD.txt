// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKQYXFR
// ?Date: 14.08.2025 Time: 02:52:32
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications and Comments
DO;

//?H16853 ISE 11/02/20 - Increased the Buy Order Number field
//?                      length from 5 to 7.
ENDDO;

EXECUTE FUNCTION(Prt Comp Crc Sum/Dtl  RT) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1217603;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.PCS_Code);
PARAMETER(PAR.Print_Comp_Sum_Dtl_STS);
{
 //?USER: Initialize routine

 EXECUTE FUNCTION(Rtv Selection Type    RT) TYPE(RTVOBJ) FILE(PKD5CPP)           AB1217647;
 PARAMETER(PAR.BOH_Company_Number);
 PARAMETER(PAR.PCS_Code);
 PARAMETER(PAR.PCS_Comp_Selection_Type);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 //?USER: Process Data record

 // PGM.*Record selected = CND.*YES
 PGM.*Record_selected = 'Y';

 //?Record Selection
 CASE;

 // IF DB1.TH Head Killed is *Zeros
 IF DB1.TH_Head_Killed = *ZERO;

 // PGM.*Record selected = CND.*NO
 PGM.*Record_selected = 'N';

 //?Record Selection
 // IF *OTHERWISE
 IF *OTHERWISE;

 CASE;

 // IF PAR.PCS Comp Selection Type is Daily Damage
 IF PAR.PCS_Comp_Selection_Type = 'DD';

 // Analyzed Percent
 WRK.Head_Analyzed_Percent = ( DB1.TH_Head_Accepted / DB1.TH_Head_Killed 'H' ) * 100 'H';

 CASE;

 // IF WRK.Head Analyzed Percent is LT 75%
 IF WRK.Head_Analyzed_Percent < 75;

 // PGM.*Record selected = CND.*NO
 PGM.*Record_selected = 'N';

 ENDIF;

 ENDIF;

 ENDIF;

 //?Print Comparison Carcass Summary/Detail
 CASE;

 // IF PGM.*Record selected is *YES
 IF PGM.*Record_selected = 'Y';

 //?Removed * out code
 // Call program Prt Crc Sum & Dtl     PF.
 CALL PROGRAM(Prt Crc Sum & Dtl     PF) ('PLEMPFR');
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER('N');
 PARAMETER('DTL');
 PARAMETER('SUM');
 PARAMETER(PAR.Print_Comp_Sum_Dtl_STS);
 PARAMETER('N');

 ENDIF;

}


