// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PUZ3XFR
// ?Date: 14.08.2025 Time: 03:51:46
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Rtv Crt test data     RT) TYPE(RTVOBJ) FILE(PUCZCPP)           AC2215627;
{
 //?USER: Initialize routine

 // LCL.Post to G/L Date = CON.1230401
 LCL.Post_to_G_L_Date = 1230401;

 // LCL.Date End Usr = CON.1230501
 LCL.Date_End_Usr = 1230501;

 //?USER: Process Data record

 // DOW LCL.Date Out LT LCL.Date End Usr
 DOW LCL.Date_Out < LCL.Date_End_Usr;

 EXECUTE FUNCTION(RTV Next Day          RT) TYPE(RTVOBJ) FILE(CAAFREP)           AC1913744;
 PARAMETER(360);
 PARAMETER(LCL.Post_to_G_L_Date);
 PARAMETER(LCL.Date_Out);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  CASE;

  // IF DB1.Post to G/L Date GT PAR.Post to G/L Date
  IF DB1.Post_to_G_L_Date > PAR.Post_to_G_L_Date;

  // PAR.Scheduled Ship Date = DB1.Post to G/L Date
  PAR.Scheduled_Ship_Date = DB1.Post_to_G_L_Date;

  QUIT;

  ENDIF;

 }

 EXECUTE FUNCTION(CNV cyymmdd to yyyymmdd) TYPE(EXCINTFUN)                       AC1732965;
 PARAMETER(LCL.Date_Out);
 PARAMETER(LCL.Date_Out_80_USR);
 {
  //?Execute internal function

  // LCL.Year Code = PAR.Date In  (7,0) USR *YEAR
  LCL.Year_Code = DATEDTLS(PAR.Date_In_70_USR 'YR' 1111111 'NONE' 'N' 1);

  // LCL.Month NBR USR = PAR.Date In  (7,0) USR *MONTH
  LCL.Month_NBR_USR = DATEDTLS(PAR.Date_In_70_USR 'MO' 1111111 'NONE' 'N' 1);

  // LCL.Day of Month USR = PAR.Date In  (7,0) USR *DAY OF MONTH
  LCL.Day_of_Month_USR = DATEDTLS(PAR.Date_In_70_USR 'DM' 1111111 'NONE' 'N' 1);

  // PAR.Year Alpha (YYYY) USR = CVTVAR(LCL.Year Code)
  PAR.Year_Alpha_YYYY_USR = CVTVAR(LCL.Year_Code);

  // PAR.Month (Char) USR = CVTVAR(LCL.Month NBR USR)
  PAR.Month_Char_USR = CVTVAR(LCL.Month_NBR_USR);

  // PAR.Day   (Char) USR = CVTVAR(LCL.Day of Month USR)
  PAR.Day_Char_USR = CVTVAR(LCL.Day_of_Month_USR);

  // PAR.Date (Char-8) USR = CONCAT(PAR.Year Alpha (YYYY) USR,PAR.Month (Char) USR,CON.*ZERO)
  PAR.Date_Char_8_USR = PAR.Year_Alpha_YYYY_USR + PAR.Month_Char_USR (*ZERO);

  // PAR.Date (Char-8) USR = CONCAT(PAR.Date (Char-8) USR,PAR.Day   (Char) USR,CON.*ZERO)
  PAR.Date_Char_8_USR = PAR.Date_Char_8_USR + PAR.Day_Char_USR (*ZERO);

  // PAR.Date Out (8,0) USR = CVTVAR(PAR.Date (Char-8) USR)
  PAR.Date_Out_80_USR = CVTVAR(PAR.Date_Char_8_USR);

 }

 EXECUTE FUNCTION(Create WIM PFS Inventory) TYPE(CRTOBJ) FILE(PUCZCPP)           AC2215227;
 PARAMETER(360);
 PARAMETER(LCL.Date_Out_80_USR);
 PARAMETER('P');
 PARAMETER(DB1.PFS_Trans_Start_Timestamp);
 EXECUTE FUNCTION(Create WIM PFS Inventory) TYPE(CRTOBJ) FILE(PUCZCPP)           AC2215227;
 PARAMETER(440);
 PARAMETER(LCL.Date_Out_80_USR);
 PARAMETER('P');
 PARAMETER(DB1.PFS_Trans_Start_Timestamp);
 EXECUTE FUNCTION(Create WIM PFS Inventory) TYPE(CRTOBJ) FILE(PUCZCPP)           AC2215227;
 PARAMETER(960);
 PARAMETER(LCL.Date_Out_80_USR);
 PARAMETER('P');
 PARAMETER(DB1.PFS_Trans_Start_Timestamp);
 // LCL.Post to G/L Date = LCL.Date Out
 LCL.Post_to_G_L_Date = LCL.Date_Out;

 ENDDO;

}


