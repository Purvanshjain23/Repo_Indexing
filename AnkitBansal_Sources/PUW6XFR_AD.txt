// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PUW6XFR
// ?Date: 14.08.2025 Time: 03:51:35
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Rtv Reset Count f/LtrhdRT) TYPE(RTVOBJ) FILE(PDMSREP)          AC2209022;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Order_Number);
PARAMETER(PAR.ED_Export_Document_Type);
PARAMETER(PAR.Country_Code);
PARAMETER(PAR.ED_Item_Code);
PARAMETER(PAR.Order_Sequence_Number);
PARAMETER(PAR.#_of_Lines_Reqd_to_Print);
PARAMETER(PAR.Overflow);
{
 //?USER: Initialize routine

 // LCL.# of Lines Reqd to Print = PAR.# of Lines Reqd to Print
 LCL.#_of_Lines_Reqd_to_Print = PAR.#_of_Lines_Reqd_to_Print;

 // PAR.Overflow = CND.No
 PAR.Overflow = 'N';

 //?USER: Process Data record

 CASE;

 // IF DB1.ED Product Net Weight lbs is Entered
 IF DB1.ED_Product_Net_Weight_lbs <> *ZERO;

 CASE;

 // IF DB1.ED Item Code NE PAR.ED Item Code
 IF DB1.ED_Item_Code <> PAR.ED_Item_Code;

 //?Read for 1 Item Code only & then Quit.
 // LCL.ED Item Code = DB1.ED Item Code
 LCL.ED_Item_Code = DB1.ED_Item_Code;

 //?Count Item Label Line 1.
 CASE;

 // IF DB1.ED Item Label Line 1 is Entered
 IF DB1.ED_Item_Label_Line_1 <> *BLANK;

 // LCL.# of Lines Reqd to Print = LCL.# of Lines Reqd to Print + CON.2
 LCL.#_of_Lines_Reqd_to_Print = LCL.#_of_Lines_Reqd_to_Print + 2;

 ENDIF;

 //?Count Item Label Line 2.
 CASE;

 // IF DB1.ED Item Label Line 2 is Entered
 IF DB1.ED_Item_Label_Line_2 <> *BLANK;

 // LCL.# of Lines Reqd to Print = LCL.# of Lines Reqd to Print + CON.2
 LCL.#_of_Lines_Reqd_to_Print = LCL.#_of_Lines_Reqd_to_Print + 2;

 ENDIF;

 //?Count Xlate Desc Line 1.
 CASE;

 // IF DB1.ED Language Xlate Desc is Entered
 IF DB1.ED_Language_Xlate_Desc <> *BLANK;

 // LCL.# of Lines Reqd to Print = LCL.# of Lines Reqd to Print + CON.2
 LCL.#_of_Lines_Reqd_to_Print = LCL.#_of_Lines_Reqd_to_Print + 2;

 ENDIF;

 //?Count Xlate Desc Line 2.
 CASE;

 // IF DB1.ED Language Xlate Desc 2 is Entered
 IF DB1.ED_Language_Xlate_Desc_2 <> *BLANK;

 // LCL.# of Lines Reqd to Print = LCL.# of Lines Reqd to Print + CON.2
 LCL.#_of_Lines_Reqd_to_Print = LCL.#_of_Lines_Reqd_to_Print + 2;

 //?Count Xlate Desc Line 2.
 // IF *OTHERWISE
 IF *OTHERWISE;

 //?Check Spanish Translation to Set '# of Lines Reqd to Print'.
 CASE;

 // IF DB1.ED Language Xlate Desc is Entered
 IF DB1.ED_Language_Xlate_Desc <> *BLANK;

 // LCL.Text USR 12 = CND.Not Entered
 LCL.Text_USR_12 = *BLANK;

 // LCL.Frozen/Chilled as Spanish = CND.Not Entered
 LCL.Frozen_Chilled_as_Spanish = *BLANK;

 //?Xlate Frozen/Chilled - Xlate Line Desc 1.
 CASE;

 // IF DB1.ED Chilled/Frozen Text is Frozen
 IF DB1.ED_Chilled_Frozen_Text = 'Frozen';

 // OR DB1.ED Chilled/Frozen Text is FROZEN All Caps
 OR DB1.ED_Chilled_Frozen_Text = 'FROZEN';

 // LCL.Frozen/Chilled as Spanish = CON.congelado
 LCL.Frozen_Chilled_as_Spanish = 'congelado';

 // LCL.Text USR 12 = SUBSTRING(DB1.ED Language Xlate Desc,CON.31,CON.10)
 LCL.Text_USR_12 = SUBSTRING(DB1.ED_Language_Xlate_Desc:31:10);

 //?Xlate Frozen/Chilled - Xlate Line Desc 1.
 // IF DB1.ED Chilled/Frozen Text is Chilled
 IF DB1.ED_Chilled_Frozen_Text = 'Chilled';

 // OR DB1.ED Chilled/Frozen Text is CHILLED All Caps
 OR DB1.ED_Chilled_Frozen_Text = 'CHILLED';

 // LCL.Frozen/Chilled as Spanish = CON.refrigerado
 LCL.Frozen_Chilled_as_Spanish = 'refrigerado';

 // LCL.Text USR 12 = SUBSTRING(DB1.ED Language Xlate Desc,CON.29,CON.12)
 LCL.Text_USR_12 = SUBSTRING(DB1.ED_Language_Xlate_Desc:29:12);

 ENDIF;

 //?Override ED Language Xlate Desc 2 to print but was originally blank.
 CASE;

 // IF LCL.Text USR 12 is Not Entered
 IF LCL.Text_USR_12 = *BLANK;

 //?Override ED Language Xlate Desc 2 to print but was originally blank.
 // IF *OTHERWISE
 IF *OTHERWISE;

 // LCL.# of Lines Reqd to Print = LCL.# of Lines Reqd to Print + CON.2
 LCL.#_of_Lines_Reqd_to_Print = LCL.#_of_Lines_Reqd_to_Print + 2;

 ENDIF;

 ENDIF;

 ENDIF;

 //?Overflow Reached, Reset Count to 0 to Print in Box 1 for Next Page.
 CASE;

 // IF LCL.# of Lines Reqd to Print is GT 12
 IF LCL.#_of_Lines_Reqd_to_Print > 12;

 // PAR.# of Lines Reqd to Print = CON.*ZERO
 PAR.#_of_Lines_Reqd_to_Print = *ZERO;

 // PAR.Overflow = CND.Yes
 PAR.Overflow = 'Y';

 ENDIF;

 QUIT;

 ENDIF;

 ENDIF;

}


