// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PWNSXFR
// ?Date: 14.08.2025 Time: 02:57:08
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modification history
DO;

//? 6/23/2021 JBB SDN619 - Repayment by Business User
//?               P17058   Function created.  This program will update
//?                        all Tattoo Repayment Detail records for a
//?                        Co# and Repay ID to the same status.
ENDDO;

EXECUTE FUNCTION(Upd All Repay Dtl Sts RT) TYPE(RTVOBJ) FILE(PWAXCPP)           AB1369428;
PARAMETER(PAR.CC_Company_Number);
PARAMETER(PAR.TRH_Repayment_ID);
PARAMETER(PAR.TRD_Repayment_Status);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.TRD Repayment Status is Transfered
 IF DB1.TRD_Repayment_Status = 'T';

 // IF *OTHERWISE
 IF *OTHERWISE;

 EXECUTE FUNCTION(Chg Tattoo Repay Dtl  CH) TYPE(CHGOBJ) FILE(PWAXCPP)           AB1364796;
 PARAMETER(DB1.CC_Company_Number);
 PARAMETER(DB1.TRH_Repayment_ID);
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.TH_Kill_Date);
 PARAMETER(DB1.Transfer_Buy_Order_Number);
 PARAMETER(DB1.Transfer_Buy_Order_Load);
 PARAMETER(DB1.Transfer_Tattoo_Number);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(PAR.TRD_Repayment_Status);
 PARAMETER(DB1.TRD_Pen_Head);
 PARAMETER(DB1.TRD_Payment_Sts);
 PARAMETER(DB1.TRD_Process_Code);
 PARAMETER(DB1.PD_Producer_Code);
 PARAMETER(DB1.PS_Site_ID);
 PARAMETER(DB1.TRD_Trucker_Payment_Sts);
 PARAMETER(DB1.SR_Source_Code);
 PARAMETER(DB1.PL_Location_Code);
 PARAMETER(DB1.PC_Contract_Code);
 PARAMETER(DB1.PSC_Sub_Contract_Code);
 PARAMETER(DB1.RS_Record_Status);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Rtv Change Stamp      IF) TYPE(EXCINTFUN)                      AB1100934;
  PARAMETER(DB1.RS_User_Changed);
  PARAMETER(DB1.RS_Date_Changed);
  PARAMETER(DB1.RS_Time_Changed);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  {
   //?Execute internal function

   // PAR.RS User Changed = JOB.*USER
   PAR.RS_User_Changed = JOB.*USER;

   // PAR.RS Date Changed = JOB.*Job date
   PAR.RS_Date_Changed = JOB.*Job_date;

   // PAR.RS Time Changed = JOB.*Job time
   PAR.RS_Time_Changed = JOB.*Job_time;

   // PAR.RS Job = JOB.*JOB
   PAR.RS_Job = JOB.*JOB;

   // PAR.RS Program = JOB.*PROGRAM
   PAR.RS_Program = JOB.*PROGRAM;

  }

 }

 ENDIF;

}


