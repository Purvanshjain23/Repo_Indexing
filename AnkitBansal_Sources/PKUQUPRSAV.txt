/*******************************************************************/
/***TESTTTTTTTTTTTTTTTTTTTTT CHANGE THE ESEND BEFORE PRODUCTION*****/
/***I PULL MY TEST VERSION AND MADE A SAVE VERSION SO THAT     *****/
/***CHANGES FOR DAILIES WILL GO IN BEFORE MY CHANGES           *****/
/***05/22/2007                                                 *****/
/***THE VERSION OF DAILIES WAS PULLED FROM PRKSYNSRC           *****/
/***AND THEN LARA HAS OR WILL HAVE CHANGES TO APPLIE           *****/
/*******************************************************************/
/* MODIFIED:  RMC 5/02/02  CHANGE TLX400J TO TLX400P               */
/*            RMC 2/01/05  ADDED CODE FOR GENIFAX SOFTWARE         */
/*            SLM 4/11/07  REMOVE THE TLX FAXING ROUTINE           */
/*                         AND CLEAN UP LINES AND DOCUMENT CL      */
/*            SLM 4/11/07  ADD THE FAXING VERIFICATION ROUTINE     */
/*                         THIS IS BY COMPANY AND ONLY IF THE      */
/*                         FAXING VERIFICATION IS TURNNED ON DO    */
/*                         WE PERFORM THIS PROCESS.                */
/*                         ADDED PARMS FROM COMPANY TO FAXPFX2     */
/*******************************************************************/
 PKUQUPR:    PGM        PARM(&PRTF &DESC &COVER &FAXC &FAXR &FAXAREA +
                          &FAXPHONE &XCO &F1 &FAXPX1 &FAXPX2)

            DCL        VAR(&PRTF)     TYPE(*CHAR) LEN(10)
            DCL        VAR(&DESC)     TYPE(*CHAR) LEN(25)
            DCL        VAR(&COVER)    TYPE(*CHAR) LEN(10)
            DCL        VAR(&FAXC)     TYPE(*CHAR) LEN(25)
            DCL        VAR(&FAXR)     TYPE(*CHAR) LEN(25)
            DCL        VAR(&FAXAREA)  TYPE(*CHAR) LEN(3)
            DCL        VAR(&FAXPHONE) TYPE(*CHAR) LEN(12)
            DCL        VAR(&XCO)      TYPE(*DEC)
            DCL        VAR(&COMPANY)  TYPE(*DEC) LEN(3 0)
            DCL        VAR(&DEPT)     TYPE(*CHAR) LEN(6)

            DCL        VAR(&FTX2)     TYPE(*CHAR) LEN(75)
            DCL        VAR(&FTX3)     TYPE(*CHAR) LEN(75)
            DCL        VAR(&FTX4)     TYPE(*CHAR) LEN(75)
            DCL        VAR(&F1)       TYPE(*CHAR) LEN(1)
            DCL        VAR(&FAXPX1)   TYPE(*CHAR) LEN(25)
            DCL        VAR(&FAXPX2)   TYPE(*CHAR) LEN(25)

 /*                Fax to area and phone                             */
             DCL        VAR(&ADDPHN)  TYPE(*CHAR) LEN(25)
             DCL        VAR(&ADDPH1)  TYPE(*CHAR) LEN(25)
             DCL        VAR(&ADDPH2)  TYPE(*CHAR) LEN(25)
 /*                Location of fax server                            */
             DCL        VAR(&ADDR)    TYPE(*CHAR) LEN(100)
 /*   -------------------------------------------------------------- */
 /*  IF FAX SOFTWARE IN SYSTEM VALUES IS Y, THEN USE GENIFAX TO FAX  */
 /*          CALL       PGM(PPJXXFR) PARM(' ' 'FAXSOFT' &GENIFAX)    */
 /*   REMOVED THE NON GENIFAX  --- * OUT THE ABOVE CAN BE REMOVED    */
 /*   LATER.                                                         */
 /*   -------------------------------------------------------------- */
             CHGVAR     VAR(&ADDPHN) VALUE(&FAXAREA *TCAT &FAXPHONE)
             OVRPRTF    FILE(PPITPFR$) PAGRTT(*AUTO) OUTQ(FAXQ) +
                          HOLD(*NO)
             CHGVAR     VAR(&DEPT) VALUE('HPE   ')
             CHGVAR     VAR(&COMPANY) VALUE(&XCO)
 /*   -------------------------------------------------------------- */
 /*                COVER SHEET                                       */
 /*   -------------------------------------------------------------- */
             CALL       PGM(PPITPFR) PARM('' &DEPT &FAXC &FAXR &ADDPHN)

 /*  RTV System Value for the FaxServer                              */
 /*                Location of fax server                            */
             CALL       PGM(PPJXXFR) PARM(' ' 'FAXSERVER' &ADDR)
 /*   -------------------------------------------------------------- */
 /*                                                                  */
 /*    FTX2 is the fax number going to the producer                  */
 /*         or the producer location                                 */
 /*         this is what is in the tattoo fax driver                 */
 /*                                                                  */
 /*   -------------------------------------------------------------- */
             CHGVAR     VAR(&FTX2) VALUE(&ADDPHN *TCAT &ADDR)
             CHGVAR     VAR(&DESC) VALUE(&FAXC) /*company name */
  /*  ***********                         */
  /***                                                               */
  /***       ESEND/ESNDMAIL RECIPIENT(&FTX2) SUBJECT(&DESC) +        */
  /***                    MSG(*NONE) MSGTYPE(*TEXT) ATTLIST((* *MSG +*/
  /***                    *N PPITPFR$) (* *PDF *N &PRTF))            */
  /***                                                               */
  /*                        ******************************************/

 /********************************************************************/
 /*    IF THE FAXING VERIFICATION HAS BEEN TURNED ON WE WILL         */
 /*        PERFORM AN ESEND TO THE SEABOARD FAX NUMBER               */
 /*                                                                  */
 /*    FTX3 will be the fax number for seaboard fax number           */
 /*                                                                  */
 /*    FTX4 will be the fax number for the paper seaboard up by      */
 /*    Sally                                                         */
 /********************************************************************/

             CHGVAR     VAR(&ADDPH1) VALUE(&FAXPX1)
             CHGVAR     VAR(&FTX3) VALUE(&ADDPH1 *TCAT &ADDR)

             CHGVAR     VAR(&ADDPH2) VALUE(&FAXPX2)
             CHGVAR     VAR(&FTX4) VALUE(&ADDPH2 *TCAT &ADDR)

             IF         COND(&F1 = 'N') THEN(GOTO CMDLBL(ENDFX4))

 /*    SEND TO SUSAN_MASON@SEABAORDFOODS.COM                         */
             ESEND/ESNDMAIL RECIPIENT(ISSUSANM) SUBJECT(&DESC) +
                          MSG(*NONE) MSGTYPE(*TEXT) ATTLIST((* *MSG +
                          *N PPITPFR$) (* *PDF *N &PRTF))


             IF         COND(&FAXPX1 = 'N') +
                          THEN(GOTO CMDLBL(ENDFX3))

             ESEND/ESNDMAIL RECIPIENT(&FTX3) SUBJECT(&DESC) +
                          MSG(*NONE) MSGTYPE(*TEXT) ATTLIST((* *MSG +
                          *N PPITPFR$) (* *PDF *N &PRTF))
 ENDFX3:

             IF         COND(&FAXPX2 = 'N') +
                          THEN(GOTO CMDLBL(ENDFX4))

             ESEND/ESNDMAIL RECIPIENT(&FTX4) SUBJECT(&DESC) +
                          MSG(*NONE) MSGTYPE(*TEXT) ATTLIST((* *MSG +
                          *N PPITPFR$) (* *PDF *N &PRTF))
 ENDFX4:

             DLTSPLF    FILE(&PRTF) SELECT(*ALL)
             MONMSG     MSGID(CPF3309)
             DLTSPLF    FILE(PPITPFR$) SELECT(*ALL)
             MONMSG     MSGID(CPF3309)

 END:       ENDPGM
