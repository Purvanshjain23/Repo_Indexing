// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PPDWXFR
// ?Date: 14.08.2025 Time: 03:40:03
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(FIX this YTD # Ords..  RT) TYPE(RTVOBJ) FILE(ARBCREP)          AC1684487;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.*Job_year);
{
 //?USER: Process Data record

 // LCL.From Date             USR = CON.1050101
 LCL.From_Date_USR = 1050101;

 // LCL.To Date               USR = CON.1051231
 LCL.To_Date_USR = 1051231;

 EXECUTE FUNCTION(Rtv fix ytd #Ord     RT) TYPE(RTVOBJ) FILE(OPBFCPP)            AC1684494;
 PARAMETER(DB1.AR_Customer_Number);
 PARAMETER(LCL.From_Date_USR);
 PARAMETER(LCL.Number_of_Orders_YTD);
 PARAMETER(DB1.Company_Number);
 {
  //?USER: Initialize routine

  // PAR.Number of Orders YTD = CON.*ZERO
  PAR.Number_of_Orders_YTD = *ZERO;

  //?USER: Process Data record

  EXECUTE FUNCTION(RTV OD Whs/ShpCo/AccCo RT) TYPE(RTVOBJ) FILE(OPBGWKP)          AC1801010;
  PARAMETER(DB1.Company_Number);
  PARAMETER(DB1.Order_Number);
  PARAMETER(NLL.Warehouse_Code);
  PARAMETER(LCL.Shipping_Company);
  PARAMETER(LCL.Accounting_Company);
  {
   //?USER: Process Data record

   CASE;

   // IF DB1.Detail Line Status is Not cancelled
   IF DB1.Detail_Line_Status = 'L'/'A'/'C'/'R'/'E'/'H'/'I';

   EXECUTE FUNCTION(RTV OD Whs/ShpCo/AccCo RT) TYPE(RTVOBJ) FILE(CAADREP)          AC1801011;
   PARAMETER(DB1.Warehouse_Code);
   PARAMETER(PAR.Shipping_Company);
   PARAMETER(PAR.Accounting_Company);
   {
    //?USER: Processing if Data record not found

    MOVE *ALL (To: PAR From: CON);

    // PGM.*Return code = CND.*Record does not exist
    PGM.*Return_code = 'Y2U0005';

    //?USER: Process Data record

    MOVE *ALL (To: PAR From: DB1);

   }

   // PAR.Warehouse Code = DB1.Warehouse Code
   PAR.Warehouse_Code = DB1.Warehouse_Code;

   QUIT;

   ENDIF;

  }

  CASE;

  // IF LCL.Accounting Company EQ PAR.Company Number
  IF LCL.Accounting_Company = PAR.Company_Number;

  // PAR.Number of Orders YTD = PAR.Number of Orders YTD + CON.1
  PAR.Number_of_Orders_YTD = PAR.Number_of_Orders_YTD + 1;

  ENDIF;

 }

 EXECUTE FUNCTION(CHG A/R this YTD Ords  CH) TYPE(CHGOBJ) FILE(ARBCREP)          AC1684495;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.AR_Customer_Number);
 PARAMETER(LCL.Number_of_Orders_YTD);
}


