// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PUPNXFR
// ?Date: 14.08.2025 Time: 03:51:06
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?**************************************************************************
//?** PR1 Parms Represent Old Record Fields (Will be blank for Insert).
//?** PR2 Parms Represent New Record Fields (Will be blank for Delete).
//?**************************************************************************
//?Trigger Processing for Insert Event.
CASE;

// IF PR3.TRG Database Event is Insert
IF PR3.TRG_Database_Event = '1';

EXECUTE FUNCTION(Crt PS Prod Item InvTRGCR) TYPE(CRTOBJ) FILE(PUBUCPP)          AC2182290;
PARAMETER(PR2.Company_Number);
PARAMETER(PR2.Item_Code);
PARAMETER(PR2.Warehouse_Code);
PARAMETER(PR2.Production_Date);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.PPII_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

//?Trigger Processing for Update Event.
CASE;

// IF PR3.TRG Database Event is Update
IF PR3.TRG_Database_Event = '3';

//?Update If Any Non-Key Fields Have Changed.
CASE;

// IF PR1.Quantity on Hand - Weight NE PR2.Quantity on Hand - Weight
IF PR1.Quantity_on_Hand_Weight <> PR2.Quantity_on_Hand_Weight;

// OR PR1.Quantity on Hand - U/M1 NE PR2.Quantity on Hand - U/M1
OR PR1.Quantity_on_Hand_UOM1 <> PR2.Quantity_on_Hand_UOM1;

// OR PR1.Label Date NE PR2.Label Date
OR PR1.Label_Date <> PR2.Label_Date;

// OR PR1.EDI Status 1 NE PR2.EDI Status 1
OR PR1.EDI_Status_1 <> PR2.EDI_Status_1;

// OR PR1.EDI Status 2 NE PR2.EDI Status 2
OR PR1.EDI_Status_2 <> PR2.EDI_Status_2;

// OR PR1.EDI Status 3 NE PR2.EDI Status 3
OR PR1.EDI_Status_3 <> PR2.EDI_Status_3;

// OR PR1.Record Status NE PR2.Record Status
OR PR1.Record_Status <> PR2.Record_Status;

EXECUTE FUNCTION(Crt PS Prod Item InvTRGCR) TYPE(CRTOBJ) FILE(PUBUCPP)          AC2182290;
PARAMETER(PR2.Company_Number);
PARAMETER(PR2.Item_Code);
PARAMETER(PR2.Warehouse_Code);
PARAMETER(PR2.Production_Date);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.PPII_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

ENDIF;

//?Trigger Processing for Delete Event.
CASE;

// IF PR3.TRG Database Event is Delete
IF PR3.TRG_Database_Event = '2';

EXECUTE FUNCTION(Crt PS Prod Item InvTRGCR) TYPE(CRTOBJ) FILE(PUBUCPP)          AC2182290;
PARAMETER(PR1.Company_Number);
PARAMETER(PR1.Item_Code);
PARAMETER(PR1.Warehouse_Code);
PARAMETER(PR1.Production_Date);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.PPII_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

