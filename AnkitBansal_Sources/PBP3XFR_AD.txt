// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBP3XFR
// ?Date: 14.08.2025 Time: 03:48:54
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Convert Alpha to Numeric
// LCL.PFS Company Number = CVTVAR(PAR.Company Number Alpha)
LCL.PFS_Company_Number = CVTVAR(PAR.Company_Number_Alpha);

// LCL.PFS Transaction Date = CVTVAR(PAR.PFS Trans Date Alpha USR)
LCL.PFS_Transaction_Date = CVTVAR(PAR.PFS_Trans_Date_Alpha_USR);

//?Update PFS Inventory Rest Sts to P=Processed
EXECUTE FUNCTION(Chg PFS Inventory Rest CH) TYPE(CHGOBJ) FILE(PBBWCPP)          AC2100702;
PARAMETER(LCL.PFS_Company_Number);
PARAMETER(LCL.PFS_Transaction_Date);
PARAMETER('P');

//?SR21250 DN 10/23/24-Create Snapshot for Each Company Run.
CASE;

// IF *OTHERWISE
IF *OTHERWISE;

EXECUTE FUNCTION(RTV Data Libraries     RT) TYPE(RTVOBJ) FILE(CADPREP)          AC1165753;
PARAMETER('DTALIB');
PARAMETER(LCL.Library_List_Code);
PARAMETER(NLL.@Library_List_Code);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.System Value Code is Data File Library
 IF DB1.System_Value_Code = 'DTALIB';

 // PAR.Library List Code = DB1.System Value Alpha
 PAR.Library_List_Code = DB1.System_Value_Alpha;

 // IF DB1.System Value Code is History File Library
 IF DB1.System_Value_Code = 'HISLIB';

 // PAR.@Library List Code = DB1.System Value Alpha
 PAR.@Library_List_Code = DB1.System_Value_Alpha;

 QUIT;

 ENDIF;

}


// Call program Crt Backup After RestorCL.
CALL PROGRAM(Crt Backup After RestorCL) ('PVHUUPC');
PARAMETER('L');
PARAMETER(LCL.Library_List_Code);
PARAMETER(PAR.Company_Number_Alpha);

ENDIF;

