/********************************************************************/
/*                                                                  */
/*  SYNOPSIS - PRINT FREIGHT BY SHIP TO STATE                       */
/*                                                                  */
/*                                                                  */
/*                                                                  */
/*  COMPANY   - SEABOARD COPRORATION                                */
/*  SYSTEM    - ORDER MANAGEMENT                                    */
/*  USER NAME - MARK ARENSBERG                                      */
/*  DATE      - 01/31/97                                            */
/*                                                                  */
/*      PARAMETERS RECEIVED:                                        */
/*                                                                  */
/*          &OUTQ       - OUTPUT QUEUE                             */
/*          &COMPA      - COMPANY NUMBER                            */
/*          &FDATEA     - FROM DATE                                 */
/*          &TDATEA     - TO DATE                                   */
/*                                                                  */
/*  MODIFIED BY - JOHN TREMPER                                      */
/*  DATE        - 05/05/98                                          */
/*  DESCRIPTION - 1.  ADDED NEW INPUT/OUTPUT PARAMETERS             */
/*                2.  ADDED SEABOARD PRINT OVERRIDE FUNCTIONALITY   */
/*                3.  ADDED OPEN QUERY FILE FUNCTIONALITY TO RET-   */
/*                    RIEVE BY DATE AND WAREHOUSE SELECTION/OMM-    */
/*                    ISSION.                                       */
/********************************************************************/

 PDWMPCLP:   PGM        PARM(&COMPA &FDATEA &TDATEA &WHSE1 &WHSE2 +
                          &WHSE3 &WHSE4 &WHSE5 &WHSE6 &WHSE7 &WHSE8 +
                          &WHSE9 &WHSE10 &SOFLAG &EXPORT &OUTQ +
                          &HOLD &SAVE &COPIES)

        DCL    &COMP      *DEC    (3 0)           /*  COMPANY #     */
        DCL    &FDATE     *DEC    (7 0)          /*  FROM DATE      */
        DCL    &TDATE     *DEC    (7 0)          /*  THROUGH DATE   */
        DCL    &COMPA     *DEC                    /*  COMPANY #     */
        DCL    &FDATEA    *DEC                   /*  FROM DATE      */
        DCL    &TDATEA    *DEC                   /*  THROUGH DATE   */
        DCL    &WHSE1     *CHAR    3             /*  WAREHOUSE 1    */
        DCL    &WHSE2     *CHAR    3             /*  WAREHOUSE 2    */
        DCL    &WHSE3     *CHAR    3             /*  WAREHOUSE 3    */
        DCL    &WHSE4     *CHAR    3             /*  WAREHOUSE 4    */
        DCL    &WHSE5     *CHAR    3             /*  WAREHOUSE 5    */
        DCL    &WHSE6     *CHAR    3             /*  WAREHOUSE 6    */
        DCL    &WHSE7     *CHAR    3             /*  WAREHOUSE 7    */
        DCL    &WHSE8     *CHAR    3             /*  WAREHOUSE 8    */
        DCL    &WHSE9     *CHAR    3             /*  WAREHOUSE 9    */
        DCL    &WHSE10    *CHAR    3             /*  WAREHOUSE 10   */
        DCL    &SOFLAG    *CHAR    1             /*  WAREHOUSE SEL  */
        DCL    &EXPORT    *CHAR    1             /*  EXPORT/DOMESTC */
        DCL    &OUTQ      *CHAR   10              /*  OUTPUT QUEUE  */
        DCL    &HOLD      *CHAR    4              /* HOLD STATUS    */
        DCL    &SAVE      *CHAR    4              /* SAVE STATUS    */
        DCL    &COPIES    *DEC                    /* NUMBER OF COPY */
        DCL    &COPIESO   *DEC     3 0
        DCL    &COMMAND    *CHAR   (512)
/********************************************************************/
/*  OPEN QUERY FIELDS                                               */
/********************************************************************/
        DCL    &FDATEQ    *CHAR    7
        DCL    &TDATEQ    *CHAR    7
        DCL    &A         *CHAR    25
        DCL    &B         *CHAR    25
        DCL    &C         *CHAR    25
        DCL    &D         *CHAR    25
        DCL    &E         *CHAR    25
        DCL    &F         *CHAR    25
        DCL    &G         *CHAR    25
        DCL    &H         *CHAR    25
        DCL    &I         *CHAR    25
        DCL    &J         *CHAR    25
        DCL    &K         *CHAR    25
        DCL    &L         *CHAR    25
        DCL    &OPEN      *CHAR    6
        DCL    &CLOSED    *CHAR    1
        DCL    &ALL       *CHAR    325

/* SEND PROGRAM MESSAGE PARAMETERS  */

             CHGVAR    VAR(&COMP) VALUE(&COMPA) /* Change to alpha +
                          for query data */
             CHGVAR    VAR(&FDATE) VALUE(&FDATEA) /* Change to alpha +
                          for query data */
             CHGVAR    VAR(&TDATE) VALUE(&TDATEA) /* Change to alpha +
                          for query data */

/********************************************************************/
/* Override printer file with user specified values                 */
/********************************************************************/

             CHGVAR    VAR(&COPIESO) VALUE(&COPIES)
             SBDPRTOVR  CMDVAR(&COMMAND) FILE(PDWHPFR$) OUTQ(&OUTQ) +
                          COPIES(&COPIESO) HOLD(&HOLD) SAVE(&SAVE)


             CALL       PGM(QCMDEXC) PARM(&COMMAND 512)
/*********************************************************************/
/*  OPEN QUERY FILE                                                  */
/*********************************************************************/
             CHGVAR    VAR(&FDATEQ) VALUE(&FDATE)
             CHGVAR    VAR(&TDATEQ) VALUE(&TDATE)
             CHGVAR    VAR(&A)      VALUE('F4GNDT *GE ' *CAT &FDATEQ)
             CHGVAR    VAR(&B)      VALUE('*AND F4GNDT *LE ' *CAT +
                                      &TDATEQ)

             CHGVAR    VAR(&OPEN)   VALUE('      ')
             CHGVAR    VAR(&CLOSED) VALUE(' ')
             IF        COND(&SOFLAG *NE ' ') THEN(DO)
             CHGVAR    VAR(&OPEN)   VALUE('*AND (')
             CHGVAR    VAR(&CLOSED) VALUE(')')
             ENDDO
/*********************************************************************/
             IF        COND(&SOFLAG *EQ 'S' *AND &WHSE1 *NE '   ') +
                         THEN(DO)
             CHGVAR    VAR(&C) VALUE('F4AJCD *EQ "' *CAT &WHSE1 +
                         *CAT '"')
             ENDDO
             IF        COND(&SOFLAG *EQ 'O' *AND &WHSE1 *NE '   ') +
                         THEN(DO)
             CHGVAR    VAR(&C) VALUE('F4AJCD *NE "' *CAT &WHSE1 +
                         *CAT '"')
             ENDDO
/*********************************************************************/
             IF        COND(&SOFLAG *EQ 'S' *AND &WHSE2 *NE '   ') +
                         THEN(DO)
             CHGVAR     VAR(&D) VALUE('*OR F4AJCD *EQ "' *CAT &WHSE2 +
                          *CAT '"')
             ENDDO
             IF        COND(&SOFLAG *EQ 'O' *AND &WHSE2 *NE '   ') +
                         THEN(DO)
             CHGVAR    VAR(&D) VALUE('*OR F4AJCD *NE "' *CAT &WHSE2 +
                         *CAT '"')
             ENDDO
/*********************************************************************/
             IF        COND(&SOFLAG *EQ 'S' *AND &WHSE3 *NE '   ') +
                         THEN(DO)
             CHGVAR     VAR(&E) VALUE('*OR F4AJCD *EQ "' *CAT &WHSE3 +
                          *CAT '"')
             ENDDO
             IF        COND(&SOFLAG *EQ 'O' *AND &WHSE3 *NE '   ') +
                         THEN(DO)
             CHGVAR    VAR(&E) VALUE('*OR F4AJCD *NE "' *CAT &WHSE3 +
                         *CAT '"')
             ENDDO
/*********************************************************************/
             IF        COND(&SOFLAG *EQ 'S' *AND &WHSE4 *NE '   ') +
                         THEN(DO)
             CHGVAR     VAR(&F) VALUE('*OR F4AJCD *EQ "' *CAT &WHSE4 +
                          *CAT '"')
             ENDDO
             IF        COND(&SOFLAG *EQ 'O' *AND &WHSE4 *NE '   ') +
                         THEN(DO)
             CHGVAR    VAR(&F) VALUE('*OR F4AJCD *NE "' *CAT &WHSE4 +
                         *CAT '"')
             ENDDO
/*********************************************************************/
             IF        COND(&SOFLAG *EQ 'S' *AND &WHSE5 *NE '   ') +
                         THEN(DO)
             CHGVAR     VAR(&G) VALUE('*OR F4AJCD *EQ "' *CAT &WHSE5 +
                          *CAT '"')
             ENDDO
             IF        COND(&SOFLAG *EQ 'O' *AND &WHSE5 *NE '   ') +
                         THEN(DO)
             CHGVAR    VAR(&G) VALUE('*OR F4AJCD *NE "' *CAT &WHSE5 +
                         *CAT '"')
             ENDDO
/*********************************************************************/
             IF        COND(&SOFLAG *EQ 'S' *AND &WHSE6 *NE '   ') +
                         THEN(DO)
             CHGVAR     VAR(&H) VALUE('*OR F4AJCD *EQ "' *CAT &WHSE6 +
                          *CAT '"')
             ENDDO
             IF        COND(&SOFLAG *EQ 'O' *AND &WHSE6 *NE '   ') +
                         THEN(DO)
             CHGVAR    VAR(&H) VALUE('*OR F4AJCD *NE "' *CAT &WHSE6 +
                         *CAT '"')
             ENDDO
/*********************************************************************/
             IF        COND(&SOFLAG *EQ 'S' *AND &WHSE7 *NE '   ') +
                         THEN(DO)
             CHGVAR     VAR(&I) VALUE('*OR F4AJCD *EQ "' *CAT &WHSE7 +
                          *CAT '"')
             ENDDO
             IF        COND(&SOFLAG *EQ 'O' *AND &WHSE7 *NE '   ') +
                         THEN(DO)
             CHGVAR    VAR(&I) VALUE('*OR F4AJCD *NE "' *CAT &WHSE7 +
                         *CAT '"')
             ENDDO
/*********************************************************************/
             IF        COND(&SOFLAG *EQ 'S' *AND &WHSE8 *NE '   ') +
                         THEN(DO)
             CHGVAR     VAR(&J) VALUE('*OR F4AJCD *EQ "' *CAT &WHSE8 +
                          *CAT '"')
             ENDDO
             IF        COND(&SOFLAG *EQ 'O' *AND &WHSE8 *NE '   ') +
                         THEN(DO)
             CHGVAR    VAR(&J) VALUE('*OR F4AJCD *NE "' *CAT &WHSE8 +
                         *CAT '"')
             ENDDO
/*********************************************************************/
             IF        COND(&SOFLAG *EQ 'S' *AND &WHSE9 *NE '   ') +
                         THEN(DO)
             CHGVAR     VAR(&K) VALUE('*OR F4AJCD *EQ "' *CAT &WHSE9 +
                          *CAT '"')
             ENDDO
             IF        COND(&SOFLAG *EQ 'O' *AND &WHSE9 *NE '   ') +
                         THEN(DO)
             CHGVAR    VAR(&K) VALUE('*OR F4AJCD *NE "' *CAT &WHSE9 +
                         *CAT '"')
             ENDDO
/*********************************************************************/
             IF        COND(&SOFLAG *EQ 'S' *AND &WHSE10 *NE '   ') +
                         THEN(DO)
             CHGVAR     VAR(&L) VALUE('*OR F4AJCD *EQ "' *CAT &WHSE10 +
                          *CAT '"')
             ENDDO
             IF        COND(&SOFLAG *EQ 'O' *AND &WHSE10 *NE '   ') +
                         THEN(DO)
             CHGVAR    VAR(&L) VALUE('*OR F4AJCD *NE "' *CAT &WHSE10 +
                         *CAT '"')
             ENDDO
/*********************************************************************/
             CHGVAR    VAR(&ALL)    VALUE(&A *BCAT &B *BCAT &OPEN +
                                          *BCAT &C *BCAT &D *BCAT +
                                          &E *BCAT &F *BCAT &G *BCAT +
                                          &H *BCAT &I *BCAT &J *BCAT +
                                          &K *BCAT &L *BCAT &CLOSED)
             OVRDBF    FILE(OMHSTPL3) SHARE(*YES)
             OPNQRYF   FILE(OMHSTPL3) +
                       QRYSLT(&ALL) +
                       KEYFLD(*FILE)
/*********************************************************************/
/*   CALL LISTING PROGRAM                                            */
/*********************************************************************/

             CALL       PGM(PDWHPFR) PARM('' &COMP &FDATE &TDATE +
                          &EXPORT &WHSE1 &WHSE2 &WHSE3 &WHSE4 +
                          &WHSE5 &WHSE6 &WHSE7 &WHSE8 &WHSE9 &WHSE10 +
                          &SOFLAG)
             CLOF      OPNID(OMHSTPL3)
             DLTOVR    FILE(OMHSTPL3)

 ENDPGM
