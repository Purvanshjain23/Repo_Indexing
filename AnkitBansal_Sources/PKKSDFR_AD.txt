// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKKSDFR
// ?Date: 14.08.2025 Time: 02:56:44
// ?------------------------------------------------------------------------------------------------

//?USER: Process subfile record (Pre-confirm)

// Call program Zzz Tattoo Nbr TF Crt EF.
CALL PROGRAM(Zzz Tattoo Nbr TF Crt EF) ('PKKREFR');
PARAMETER(RCD.Company);
PARAMETER(RCD.TH_Tattoo_Number);
PARAMETER(RCD.Tattoo_Nbr_Group);
PARAMETER(RCD.Tattoo_Nbr_Group_Seq);

//?USER: Process command keys

CASE;

// IF CTL.*CMD key is CF06
IF CTL.*CMD_key = '06';

// WRK.*Return code = CND.*Normal
WRK.*Return_code = *BLANK;

// Call program Chk TattooNBR *ALL=U  XF.
CALL PROGRAM(Chk TattooNBR *ALL=U  XF) ('PWK6XFR');
PARAMETER(960);
PARAMETER(WRK.*Return_code);

CASE;

// IF WRK.*Return code is *Record does not exist
IF WRK.*Return_code = 'Y2U0005';

// Call program Upd Tattoo Nbr *blanks XF.
CALL PROGRAM(Upd Tattoo Nbr *blanks XF) ('PWK5XFR');
PARAMETER(960);

// PGM.*Reload subfile = CND.*YES
PGM.*Reload_subfile = 'Y';

ENDIF;

ENDIF;

