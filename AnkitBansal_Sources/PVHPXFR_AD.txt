// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PVHPXFR
// ?Date: 14.08.2025 Time: 03:52:14
// ?------------------------------------------------------------------------------------------------

//?Execute user function

// LCL.USR MAN02 Pallet Nbr Char = CON.003451678910111213
LCL.USR_MAN02_Pallet_Nbr_Char = 003451678910111213;

// LCL.USR Count = CON.1
LCL.USR_Count = 1;

//?Validate 20 Digit pallet ID for NorAm.
// DOW LCL.USR Count is LE 19
DOW LCL.USR_Count <= 19;

// LCL.Text 1 Length USR = SUBSTRING(LCL.USR MAN02 Pallet Nbr Char,LCL.USR Count,CON.1)
LCL.Text_1_Length_USR = SUBSTRING(LCL.USR_MAN02_Pallet_Nbr_Char:LCL.USR_Count:1);

// LCL.USR Count = LCL.USR Count + CON.1
LCL.USR_Count = LCL.USR_Count + 1;

// Execute function RPG TESTN for digits.
EXECUTE FUNCTION(RPG TESTN for digits) TYPE(EXCUSRSRC) ('PVHQUFR');
PARAMETER(LCL.USR_MAN02_Pallet_Nbr_Char);
PARAMETER(LCL.USR_Digit_Is_Valid);
{
 ‚* WI609_2 JM 10/11/2024 - Added user source to check Digit
 C                   Eval      *In52 = *Off
 C                   TestN                   #BXXU1               52
 C                   Eval      #OQMSC = 'N'
 C                   If        *In52 = *On
 ‚* WI609_2 JM 10/11/2024 - All 20 digits should be present.
 ‚*                         1st 2 digits should be zero.
 C                   If        %Subst(#BXXU1:1:2) = '00'
 C                   Eval      #OQMSC = 'Y'
 C                   EndIf
 C                   EndIf
}


CASE;

// IF LCL.USR Digit Is Valid is Yes
IF LCL.USR_Digit_Is_Valid = 'Y';

// IF *OTHERWISE
IF *OTHERWISE;

// LCL.USR Count = CND.EQ 0
LCL.USR_Count = *ZERO;

QUIT;

ENDIF;

ENDDO;

