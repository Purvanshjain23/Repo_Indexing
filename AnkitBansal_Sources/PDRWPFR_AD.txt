// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDRWPFR
// ?Date: 14.08.2025 Time: 12:04:22
// ?------------------------------------------------------------------------------------------------

//?USER: Print required level headings

CASE;

IF NEW Company_Number;
// SUPPRESSED PRINT Company Number header format

ENDIF;

CASE;

IF NEW Order_Number;
// SUPPRESSED PRINT Order Number header format

ENDIF;

CASE;

IF NEW ED_Export_Document_Type;
// SUPPRESSED PRINT ED Export Document Type header format

ENDIF;

//?USER: Process before print of detail format

CASE;

// IF DB1.ED Document Date is Not entered
IF DB1.ED_Document_Date = *ZERO;

// CUR.Date                  USR = JOB.*Job date
CUR.Date_USR = JOB.*Job_date;

// IF *OTHERWISE
IF *OTHERWISE;

// CUR.Date                  USR = DB1.ED Document Date
CUR.Date_USR = DB1.ED_Document_Date;

ENDIF;

// LCL.Date                  USR = CUR.Date                  USR
LCL.Date_USR = CUR.Date_USR;

// CUR.USR Uom = CON.Lbs
CUR.USR_Uom = 'Lbs';

// CUR.USR MT = CON.M/T
CUR.USR_MT = 'M/T';

// WRK.ED Export Certificate Nbr = CUR.ED Export Certificate Nbr
WRK.ED_Export_Certificate_Nbr = CUR.ED_Export_Certificate_Nbr;

// WRK.ED Shipping Marks Txt = CUR.ED Shipping Marks Txt
WRK.ED_Shipping_Marks_Txt = CUR.ED_Shipping_Marks_Txt;

CASE;

// IF CUR.ED Slaughter Plant Sts is Selected
IF CUR.ED_Attachment_Subtype = 'X';

// CUR.Toggle Text 1         USR = CON.*BLANK
CUR.Toggle_Text_1_USR = *BLANK;

ENDIF;

CASE;

// IF CUR.ED Processing Plant Sts is Selected
IF CUR.ED_Processing_Plant_Sts = 'X';

// CUR.Toggle Text 2         USR = CON.*BLANK
CUR.Toggle_Text_2_USR = *BLANK;

ENDIF;

CASE;

// IF CUR.ED Warehouse Sts is Selected
IF CUR.ED_Attachment_Type_Sts = 'X';

// CUR.Toggle Text 3         USR = CON.*BLANK
CUR.Toggle_Text_3_USR = *BLANK;

ENDIF;

//?PRTOBJ calls after print of detail format

//?Embedded PRTOBJ : Prt MPD Dtl w/MT Cmb  PO
EXECUTE FUNCTION(Prt MPD Dtl w/MT Cmb  PO) TYPE(PRTOBJ);
PARAMETER(CUR.Company_Number);
PARAMETER(CUR.Order_Number);
PARAMETER(CUR.ED_Export_Document_Type);
PARAMETER(CUR.Country_Code);
PARAMETER(CUR.ED_Shipping_Marks_Txt);
PARAMETER(CUR.ED_Nbr_of_prods_on_1st_pg);
PARAMETER(PAR.USR_Overflow);

//?USER: Print required level totals

// SUPPRESSED PRINT ED Export Document Type totals format

CASE;

IF NEW Order_Number;
// CUR.Text 10A USR = CON.Lbs. Gross
CUR.Text_10A_USR = 'Lbs. Gross';

// CUR.Text 9                USR = CON.M/T Gross
CUR.Text_9_USR = 'M/T Gross';

// CUR.Text USR 9 = CON.Slaughter
CUR.Text_USR_9 = 'Slaughter';

// CUR.Text USR = CON.Processing
CUR.Text_USR = 'Processing';

//?not printed  4/8/04
CASE;

// IF CUR.ED Letter of Credit Nbr is NOT ENTERED
IF CUR.ED_Letter_of_Credit_Nbr = *BLANK;

//?not printed  4/8/04
// IF *OTHERWISE
IF *OTHERWISE;

// CUR.Text-18               USR = CON.Letter of Credit #
CUR.Text_18_USR = 'Letter of Credit #';

ENDIF;

CASE;

// IF CUR.Country Code is Taiwan
IF CUR.Country_Code = 'TAI';

// OR CUR.Country Code is Korea
OR CUR.Country_Code = 'KOR';

//?Dont print the REMARKS section per Aaron C for Korea either.  5/19/14
//?Dont print the REMARKS section per Nathan      7/9/04
// PGM.*Print format = CND.Do not print format
PGM.*Print_format = 'N';

ENDIF;

// Print Order Number totals format
PRINT Order Number totals format;

ENDIF;

CASE;

IF NEW Company_Number;
CASE;

// IF CUR.ED Certify that the meat is Selected
IF CUR.ED_Certify_that_the_meat = 'X';

// CUR.Toggle Text 4         USR = CON.XXX
CUR.Toggle_Text_4_USR = 'XXX';

ENDIF;

// WRK.Date (Alpha) USR = CVTVAR(LCL.Date                  USR)
WRK.Date_Alpha_USR = CVTVAR(LCL.Date_USR);

// WRK.Month/Day Alpha MMDD = SUBSTRING(WRK.Date (Alpha) USR,CON.4,CON.4)
WRK.Month_Day_Alpha_MMDD = SUBSTRING(WRK.Date_Alpha_USR:4:4);

// WRK.Year  (Char) USR = SUBSTRING(WRK.Date (Alpha) USR,CON.2,CON.2)
WRK.Year_Char_USR = SUBSTRING(WRK.Date_Alpha_USR:2:2);

// WRK.Year Alpha (YYYY) USR = CONCAT(CON.20,WRK.Year  (Char) USR,CON.*ZERO)
WRK.Year_Alpha_YYYY_USR = '20' + WRK.Year_Char_USR (*ZERO);

// WRK.Date (Char-8) USR = CONCAT(WRK.Month/Day Alpha MMDD,WRK.Year Alpha (YYYY) USR,CON.*ZERO)
WRK.Date_Char_8_USR = WRK.Month_Day_Alpha_MMDD + WRK.Year_Alpha_YYYY_USR (*ZERO);

// CUR.Date 8.0 USR = CVTVAR(WRK.Date (Char-8) USR)
CUR.Date_8_0_USR = CVTVAR(WRK.Date_Char_8_USR);

// Print Company Number totals format
PRINT Company Number totals format;

//?Embedded PRTOBJ : Prt MPD Dtl Overfl Cmb PO
CASE;

// IF PAR.USR Overflow is No
IF PAR.USR_Overflow = 'N';

QUIT;

ENDIF;

EXECUTE FUNCTION(Prt MPD Dtl Overfl Cmb PO) TYPE(PRTOBJ);
PARAMETER(CUR.Company_Number);
PARAMETER(CUR.Order_Number);
PARAMETER(CUR.ED_Export_Document_Type);
PARAMETER(CUR.Country_Code);
PARAMETER(WRK.ED_Shipping_Marks_Txt);
PARAMETER(CUR.ED_Nbr_of_prods_on_1st_pg);
PARAMETER(WRK.ED_Export_Certificate_Nbr);
PARAMETER(LCL.Date_USR);
PARAMETER(CUR.ED_Inspector_Name);

ENDIF;

