// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMBZXFR
// ?Date: 14.08.2025 Time: 03:42:34
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?RMC TRF015 -  Copy Carrer/Whse Rates to another warehouse
//?              Also allow copy to another city
EXECUTE FUNCTION(Rtv for Copy Whse     RT) TYPE(RTVOBJ) FILE(PDLECPP)           AC1798047;
PARAMETER(PAR.Carrier_Code);
PARAMETER(PAR.Warehouse_Code);
PARAMETER(PAR.Destination_City);
PARAMETER(PAR.State_Code);
PARAMETER(PAR.Warehouse_1_USR);
PARAMETER(PAR.City);
PARAMETER(PAR.To_State_State_Code);
PARAMETER(PAR.Shipping_Company_Number);
{
 //?USER: Process Data record

 CASE;

 // IF PAR.Destination City is Entered
 IF PAR.Destination_City <> *BLANK;

 // AND PAR.City is NE Blanks
 AND PAR.City <> *BLANK;

 CASE;

 // IF DB1.Destination City EQ PAR.Destination City
 IF DB1.Destination_City = PAR.Destination_City;

 // AND DB1.State Code EQ PAR.State Code
 AND DB1.State_Code = PAR.State_Code;

 CASE;

 // IF PAR.Warehouse 1 USR is Entered
 IF PAR.Warehouse_1_USR <> *BLANK;

 EXECUTE FUNCTION(CRT Carrier-Destinatio CR) TYPE(CRTOBJ) FILE(PDLECPP)          AC1453463;
 PARAMETER(DB1.Carrier_Code);
 PARAMETER(PAR.Warehouse_1_USR);
 PARAMETER(PAR.City);
 PARAMETER(PAR.To_State_State_Code);
 PARAMETER(DB1.Flat_Rate);
 PARAMETER(DB1.CDR_Unit_of_Measure);
 PARAMETER(DB1.Bulk_Rate);
 PARAMETER(DB1.Export_Fresh_Flat_Amt);
 PARAMETER(DB1.Export_Frozen_Flat_Amt);
 PARAMETER(DB1.Double_Fuel_Surcharge_Sts);
 PARAMETER(DB1.CDR_Unused_Sts_2);
 PARAMETER(DB1.CDR_Unused_Date_1);
 PARAMETER(DB1.CDR_Unused_Date_2);
 PARAMETER(DB1.CDR_Unused_Amount);
 PARAMETER(JOB.*Job_time);
 PARAMETER(JOB.*USER);
 PARAMETER(JOB.*JOB);
 PARAMETER(JOB.*Job_date);
 {
  //?USER: Processing if Data record already exists

  EXECUTE FUNCTION(CHG Carrier-Destinatio CH) TYPE(CHGOBJ) FILE(PDLECPP)          AC1453464;
  PARAMETER(DB1.Carrier_Code);
  PARAMETER(DB1.Warehouse_Code);
  PARAMETER(DB1.Destination_City);
  PARAMETER(DB1.State_Code);
  PARAMETER(PAR.Flat_Rate);
  PARAMETER(PAR.CDR_Unit_of_Measure);
  PARAMETER(PAR.Bulk_Rate);
  PARAMETER(PAR.Export_Fresh_Flat_Amt);
  PARAMETER(PAR.Export_Frozen_Flat_Amt);
  PARAMETER(PAR.Double_Fuel_Surcharge_Sts);
  PARAMETER(PAR.CDR_Unused_Sts_2);
  PARAMETER(PAR.CDR_Unused_Date_1);
  PARAMETER(PAR.CDR_Unused_Date_2);
  PARAMETER(PAR.CDR_Unused_Amount);
  PARAMETER(JOB.*Job_time);
  PARAMETER(JOB.*USER);
  PARAMETER(JOB.*JOB);
  PARAMETER(JOB.*Job_date);
 }

 // IF PAR.Shipping Company Number is Not Zeros
 IF PAR.Shipping_Company_Number <> *ZERO;

 EXECUTE FUNCTION(Rtv Cpy Carr Dest Rt  RT) TYPE(RTVOBJ) FILE(CAADREP)           AC1802218;
 PARAMETER(PAR.Shipping_Company_Number);
 PARAMETER(DB1.Carrier_Code);
 PARAMETER(PAR.City);
 PARAMETER(PAR.To_State_State_Code);
 PARAMETER(DB1.Flat_Rate);
 PARAMETER(DB1.CDR_Unit_of_Measure);
 PARAMETER(DB1.Bulk_Rate);
 PARAMETER(DB1.Export_Fresh_Flat_Amt);
 PARAMETER(DB1.Export_Frozen_Flat_Amt);
 PARAMETER(DB1.Double_Fuel_Surcharge_Sts);
 PARAMETER(DB1.CDR_Unused_Sts_2);
 PARAMETER(DB1.CDR_Unused_Date_1);
 PARAMETER(DB1.CDR_Unused_Date_2);
 PARAMETER(DB1.CDR_Unused_Amount);
 {
  //?USER: Process Data record

  CASE;

  // IF DB1.Record Status is Active
  IF DB1.Record_Status = 'A';

  EXECUTE FUNCTION(CRT Carrier-Destinatio CR) TYPE(CRTOBJ) FILE(PDLECPP)          AC1453463;
  PARAMETER(PAR.Carrier_Code);
  PARAMETER(DB1.Warehouse_Code);
  PARAMETER(PAR.Destination_City);
  PARAMETER(PAR.State_Code);
  PARAMETER(PAR.Flat_Rate);
  PARAMETER(PAR.CDR_Unit_of_Measure);
  PARAMETER(PAR.Bulk_Rate);
  PARAMETER(PAR.Export_Fresh_Flat_Amt);
  PARAMETER(PAR.Export_Frozen_Flat_Amt);
  PARAMETER(PAR.Double_Fuel_Surcharge_Sts);
  PARAMETER(PAR.CDR_Unused_Sts_2);
  PARAMETER(PAR.CDR_Unused_Date_1);
  PARAMETER(PAR.CDR_Unused_Date_2);
  PARAMETER(PAR.CDR_Unused_Amount);
  PARAMETER(JOB.*Job_time);
  PARAMETER(JOB.*USER);
  PARAMETER(JOB.*JOB);
  PARAMETER(JOB.*Job_date);
  {
   //?USER: Processing if Data record already exists

   EXECUTE FUNCTION(CHG Carrier-Destinatio CH) TYPE(CHGOBJ) FILE(PDLECPP)          AC1453464;
   PARAMETER(DB1.Carrier_Code);
   PARAMETER(DB1.Warehouse_Code);
   PARAMETER(DB1.Destination_City);
   PARAMETER(DB1.State_Code);
   PARAMETER(PAR.Flat_Rate);
   PARAMETER(PAR.CDR_Unit_of_Measure);
   PARAMETER(PAR.Bulk_Rate);
   PARAMETER(PAR.Export_Fresh_Flat_Amt);
   PARAMETER(PAR.Export_Frozen_Flat_Amt);
   PARAMETER(PAR.Double_Fuel_Surcharge_Sts);
   PARAMETER(PAR.CDR_Unused_Sts_2);
   PARAMETER(PAR.CDR_Unused_Date_1);
   PARAMETER(PAR.CDR_Unused_Date_2);
   PARAMETER(PAR.CDR_Unused_Amount);
   PARAMETER(JOB.*Job_time);
   PARAMETER(JOB.*USER);
   PARAMETER(JOB.*JOB);
   PARAMETER(JOB.*Job_date);
  }

  ENDIF;

 }

 ENDIF;

 ENDIF;

 // IF *OTHERWISE
 IF *OTHERWISE;

 //?Copy One whse to new whse
 CASE;

 // IF PAR.Warehouse 1 USR is Entered
 IF PAR.Warehouse_1_USR <> *BLANK;

 EXECUTE FUNCTION(CRT Carrier-Destinatio CR) TYPE(CRTOBJ) FILE(PDLECPP)          AC1453463;
 PARAMETER(DB1.Carrier_Code);
 PARAMETER(PAR.Warehouse_1_USR);
 PARAMETER(DB1.Destination_City);
 PARAMETER(DB1.State_Code);
 PARAMETER(DB1.Flat_Rate);
 PARAMETER(DB1.CDR_Unit_of_Measure);
 PARAMETER(DB1.Bulk_Rate);
 PARAMETER(DB1.Export_Fresh_Flat_Amt);
 PARAMETER(DB1.Export_Frozen_Flat_Amt);
 PARAMETER(DB1.Double_Fuel_Surcharge_Sts);
 PARAMETER(DB1.CDR_Unused_Sts_2);
 PARAMETER(DB1.CDR_Unused_Date_1);
 PARAMETER(DB1.CDR_Unused_Date_2);
 PARAMETER(DB1.CDR_Unused_Amount);
 PARAMETER(JOB.*Job_time);
 PARAMETER(JOB.*USER);
 PARAMETER(JOB.*JOB);
 PARAMETER(JOB.*Job_date);
 {
  //?USER: Processing if Data record already exists

  EXECUTE FUNCTION(CHG Carrier-Destinatio CH) TYPE(CHGOBJ) FILE(PDLECPP)          AC1453464;
  PARAMETER(DB1.Carrier_Code);
  PARAMETER(DB1.Warehouse_Code);
  PARAMETER(DB1.Destination_City);
  PARAMETER(DB1.State_Code);
  PARAMETER(PAR.Flat_Rate);
  PARAMETER(PAR.CDR_Unit_of_Measure);
  PARAMETER(PAR.Bulk_Rate);
  PARAMETER(PAR.Export_Fresh_Flat_Amt);
  PARAMETER(PAR.Export_Frozen_Flat_Amt);
  PARAMETER(PAR.Double_Fuel_Surcharge_Sts);
  PARAMETER(PAR.CDR_Unused_Sts_2);
  PARAMETER(PAR.CDR_Unused_Date_1);
  PARAMETER(PAR.CDR_Unused_Date_2);
  PARAMETER(PAR.CDR_Unused_Amount);
  PARAMETER(JOB.*Job_time);
  PARAMETER(JOB.*USER);
  PARAMETER(JOB.*JOB);
  PARAMETER(JOB.*Job_date);
 }

 // IF *OTHERWISE
 IF *OTHERWISE;

 //?Copy One whse to all active warehouses for a company
 EXECUTE FUNCTION(Rtv Cpy Carr Dest Rt  RT) TYPE(RTVOBJ) FILE(CAADREP)           AC1802218;
 PARAMETER(PAR.Shipping_Company_Number);
 PARAMETER(DB1.Carrier_Code);
 PARAMETER(DB1.Destination_City);
 PARAMETER(DB1.State_Code);
 PARAMETER(DB1.Flat_Rate);
 PARAMETER(DB1.CDR_Unit_of_Measure);
 PARAMETER(DB1.Bulk_Rate);
 PARAMETER(DB1.Export_Fresh_Flat_Amt);
 PARAMETER(DB1.Export_Frozen_Flat_Amt);
 PARAMETER(DB1.Double_Fuel_Surcharge_Sts);
 PARAMETER(DB1.CDR_Unused_Sts_2);
 PARAMETER(DB1.CDR_Unused_Date_1);
 PARAMETER(DB1.CDR_Unused_Date_2);
 PARAMETER(DB1.CDR_Unused_Amount);
 {
  //?USER: Process Data record

  CASE;

  // IF DB1.Record Status is Active
  IF DB1.Record_Status = 'A';

  EXECUTE FUNCTION(CRT Carrier-Destinatio CR) TYPE(CRTOBJ) FILE(PDLECPP)          AC1453463;
  PARAMETER(PAR.Carrier_Code);
  PARAMETER(DB1.Warehouse_Code);
  PARAMETER(PAR.Destination_City);
  PARAMETER(PAR.State_Code);
  PARAMETER(PAR.Flat_Rate);
  PARAMETER(PAR.CDR_Unit_of_Measure);
  PARAMETER(PAR.Bulk_Rate);
  PARAMETER(PAR.Export_Fresh_Flat_Amt);
  PARAMETER(PAR.Export_Frozen_Flat_Amt);
  PARAMETER(PAR.Double_Fuel_Surcharge_Sts);
  PARAMETER(PAR.CDR_Unused_Sts_2);
  PARAMETER(PAR.CDR_Unused_Date_1);
  PARAMETER(PAR.CDR_Unused_Date_2);
  PARAMETER(PAR.CDR_Unused_Amount);
  PARAMETER(JOB.*Job_time);
  PARAMETER(JOB.*USER);
  PARAMETER(JOB.*JOB);
  PARAMETER(JOB.*Job_date);
  {
   //?USER: Processing if Data record already exists

   EXECUTE FUNCTION(CHG Carrier-Destinatio CH) TYPE(CHGOBJ) FILE(PDLECPP)          AC1453464;
   PARAMETER(DB1.Carrier_Code);
   PARAMETER(DB1.Warehouse_Code);
   PARAMETER(DB1.Destination_City);
   PARAMETER(DB1.State_Code);
   PARAMETER(PAR.Flat_Rate);
   PARAMETER(PAR.CDR_Unit_of_Measure);
   PARAMETER(PAR.Bulk_Rate);
   PARAMETER(PAR.Export_Fresh_Flat_Amt);
   PARAMETER(PAR.Export_Frozen_Flat_Amt);
   PARAMETER(PAR.Double_Fuel_Surcharge_Sts);
   PARAMETER(PAR.CDR_Unused_Sts_2);
   PARAMETER(PAR.CDR_Unused_Date_1);
   PARAMETER(PAR.CDR_Unused_Date_2);
   PARAMETER(PAR.CDR_Unused_Amount);
   PARAMETER(JOB.*Job_time);
   PARAMETER(JOB.*USER);
   PARAMETER(JOB.*JOB);
   PARAMETER(JOB.*Job_date);
  }

  ENDIF;

 }

 ENDIF;

 ENDIF;

}


