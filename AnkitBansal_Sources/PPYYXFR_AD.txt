// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PPYYXFR
// ?Date: 14.08.2025 Time: 03:42:23
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?** E3067 RMC 4/17/14 Classify all loads - even if not locked
//?** E2709 RMC 9/12/13 Classify as BX/CB - never MX
//?** E00239 LJB 11/12/2008
//?** Change RT to change all for 1/01/2008 and after
//?** Changes Load U/M to BX if all boxes, CB if all combos,
//?** and MX if any mix of the two
//?RMC new conversion 6/16/06
EXECUTE FUNCTION(CNV Load U/M          RT) TYPE(RTVOBJ) FILE(OMFJCPP)           AC1783987;
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Scheduled Ship Date GE JOB.*Job date
 IF DB1.Scheduled_Ship_Date >= JOB.*Job_date;

 //?New -        doing all loads 4/17/14
 CASE;

 // IF DB1.Load U/M is not entered
 IF DB1.Load_U_M = *BLANK;

 // AND DB1.Load Status is Prior to Shipped
 AND DB1.Load_Status = 'C'/'E'/'L'/'U';

 // Call program RTV UM/Whs Code,BX Qty XF.
 CALL PROGRAM(RTV UM/Whs Code,BX Qty XF) ('PPYXXFR');
 PARAMETER(DB1.Load_ID);
 PARAMETER(LCL.Load_U_M);

 CASE;

 // IF LCL.Load U/M NE DB1.Load U/M
 IF LCL.Load_U_M <> DB1.Load_U_M;

 EXECUTE FUNCTION(CHG Load U/M          CH) TYPE(CHGOBJ) FILE(OMFJCPP)           AC1783988;
 PARAMETER(DB1.Load_ID);
 PARAMETER(LCL.Load_U_M);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Date/Time Stamp   IF) TYPE(EXCINTFUN)                      AC1142219;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*JOB
   PAR.Job_Name = JOB.*JOB;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 ENDIF;

 ENDIF;

 ENDIF;

}


