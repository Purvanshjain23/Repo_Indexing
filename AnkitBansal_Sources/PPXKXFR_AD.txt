// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PPXKXFR
// ?Date: 14.08.2025 Time: 03:42:13
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?par.isc week ending date = Current week ending date to be fixed.
//?   eg.   par.isc week ending date = 20060401
//?par.ivf week ending date = LAST week ending date
//?   eg.   par.ivf week ending date = 20060325
EXECUTE FUNCTION(Fix Beg Inv Fields    RT) TYPE(RTVOBJ) FILE(PPBSCPP)           AC1779212;
PARAMETER(PAR.ISC_Week_Ending_Date);
PARAMETER(PAR.IVF_Week_Ending_Date);
{
 //?USER: Process Data record

 //?Roll previous week's End to Beg
 //?R9083 02/22/17 DN-Modified to Read by WeekEnd(D)/WhsCo/Whs/Itm - PPBSCPLB.
 EXECUTE FUNCTION(Rtv Last Wk End Inv   RT) TYPE(RTVOBJ) FILE(PPBSCPP)           AC1779214;
 PARAMETER(PAR.IVF_Week_Ending_Date);
 PARAMETER(DB1.ISC_Warehouse_Company);
 PARAMETER(DB1.ISC_Warehouse_Code);
 PARAMETER(DB1.ISC_Item_Code);
 PARAMETER(WRK.ISC_Ending_Inv_Adj_Qty);
 PARAMETER(WRK.ISC_Ending_Inv_Adj_Lbs);
 PARAMETER(WRK.ISC_Ending_Inv_Final_Qty);
 PARAMETER(WRK.ISC_Ending_Inv_Final_Lbs);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 // WRK.ISC Beg Inv Lbs = WRK.ISC End Inv Final Lbs - WRK.ISC End Inv Adj Lbs
 WRK.ISC_Begin_Inv_Lbs = WRK.ISC_Ending_Inv_Final_Lbs - WRK.ISC_Ending_Inv_Adj_Lbs;

 // WRK.ISC Beg Inv Qty = WRK.ISC End Inv Final Qty - WRK.ISC End Inv Adj Qty
 WRK.ISC_Begin_Inv_Qty = WRK.ISC_Ending_Inv_Final_Qty - WRK.ISC_Ending_Inv_Adj_Qty;

 EXECUTE FUNCTION(Chg Inventory Stock   CH) TYPE(CHGOBJ) FILE(PPBSCPP)           AC1738128;
 PARAMETER(DB1.ISC_Week_Ending_Date);
 PARAMETER(DB1.ISC_Warehouse_Company);
 PARAMETER(DB1.ISC_Warehouse_Code);
 PARAMETER(DB1.ISC_Item_Code);
 PARAMETER(DB1.ISC_Warehouse_Type);
 PARAMETER(DB1.ISC_Item_Cmdty_Price_Grp);
 PARAMETER(DB1.ISC_Item_Dft_Cmdty_Mkt_Bs);
 PARAMETER(DB1.ISC_Item_Type);
 PARAMETER(DB1.ISC_Item_Market_Overage);
 PARAMETER(DB1.ISC_Item_Structure_Type);
 PARAMETER(DB1.ISC_Item_Structure_Group);
 PARAMETER(DB1.ISC_Item_Structure_Class);
 PARAMETER(DB1.ISC_Item_GL_Sub_Code);
 PARAMETER(DB1.ISC_Item_UOM_Pricing);
 PARAMETER(WRK.ISC_Ending_Inv_Final_Qty);
 PARAMETER(WRK.ISC_Ending_Inv_Final_Lbs);
 PARAMETER(WRK.ISC_Ending_Inv_Adj_Qty);
 PARAMETER(WRK.ISC_Ending_Inv_Adj_Lbs);
 PARAMETER(WRK.ISC_Begin_Inv_Qty);
 PARAMETER(WRK.ISC_Begin_Inv_Lbs);
 PARAMETER(DB1.ISC_Floor_Production_Qty);
 PARAMETER(DB1.ISC_Floor_Production_Lbs);
 PARAMETER(DB1.ISC_Floor_Prod_Adj_Qty);
 PARAMETER(DB1.ISC_Floor_Prod_Adj_Lbs);
 PARAMETER(DB1.ISC_Sales_Production_Qty);
 PARAMETER(DB1.ISC_Sales_Production_Lbs);
 PARAMETER(DB1.ISC_Inventory_Shipmnt_Qty);
 PARAMETER(DB1.ISC_Inventory_Shipmnt_Lbs);
 PARAMETER(DB1.ISC_Ord_Dtl_Shipment_Qty);
 PARAMETER(DB1.ISC_Ord_Dtl_Shipment_Lbs);
 PARAMETER(DB1.ISC_Shipment_Final_Qty);
 PARAMETER(DB1.ISC_Shipment_Final_Lbs);
 PARAMETER(DB1.ISC_FOB_Gross_Amount);
 PARAMETER(DB1.ISC_Inventory_Txfr_Qty);
 PARAMETER(DB1.ISC_Inventory_Txfr_Lbs);
 PARAMETER(DB1.ISC_Misc_Invntry_Adj_Qty);
 PARAMETER(DB1.ISC_Misc_Invntry_Adj_Lbs);
 PARAMETER(DB1.ISC_Ending_Inventory_Qty);
 PARAMETER(DB1.ISC_Ending_Inventory_Lbs);
 PARAMETER(DB1.ISC_End_Inv_User_Id);
 PARAMETER(DB1.ISC_End_Inv_Date);
 PARAMETER(DB1.ISC_End_Inv_Time);
 PARAMETER(DB1.ISC_Sun_Ship_Inv_Adj_Qty);
 PARAMETER(DB1.ISC_Sun_Ship_Inv_Adj_Lbs);
 PARAMETER(DB1.ISC_Unsh_Ship_Inv_Adj_Qty);
 PARAMETER(DB1.ISC_Unsh_Ship_Inv_Adj_Lbs);
 PARAMETER(DB1.ISC_End_Inv_Partial_Qty);
 PARAMETER(DB1.ISC_End_Inv_Partial_Lbs);
 PARAMETER(DB1.ISC_Ending_Inv_Adj_Qty);
 PARAMETER(DB1.ISC_Ending_Inv_Adj_Lbs);
 PARAMETER(DB1.ISC_End_Inv_Adj_Comment);
 PARAMETER(DB1.ISC_Ending_Inv_Adj_User);
 PARAMETER(DB1.ISC_Ending_Inv_Adj_Date);
 PARAMETER(DB1.ISC_Ending_Inv_Adj_Time);
 PARAMETER(DB1.ISC_Ending_Inv_Final_Qty);
 PARAMETER(DB1.ISC_Ending_Inv_Final_Lbs);
 PARAMETER(DB1.ISC_Warehouse_Price_UOM);
 PARAMETER(DB1.ISC_Warehouse_Price_Ovrrd);
 PARAMETER(DB1.ISC_Post_Balance_Sts);
 PARAMETER(DB1.ISC_Post_Warehouse_Sts);
 PARAMETER(DB1.ISC_Commission_Amount);
 PARAMETER(DB1.ISC_Unused_Lbs_1);
 PARAMETER(DB1.ISC_TF_Exempt_NPR_Dollars);
 PARAMETER(DB1.ISC_TF_Exempt_Pounds);
 PARAMETER(DB1.ISC_Valuation_Grouping);
 PARAMETER(DB1.ISC_Unused_Date_1);
 PARAMETER(DB1.ISC_Unused_Sts_2);
 PARAMETER(DB1.Record_Status);
 PARAMETER(DB1.Create_Date);
 PARAMETER(DB1.Create_Time);
 PARAMETER(DB1.Create_User);
 PARAMETER(DB1.Create_Program);
 PARAMETER(DB1.Change_Date);
 PARAMETER(DB1.Change_Time);
 PARAMETER(DB1.Change_User);
 PARAMETER(DB1.Change_Program);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Chg Date/Time      IF) TYPE(EXCINTFUN)                     AC1523476;
  PARAMETER(DB1.Change_Date);
  PARAMETER(DB1.Change_Time);
  PARAMETER(DB1.Change_User);
  PARAMETER(DB1.Change_Program);
  {
   //?Execute internal function

   // PAR.Change Date = JOB.*Job date
   PAR.Change_Date = JOB.*Job_date;

   // PAR.Change Time = JOB.*Job time
   PAR.Change_Time = JOB.*Job_time;

   // PAR.Change User = JOB.*USER
   PAR.Change_User = JOB.*USER;

   // PAR.Change Program = JOB.*PROGRAM
   PAR.Change_Program = JOB.*PROGRAM;

  }

  // Compute:Ending Inv Fin Qt
  DB1.ISC_Ending_Inv_Final_Qty = ( ( ( DB1.ISC_Ending_Inventory_Qty
  + DB1.ISC_Ending_Inv_Adj_Qty ) + DB1.ISC_Sun_Ship_Inv_Adj_Qty )
  + DB1.ISC_Unsh_Ship_Inv_Adj_Qty ) + DB1.ISC_End_Inv_Partial_Qty;

  // Compute:Ending Inv Fin Lb
  DB1.ISC_Ending_Inv_Final_Lbs = ( ( ( DB1.ISC_Ending_Inventory_Lbs
  + DB1.ISC_Ending_Inv_Adj_Lbs ) + DB1.ISC_Sun_Ship_Inv_Adj_Lbs )
  + DB1.ISC_Unsh_Ship_Inv_Adj_Lbs ) + DB1.ISC_End_Inv_Partial_Lbs;

  // Comp: sales prod qty
  DB1.ISC_Sales_Production_Qty = ( DB1.ISC_Ending_Inv_Final_Qty
  + DB1.ISC_Shipment_Final_Qty ) - DB1.ISC_Begin_Inv_Final_Qty;

  // Comp: sales prod lbs
  DB1.ISC_Sales_Production_Lbs = ( DB1.ISC_Ending_Inv_Final_Lbs
  + DB1.ISC_Shipment_Final_Lbs ) - DB1.ISC_Begin_Inv_Final_Lbs;

 }

}


