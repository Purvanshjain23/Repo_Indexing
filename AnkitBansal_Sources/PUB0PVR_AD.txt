// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PUB0PVR
// ?Date: 14.08.2025 Time: 03:49:54
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?Modifications and Comments
DO;

//?E10070 JJH 04/13/17 - Set Plan Production Sts = N
//?This program will perform all activities to allow the Plan
//?Production Sts in the Company Item Ext to be set to N=No.
//?- Read Order Detail Schedule
//?  - If Company = 360/960/440
//?    - If OD Weight Schedule GT ZERO,
//?      - Delete Order Detail Schedule-Inv
//?    - Delete Order Detail Schedule
//?  - Read Order Detail by Company/Item
//?    - Set OD Plan Production Sts = N
//?  - Set the Company Item Ext/Plan Production Sts = N
ENDDO;

//?USER: Validate fields

CASE;

// IF DTL.Company Number is Guymon
IF DTL.Company_Number = 360;

// OR DTL.Company Number is St. Joseph
OR DTL.Company_Number = 960;

// OR DTL.Company Number is Seaboard Triumph Foods
OR DTL.Company_Number = 440;

EXECUTE FUNCTION(Rtv Descriptions      RT) TYPE(RTVOBJ) FILE(CABZREP)           AC1140665;
PARAMETER(DTL.Company_Number);
PARAMETER(DTL.Item_Code);
PARAMETER(DTL.Description_Line_One);
PARAMETER(NLL.Description_Line_Two);
PARAMETER(NLL.UOM_Primary);
PARAMETER(NLL.UOM_Second);
PARAMETER(NLL.UOM_Third);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


EXECUTE FUNCTION(Rtv Plan Prod Sts     RT) TYPE(RTVOBJ) FILE(PMFDREP)           AC1930583;
PARAMETER(DTL.Company_Number);
PARAMETER(DTL.Item_Code);
PARAMETER(DTL.Plan_Production_Sts);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


// IF *OTHERWISE
IF *OTHERWISE;

// Send error message - 'Company Number &1 not allowed.'
ERROR(USR4981);
MSGPARM(DTL.Company_Number);

ENDIF;

//?USER: User defined action

EXECUTE FUNCTION(Rtv Plan Prod Sts     RT) TYPE(RTVOBJ) FILE(PMFDREP)           AC1930583;
PARAMETER(DTL.Company_Number);
PARAMETER(DTL.Item_Code);
PARAMETER(LCL.Plan_Production_Sts);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


// Call program Set Plan Prd Sched=N  XF.
CALL PROGRAM(Set Plan Prd Sched=N  XF) ('PUBZXFR');
PARAMETER(DTL.Company_Number);
PARAMETER(DTL.Item_Code);
PARAMETER(DTL.Plan_Production_Sts);

