// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDZGXFR
// ?Date: 14.08.2025 Time: 03:33:42
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(CNV Upd Ship from Whse RT) TYPE(RTVOBJ) FILE(OMFJCPP)          AC1469204;
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Load Status is Shipped or Invoiced
 IF DB1.Load_Status = 'I'/'S';

 // IF *OTHERWISE
 IF *OTHERWISE;

 CASE;

 // IF DB1.Ship From Warehouse is Warehouse Code Blank
 IF DB1.Ship_From_Warehouse = *BLANK;

 EXECUTE FUNCTION(RTV First Order Whse   RT) TYPE(RTVOBJ) FILE(OMFLCPP)          AC1397882;
 PARAMETER(DB1.Load_ID);
 PARAMETER(*ZERO);
 PARAMETER(PAR.Ship_From_Warehouse);
 {
  //?USER: Processing if Data record not found

  // PGM.*Return code = CND.*Record does not exist
  PGM.*Return_code = 'Y2U0005';

  //?USER: Process Data record

  EXECUTE FUNCTION(RTV 1st Warehouse/Ctl  RT) TYPE(RTVOBJ) FILE(OPBGWKP)          AC1360958;
  PARAMETER(DB1.Company_Number);
  PARAMETER(DB1.Order_Number);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(PAR.Warehouse_Code);
  PARAMETER(WRK.TXT_field_not_needed);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   //?USER: Process Data record

   EXECUTE FUNCTION(RTV Warehouse Control  RT) TYPE(RTVOBJ) FILE(CAADREP)          AC1304300;
   PARAMETER(DB1.Warehouse_Code);
   PARAMETER(PAR.Trans_Contol_AS400_Plant);
   {
    //?USER: Processing if Data record not found

    MOVE *ALL (To: PAR From: CON);

    // PGM.*Return code = CND.*Record does not exist
    PGM.*Return_code = 'Y2U0005';

    //?USER: Process Data record

    MOVE *ALL (To: PAR From: DB1);

   }

   MOVE *ALL (To: PAR From: DB1);

   QUIT;

  }

  QUIT;

 }

 EXECUTE FUNCTION(CHG Ship From Whse     CH) TYPE(CHGOBJ) FILE(OMFJCPP)          AC1469205;
 PARAMETER(DB1.Load_ID);
 PARAMETER(PAR.Ship_From_Warehouse);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 ENDIF;

 ENDIF;

}


