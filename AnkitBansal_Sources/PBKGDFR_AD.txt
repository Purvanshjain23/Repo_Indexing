// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBKGDFR
// ?Date: 14.08.2025 Time: 03:48:19
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize subfile control

// CTL.Item Code = PAR.Item Code
CTL.Item_Code = PAR.Item_Code;

//?USER: Initialize subfile record from DBF record

EXECUTE FUNCTION(Val Itm exists on LD   RT) TYPE(RTVOBJ) FILE(OMFLCPP)          AC2075412;
PARAMETER(DB1.Load_ID);
PARAMETER(PAR.Ship_From_Warehouse);
PARAMETER(PAR.Item_Code);
PARAMETER(LCL.Record_Found_USR);
PARAMETER(RCD.Quantity_Ordered_5_0_USR);
{
 //?USER: Initialize routine

 // PAR.Record Found USR = CND.Record Not Found
 PAR.Record_Found_USR = 'N';

 //?USER: Process Data record

 EXECUTE FUNCTION(VAL Item Exists on ld RT) TYPE(RTVOBJ) FILE(OPBGWKP)           AC2075415;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(LCL.Quantity_Ordered);
 PARAMETER(PAR.Warehouse_Code);
 PARAMETER(PAR.Item_Code);
 PARAMETER(PAR.Record_Found_USR);
 {
  //?USER: Initialize routine

  // PAR.Quantity Ordered = CON.*ZERO
  PAR.Quantity_Ordered = *ZERO;

  //?USER: Process Data record

  CASE;

  // IF PAR.Item Code EQ DB1.Item Code
  IF PAR.Item_Code = DB1.Item_Code;

  // PAR.Quantity Ordered = PAR.Quantity Ordered + DB1.Quantity Ordered
  PAR.Quantity_Ordered = PAR.Quantity_Ordered + DB1.Quantity_Ordered;

  // PAR.Record Found USR = CND.Record Found
  PAR.Record_Found_USR = 'Y';

  ENDIF;

 }

 // PAR.Quantity Ordered 1 USR = PAR.Quantity Ordered 1 USR + LCL.Quantity Ordered
 PAR.Quantity_Ordered_1_USR = PAR.Quantity_Ordered_1_USR + LCL.Quantity_Ordered;

}


CASE;

// IF LCL.Record Found USR is Record Found
IF LCL.Record_Found_USR = 'Y';

// RCD.Deadline Depart Time 4,0 = RCD.Deadline Departure Time / CON.100 *
RCD.Deadline_Depart_Time_40 = RCD.Deadline_Departure_Time / 100;

// IF *OTHERWISE
IF *OTHERWISE;

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

