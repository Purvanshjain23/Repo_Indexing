/***************************************************************** */
/*                                                                 */
/*       PROGRAM:    ERAINCL                                       */
/*  PROGRAM NAME:    EBI: REMITTANCE ADVICE --Print/Email          */
/*    PROGRAMMER:    SHARON ZURN                                   */
/*   CREATE DATE:    05/28/15                                      */
/*                                                                 */
/*      FUNCTION:    This CL is wrapped in a Stored Procedure      */
/*                   (ERAIN) which Extol EBI calls from the        */
/*                   server software at the end of processing of   */
/*                   an inbound application advice (an 824).       */
/*                                                                 */
/*                   We are setting this up so that we can call    */
/*                   the existing SYNON programs to generate the   */
/*                   report and email it.                          */
/*******************************************************************/

             PGM        PARM(&FUNCST &PROCST &TRDPRT &SETNBR &DIV &ENV)

             DCL        VAR(&DIV) TYPE(*CHAR) LEN(1)
             DCL        VAR(&ENV) TYPE(*CHAR) LEN(1)
             DCL        VAR(&FUNCST) TYPE(*CHAR) LEN(1)
             DCL        VAR(&PROCST) TYPE(*CHAR) LEN(1)
             DCL        VAR(&TRDPRT) TYPE(*CHAR) LEN(6)
             DCL        VAR(&SETNBR) TYPE(*CHAR) LEN(9)
             DCL        VAR(&RETURN) TYPE(*CHAR) LEN(7) VALUE(' ')

             RMVLIBLE   LIB(QGPL)
             MONMSG     MSGID(CPF0000)
             ADDLIBLE   LIB(QGPL)

             RMVLIBLE   LIB(TAATOOL)
             MONMSG     MSGID(CPF0000)
             ADDLIBLE   LIB(TAATOOL)

/* PORK--Production                                                */
             IF         COND(&DIV *EQ 'P' *AND &ENV *EQ 'P') THEN(DO)
             CHGLBLJOBD JOBD(PRKPRDSEC)
             ENDDO

/* PORK--Test                                                      */
             IF         COND(&DIV *EQ 'P' *AND &ENV *EQ 'T') THEN(DO)
             CHGLBLJOBD JOBD(PRKTSTEDI)
             ENDDO

/* Dailys--Production                                              */
             IF         COND(&DIV *EQ 'D' *AND &ENV *EQ 'P') THEN(DO)
             CHGLBLJOBD JOBD(DMMJOBD)
             ENDDO

/* Dailys--Test                                                    */
             IF         COND(&DIV *EQ 'D' *AND &ENV *EQ 'T') THEN(DO)
             CHGLBLJOBD JOBD(DLYTSTEDI)
             ENDDO


/*-----------------------------------------------------------------*/
/* Submit Job to Print/Email Report                                */
/*-----------------------------------------------------------------*/

             SBMJOB     CMD(CALL PGM(PBAOXFR) PARM(&RETURN &FUNCST +
                          &PROCST &TRDPRT &SETNBR)) JOB(ERAIN) +
                          USER(*CURRENT) INLLIBL(*CURRENT) LOG(4 00 +
                          *SECLVL)

