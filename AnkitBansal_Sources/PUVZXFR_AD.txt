// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PUVZXFR
// ?Date: 14.08.2025 Time: 03:51:31
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Check if today's date is Period End
EXECUTE FUNCTION(Rtv Beg/End Dt    RT) TYPE(RTVOBJ) FILE(CAATREP)               AC2206385;
PARAMETER(360);
PARAMETER(JOB.*Job_date);
PARAMETER(PAR.Period_Beginning_Date);
PARAMETER(NLL.Period_Ending_Date);
{
 //?USER: Initialize routine

 // LCL.USR Counter = CON.*ZERO
 LCL.USR_Counter = *ZERO;

 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 // LCL.USR Counter = LCL.USR Counter + CON.1
 LCL.USR_Counter = LCL.USR_Counter + 1;

 CASE;

 // IF LCL.USR Counter is EQ 1
 IF LCL.USR_Counter = 1;

 //?PAR Date = DB1 Date?
 CASE;

 // IF PAR.Period Ending Date EQ DB1.Period Ending Date
 IF PAR.Period_Ending_Date = DB1.Period_Ending_Date;

 // PAR.Period Ending Date = DB1.Period Ending Date
 PAR.Period_Ending_Date = DB1.Period_Ending_Date;

 // LCL.Accounting Period Code = DB1.Accounting Period Code
 LCL.Accounting_Period_Code = DB1.Accounting_Period_Code;

 //?PAR Date = DB1 Date?
 // IF *OTHERWISE
 IF *OTHERWISE;

 QUIT;

 ENDIF;

 ENDIF;

 CASE;

 // IF LCL.USR Counter is GT 1
 IF LCL.USR_Counter > 1;

 //?If Same Period
 CASE;

 // IF DB1.Accounting Period Code EQ LCL.Accounting Period Code
 IF DB1.Accounting_Period_Code = LCL.Accounting_Period_Code;

 // PAR.Period Beginning Date = DB1.Period Beginning Date
 PAR.Period_Beginning_Date = DB1.Period_Beginning_Date;

 //?If Same Period
 // IF DB1.Accounting Period Code NE LCL.Accounting Period Code
 IF DB1.Accounting_Period_Code <> LCL.Accounting_Period_Code;

 QUIT;

 ENDIF;

 ENDIF;

}


