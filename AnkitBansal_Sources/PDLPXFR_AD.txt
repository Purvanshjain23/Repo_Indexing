// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDLPXFR
// ?Date: 14.08.2025 Time: 03:35:06
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(RTV Get First for CRT  RT) TYPE(RTVOBJ) FILE(OMHSTPP)          AC1516162;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Order_Number);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 QUIT;

 //?USER: Process Data record

 // PAR.Order Number = DB1.Order Number
 PAR.Order_Number = DB1.Order_Number;

 QUIT;

}


CASE;

// IF PGM.*Return code is *Record does not exist
IF PGM.*Return_code = 'Y2U0005';

// IF *OTHERWISE
IF *OTHERWISE;

EXECUTE FUNCTION(RTV CRT K-File         RT) TYPE(RTVOBJ) FILE(OMHSTPP)          AC1516114;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Order_Number);
PARAMETER(PAR.AR_Customer_Number);
PARAMETER(PAR.Sales_Route_Code);
PARAMETER(PAR.Shipped_Item_Code);
PARAMETER(PAR.Order_Detail_Reason);
PARAMETER(PAR.Date_From_USR);
PARAMETER(PAR.Date_To_USR);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 QUIT;

 //?USER: Process Data record

 CASE;

 // IF DB1.Attach to Order Number is Equal to zeros
 IF DB1.Attach_to_Order_Number = *ZERO;

 CASE;

 // IF DB1.Actual Shipped Date GE PAR.Date From             USR
 IF DB1.Actual_Shipped_Date >= PAR.Date_From_USR;

 CASE;

 // IF DB1.Actual Shipped Date LE PAR.Date To               USR
 IF DB1.Actual_Shipped_Date <= PAR.Date_To_USR;

 EXECUTE FUNCTION(RTV Claiming Orders    RT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC1515788;
 PARAMETER(DB1.Order_Number);
 PARAMETER(PAR.Record_Found_USR);
 {
  //?USER: Processing if Data record not found

  // PAR.Record Found USR = CND.Record Not Found
  PAR.Record_Found_USR = 'N';

  QUIT;

  //?USER: Process Data record

  // PAR.Record Found USR = CND.Record Found
  PAR.Record_Found_USR = 'Y';

  QUIT;

 }

 CASE;

 // IF PAR.Record Found USR is Record Found
 IF PAR.Record_Found_USR = 'Y';

 EXECUTE FUNCTION(RTV Stops/BOL DtTm     RT) TYPE(RTVOBJ) FILE(OMFJCPP)          AC1515809;
 PARAMETER(DB1.Load_ID);
 PARAMETER(WRK.Total_Stops);
 PARAMETER(WRK.BOL_Complete_Date);
 PARAMETER(WRK.BOL_Complete_Time);
 PARAMETER(PAR.Warehouse_Code);
 {
  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

  QUIT;

 }

 EXECUTE FUNCTION(Create PD Claims Rpt Work) TYPE(CRTOBJ) FILE(PDMICPP)          AC1515358;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Order_Sequence_Number);
 PARAMETER(DB1.Order_Secondary_Line_Seq);
 PARAMETER(DB1.Order_Type_Sales);
 PARAMETER(PAR.Warehouse_Code);
 PARAMETER(DB1.Actual_Shipped_Date);
 PARAMETER(DB1.Order_Detail_Reason);
 PARAMETER(DB1.Load_ID);
 PARAMETER(DB1.Shipped_Item_Code);
 PARAMETER(WRK.Total_Stops);
 PARAMETER(WRK.BOL_Complete_Date);
 PARAMETER(WRK.BOL_Complete_Time);
 PARAMETER(*BLANK);
 PARAMETER(DB1.Invoice_Date);
 PARAMETER(DB1.Attach_to_Order_Number);
 PARAMETER(DB1.Sales_Route_Code);
 PARAMETER(DB1.Attach_to_Invoice_Number);
 PARAMETER(DB1.AR_Customer_Number);
 PARAMETER(DB1.Extended_Amount);
 {
  //?USER: Processing if Data record already exists

  // PGM.*Return code = CND.*Record already exists
  PGM.*Return_code = 'Y2U0003';

  QUIT;

  //?USER: Processing if Data update error

  // PGM.*Return code = CND.*Data update error
  PGM.*Return_code = 'Y2U0004';

  QUIT;

  //?USER: Processing after Data update

  // PGM.*Return code = CND.*Normal
  PGM.*Return_code = *BLANK;

  QUIT;

 }

 EXECUTE FUNCTION(CRT Claiming Orders    RT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC1516293;
 PARAMETER(DB1.Order_Number);
 {
  //?USER: Processing if Data record not found

  // PGM.*Return code = CND.*Record does not exist
  PGM.*Return_code = 'Y2U0005';

  QUIT;

  //?USER: Process Data record

  // PAR.Order Sequence Number = CON.1
  PAR.Order_Sequence_Number = 1;

  // PAR.Order Secondary Line Seq = CON.1
  PAR.Order_Secondary_Line_Seq = 1;

  EXECUTE FUNCTION(RTV Whse and Reason    RT) TYPE(RTVOBJ) FILE(OPBGWKP)          AC1517511;
  PARAMETER(DB1.Company_Number);
  PARAMETER(DB1.Order_Number);
  PARAMETER(PAR.Order_Sequence_Number);
  PARAMETER(PAR.Order_Secondary_Line_Seq);
  PARAMETER(PAR.Warehouse_Code);
  PARAMETER(PAR.Order_Detail_Reason);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   //?USER: Process Data record

   //?C2748:  Changed RTV Warehouse Code RT to exclude Cancelled lines.
   CASE;

   // IF DB1.Detail Line Status is Cancelled
   IF DB1.Detail_Line_Status = 'X';

   // IF *OTHERWISE
   IF *OTHERWISE;

   MOVE *ALL (To: PAR From: DB1);

   QUIT;

   ENDIF;

  }

  EXECUTE FUNCTION(RTV Warehouse Type     RT) TYPE(RTVOBJ) FILE(CAADREP)          AC1285482;
  PARAMETER(PAR.Warehouse_Code);
  PARAMETER(PAR.Warehouse_Type);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

  }

  EXECUTE FUNCTION(CRT Claiming Record    CR) TYPE(CRTOBJ) FILE(PDMICPP)          AC1516280;
  PARAMETER(DB1.Company_Number);
  PARAMETER(DB1.Order_Number);
  PARAMETER(PAR.Order_Sequence_Number);
  PARAMETER(PAR.Order_Secondary_Line_Seq);
  PARAMETER(DB1.Order_Type_Sales);
  PARAMETER(PAR.Warehouse_Code);
  PARAMETER(PAR.Order_Detail_Reason);
  PARAMETER(PAR.Warehouse_Type);
  PARAMETER(PAR.Attach_to_Order_Number);
  {
   //?USER: Processing if Data record already exists

   // PGM.*Return code = CND.*Record already exists
   PGM.*Return_code = 'Y2U0003';

   QUIT;

   //?USER: Processing if Data update error

   // PGM.*Return code = CND.*Data update error
   PGM.*Return_code = 'Y2U0004';

   QUIT;

   //?USER: Processing after Data update

   // PGM.*Return code = CND.*Normal
   PGM.*Return_code = *BLANK;

   QUIT;

  }

 }

 ENDIF;

 ENDIF;

 ENDIF;

 ENDIF;

}


ENDIF;

PGM.*Return_code = *BLANK;

RETURN;

