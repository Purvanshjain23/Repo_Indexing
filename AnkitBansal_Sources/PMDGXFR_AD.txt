// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMDGXFR
// ?Date: 14.08.2025 Time: 03:42:40
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(FIX ISC End Inv Qty/Wt RT) TYPE(RTVOBJ) FILE(CAB0REP)          AC1806876;
PARAMETER(PAR.Company_Number);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.On Hand Weight Summary is Less than zero
 IF DB1.On_Hand_Weight_Summary < *ZERO;

 // WRK.On Hand Weight Summary = CON.*ZERO
 WRK.On_Hand_Weight_Summary = *ZERO;

 // IF *OTHERWISE
 IF *OTHERWISE;

 // WRK.On Hand Weight Summary = DB1.On Hand Weight Summary
 WRK.On_Hand_Weight_Summary = DB1.On_Hand_Weight_Summary;

 ENDIF;

 CASE;

 // IF DB1.On Hand U/M1 Summary is Less than zero
 IF DB1.On_Hand_UOM1_Summary < *ZERO;

 // WRK.On Hand U/M1 Summary = CON.*ZERO
 WRK.On_Hand_UOM1_Summary = *ZERO;

 // IF *OTHERWISE
 IF *OTHERWISE;

 // WRK.On Hand U/M1 Summary = DB1.On Hand U/M1 Summary
 WRK.On_Hand_UOM1_Summary = DB1.On_Hand_UOM1_Summary;

 ENDIF;

 EXECUTE FUNCTION(Rtv Chg End Inv       RT) TYPE(RTVOBJ) FILE(PPBSCPP)           AC1739437;
 PARAMETER(20070106);
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Warehouse_Code);
 PARAMETER(DB1.Item_Code);
 PARAMETER(WRK.On_Hand_UOM1_Summary);
 PARAMETER(WRK.On_Hand_Weight_Summary);
 {
  //?USER: Processing if Data record not found

  EXECUTE FUNCTION(Rtv Inv Stock Closing RT) TYPE(RTVOBJ) FILE(OMBYREP)           AC1738283;
  PARAMETER(PAR.ISC_Item_Code);
  PARAMETER(WRK.Description_Line_One);
  PARAMETER(WRK.ISC_Item_Structure_Class);
  PARAMETER(WRK.ISC_Item_Structure_Group);
  PARAMETER(WRK.ISC_Item_Structure_Type);
  PARAMETER(WRK.ISC_Item_Dft_Cmdty_Mkt_Bs);
  PARAMETER(WRK.ISC_Item_Type);
  PARAMETER(WRK.ISC_Item_Cmdty_Price_Grp);
  PARAMETER(WRK.ISC_Item_GL_Sub_Code);
  {
   //?USER: Processing if Data record not found

   // PGM.*Return code = CND.*Record does not exist
   PGM.*Return_code = 'Y2U0005';

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

  }

  EXECUTE FUNCTION(Rtv Inv Stock Closing RT) TYPE(RTVOBJ) FILE(CABZREP)           AC1738284;
  PARAMETER(PAR.ISC_Warehouse_Company);
  PARAMETER(PAR.ISC_Item_Code);
  PARAMETER(WRK.ISC_Item_UOM_Pricing);
  PARAMETER(WRK.ISC_Item_Market_Overage);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

  }

  EXECUTE FUNCTION(RTV Warehouse Type     RT) TYPE(RTVOBJ) FILE(CAADREP)          AC1285482;
  PARAMETER(PAR.ISC_Warehouse_Code);
  PARAMETER(WRK.ISC_Warehouse_Type);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

  }

  // WRK.ISC Post Balance Sts = CND.Open
  WRK.ISC_Post_Balance_Sts = 'O';

  // WRK.ISC Post Warehouse Sts = CND.Open
  WRK.ISC_Post_Warehouse_Sts = 'O';

  //?R9083 05/09/17 DN-Populate ISC Valuation Grouping.
  EXECUTE FUNCTION(Crt Inventory Stock   CR) TYPE(CRTOBJ) FILE(PPBSCPP)           AC1738127;
  PARAMETER(PAR.ISC_Week_Ending_Date);
  PARAMETER(PAR.ISC_Warehouse_Company);
  PARAMETER(PAR.ISC_Warehouse_Code);
  PARAMETER(PAR.ISC_Item_Code);
  PARAMETER(WRK.ISC_Warehouse_Type);
  PARAMETER(WRK.ISC_Item_Cmdty_Price_Grp);
  PARAMETER(WRK.ISC_Item_Dft_Cmdty_Mkt_Bs);
  PARAMETER(WRK.ISC_Item_Type);
  PARAMETER(WRK.ISC_Item_Market_Overage);
  PARAMETER(WRK.ISC_Item_Structure_Type);
  PARAMETER(WRK.ISC_Item_Structure_Group);
  PARAMETER(WRK.ISC_Item_Structure_Class);
  PARAMETER(WRK.ISC_Item_GL_Sub_Code);
  PARAMETER(WRK.ISC_Item_UOM_Pricing);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(PAR.ISC_Ending_Inventory_Qty);
  PARAMETER(PAR.ISC_Ending_Inventory_Lbs);
  PARAMETER(JOB.*USER);
  PARAMETER(JOB.*Job_date);
  PARAMETER(JOB.*Job_time);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*BLANK);
  PARAMETER(*BLANK);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(WRK.Blank_for_4_USR);
  PARAMETER(WRK.ISC_Post_Balance_Sts);
  PARAMETER(WRK.ISC_Post_Warehouse_Sts);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(PAR.ISC_Valuation_Grouping);
  PARAMETER(*ZERO);
  PARAMETER(WRK.ISC_Unused_Sts_2);
  PARAMETER('A');
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*BLANK);
  PARAMETER(*BLANK);
  PARAMETER(*ZERO);
  PARAMETER(*ZERO);
  PARAMETER(*BLANK);
  PARAMETER(*BLANK);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Crt Date/Time      IF) TYPE(EXCINTFUN)                     AC1523477;
   PARAMETER(DB1.Record_Status);
   PARAMETER(DB1.Create_Date);
   PARAMETER(DB1.Create_Time);
   PARAMETER(DB1.Create_User);
   PARAMETER(DB1.Create_Program);
   PARAMETER(DB1.Change_Date);
   PARAMETER(DB1.Change_Time);
   PARAMETER(DB1.Change_User);
   PARAMETER(DB1.Change_Program);
   {
    //?Execute internal function

    //?*** Set RECORD STATUS field. ***
    // PAR.Record Status = CND.Active
    PAR.Record_Status = 'A';

    //?*** Set CREATE fields. ***
    // PAR.Create Date = JOB.*Job date
    PAR.Create_Date = JOB.*Job_date;

    // PAR.Create Time = JOB.*Job time
    PAR.Create_Time = JOB.*Job_time;

    // PAR.Create User = JOB.*USER
    PAR.Create_User = JOB.*USER;

    // PAR.Create Program = JOB.*PROGRAM
    PAR.Create_Program = JOB.*PROGRAM;

    //?*** Set CHANGE fields. ***
    // PAR.Change Date = CON.*ZERO
    PAR.Change_Date = *ZERO;

    // PAR.Change Time = CON.*ZERO
    PAR.Change_Time = *ZERO;

    // PAR.Change User = CON.*BLANK
    PAR.Change_User = *BLANK;

    // PAR.Change Program = CON.*BLANK
    PAR.Change_Program = *BLANK;

   }

   // Compute:Ending Inv Fin Qt
   DB1.ISC_Ending_Inv_Final_Qty = ( ( ( DB1.ISC_Ending_Inventory_Qty
   + DB1.ISC_Ending_Inv_Adj_Qty ) + DB1.ISC_Sun_Ship_Inv_Adj_Qty )
   + DB1.ISC_Unsh_Ship_Inv_Adj_Qty ) + DB1.ISC_End_Inv_Partial_Qty;

   // Compute:Ending Inv Fin Lb
   DB1.ISC_Ending_Inv_Final_Lbs = ( ( ( DB1.ISC_Ending_Inventory_Lbs
   + DB1.ISC_Ending_Inv_Adj_Lbs ) + DB1.ISC_Sun_Ship_Inv_Adj_Lbs )
   + DB1.ISC_Unsh_Ship_Inv_Adj_Lbs ) + DB1.ISC_End_Inv_Partial_Lbs;

  }

  //?USER: Process Data record

  EXECUTE FUNCTION(Chg Inventory Stock   CH) TYPE(CHGOBJ) FILE(PPBSCPP)           AC1738128;
  PARAMETER(DB1.ISC_Week_Ending_Date);
  PARAMETER(DB1.ISC_Warehouse_Company);
  PARAMETER(DB1.ISC_Warehouse_Code);
  PARAMETER(DB1.ISC_Item_Code);
  PARAMETER(DB1.ISC_Warehouse_Type);
  PARAMETER(DB1.ISC_Item_Cmdty_Price_Grp);
  PARAMETER(DB1.ISC_Item_Dft_Cmdty_Mkt_Bs);
  PARAMETER(DB1.ISC_Item_Type);
  PARAMETER(DB1.ISC_Item_Market_Overage);
  PARAMETER(DB1.ISC_Item_Structure_Type);
  PARAMETER(DB1.ISC_Item_Structure_Group);
  PARAMETER(DB1.ISC_Item_Structure_Class);
  PARAMETER(DB1.ISC_Item_GL_Sub_Code);
  PARAMETER(DB1.ISC_Item_UOM_Pricing);
  PARAMETER(DB1.ISC_Begin_Inv_Final_Qty);
  PARAMETER(DB1.ISC_Begin_Inv_Final_Lbs);
  PARAMETER(DB1.ISC_Begin_Inv_Adjust_Qty);
  PARAMETER(DB1.ISC_Begin_Inv_Adjust_Lbs);
  PARAMETER(DB1.ISC_Begin_Inv_Qty);
  PARAMETER(DB1.ISC_Begin_Inv_Lbs);
  PARAMETER(DB1.ISC_Floor_Production_Qty);
  PARAMETER(DB1.ISC_Floor_Production_Lbs);
  PARAMETER(DB1.ISC_Floor_Prod_Adj_Qty);
  PARAMETER(DB1.ISC_Floor_Prod_Adj_Lbs);
  PARAMETER(DB1.ISC_Sales_Production_Qty);
  PARAMETER(DB1.ISC_Sales_Production_Lbs);
  PARAMETER(DB1.ISC_Inventory_Shipmnt_Qty);
  PARAMETER(DB1.ISC_Inventory_Shipmnt_Lbs);
  PARAMETER(DB1.ISC_Ord_Dtl_Shipment_Qty);
  PARAMETER(DB1.ISC_Ord_Dtl_Shipment_Lbs);
  PARAMETER(DB1.ISC_Shipment_Final_Qty);
  PARAMETER(DB1.ISC_Shipment_Final_Lbs);
  PARAMETER(DB1.ISC_FOB_Gross_Amount);
  PARAMETER(DB1.ISC_Inventory_Txfr_Qty);
  PARAMETER(DB1.ISC_Inventory_Txfr_Lbs);
  PARAMETER(DB1.ISC_Misc_Invntry_Adj_Qty);
  PARAMETER(DB1.ISC_Misc_Invntry_Adj_Lbs);
  PARAMETER(PAR.ISC_Ending_Inventory_Qty);
  PARAMETER(PAR.ISC_Ending_Inventory_Lbs);
  PARAMETER(JOB.*USER);
  PARAMETER(JOB.*Job_date);
  PARAMETER(JOB.*Job_time);
  PARAMETER(DB1.ISC_Sun_Ship_Inv_Adj_Qty);
  PARAMETER(DB1.ISC_Sun_Ship_Inv_Adj_Lbs);
  PARAMETER(DB1.ISC_Unsh_Ship_Inv_Adj_Qty);
  PARAMETER(DB1.ISC_Unsh_Ship_Inv_Adj_Lbs);
  PARAMETER(DB1.ISC_End_Inv_Partial_Qty);
  PARAMETER(DB1.ISC_End_Inv_Partial_Lbs);
  PARAMETER(DB1.ISC_Ending_Inv_Adj_Qty);
  PARAMETER(DB1.ISC_Ending_Inv_Adj_Lbs);
  PARAMETER(DB1.ISC_End_Inv_Adj_Comment);
  PARAMETER(DB1.ISC_Ending_Inv_Adj_User);
  PARAMETER(DB1.ISC_Ending_Inv_Adj_Date);
  PARAMETER(DB1.ISC_Ending_Inv_Adj_Time);
  PARAMETER(DB1.ISC_Ending_Inv_Final_Qty);
  PARAMETER(DB1.ISC_Ending_Inv_Final_Lbs);
  PARAMETER(DB1.ISC_Warehouse_Price_UOM);
  PARAMETER(DB1.ISC_Warehouse_Price_Ovrrd);
  PARAMETER(DB1.ISC_Post_Balance_Sts);
  PARAMETER(DB1.ISC_Post_Warehouse_Sts);
  PARAMETER(DB1.ISC_Commission_Amount);
  PARAMETER(DB1.ISC_Unused_Lbs_1);
  PARAMETER(DB1.ISC_TF_Exempt_NPR_Dollars);
  PARAMETER(DB1.ISC_TF_Exempt_Pounds);
  PARAMETER(DB1.ISC_Valuation_Grouping);
  PARAMETER(DB1.ISC_Unused_Date_1);
  PARAMETER(DB1.ISC_Unused_Sts_2);
  PARAMETER(DB1.Record_Status);
  PARAMETER(DB1.Create_Date);
  PARAMETER(DB1.Create_Time);
  PARAMETER(DB1.Create_User);
  PARAMETER(DB1.Create_Program);
  PARAMETER(DB1.Change_Date);
  PARAMETER(DB1.Change_Time);
  PARAMETER(DB1.Change_User);
  PARAMETER(DB1.Change_Program);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Chg Date/Time      IF) TYPE(EXCINTFUN)                     AC1523476;
   PARAMETER(DB1.Change_Date);
   PARAMETER(DB1.Change_Time);
   PARAMETER(DB1.Change_User);
   PARAMETER(DB1.Change_Program);
   {
    //?Execute internal function

    // PAR.Change Date = JOB.*Job date
    PAR.Change_Date = JOB.*Job_date;

    // PAR.Change Time = JOB.*Job time
    PAR.Change_Time = JOB.*Job_time;

    // PAR.Change User = JOB.*USER
    PAR.Change_User = JOB.*USER;

    // PAR.Change Program = JOB.*PROGRAM
    PAR.Change_Program = JOB.*PROGRAM;

   }

   // Compute:Ending Inv Fin Qt
   DB1.ISC_Ending_Inv_Final_Qty = ( ( ( DB1.ISC_Ending_Inventory_Qty
   + DB1.ISC_Ending_Inv_Adj_Qty ) + DB1.ISC_Sun_Ship_Inv_Adj_Qty )
   + DB1.ISC_Unsh_Ship_Inv_Adj_Qty ) + DB1.ISC_End_Inv_Partial_Qty;

   // Compute:Ending Inv Fin Lb
   DB1.ISC_Ending_Inv_Final_Lbs = ( ( ( DB1.ISC_Ending_Inventory_Lbs
   + DB1.ISC_Ending_Inv_Adj_Lbs ) + DB1.ISC_Sun_Ship_Inv_Adj_Lbs )
   + DB1.ISC_Unsh_Ship_Inv_Adj_Lbs ) + DB1.ISC_End_Inv_Partial_Lbs;

   // Comp: sales prod qty
   DB1.ISC_Sales_Production_Qty = ( DB1.ISC_Ending_Inv_Final_Qty
   + DB1.ISC_Shipment_Final_Qty ) - DB1.ISC_Begin_Inv_Final_Qty;

   // Comp: sales prod lbs
   DB1.ISC_Sales_Production_Lbs = ( DB1.ISC_Ending_Inv_Final_Lbs
   + DB1.ISC_Shipment_Final_Lbs ) - DB1.ISC_Begin_Inv_Final_Lbs;

  }

 }

}


