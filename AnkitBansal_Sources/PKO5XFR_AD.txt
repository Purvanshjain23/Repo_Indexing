// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKO5XFR
// ?Date: 14.08.2025 Time: 02:52:22
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications and Comments
DO;

//?H16853 ISE 11/02/20 - Increased the Buy Order Number field
//?                      length from 5 to 7.
ENDDO;

EXECUTE FUNCTION(CNV HPE137 Farm Site  RT) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1210992;
{
 //?USER: Process Data record

 CASE;

 // IF DB1.TH Source Type is Internal
 IF DB1.TH_Source_Type = 'I';

 // AND DB1.TH Tattoo Reference NE WRK.Blank USR
 AND DB1.TH_Group_Reference <> WRK.Blank_USR;

 // AND DB1.TH HPS Farm Site is *Zeros
 AND DB1.TH_HPS_Farm_Site = *ZERO;

 // PAR.Farm Site USR = CON.*ZERO
 PAR.Farm_Site_USR = *ZERO;

 //?* 01/27/03 PKD PK0495 Replaced HP255 with HP249.
 // Call program Z1v HPS Farm Info     UP.
 CALL PROGRAM(Z1v HPS Farm Info     UP) ('HP249');
 PARAMETER(PGM.*Return_code);
 PARAMETER(DB1.TH_HPS_Movement_Ref_#);
 PARAMETER(WRK.Txt_Field_Not_Needed);
 PARAMETER(PAR.Farm_Site_USR);
 PARAMETER(WRK.Txt_Field_Not_Needed);
 PARAMETER(WRK.Txt_Field_Not_Needed);

 EXECUTE FUNCTION(CNV HPE137 Chg Frm St CH) TYPE(CHGOBJ) FILE(PKA1CPP)           AB1210993;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.TH_Kill_Date);
 PARAMETER(PAR.Farm_Site_USR);
 ENDIF;

}


