// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKMBPVR
// ?Date: 14.08.2025 Time: 02:52:10
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?Modifications and Comments
DO;

//?H16853 ISE 11/09/2020 - Recompiled due to change in Buy Order Number
ENDDO;

// PAR.PRT Night Queue Run Sts = CND.No
PAR.PRT_Night_Queue_Run_Sts = 'N';

//?USER: Load screen

MOVE *ALL (To: DTL From: PAR);

// DTL.Prod Comp Rpt Seq USR = CND.By Producer
DTL.Prod_Comp_Rpt_Seq_USR = 1;

// DTL.Condition Name 1 USR = Condition name of DTL.Prod Comp Rpt Seq USR
DTL.Condition_Name_1_USR = RTVCND(DTL.Prod_Comp_Rpt_Seq_USR);

// DTL.Selected Tattoo USR = CND.No
DTL.Selected_Tattoo_USR = 'N';

//?USER: Validate fields

// DTL.Condition Name USR = Condition name of DTL.Report Type Sum/Dtl USR
DTL.Condition_Name_USR = RTVCND(DTL.Report_Type_Sum_Dtl_USR);

//?USER: User defined action

// Call program Pmt Print Options Size XF.
CALL PROGRAM(Pmt Print Options Size XF) ('PDV8PVR');
PARAMETER('Producer Comparison Rpt');
PARAMETER(PAR.PRT_Printer_Device);
PARAMETER(PAR.PRT_Hold_Output_Sts);
PARAMETER(PAR.PRT_Save_Output_Sts);
PARAMETER(PAR.PRT_Copies);
PARAMETER(PAR.PRT_Night_Queue_Run_Sts);
PARAMETER(PAR.PRT_Night_Queue);
PARAMETER('HPE');
PARAMETER(2);

CASE;

// IF PGM.*Return code is *User QUIT requested
IF PGM.*Return_code = 'Y2U9999';

// IF *OTHERWISE
IF *OTHERWISE;

// WRK.Date Alpha USR = CVTVAR(DTL.PCS From Kill Date)
WRK.Date_Alpha_USR = CVTVAR(DTL.PCS_From_Kill_Date);

// WRK.Date Alpha Usr 2 = CVTVAR(DTL.PCS To Kill Date)
WRK.Date_Alpha_Usr_2 = CVTVAR(DTL.PCS_To_Kill_Date);

// Execute command - 'Prt Producer Comparison'
EXECUTE COMMAND(PRK0773);
PARAMETER(DTL.CC_Company_Number);
PARAMETER(DTL.PCS_Code);
PARAMETER(DTL.PCD_Source_Type);
PARAMETER(DTL.PCD_Payment_Type);
PARAMETER(DTL.PD_Producer_Code);
PARAMETER(DTL.SR_Source_Code);
PARAMETER(DTL.HB_Buyer_Code);
PARAMETER(DTL.Report_Type_Sum_Dtl_USR);
PARAMETER(DTL.PCS_Description);
PARAMETER(WRK.Date_Alpha_USR);
PARAMETER(WRK.Date_Alpha_Usr_2);
PARAMETER(DTL.Prod_Comp_Rpt_Seq_USR);
PARAMETER(PAR.PRT_Printer_Device);
PARAMETER(PAR.PRT_Hold_Output_Sts);
PARAMETER(PAR.PRT_Save_Output_Sts);
PARAMETER(PAR.PRT_Copies);
PARAMETER(PAR.PRT_Night_Queue);
PARAMETER(PAR.Oms_System_Value_Alpha);
PARAMETER(DTL.Selected_Tattoo_USR);

ENDIF;

