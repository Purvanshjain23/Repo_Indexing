// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PPNIXFR
// ?Date: 14.08.2025 Time: 03:41:15
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(PFS One Prod Pkging   RT) TYPE(RTVOBJ) FILE(POAZCPP)           AC1732579;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Item_Code);
PARAMETER(PAR.Packaging_Item_Code);
PARAMETER(PAR.PFS_Record_Status);
{
 //?USER: Process Data record

 // PAR.PFS Company Number = DB1.Company Number
 PAR.PFS_Company_Number = DB1.Company_Number;

 // PAR.PFS Item Code = DB1.Item Code
 PAR.PFS_Item_Code = DB1.Item_Code;

 // PAR.PFS Packaging Item Code = DB1.Packaging Item Code
 PAR.PFS_Packaging_Item_Code = DB1.Packaging_Item_Code;

 EXECUTE FUNCTION(RTV Packaging Item    RT) TYPE(RTVOBJ) FILE(POARREP)           AC1602514;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Packaging_Item_Code);
 PARAMETER(PAR.PFS_Packaging_Item_Desc);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  // PGM.*Return code = CND.*Record does not exist
  PGM.*Return_code = 'Y2U0005';

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 // PAR.PFS Packaging Item Qty = DB1.Packaging Item Quantity
 PAR.PFS_Packaging_Item_Qty = DB1.Packaging_Item_Quantity;

 EXECUTE FUNCTION(Upd Product Packaging RT) TYPE(RTVOBJ) FILE(PPBOREP)           AC1732577;
 PARAMETER(PAR.PFS_Company_Number);
 PARAMETER(PAR.PFS_Item_Code);
 PARAMETER(PAR.PFS_Packaging_Item_Code);
 PARAMETER(PAR.PFS_Packaging_Item_Desc);
 PARAMETER(PAR.PFS_Packaging_Item_Qty);
 PARAMETER(PAR.PFS_Record_Status);
 {
  //?USER: Processing if Data record not found

  CASE;

  // IF PAR.PFS Record Status is Not Delete
  IF PAR.PFS_Record_Status = 'A'/'C';

  EXECUTE FUNCTION(Crt Product Packaging CR) TYPE(CRTOBJ) FILE(PPBOREP)           AC1732564;
  PARAMETER(PAR.PFS_Company_Number);
  PARAMETER(PAR.PFS_Item_Code);
  PARAMETER(PAR.PFS_Packaging_Item_Code);
  PARAMETER(PAR.PFS_Packaging_Item_Desc);
  PARAMETER(PAR.PFS_Packaging_Item_Qty);
  PARAMETER(PAR.PFS_Record_Status);
  PARAMETER(PAR.PFS_Process_Status);
  PARAMETER(PAR.PFS_Error_Reason);
  PARAMETER(PAR.PFS_Create_Date);
  PARAMETER(PAR.PFS_Create_Time);
  PARAMETER(PAR.PFS_Change_Date);
  PARAMETER(PAR.PFS_Change_Time);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Create Stamp      IF) TYPE(EXCINTFUN)                      AC1732162;
   PARAMETER(DB1.PFS_Process_Status);
   PARAMETER(DB1.PFS_Create_Date);
   PARAMETER(DB1.PFS_Create_Time);
   {
    //?Execute internal function

    // PAR.PFS Process Status = CND.Not Processed
    PAR.PFS_Process_Status = *ZERO;

    // PAR.PFS Create Date = JOB.*Job date
    PAR.PFS_Create_Date = JOB.*Job_date;

    // PAR.PFS Create Time = JOB.*Job time
    PAR.PFS_Create_Time = JOB.*Job_time;

   }

  }

  ENDIF;

  //?USER: Process Data record

  EXECUTE FUNCTION(Chg Product Packaging CH) TYPE(CHGOBJ) FILE(PPBOREP)           AC1732565;
  PARAMETER(PAR.PFS_Company_Number);
  PARAMETER(PAR.PFS_Item_Code);
  PARAMETER(PAR.PFS_Packaging_Item_Code);
  PARAMETER(PAR.PFS_Packaging_Item_Desc);
  PARAMETER(PAR.PFS_Packaging_Item_Qty);
  PARAMETER(PAR.PFS_Record_Status);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Change Stamp      IF) TYPE(EXCINTFUN)                      AC1732163;
   PARAMETER(DB1.PFS_Change_Date);
   PARAMETER(DB1.PFS_Change_Time);
   {
    //?Execute internal function

    // PAR.PFS Change Date = JOB.*Job date
    PAR.PFS_Change_Date = JOB.*Job_date;

    // PAR.PFS Change time = JOB.*Job time
    PAR.PFS_Change_Time = JOB.*Job_time;

   }

  }

 }

}


