// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKESXFR
// ?Date: 14.08.2025 Time: 02:51:31
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications and Comments
DO;

//?H16853 ISE 11/02/20 - Increased the Buy Order Number field
//?  length from 5 to 7.
ENDDO;

// PAR.*Record selected = CND.*NO
PAR.*Record_selected = 'N';

// WRK.Test condition Usr = CON.1
WRK.Test_condition_Usr = 1;

CASE;

// IF PAR.Test condition Usr EQ WRK.Test condition Usr
IF PAR.Test_condition_Usr = WRK.Test_condition_Usr;

EXECUTE FUNCTION(Rtv Ttl/ps Vs Flds1184784) TYPE(RTVOBJ) FILE(PKA1CPP);
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.BOH_Buy_Order_Number);
PARAMETER(PAR.BOL_Load_Number);
PARAMETER(PAR.BOL_Kill_Date);
PARAMETER(WRK.Seaboard_Adtnl_Exp_SUM);

CASE;

// IF PAR.BOL Freight Amt NE WRK.Freight Amount Sum
IF PAR.BOL_Freight_Amt <> WRK.Seaboard_Adtnl_Exp_SUM;

// PAR.*Record selected = CND.*YES
PAR.*Record_selected = 'Y';

// IF *OTHERWISE
IF *OTHERWISE;

// PAR.*Record selected = CND.*NO
PAR.*Record_selected = 'N';

ENDIF;

ENDIF;

// WRK.Test condition Usr = CON.2
WRK.Test_condition_Usr = 2;

CASE;

// IF PAR.Test condition Usr EQ WRK.Test condition Usr
IF PAR.Test_condition_Usr = WRK.Test_condition_Usr;

EXECUTE FUNCTION(Rtv Tatt Ded/Add      RT) TYPE(RTVOBJ) FILE(PKCDCPP)           AB1184882;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.BOH_Buy_Order_Number);
PARAMETER(PAR.BOL_Load_Number);
PARAMETER(WRK.TH_Tattoo_Number);
PARAMETER(WRK.TH_Kill_Date);
PARAMETER('FRT');
PARAMETER(WRK.THD_Unit_Amt);
PARAMETER(WRK.THD_Ded_Add_Amount);
PARAMETER(WRK.THD_Unit_Amt_Sign);
PARAMETER(WRK.THD_UOM);
PARAMETER(WRK.THD_Transaction_Created);
PARAMETER(WRK.THD_GL_Code);
PARAMETER(WRK.THD_Contra_Gl_Code);
PARAMETER(WRK.TOT_DEDUCTION_Usr);
{
 //?USER: Initialize routine

 // PAR.TOT DEDUCTION Usr = CON.*ZERO
 PAR.TOT_DEDUCTION_Usr = *ZERO;

 //?USER: Process Data record

 CASE;

 // IF PAR.DED D/A Code EQ DB1.DED D/A Code
 IF PAR.DED_D_A_Code = DB1.DED_D_A_Code;

 MOVE *ALL (To: PAR From: DB1);

 // PAR.TOT DEDUCTION Usr = PAR.TOT DEDUCTION Usr + DB1.THD Ded/Add Amount
 PAR.TOT_DEDUCTION_Usr = PAR.TOT_DEDUCTION_Usr + DB1.THD_Ded_Add_Amount;

 ENDIF;

}


CASE;

// IF WRK.TOT DEDUCTION Usr GT WRK.Zero USR
IF WRK.TOT_DEDUCTION_Usr > WRK.Zero_USR;

// PAR.*Record selected = CND.*YES
PAR.*Record_selected = 'Y';

// IF *OTHERWISE
IF *OTHERWISE;

// PAR.*Record selected = CND.*NO
PAR.*Record_selected = 'N';

ENDIF;

ENDIF;

