// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLGTXFR
// ?Date: 14.08.2025 Time: 02:54:15
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?this will only be run on the TF Producers
EXECUTE FUNCTION(Cnv ProdLocSiteFlg    RT) TYPE(RTVOBJ) FILE(PKAFREP)           AB1268947;
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Rtv Producer Nm, Srce RT) TYPE(RTVOBJ) FILE(PKACREP)           AB1162488;
 PARAMETER(DB1.PD_Producer_Code);
 PARAMETER(NLL.PD_Name);
 PARAMETER(LCL.SR_Source_Code);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 CASE;

 // IF LCL.SR Source Code is Open Daily Buys
 IF LCL.SR_Source_Code = 'ODB';

 // LCL.PL Site ID Required = CND.No
 LCL.PL_Site_ID_Required = 'N';

 EXECUTE FUNCTION(CNV ProdLocSitefld    CH) TYPE(CHGOBJ) FILE(PKAFREP)           AB1268963;
 PARAMETER(DB1.PD_Producer_Code);
 PARAMETER(DB1.PL_Location_Code);
 PARAMETER(DB1.PL_Name);
 PARAMETER(DB1.Pl_VND_Address_Number);
 PARAMETER(DB1.PL_Type);
 PARAMETER(DB1.PL_Miles_Unused_Fld);
 PARAMETER(DB1.PL_Fax_Status);
 PARAMETER(DB1.PL_Fax_Carcass_Summary);
 PARAMETER(DB1.PL_Unused);
 PARAMETER(DB1.PL_Fax_Carcass_Detail);
 PARAMETER(DB1.PL_Fax_to_Producer);
 PARAMETER(DB1.PL_Producer_Fax_Sequence);
 PARAMETER(DB1.PL_State_Code);
 PARAMETER(DB1.PL_Truck_Scale_Wgh_Sts);
 PARAMETER(LCL.PL_Site_ID_Required);
 PARAMETER(DB1.PL_Status_4);
 PARAMETER(DB1.PL_Status_5);
 PARAMETER(DB1.PL_Status_6);
 PARAMETER(DB1.PL_Status_7);
 PARAMETER(DB1.PL_Status_8);
 PARAMETER(DB1.PL_Status_9);
 PARAMETER(DB1.PL_Status_10);
 PARAMETER(DB1.PL_Status_11);
 PARAMETER(DB1.PL_Status_12);
 PARAMETER(DB1.PL_Primary_Company);
 PARAMETER(DB1.FZ_Code);
 PARAMETER(DB1.RS_User_Changed);
 PARAMETER(DB1.RS_Date_Changed);
 PARAMETER(DB1.RS_Time_Changed);
 PARAMETER(DB1.RS_Record_Status);
 PARAMETER(DB1.RS_Job);
 PARAMETER(DB1.RS_Program);
 PARAMETER(DB1.RS_User_Added);
 PARAMETER(DB1.RS_Date_Added);
 PARAMETER(DB1.RS_Time_Added);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Rtv Change Stamp      IF) TYPE(EXCINTFUN)                      AB1100934;
  PARAMETER(DB1.RS_User_Changed);
  PARAMETER(DB1.RS_Date_Changed);
  PARAMETER(DB1.RS_Time_Changed);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  {
   //?Execute internal function

   // PAR.RS User Changed = JOB.*USER
   PAR.RS_User_Changed = JOB.*USER;

   // PAR.RS Date Changed = JOB.*Job date
   PAR.RS_Date_Changed = JOB.*Job_date;

   // PAR.RS Time Changed = JOB.*Job time
   PAR.RS_Time_Changed = JOB.*Job_time;

   // PAR.RS Job = JOB.*JOB
   PAR.RS_Job = JOB.*JOB;

   // PAR.RS Program = JOB.*PROGRAM
   PAR.RS_Program = JOB.*PROGRAM;

  }

 }

 ENDIF;

}


