// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PWC5XFR
// ?Date: 14.08.2025 Time: 02:56:02
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications and Comments
DO;

//?R10690 JJH 06/08/19 - Producer Location Address
//?- This program is intended to be used to initially build the
//?  Producer Locatioion Address file from the data in JDE.
//?- Call the VNDFAXR program to populate the Trucker Address file.
ENDDO;

EXECUTE FUNCTION(Cnv Crt Prd Loc Addr  RT) TYPE(RTVOBJ) FILE(PKAFREP)           AB1336706;
{
 //?USER: Process Data record

 //?Use PL VND Address Number as Key for JDE Data
 // LCL.Address Number = DB1.Pl VND Address Number
 LCL.Address_Number = DB1.Pl_VND_Address_Number;

 //?Retreive JDE Address information
 // Call program Get Vendor Address    RT.
 CALL PROGRAM(Get Vendor Address    RT) ('VNDFAXR');
 PARAMETER(PGM.*Return_code);
 PARAMETER(LCL.Address_Number);
 PARAMETER(LCL.Pass_Name);
 PARAMETER(LCL.Address_1);
 PARAMETER(LCL.Address_2);
 PARAMETER(LCL.Address_3);
 PARAMETER(LCL.City);
 PARAMETER(LCL.State);
 PARAMETER(LCL.Zip);
 PARAMETER(LCL.Area_Code);
 PARAMETER(LCL.Telephone);
 PARAMETER(LCL.Fax_Area_Code_#);
 PARAMETER(LCL.Fax_Telephone);
 PARAMETER(LCL.Fax_Area_Code_#_2);
 PARAMETER(LCL.Fax_Telephone_2);
 PARAMETER(LCL.Vendor_1099);
 PARAMETER(LCL.Vendor_Tax_Id);
 PARAMETER(LCL.Country_Code);
 PARAMETER(LCL.Producer_Trucker_Sts_Usr);

 //?Create or Change the Producer Location Address file.
 EXECUTE FUNCTION(Rtv Crt/Chg PdLocAddr RT) TYPE(RTVOBJ) FILE(PWAHREP)           AB1336708;
 PARAMETER(DB1.PD_Producer_Code);
 PARAMETER(DB1.PL_Location_Code);
 PARAMETER(LCL.Address_Number);
 PARAMETER(LCL.Pass_Name);
 PARAMETER(LCL.Address_1);
 PARAMETER(LCL.Address_2);
 PARAMETER(LCL.Address_3);
 PARAMETER(LCL.City);
 PARAMETER(LCL.State);
 PARAMETER(LCL.Zip);
 PARAMETER(LCL.Area_Code);
 PARAMETER(LCL.Country_Code);
 PARAMETER(LCL.Telephone);
 PARAMETER(LCL.Fax_Area_Code_#);
 PARAMETER(LCL.Fax_Telephone);
 PARAMETER(LCL.Fax_Attn_1);
 PARAMETER(LCL.Fax_Area_Code_#_2);
 PARAMETER(LCL.Fax_Telephone_2);
 PARAMETER(LCL.Fax_Attn_2);
 PARAMETER(LCL.Vendor_1099);
 PARAMETER(LCL.Vendor_Tax_Id);
 {
  //?USER: Processing if Data record not found

  EXECUTE FUNCTION(Crt Producer Loc Addr CR) TYPE(CRTOBJ) FILE(PWAHREP)           AB1335171;
  PARAMETER(PAR.PD_Producer_Code);
  PARAMETER(PAR.PL_Location_Code);
  PARAMETER(PAR.Address_Number);
  PARAMETER(PAR.Pass_Name);
  PARAMETER(PAR.Address_1);
  PARAMETER(PAR.Address_2);
  PARAMETER(PAR.Address_3);
  PARAMETER(PAR.City);
  PARAMETER(PAR.State);
  PARAMETER(PAR.Zip);
  PARAMETER(PAR.Area_Code);
  PARAMETER(PAR.Country_Code);
  PARAMETER(PAR.Telephone);
  PARAMETER(PAR.Fax_Area_Code_#);
  PARAMETER(PAR.Fax_Telephone);
  PARAMETER(PAR.Fax_Attn_1);
  PARAMETER(PAR.Fax_Area_Code_#_2);
  PARAMETER(PAR.Fax_Telephone_2);
  PARAMETER(PAR.Fax_Attn_2);
  PARAMETER(PAR.Vendor_1099);
  PARAMETER(PAR.Vendor_Tax_Id);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Rtv Add Stamp-Sys Dt  IF) TYPE(EXCINTFUN)                      AB1237005;
   PARAMETER(DB1.RS_Record_Status);
   PARAMETER(DB1.RS_Job);
   PARAMETER(DB1.RS_Program);
   PARAMETER(DB1.RS_User_Added);
   PARAMETER(DB1.RS_Date_Added);
   PARAMETER(DB1.RS_Time_Added);
   {
    //?Execute internal function

    // PAR.RS Record Status = CND.Active
    PAR.RS_Record_Status = 'A';

    // PAR.RS User Added = JOB.*USER
    PAR.RS_User_Added = JOB.*USER;

    // Call program Rtv System Date & Tim UP.
    CALL PROGRAM(Rtv System Date & Tim UP) ('PKWDUPC');
    PARAMETER(PAR.RS_Date_Added);
    PARAMETER(PAR.RS_Time_Added);

    // PAR.RS Program = JOB.*PROGRAM
    PAR.RS_Program = JOB.*PROGRAM;

    // PAR.RS Job = JOB.*JOB
    PAR.RS_Job = JOB.*JOB;

   }

  }

  //?USER: Process Data record

  EXECUTE FUNCTION(Chg Producer Loc Addr CH) TYPE(CHGOBJ) FILE(PWAHREP)           AB1335172;
  PARAMETER(PAR.PD_Producer_Code);
  PARAMETER(PAR.PL_Location_Code);
  PARAMETER(PAR.Address_Number);
  PARAMETER(PAR.Pass_Name);
  PARAMETER(PAR.Address_1);
  PARAMETER(PAR.Address_2);
  PARAMETER(PAR.Address_3);
  PARAMETER(PAR.City);
  PARAMETER(PAR.State);
  PARAMETER(PAR.Zip);
  PARAMETER(PAR.Area_Code);
  PARAMETER(PAR.Country_Code);
  PARAMETER(PAR.Telephone);
  PARAMETER(PAR.Fax_Area_Code_#);
  PARAMETER(PAR.Fax_Telephone);
  PARAMETER(PAR.Fax_Attn_1);
  PARAMETER(PAR.Fax_Area_Code_#_2);
  PARAMETER(PAR.Fax_Telephone_2);
  PARAMETER(PAR.Fax_Attn_2);
  PARAMETER(PAR.Vendor_1099);
  PARAMETER(PAR.Vendor_Tax_Id);
  PARAMETER(DB1.RS_Record_Status);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Rtv Change Stamp-SysDtIF) TYPE(EXCINTFUN)                      AB1237006;
   PARAMETER(DB1.RS_User_Changed);
   PARAMETER(DB1.RS_Date_Changed);
   PARAMETER(DB1.RS_Time_Changed);
   PARAMETER(DB1.RS_Job);
   PARAMETER(DB1.RS_Program);
   {
    //?Execute internal function

    // PAR.RS User Changed = JOB.*USER
    PAR.RS_User_Changed = JOB.*USER;

    // Call program Rtv System Date & Tim UP.
    CALL PROGRAM(Rtv System Date & Tim UP) ('PKWDUPC');
    PARAMETER(PAR.RS_Date_Changed);
    PARAMETER(PAR.RS_Time_Changed);

    // PAR.RS Job = JOB.*JOB
    PAR.RS_Job = JOB.*JOB;

    // PAR.RS Program = JOB.*PROGRAM
    PAR.RS_Program = JOB.*PROGRAM;

   }

  }

 }

}


