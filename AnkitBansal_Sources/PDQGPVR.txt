// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDQGPVR
// ?Date: 14.08.2025 Time: 03:29:26
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

EXECUTE FUNCTION(VAL Set Inter. Access  IF) TYPE(EXCINTFUN)                     AC1144606;
PARAMETER('I/C');
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Warehouse_Code);
PARAMETER(PAR.Allow_Multi_Company);
PARAMETER(PAR.Default_Printer);
PARAMETER(PAR.Salesperson_Code);

//?USER: Load screen

CASE;

// IF PAR.First Time Flag EQ WRK.BLANK
IF PAR.First_Time_Flag = WRK.BLANK;

// DTL.Company Number Select = PAR.Accounting Company Number
DTL.Company_Number_Select = PAR.Company_Number;

// PAR.First Time Flag = CND.Yes
PAR.First_Time_Flag = 'Y';

ENDIF;

EXECUTE FUNCTION(RTV Company Name       RT) TYPE(RTVOBJ) FILE(CAABREP)          AC1255767;
PARAMETER(DTL.Company_Number_Select);
PARAMETER(DTL.Name);

//?USER: Validate fields

CASE;

// IF PGM.*Cursor field <IS> DTL.Company Number Select
IF PGM.*Cursor_field = DTL.Company_Number_Select;

// AND DTL.*CMD key is *Prompt
AND DTL.*CMD_key = '04';

// Call program SEL Company - plants   SR.
CALL PROGRAM(SEL Company - plants   SR) ('PPF2SRR');
PARAMETER(DTL.Company_Number_Select);

ENDIF;

EXECUTE FUNCTION(RTV Company Name       RT) TYPE(RTVOBJ) FILE(CAABREP)          AC1255767;
PARAMETER(DTL.Company_Number_Select);
PARAMETER(DTL.Name);

//?USER: User defined action

// PAR.Company Number Pass   USR = DTL.Company Number Select
PAR.Company_Number_Pass_USR = DTL.Company_Number_Select;

// Call program Zzz AS Product/Box ID  UP.
CALL PROGRAM(Zzz AS Product/Box ID  UP) ('PDQGLCLP');
PARAMETER(PAR.Company_Number_Pass_USR);
PARAMETER(DTL.Item_Code);

// Send information message - 'Update Accu-Sort product and box id files has been submitted.'
MESSAGE(USR1998 *INFO);

