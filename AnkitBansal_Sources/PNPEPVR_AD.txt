// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PNPEPVR
// ?Date: 14.08.2025 Time: 03:46:00
// ?------------------------------------------------------------------------------------------------

//?USER: Load screen

EXECUTE FUNCTION(RTV Company Name       RT) TYPE(RTVOBJ) FILE(CAABREP)          AC1255767;
PARAMETER(DTL.Company_Number);
PARAMETER(DTL.Name);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


EXECUTE FUNCTION(Rtv Prod Dept Name    RT) TYPE(RTVOBJ) FILE(PDI5REP)           AC1286709;
PARAMETER(DTL.Company_Number);
PARAMETER(DTL.Department_Code);
PARAMETER(DTL.Department_Description);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


// DTL.Text 3 Length USR = Condition name of DTL.SM Day of Week
DTL.Text_3_Length_USR = RTVCND(DTL.SM_Day_of_Week);

//?USER: Validate fields

EXECUTE FUNCTION(Val StdMix/Day Exist  RT) TYPE(RTVOBJ) FILE(PDI6CPP)           AC1978371;
PARAMETER(DTL.Company_Number);
PARAMETER(DTL.Department_Code);
PARAMETER(DTL.Day_of_Week);
PARAMETER(LCL.Record_Found_PS_SM_USR);
{
 //?USER: Initialize routine

 // WRK.First Time Flag = CND.Yes
 WRK.First_Time_Flag = 'Y';

 // PAR.Record Found -PS SM USR = CND.Record Not Found
 PAR.Record_Found_PS_SM_USR = 'N';

 //?USER: Processing if Data record not found

 // PAR.Record Found -PS SM USR = CND.Record Not Found
 PAR.Record_Found_PS_SM_USR = 'N';

 //?USER: Process Data record

 // PAR.Record Found -PS SM USR = CND.Record Found
 PAR.Record_Found_PS_SM_USR = 'Y';

 QUIT;

}


CASE;

// IF LCL.Record Found -PS SM USR is Record Found
IF LCL.Record_Found_PS_SM_USR = 'Y';

// Send error message - 'PS Std Prod Mix Dist already exists.'
ERROR(USR1760);

ENDIF;

// DTL.Text USR 4 = Condition name of DTL.Day of Week
DTL.Text_USR_4 = RTVCND(DTL.Day_of_Week);

//?USER: User defined action

// Call program Zzz Cpy Std Mix       XF.
CALL PROGRAM(Zzz Cpy Std Mix       XF) ('PDVTXFR');
PARAMETER(DTL.Company_Number);
PARAMETER(DTL.Department_Code);
PARAMETER(DTL.SM_Day_of_Week);
PARAMETER(DTL.Day_of_Week);

