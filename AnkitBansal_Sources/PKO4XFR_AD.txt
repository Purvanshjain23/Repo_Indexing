// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKO4XFR
// ?Date: 14.08.2025 Time: 02:50:01
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications and Comments
DO;

//?H16853 ISE 11/09/2020 - Recompiled due to change in Buy Order Number
ENDDO;

EXECUTE FUNCTION(UPD Eval Trans Rec    RT) TYPE(RTVOBJ) FILE(PKBVCPP)           AB1135062;
PARAMETER(PAR.ET_Company_Number);
PARAMETER(PAR.ET_Kill_Date);
PARAMETER(PAR.ET_Scale_Sequence_Number);
PARAMETER(PAR.ET_Carcass_Number);
PARAMETER(PAR.ET_Carcass_Number_Insert);
{
 //?USER: Process Data record

 // WRK.RS Record Status = CND.Flag for Purge
 WRK.RS_Record_Status = 'D';

 // WRK.ET Record Add/Del Sts = CND.Org Record OverRiden W/Av
 WRK.ET_Record_Add_Del_Sts = 'O';

 EXECUTE FUNCTION(Chg Evaluation Trans  CH) TYPE(CHGOBJ) FILE(PKBVCPP)           AB1127890;
 PARAMETER(DB1.ET_Company_Number);
 PARAMETER(DB1.ET_Kill_Date);
 PARAMETER(DB1.ET_Scale_Sequence_Number);
 PARAMETER(DB1.ET_Carcass_Number);
 PARAMETER(DB1.ET_Carcass_Number_Insert);
 PARAMETER(DB1.ET_Tattoo_Number);
 PARAMETER(DB1.ET_Lot);
 PARAMETER(DB1.ET_Shift);
 PARAMETER(DB1.ET_Hot_Wgt);
 PARAMETER(DB1.ET_Backfat_Thickness_Inch);
 PARAMETER(DB1.ET_Loin_Eye_Depth_Inches);
 PARAMETER(DB1.ET_Lean_Percent_NPPC);
 PARAMETER(DB1.ET_Backfat_Thickness_MM);
 PARAMETER(DB1.ET_Loineye_Depth_MM);
 PARAMETER(DB1.ET_Light_Reflectance_MM);
 PARAMETER(DB1.ET_Lean_Percent_FOM);
 PARAMETER(DB1.ET_Light_Reflectance);
 PARAMETER(DB1.ET_Trim_Area);
 PARAMETER(DB1.ET_Carcass_Sex);
 PARAMETER(DB1.ET_Error_Sts);
 PARAMETER(WRK.ET_Record_Add_Del_Sts);
 PARAMETER(DB1.ET_Record_Created_W_Avg);
 PARAMETER(DB1.ET_Record_Created_Status);
 PARAMETER(DB1.ET_User_Error_Override);
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.TH_Kill_Date);
 PARAMETER(DB1.RS_User_Changed);
 PARAMETER(DB1.RS_Date_Changed);
 PARAMETER(DB1.RS_Time_Changed);
 PARAMETER(WRK.RS_Record_Status);
 PARAMETER(DB1.RS_Job);
 PARAMETER(DB1.RS_Program);
 PARAMETER(DB1.RS_User_Added);
 PARAMETER(DB1.RS_Date_Added);
 PARAMETER(DB1.RS_Time_Added);
 PARAMETER(DB1.RU_Date);
 PARAMETER(DB1.RU_Time);
 PARAMETER(WRK.@Status_Yes_No);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Rtv Change Stamp      IF) TYPE(EXCINTFUN)                      AB1100934;
  PARAMETER(DB1.RS_User_Changed);
  PARAMETER(DB1.RS_Date_Changed);
  PARAMETER(DB1.RS_Time_Changed);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  {
   //?Execute internal function

   // PAR.RS User Changed = JOB.*USER
   PAR.RS_User_Changed = JOB.*USER;

   // PAR.RS Date Changed = JOB.*Job date
   PAR.RS_Date_Changed = JOB.*Job_date;

   // PAR.RS Time Changed = JOB.*Job time
   PAR.RS_Time_Changed = JOB.*Job_time;

   // PAR.RS Job = JOB.*JOB
   PAR.RS_Job = JOB.*JOB;

   // PAR.RS Program = JOB.*PROGRAM
   PAR.RS_Program = JOB.*PROGRAM;

  }

  //?Record is changed
  // *MO.VE             1183529*Bu = ilt. in functions
  PAR.@Status_Yes_No = 'Y';

 }

}


