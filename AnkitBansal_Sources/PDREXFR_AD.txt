// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDREXFR
// ?Date: 14.08.2025 Time: 03:35:55
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?This external function uses the sbdprtovr and open query functions
//?a little bit differently.  All CL's and PRTFIL's are called from
//?this external function, rather than from the CL's.  Doing the print
//?this way will allow the IS staff to find out where a particular
//?PRTFIL is used by using the 'Usage' (putting a 'U' before the function
//?in the Edit Functions or Display all Functions areas).
//?          John Tremper, June 24, 1998
//?1.  Performing the Seaboard Print Override
DO;

// WRK.Nbr of Copies-Alpha   USR = PAR.PRT Number of Copies
WRK.Nbr_of_Copies_Alpha_USR = PAR.PRT_Number_of_Copies;

// Call program EXC Command SBDOVR     UP.
CALL PROGRAM(EXC Command SBDOVR     UP) ('PDPOUPR');
PARAMETER('PDQ9PFR$');
PARAMETER(PAR.PRT_Printer_Device);
PARAMETER(PAR.PRT_Hold_Output_Sts);
PARAMETER(PAR.PRT_Save_Output_Sts);
PARAMETER(WRK.Nbr_of_Copies_Alpha_USR);

ENDDO;

//?2.  Run the Open Query File
DO;

// PAR.Scheduled Ship Date = PAR.Date 1          PASS  USR
PAR.Scheduled_Ship_Date = PAR.Date_1_PASS_USR;

// Call program PRT Ord Inq for Shppng UP.
CALL PROGRAM(PRT Ord Inq for Shppng UP) ('PDRFUPC');
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Order_Number);
PARAMETER(PAR.Load_ID);
PARAMETER(PAR.Date_1_PASS_USR);

ENDDO;

//?3.  Print Report
DO;

// Call program PRT Ord Inq for Shppng PF.
CALL PROGRAM(PRT Ord Inq for Shppng PF) ('PDQ9PFR');
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Order_Number);
PARAMETER(PAR.Scheduled_Ship_Date);
PARAMETER(PAR.Load_ID);
PARAMETER(PAR.Warehouse_Code);

//?The executable message below is required to delete the override
//?that was called in the Open Query CL Program in step 2.
// Execute command - 'DLTOVR'
EXECUTE COMMAND(USR2787);

ENDDO;

