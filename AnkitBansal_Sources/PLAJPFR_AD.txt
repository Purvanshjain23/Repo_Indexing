// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLAJPFR
// ?Date: 14.08.2025 Time: 12:05:15
// ?------------------------------------------------------------------------------------------------

//?USER: Print required level headings

CASE;

IF NEW Company_Number;
// SUPPRESSED PRINT Company Number header format

ENDIF;

CASE;

IF NEW Order_Number;
// SUPPRESSED PRINT Order Number header format

ENDIF;

CASE;

IF NEW ED_Export_Document_Type;
// SUPPRESSED PRINT ED Export Document Type header format

ENDIF;

//?USER: Process before print of detail format

// CUR.Text USR 20 = CON.*BLANK
CUR.Text_USR_20 = *BLANK;

CASE;

// IF DB1.ED Date of Slaughter is Blank
IF DB1.ED_Date_of_Slaughter = *BLANK;

// IF *OTHERWISE
IF *OTHERWISE;

ENDIF;

//?Date
CASE;

// IF DB1.ED Document Date is Not entered
IF DB1.ED_Document_Date = *ZERO;

// CUR.Date                  USR = JOB.*Job date
CUR.Date_USR = JOB.*Job_date;

//?Date
// IF *OTHERWISE
IF *OTHERWISE;

// CUR.Date                  USR = DB1.ED Document Date
CUR.Date_USR = DB1.ED_Document_Date;

ENDIF;

// WRK.Date (Alpha) USR = CVTVAR(CUR.Date                  USR)
WRK.Date_Alpha_USR = CVTVAR(CUR.Date_USR);

// WRK.Month/Day Alpha MMDD = SUBSTRING(WRK.Date (Alpha) USR,CON.4,CON.4)
WRK.Month_Day_Alpha_MMDD = SUBSTRING(WRK.Date_Alpha_USR:4:4);

// WRK.Year  (Char) USR = SUBSTRING(WRK.Date (Alpha) USR,CON.2,CON.2)
WRK.Year_Char_USR = SUBSTRING(WRK.Date_Alpha_USR:2:2);

// WRK.Year Alpha (YYYY) USR = CONCAT(CON.20,WRK.Year  (Char) USR,CON.*ZERO)
WRK.Year_Alpha_YYYY_USR = '20' + WRK.Year_Char_USR (*ZERO);

// WRK.Date (Char-8) USR = CONCAT(WRK.Month/Day Alpha MMDD,WRK.Year Alpha (YYYY) USR,CON.*ZERO)
WRK.Date_Char_8_USR = WRK.Month_Day_Alpha_MMDD + WRK.Year_Alpha_YYYY_USR (*ZERO);

// CUR.date 8,0 usr 2 = CVTVAR(WRK.Date (Char-8) USR)
CUR.date_80_usr_2 = CVTVAR(WRK.Date_Char_8_USR);

//?S15909 DN 12/10/19-Print 'BOXES' Next to # of Packages.
// CUR.Text USR 5 = CON.BOXES
CUR.Text_USR_5 = 'BOXES';

// CUR.USR Uom = CON.Lbs
CUR.USR_Uom = 'Lbs';

// CUR.Text USR 23 = CON.Establishment Number
CUR.Text_USR_23 = 'Establishment Number';

// CUR.Text 20               USR = CON.Establishment Number
CUR.Text_20_USR = 'Establishment Number';

// CUR.Text 10A USR = CUR.ED Plant Number
CUR.Text_10A_USR = CUR.ED_Plant_Number;

//?5/6/04 Per Ashley -- always print 13597 for this doc., even if Freezer
//?12/2/04 Per Ashley -- always print 13597  M for this doc., even if Freezer
//?12/7/04 Per Ashley -- Dont print 13597  M after all!
//?11/16/5 RMC get plant from company
// Call program Rtv Alpha Value       XF.
CALL PROGRAM(Rtv Alpha Value       XF) ('POMTXFR');
PARAMETER(CUR.Company_Number);
PARAMETER('PLTESTNO');
PARAMETER(CUR.ED_Plant_Number);

// Call program Rtv Alpha Value       XF.
CALL PROGRAM(Rtv Alpha Value       XF) ('POMTXFR');
PARAMETER(CUR.Company_Number);
PARAMETER('MPGJPNKG');
PARAMETER(LCL.Print_Yes_No_USR);

CASE;

// IF LCL.Print (Yes/No) USR is No
IF LCL.Print_Yes_No_USR = 'N';

// CUR.USR UOM 2 = CON.*BLANK
CUR.USR_UOM_2 = *BLANK;

// IF *OTHERWISE
IF *OTHERWISE;

// CUR.Net Weight Kilograms = CUR.ED Total Net Weight lbs * CON..45359 *Rounded
CUR.Net_Weight_Kilograms = CUR.ED_Total_Net_Weight_lbs * .45359 'H';

// CUR.USR UOM 2 = CON.KG
CUR.USR_UOM_2 = 'KG';

ENDIF;

//?USER: Print required level totals

// SUPPRESSED PRINT ED Export Document Type totals format

// SUPPRESSED PRINT Order Number totals format

// SUPPRESSED PRINT Company Number totals format

