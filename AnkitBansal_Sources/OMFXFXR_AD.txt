// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for OMFXFXR
// ?Date: 14.08.2025 Time: 03:49:51
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(UPD Fix ActualFreight RT) TYPE(RTVOBJ) FILE(OMFJCPP)           AC2130189;
{
 //?USER: Initialize routine

 // WRK.Load ID = CON.50000
 WRK.Load_ID = 50000;

 //?USER: Process Data record

 //?The access path selects Shipped or Invoiced loads AND Shipping
 //?Method of Prepaid.
 CASE;

 // IF DB1.Load ID LT WRK.Load ID
 IF DB1.Load_ID < WRK.Load_ID;

 //?Update load header
 EXECUTE FUNCTION(Rtv Carrier Payment   RT) TYPE(RTVOBJ) FILE(POBCCPP)           AC1628704;
 PARAMETER(DB1.Load_ID);
 PARAMETER(DB1.Rated_Freight);
 PARAMETER(LCL.Total_Freight_7_2_USR);
 PARAMETER(LCL.Total_Freight_USR);
 {
  //?USER: Initialize routine

  MOVE *ALL (To: PAR From: CON);

  // PAR.Total Freight 7.2 USR = PAR.Rated Freight
  PAR.Total_Freight_7_2_USR = PAR.Rated_Freight;

  // PAR.Total Freight USR = PAR.Rated Freight
  PAR.Total_Freight_USR = PAR.Rated_Freight;

  //?USER: Process Data record

  CASE;

  // IF DB1.LFC Act Frt Include Sts is Yes
  IF DB1.LFC_Act_Frt_Include_Sts = 'Y';

  // PAR.Total Freight 7.2 USR = PAR.Total Freight 7.2 USR + DB1.LFC Amount
  PAR.Total_Freight_7_2_USR = PAR.Total_Freight_7_2_USR + DB1.LFC_Amount;

  ENDIF;

  CASE;

  // IF DB1.LFC Tot Freight Inc Sts is Yes
  IF DB1.LFC_Tot_Freight_Inc_Sts = 'Y';

  // PAR.Total Freight USR = PAR.Total Freight USR + DB1.LFC Amount
  PAR.Total_Freight_USR = PAR.Total_Freight_USR + DB1.LFC_Amount;

  ENDIF;

 }

 EXECUTE FUNCTION(Upd Ld ActFrt/CarPay  RT) TYPE(RTVOBJ) FILE(OMFJCPP)           AC1628500;
 PARAMETER(DB1.Load_ID);
 PARAMETER(DB1.Load_Carrier_Pay_Amt);
 PARAMETER(LCL.Total_Freight_USR);
 PARAMETER(DB1.LH_Carrier_Payment_Sts);
 PARAMETER(LCL.Total_Freight_7_2_USR);
 {
  //?USER: Process Data record

  EXECUTE FUNCTION(Chg Ld ActFrt/CarPay  CH) TYPE(CHGOBJ) FILE(OMFJCPP)           AC1628501;
  PARAMETER(DB1.Load_ID);
  PARAMETER(PAR.Load_Carrier_Pay_Amt);
  PARAMETER(PAR.Load_Total_Freight);
  PARAMETER(PAR.LH_Carrier_Payment_Sts);
  PARAMETER(PAR.Load_Actual_Freight);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*PROGRAM
    PAR.Job_Name = JOB.*PROGRAM;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

   CASE;

   // IF PAR.LH Carrier Payment Sts is Paid
   IF PAR.LH_Carrier_Payment_Sts = 'P';

   ENDIF;

  }

 }

 ENDIF;

}


