/********************************************************************/
/*                                                                  */
/*  SYNOPSIS -  PROGRAM TO RETRIEVE DATA AREA FOR YEAR END INFO -   */
/*              RETURN CLOSING YEAR                                 */
/*                                                                  */
/*                                                                  */
/*  COMPANY   - DATAWRIGHT INC.                                     */
/*  SYSTEM    - IDEAS/400 JOB CONTROL                               */
/*  USER NAME - LINDA MEINKE                                        */
/*  DATE      - 12/20/89                                            */
/*  COPYRIGHT 1989 DATAWRIGHT INC.                                  */
/*                                                                  */
/*      PARAMETERS RECEIVED:                                        */
/*                                                                  */
/*          &COMP       - COMPANY NUMBER                            */
/*                                                                  */
/*      PARAMETERS USED:                                            */
/*                                                                  */
/*          &YEAR       - CLOSING YEAR                              */
/*                                                                  */
/********************************************************************/

 JCDTAYC:    PGM        PARM(&COMP &YEAR)

       DCL     &COMP        *DEC   (3 0)        /*  COMPANY #       */
       DCL     &YEAR        *DEC   (4)          /*  YEAR            */
       DCL     &COMPA       *CHAR  3            /*  COMPANY ALPHA   */
       DCL     &DTAREA      *CHAR  7            /*  DATA AREA       */
       DCL     &DTAYR       *CHAR  4            /*  YEAR ALPHA      */

/********************************************************************/
/*   CHECK IF COMPANY YEAR END DATA AREA EXISTS                     */
/********************************************************************/

             CHGVAR     VAR(&COMPA) VALUE(&COMP)
             CHGVAR     VAR(%SST(&DTAREA 1 4)) VALUE(YEAR)
             CHGVAR     VAR(%SST(&DTAREA 5 3)) VALUE(&COMPA)

             RTVDTAARA  DTAARA(*LIBL/&DTAREA (1 4)) RTNVAR(&DTAYR) /* +
                          retrieve company year to be processed data +
                          area */
             MONMSG     MSGID(CPF0000) EXEC(GOTO CMDLBL(END)) /* data +
                          area not found */

             CHGVAR     VAR(&YEAR) VALUE(&DTAYR)

 END:        ENDPGM
