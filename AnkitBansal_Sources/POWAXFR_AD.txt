// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POWAXFR
// ?Date: 14.08.2025 Time: 03:39:18
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Rtv Yld Profile Dft   RT) TYPE(RTVOBJ) FILE(POCXREP)           AC1665295;
PARAMETER(PAR.User_Profile_Name);
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Department_Code);
PARAMETER(PAR.Production_Line_Code);
PARAMETER(PAR.User_Department);
PARAMETER(PAR.User_Access);
PARAMETER(PAR.Count_USR);
PARAMETER(PAR.Record_Found_USR);
{
 //?USER: Initialize routine

 MOVE *ALL (To: PAR From: CON);

 // PAR.Record Found USR = CND.Record Not Found
 PAR.Record_Found_USR = 'N';

 //?USER: Process Data record

 CASE;

 // IF DB1.Record Status is Active
 IF DB1.Record_Status = 'A';

 // AND DB1.User Line In Process is yes
 AND DB1.User_Line_In_Process = 'Y';

 MOVE *ALL (To: PAR From: DB1);

 // PAR.Count USR = PAR.Count USR + CON.1
 PAR.Count_USR = PAR.Count_USR + 1;

 // PAR.Record Found USR = CND.Record Found
 PAR.Record_Found_USR = 'Y';

 ENDIF;

}


CASE;

// IF PAR.Count USR is GT 1
IF PAR.Count_USR > 1;

// Call program Sel Prod Line         SR.
CALL PROGRAM(Sel Prod Line         SR) ('POVPSRR');
PARAMETER(PAR.User_Profile_Name);
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Department_Code);
PARAMETER(PAR.Production_Line_Code);
PARAMETER(PAR.User_Department);
PARAMETER(PAR.User_Access);

ENDIF;

