// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PWA6XFR
// ?Date: 14.08.2025 Time: 02:55:52
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modification history
DO;

//? 4/18/17 JBB C9426 - Add Ref fields to Delivery Sched Template
//?                     Made new Ref fields (N)either parms on the
//?                     update so the current values would be retained
ENDDO;

//?For the parm kill date forward --
//?Update Sched Kill Head in DSD per the template same day of week.
EXECUTE FUNCTION(Rtv Delv kill  Hd/day RT) TYPE(RTVOBJ) FILE(PLACREP)           AB1331390;
{
 //?USER: Process Data record

 CASE;

 // IF DB1.DST Delivery Day of Week GT DB1.DST Kill Day of Week
 IF DB1.DST_Delivery_Day_of_Week > DB1.DST_Kill_Day_of_Week;

 // WRK.DST Kill Day of Week = DB1.DST Delivery Day of Week
 WRK.DST_Kill_Day_of_Week = DB1.DST_Delivery_Day_of_Week;

 EXECUTE FUNCTION(Chg Delv Kill Day of  CH) TYPE(CHGOBJ) FILE(PLACREP)           AB1331392;
 PARAMETER(DB1.CC_Company_Number);
 PARAMETER(DB1.DST_Delivery_Day_of_Week);
 PARAMETER(DB1.DST_Delivery_Time);
 PARAMETER(DB1.DST_Delivery_Time_Seq);
 PARAMETER(WRK.DST_Kill_Day_of_Week);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Rtv Change Stamp      IF) TYPE(EXCINTFUN)                      AB1100934;
  PARAMETER(DB1.RS_User_Changed);
  PARAMETER(DB1.RS_Date_Changed);
  PARAMETER(DB1.RS_Time_Changed);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  {
   //?Execute internal function

   // PAR.RS User Changed = JOB.*USER
   PAR.RS_User_Changed = JOB.*USER;

   // PAR.RS Date Changed = JOB.*Job date
   PAR.RS_Date_Changed = JOB.*Job_date;

   // PAR.RS Time Changed = JOB.*Job time
   PAR.RS_Time_Changed = JOB.*Job_time;

   // PAR.RS Job = JOB.*JOB
   PAR.RS_Job = JOB.*JOB;

   // PAR.RS Program = JOB.*PROGRAM
   PAR.RS_Program = JOB.*PROGRAM;

  }

 }

 ENDIF;

}


