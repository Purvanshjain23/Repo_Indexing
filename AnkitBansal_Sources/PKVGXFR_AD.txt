// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKVGXFR
// ?Date: 14.08.2025 Time: 02:53:04
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?** Purge by G/L Date <= Purge date
EXECUTE FUNCTION(Prg Voucher Hdr/Dtl   RT) TYPE(RTVOBJ) FILE(PKBKCPP)           AB1233776;
PARAMETER(PAR.Purge_Date_USR);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.VCH G/L Date LT PAR.VCH G/L Date
 IF DB1.VCH_G_L_Date < PAR.VCH_G_L_Date;

 //?** Create tape physical file record and Delete Voucher Detail
 EXECUTE FUNCTION(Prg Voucher Detail    RT) TYPE(RTVOBJ) FILE(PKBLCPP)           AB1233777;
 PARAMETER(DB1.VCH_Company_number);
 PARAMETER(DB1.VCH_Batch_Number);
 PARAMETER(DB1.VCH_Header_Number);
 {
  //?USER: Process Data record

  EXECUTE FUNCTION(Prg Hog Voucher Detail CR) TYPE(CRTOBJ) FILE(PKBLCPP)          AB1281897;
  PARAMETER(DB1.VCH_Company_number);
  PARAMETER(DB1.VCH_Batch_Number);
  PARAMETER(DB1.VCH_Header_Number);
  PARAMETER(DB1.VCD_Line);
  PARAMETER(DB1.VCD_Base_Mkt_Price_Amt);
  PARAMETER(DB1.VCD_Sort_Disc_Amt);
  PARAMETER(DB1.VCD_Yield_Gain_Loss);
  PARAMETER(DB1.VCD_Base_Carcass_Value);
  PARAMETER(DB1.VCD_LN_Add_on_Deduct_Amt);
  PARAMETER(DB1.VCD_Gross_Amt);
  PARAMETER(DB1.VCD_Deduction_Amt);
  PARAMETER(DB1.VCD_Less_Split_Amount);
  PARAMETER(DB1.VCD_Net_Amt);
  PARAMETER(DB1.VCD_Split_Percent);
  PARAMETER(DB1.VCD_Payment_Type);
  PARAMETER(DB1.VCD_Hog_Class_Type);
  PARAMETER(DB1.VCD_BO_Type);
  PARAMETER(DB1.VCD_Source_Contract_Type);
  PARAMETER(DB1.VCD_Source_Code);
  PARAMETER(DB1.VCD_Check_Description);
  PARAMETER(DB1.VCD_Received_Head);
  PARAMETER(DB1.VCD_Head_Killed);
  PARAMETER(DB1.VCD_Push_Payment_Status);
  PARAMETER(DB1.VCD_Repayment_Flag);
  PARAMETER(DB1.VCD_Unused_Status_3);
  PARAMETER(DB1.VCD_Unused_Status_4);
  PARAMETER(DB1.VCD_Unused_Head_1);
  PARAMETER(DB1.VCD_UnUsed_Head_2);
  PARAMETER(DB1.VCD_UnUsed_Head_3);
  PARAMETER(DB1.MGL_Supplier_Invoice_Nbr);
  PARAMETER(DB1.MGL_Voucher_Number);
  PARAMETER(DB1.MGL_Invoice_Batch_Number);
  PARAMETER(DB1.MGL_Process_to_ERP_Date);
  PARAMETER(DB1.MGL_Process_to_ERP_Time);
  PARAMETER(DB1.BOH_Company_Number);
  PARAMETER(DB1.BOH_Buy_Order_Number);
  PARAMETER(DB1.BOL_Load_Number);
  PARAMETER(DB1.TH_Tattoo_Number);
  PARAMETER(DB1.TH_Kill_Date);
  PARAMETER(DB1.PD_Producer_Code);
  PARAMETER(DB1.PL_Location_Code);
  PARAMETER(DB1.RS_User_Changed);
  PARAMETER(DB1.RS_Date_Changed);
  PARAMETER(DB1.RS_Time_Changed);
  PARAMETER(DB1.RS_Record_Status);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  PARAMETER(DB1.RS_User_Added);
  PARAMETER(DB1.RS_Date_Added);
  PARAMETER(DB1.RS_Time_Added);
  EXECUTE FUNCTION(Del Voucher Detail    DL) TYPE(DLTOBJ) FILE(PKBLCPP)           AB1234001;
  PARAMETER(DB1.VCH_Company_number);
  PARAMETER(DB1.VCH_Batch_Number);
  PARAMETER(DB1.VCH_Header_Number);
  PARAMETER(DB1.VCD_Line);
 }

 EXECUTE FUNCTION(Prg Voucher Split     RT) TYPE(RTVOBJ) FILE(PKCACPP)           AB1233823;
 PARAMETER(DB1.VCH_Company_number);
 PARAMETER(DB1.VCH_Batch_Number);
 PARAMETER(DB1.VCH_Header_Number);
 {
  //?USER: Process Data record

  EXECUTE FUNCTION(Prg Hog Voucher Split CR) TYPE(CRTOBJ) FILE(PKCACPP)           AB1281903;
  PARAMETER(DB1.VCH_Company_number);
  PARAMETER(DB1.VCH_Batch_Number);
  PARAMETER(DB1.VCH_Header_Number);
  PARAMETER(DB1.BOS_Split_Producer_Code);
  PARAMETER(DB1.PD_Producer_Code);
  PARAMETER(DB1.BOS_Split_Percent);
  PARAMETER(DB1.RS_User_Changed);
  PARAMETER(DB1.RS_Date_Changed);
  PARAMETER(DB1.RS_Time_Changed);
  PARAMETER(DB1.RS_Record_Status);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  PARAMETER(DB1.RS_User_Added);
  PARAMETER(DB1.RS_Date_Added);
  PARAMETER(DB1.RS_Time_Added);
  EXECUTE FUNCTION(Delete Hog Check Split) TYPE(DLTOBJ) FILE(PKCACPP)             AB1107927;
  PARAMETER(DB1.VCH_Company_number);
  PARAMETER(DB1.VCH_Batch_Number);
  PARAMETER(DB1.VCH_Header_Number);
  PARAMETER(DB1.BOS_Split_Producer_Code);
  PARAMETER(DB1.PD_Producer_Code);
 }

 //?** Don't replace chg date with purge date   C001078 LJB 11/2/10
 //?** Create tape physical file record and Delete Voucher Header
 EXECUTE FUNCTION(Prg Houg Voucher HeaderCR) TYPE(CRTOBJ) FILE(PKBKCPP)          AB1281910;
 PARAMETER(DB1.VCH_Company_number);
 PARAMETER(DB1.VCH_Batch_Number);
 PARAMETER(DB1.VCH_Header_Number);
 PARAMETER(DB1.VCH_AP_Address_Number);
 PARAMETER(DB1.VCH_AP_Voucher_Number);
 PARAMETER(DB1.VCH_Payee_Type);
 PARAMETER(DB1.VCH_Manual_Check_Number);
 PARAMETER(DB1.VCH_Manual_Check_Date);
 PARAMETER(DB1.VCH_Base_Mkt_Price_Amt);
 PARAMETER(DB1.VCH_Sort_Disc_Amt);
 PARAMETER(DB1.VCH_Yield_Gain_Loss_Amt);
 PARAMETER(DB1.VCH_Base_Carcass_Value);
 PARAMETER(DB1.VCH_LN_Add_on_Deduct_Amt);
 PARAMETER(DB1.VCH_Gross_Amt);
 PARAMETER(DB1.VCH_Deduction_Amt);
 PARAMETER(DB1.VCH_Less_Split_Amount);
 PARAMETER(DB1.VCH_Net_Amt);
 PARAMETER(DB1.VCH_Split);
 PARAMETER(DB1.VCH_Split_Check_Sts);
 PARAMETER(DB1.VCH_Process_Status);
 PARAMETER(DB1.VCH_G_L_Date);
 PARAMETER(DB1.VCH_Check_Type);
 PARAMETER(DB1.PD_Producer_Code);
 PARAMETER(DB1.TRK_Trucker_Code);
 PARAMETER(DB1.VR_Reason_Code);
 PARAMETER(DB1.RS_User_Changed);
 PARAMETER(DB1.RS_Date_Changed);
 PARAMETER(DB1.RS_Time_Changed);
 PARAMETER(DB1.RS_Record_Status);
 PARAMETER(DB1.RS_Job);
 PARAMETER(DB1.RS_Program);
 PARAMETER(DB1.RS_User_Added);
 PARAMETER(DB1.RS_Date_Added);
 PARAMETER(DB1.RS_Time_Added);
 {
  //?USER: Processing before Data update

  //?** Don't replace chg date with purge date   C001078 LJB 11/2/10
 }

 EXECUTE FUNCTION(Dlt Voucher Header    DL) TYPE(DLTOBJ) FILE(PKBKCPP)           AB1102570;
 PARAMETER(DB1.VCH_Company_number);
 PARAMETER(DB1.VCH_Batch_Number);
 PARAMETER(DB1.VCH_Header_Number);
 ENDIF;

}


