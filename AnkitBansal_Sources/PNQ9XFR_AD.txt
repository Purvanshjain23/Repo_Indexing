// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PNQ9XFR
// ?Date: 14.08.2025 Time: 03:46:15
// ?------------------------------------------------------------------------------------------------

//?Execute user function

// PAR.Error Return = WRK.BLANK
PAR.Error_Return = WRK.BLANK;

//?* Retrieve the Rate and UOM from the Item Price Element
EXECUTE FUNCTION(Rtv Market Prem/Ded   RT) TYPE(RTVOBJ) FILE(PNGBREP)           AC1998772;
PARAMETER(PAR.Item_Code);
PARAMETER(PAR.Commodity_Market_Code);
PARAMETER(PAR.Pricing_Retrieved_Amount);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


//?* Convert the Rate to CWT
//?** Convert Price to CWT
CASE;

// IF PAR.Pricing Retrieved Amount is Not Zeros
IF PAR.Pricing_Retrieved_Amount <> *ZERO;

// Call program CLC Convert Price - CW XF.
CALL PROGRAM(CLC Convert Price - CW XF) ('PDKUXFR');
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Item_Code);
PARAMETER(PAR.Pricing_Retrieved_Amount);
PARAMETER(PAR.Price_Adjustment_Amount);

// PAR.Pricing Retrieved Amount = PAR.Price Adjustment Amount
PAR.Pricing_Retrieved_Amount = PAR.Price_Adjustment_Amount;

ENDIF;

