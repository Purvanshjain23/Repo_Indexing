// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POVOXFR
// ?Date: 14.08.2025 Time: 03:39:11
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Rtv No of Shifts      RT) TYPE(RTVOBJ) FILE(CAAFREP)           AC1650219;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Production_Date);
PARAMETER(LCL.Number_of_Prod_Shifts);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


EXECUTE FUNCTION(Rtv Process Shift End RT) TYPE(RTVOBJ) FILE(POCNREP)           AC1665154;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Department_Code);
PARAMETER(PAR.Production_Line_Code);
PARAMETER(PAR.Production_Date);
PARAMETER(PAR.Production_Shift);
PARAMETER(LCL.Number_of_Prod_Shifts);
{
 //?USER: Process Data record

 // Call program Zzz Accum FG/WP Prod  XF.
 CALL PROGRAM(Zzz Accum FG/WP Prod  XF) ('POVBXFR');
 PARAMETER(PAR.Company_Number);
 PARAMETER(PAR.Department_Code);
 PARAMETER(PAR.Production_Line_Code);
 PARAMETER(PAR.Production_Date);
 PARAMETER(PAR.Production_Shift);
 PARAMETER(DB1.Item_Structure_Type_Code);
 PARAMETER(DB1.Item_Structure_Group_Code);
 PARAMETER(DB1.Item_Structure_Class_Code);
 PARAMETER(DB1.WIP_Usage_Company_Num);
 PARAMETER(DB1.WIP_Usage_Dept_Code);
 PARAMETER(DB1.WIP_Usage_Prod_Line_Code);
 PARAMETER(PAR.Number_of_Prod_Shifts);

 // Call program Zzz Accum Partl Prod  XF.
 CALL PROGRAM(Zzz Accum Partl Prod  XF) ('POVCXFR');
 PARAMETER(PAR.Company_Number);
 PARAMETER(PAR.Department_Code);
 PARAMETER(PAR.Production_Line_Code);
 PARAMETER(PAR.Production_Date);
 PARAMETER(PAR.Production_Shift);
 PARAMETER(DB1.Item_Structure_Type_Code);
 PARAMETER(DB1.Item_Structure_Group_Code);
 PARAMETER(DB1.Item_Structure_Class_Code);
 PARAMETER(PAR.Number_of_Prod_Shifts);

 //?USER: Exit processing

 EXECUTE FUNCTION(Rtv Prior Date/Shift  RT) TYPE(RTVOBJ) FILE(POCSCPP)           AC1671130;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Department_Code);
 PARAMETER(DB1.Production_Line_Code);
 PARAMETER(PAR.Production_Date);
 PARAMETER(PAR.Production_Shift);
 PARAMETER(LCL.Production_Date_USR);
 PARAMETER(LCL.Production_Shift_USR);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  CASE;

  // IF DB1.Production Date EQ PAR.Production Date
  IF DB1.Production_Date = PAR.Production_Date;

  // AND DB1.Production Shift EQ PAR.Production Shift
  AND DB1.Production_Shift = PAR.Production_Shift;

  // IF *OTHERWISE
  IF *OTHERWISE;

  // PAR.Production Date USR = DB1.Production Date
  PAR.Production_Date_USR = DB1.Production_Date;

  // PAR.Production Shift USR = DB1.Production Shift
  PAR.Production_Shift_USR = DB1.Production_Shift;

  QUIT;

  ENDIF;

 }

 CASE;

 // IF LCL.Production Date USR is Entered
 IF LCL.Production_Date_USR <> *ZERO;

 // AND LCL.Production Shift USR is *ALL values
 AND LCL.Production_Shift_USR = '1'/'2'/*BLANK;

 // Call program Zzz Set Begin Inv     XF.
 CALL PROGRAM(Zzz Set Begin Inv     XF) ('POXMXFR');
 PARAMETER(PAR.Company_Number);
 PARAMETER(PAR.Department_Code);
 PARAMETER(PAR.Production_Line_Code);
 PARAMETER(LCL.Production_Date_USR);
 PARAMETER(LCL.Production_Shift_USR);
 PARAMETER(PAR.Production_Date);
 PARAMETER(PAR.Production_Shift);

 ENDIF;

}


EXECUTE FUNCTION(Upd Process Status    RT) TYPE(RTVOBJ) FILE(POCSCPP)           AC1665841;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Department_Code);
PARAMETER(PAR.Production_Line_Code);
PARAMETER(PAR.Production_Date);
PARAMETER(PAR.Production_Shift);
PARAMETER(01);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Chg Process Status    CH) TYPE(CHGOBJ) FILE(POCSCPP)           AC1665842;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Department_Code);
 PARAMETER(DB1.Production_Line_Code);
 PARAMETER(DB1.Production_Date);
 PARAMETER(DB1.Production_Shift);
 PARAMETER(DB1.YDL_Post_Status);
 PARAMETER(PAR.YDL_Process_Status);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

}


