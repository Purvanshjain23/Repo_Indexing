// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POQEXFR
// ?Date: 14.08.2025 Time: 03:38:29
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Rtv Crt Prd Trc Dummy RT) TYPE(RTVOBJ) FILE(CAB7CPP)           AC1647793;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Date_From_USR);
PARAMETER(PAR.Date_To_USR);
PARAMETER(PAR.Shift_Number);
PARAMETER(PAR.Date_From_USR);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Production Date GE PAR.Date From             USR
 IF DB1.Production_Date >= PAR.Date_From_USR;

 // AND DB1.Production Date LE PAR.Date To               USR
 AND DB1.Production_Date <= PAR.Date_To_USR;

 CASE;

 // IF PAR.Shift Number is Not Entered
 IF PAR.Shift_Number = *BLANK;

 // OR PAR.Shift Number EQ DB1.Shift Number
 OR PAR.Shift_Number = DB1.Shift_Number;

 // WRK.Year Code = DB1.Production Date *YEAR
 WRK.Year_Code = DATEDTLS(DB1.Production_Date 'YR' 1111111 'NONE' 'N' 1);

 // LCL.Year Alpha (YYYY) USR = WRK.Year Code
 LCL.Year_Alpha_YYYY_USR = WRK.Year_Code;

 // LCL.Month/Year NBR        USR = DB1.Production Date
 LCL.Month_Year_NBR_USR = DB1.Production_Date;

 // LCL.Text USR 4 = LCL.Month/Year NBR        USR
 LCL.Text_USR_4 = LCL.Month_Year_NBR_USR;

 // LCL.AS Prod Date YYYYMMDD = CONCAT(LCL.Year Alpha (YYYY) USR,LCL.Text USR 4,CON.*ZERO)
 LCL.AS_Prod_Date_YYYYMMDD = LCL.Year_Alpha_YYYY_USR + LCL.Text_USR_4 (*ZERO);

 // LCL.PT Prod Date YYYYMMDD = CVTVAR(LCL.AS Prod Date YYYYMMDD)
 LCL.PT_Prod_Date_YYYYMMDD = CVTVAR(LCL.AS_Prod_Date_YYYYMMDD);

 EXECUTE FUNCTION(Rtv Prod Trace f/dummyRT) TYPE(RTVOBJ) FILE(POB2CPP)           AC1647794;
 PARAMETER(DB1.Company_Number);
 PARAMETER(LCL.PT_Prod_Date_YYYYMMDD);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Shift_Number);
 PARAMETER(DB1.Warehouse_Code);
 {
  //?USER: Processing if Data record not found

  // LCL.PT Serial Number = LCL.PT Serial Number + CON.1
  LCL.PT_Serial_Number = LCL.PT_Serial_Number + 1;

  EXECUTE FUNCTION(Crt Product Trac DummyCR) TYPE(CRTOBJ) FILE(POB2CPP)           AC1647795;
  PARAMETER(*MISSING);
  PARAMETER(LCL.PT_Serial_Number);
  PARAMETER(PAR.PT_Prod_Date_YYYYMMDD);
  PARAMETER(PAR.PT_Shift_Number);
  PARAMETER(PAR.Warehouse_Code);
  PARAMETER(PAR.PT_Product_Code);
  PARAMETER('DUMMY');
 }

 ENDIF;

 ENDIF;

}


