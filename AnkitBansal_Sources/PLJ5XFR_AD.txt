// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLJ5XFR
// ?Date: 14.08.2025 Time: 02:54:30
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications
//?11/05/2020 ISE H16853 - Recompiled due to change in Buy Order Number
EXECUTE FUNCTION(Prg Buy Order Header  RT) TYPE(RTVOBJ) FILE(PKAWCPP)           AB1233860;
PARAMETER(PAR.Purge_Date_USR);
{
 //?USER: Initialize routine

 //?***** Change log and comments
 DO;

 //?** 01/23/2009 LJB FP1009
 //?** Removed QTEMP processing, write to Purge file in Purge Library
 //?** then delete
 //?** 08/16/2007 LJB FP1009
 //?** Changed RSQ lgl to put Kill Date first, removed company number
 //?** from input parms, Add CRT to write the records to QTEMP file
 //?** before deleting from production
 //?- 10/23/2018 JBB E13962 - Purge Buy Order Comments
 //?  Add logic to purge Buy Order Comment records.
 ENDDO;

 //?USER: Process Data record

 //?** 03/13/2009 LJB FP1009 Skip, this file is not being used
 //?** 10/23/2018 JBB E13947 Reinstate, Triumph Foods uses this file
 EXECUTE FUNCTION(Prg Buy Order Comment RT) TYPE(RTVOBJ) FILE(PKAYCPP)           AB1233861;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 {
  //?USER: Process Data record

  EXECUTE FUNCTION(CRT BO Comment for Purge) TYPE(CRTOBJ) FILE(PKAYCPP)           AB1280124;
  PARAMETER(DB1.BOH_Company_Number);
  PARAMETER(DB1.BOH_Buy_Order_Number);
  PARAMETER(DB1.BOC_Comment_Line);
  PARAMETER(DB1.BOC_Comment);
  PARAMETER(DB1.BOC_Comment_Type);
  PARAMETER(DB1.RS_User_Changed);
  PARAMETER(DB1.RS_Date_Changed);
  PARAMETER(DB1.RS_Time_Changed);
  PARAMETER(DB1.RS_Record_Status);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  PARAMETER(DB1.RS_User_Added);
  PARAMETER(DB1.RS_Date_Added);
  PARAMETER(DB1.RS_Time_Added);
  EXECUTE FUNCTION(Dlt BO Comment        DL) TYPE(DLTOBJ) FILE(PKAYCPP)           AB1100735;
  PARAMETER(DB1.BOH_Company_Number);
  PARAMETER(DB1.BOH_Buy_Order_Number);
  PARAMETER(DB1.BOC_Comment_Line);
 }

 EXECUTE FUNCTION(CRT Buy Order Hdr Purge) TYPE(CRTOBJ) FILE(PKAWCPP)            AB1280126;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOH_Buy_Order_Date);
 PARAMETER(DB1.BOH_Kill_Date);
 PARAMETER(DB1.BOH_Payment_Type);
 PARAMETER(DB1.BOH_Buy_Order_Type);
 PARAMETER(DB1.BOH_Market_Add_Deduct);
 PARAMETER(DB1.BOH_Status);
 PARAMETER(DB1.BOH_Delv_Plan_Printed);
 PARAMETER(DB1.BOH_Quote_Price_Type);
 PARAMETER(DB1.BOH_Quoted_Base_Mkt_Price);
 PARAMETER(DB1.BOH_Commodity_Market_Code);
 PARAMETER(DB1.BOH_Commodity_Price_Group);
 PARAMETER(DB1.BOH_Market_Date_Method);
 PARAMETER(DB1.BOH_MPR_Reporting_Date);
 PARAMETER(DB1.BOH_Hedge_Date);
 PARAMETER(DB1.BOH_Unused_Date_3);
 PARAMETER(DB1.BOH_Unused_Date_4);
 PARAMETER(DB1.BOH_Unused_Date_5);
 PARAMETER(DB1.BOH_Hedge_Head_Total);
 PARAMETER(DB1.BOH_Hedge_Reference_BO);
 PARAMETER(DB1.BOH_Hedge_Time_hhmm);
 PARAMETER(DB1.BOH_Unused_Nbr_4);
 PARAMETER(DB1.BOH_Unused_Nbr_5);
 PARAMETER(DB1.BOH_Unused_Nbr_6);
 PARAMETER(DB1.BOH_Unused_Nbr_7);
 PARAMETER(DB1.BOH_Unused_Nbr_8);
 PARAMETER(DB1.BOH_Unused_Nbr_9);
 PARAMETER(DB1.BOH_Unused_Nbr_10);
 PARAMETER(DB1.BOH_MPR_Reporting_Time);
 PARAMETER(DB1.BOH_MPR_EST_RPT_STS);
 PARAMETER(DB1.BOH_MPR_Purchase_Type);
 PARAMETER(DB1.BOH_Status_4);
 PARAMETER(DB1.BOH_Status_5);
 PARAMETER(DB1.PPWS_Company_Number);
 PARAMETER(DB1.CW_Year);
 PARAMETER(DB1.CW_Week_Number);
 PARAMETER(DB1.PD_Producer_Code);
 PARAMETER(DB1.PL_Location_Code);
 PARAMETER(DB1.PC_Contract_Code);
 PARAMETER(DB1.PSC_Sub_Contract_Code);
 PARAMETER(DB1.GN_Genetic_Code);
 PARAMETER(DB1.PO_Option_Code);
 PARAMETER(DB1.CMP_Program_Code);
 PARAMETER(DB1.HB_Buyer_Code);
 PARAMETER(DB1.RS_User_Changed);
 PARAMETER(DB1.RS_Date_Changed);
 PARAMETER(DB1.RS_Time_Changed);
 PARAMETER(DB1.RS_Record_Status);
 PARAMETER(DB1.RS_Job);
 PARAMETER(DB1.RS_Program);
 PARAMETER(DB1.RS_User_Added);
 PARAMETER(DB1.RS_Date_Added);
 PARAMETER(DB1.RS_Time_Added);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Rtv Add Stamp         IF) TYPE(EXCINTFUN)                      AB1100935;
  PARAMETER(DB1.RS_Record_Status);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  PARAMETER(DB1.RS_User_Added);
  PARAMETER(DB1.RS_Date_Added);
  PARAMETER(DB1.RS_Time_Added);
  {
   //?Execute internal function

   // PAR.RS Record Status = CND.Active
   PAR.RS_Record_Status = 'A';

   // PAR.RS User Added = JOB.*USER
   PAR.RS_User_Added = JOB.*USER;

   // PAR.RS Date Added = JOB.*Job date
   PAR.RS_Date_Added = JOB.*Job_date;

   // PAR.RS Time Added = JOB.*Job time
   PAR.RS_Time_Added = JOB.*Job_time;

   // PAR.RS Program = JOB.*PROGRAM
   PAR.RS_Program = JOB.*PROGRAM;

   // PAR.RS Job = JOB.*JOB
   PAR.RS_Job = JOB.*JOB;

  }

 }

 EXECUTE FUNCTION(Dlt Buy Order Header  DL) TYPE(DLTOBJ) FILE(PKAWCPP)           AB1100516;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
}


