// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POVIXFR
// ?Date: 14.08.2025 Time: 03:39:10
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?PGM 23 - Populate Yield Production Detail Transactions for the
//?         Activity in the Yield Inventory Balance.
EXECUTE FUNCTION(Exc Inv Bal Activity  RT) TYPE(RTVOBJ) FILE(POCOCPP)           AC1664519;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Department_Code);
PARAMETER(PAR.Production_Line_Code);
PARAMETER(PAR.Production_Date);
PARAMETER(PAR.Production_Shift);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Yld Inv Balance Type is Partial
 IF DB1.Yld_Inv_Balance_Type = 'PT';

 // OR DB1.Yld Inv Balance Type is WIP Reject
 OR DB1.Yld_Inv_Balance_Type = 'RJ';

 //?Beginning Inventory = Beginning Inventory
 // PAR.Beginning WIP Inv Wgt = DB1.Beginning Inv Wgt
 PAR.Beginning_WIP_Inv_Wgt = DB1.Beginning_Inv_Wgt;

 //?Ending Inventory = Not Used + Produced
 // PAR.Ending WIP Inv Wgt = DB1.Not Used Wgt + DB1.Partial Produced Wgt
 PAR.Ending_WIP_Inv_Wgt = DB1.Not_Used_Wgt + DB1.Partial_Produced_Wgt;

 //?Product Delete
 // PAR.Product Delete Wgt = CON.*ZERO
 PAR.Product_Delete_Wgt = *ZERO;

 // IF DB1.Yld Inv Balance Type is Work In Process
 IF DB1.Yld_Inv_Balance_Type = 'WP';

 // OR DB1.Yld Inv Balance Type is Finished Good
 OR DB1.Yld_Inv_Balance_Type = 'FG';

 //?Beginning Inventory = 0
 // PAR.Beginning WIP Inv Wgt = CON.*ZERO
 PAR.Beginning_WIP_Inv_Wgt = *ZERO;

 //?Ending Inventory = Zero
 // PAR.Ending WIP Inv Wgt = CON.*ZERO
 PAR.Ending_WIP_Inv_Wgt = *ZERO;

 //?Product Deletes = Delete Pending - Not Used
 // PAR.Product Delete Wgt = DB1.Delete Pending Wgt - DB1.Not Used Wgt
 PAR.Product_Delete_Wgt = DB1.Delete_Pending_Wgt - DB1.Not_Used_Wgt;

 ENDIF;

 //?PAR. Item Type Code
 CASE;

 // IF DB1.Yld Inv Balance Type is FG and Partial
 IF DB1.Yld_Inv_Balance_Type = 'FG'/'PT';

 // PAR.Item Type Code = CND.Finished Good
 PAR.Item_Type_Code = 'FG';

 //?PAR. Item Type Code
 // IF DB1.Yld Inv Balance Type is Work In Process
 IF DB1.Yld_Inv_Balance_Type = 'WP';

 // PAR.Item Type Code = CND.Work in Process
 PAR.Item_Type_Code = 'WP';

 ENDIF;

 EXECUTE FUNCTION(Upd Inv/Deletes       RT) TYPE(RTVOBJ) FILE(POCTCPP)           AC1667222;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Department_Code);
 PARAMETER(DB1.Production_Line_Code);
 PARAMETER(DB1.Production_Date);
 PARAMETER(DB1.Production_Shift);
 PARAMETER(DB1.Item_Code);
 PARAMETER(PAR.Item_Type_Code);
 PARAMETER(DB1.Partial_Item_Code);
 PARAMETER(DB1.Credit_Item_Status);
 PARAMETER(DB1.Item_Structure_Type_Code);
 PARAMETER(DB1.Item_Structure_Group_Code);
 PARAMETER(DB1.Item_Structure_Class_Code);
 PARAMETER(PAR.Beginning_WIP_Inv_Wgt);
 PARAMETER(PAR.Ending_WIP_Inv_Wgt);
 PARAMETER(PAR.Product_Delete_Wgt);
 PARAMETER(DB1.Yld_Balance_Comment);
 {
  //?USER: Processing if Data record not found

  EXECUTE FUNCTION(Crt Yld Dly Prod Sum  CR) TYPE(CRTOBJ) FILE(POCTCPP)           AC1664743;
  PARAMETER(PAR.Company_Number);
  PARAMETER(PAR.Department_Code);
  PARAMETER(PAR.Production_Line_Code);
  PARAMETER(PAR.Production_Date);
  PARAMETER(PAR.Production_Shift);
  PARAMETER(PAR.Item_Code);
  PARAMETER(PAR.Item_Type_Code);
  PARAMETER(PAR.Partial_Item_Code);
  PARAMETER(PAR.Credit_Item_Status);
  PARAMETER(PAR.Item_Structure_Type_Code);
  PARAMETER(PAR.Item_Structure_Group_Code);
  PARAMETER(PAR.Item_Structure_Class_Code);
  PARAMETER(PAR.Production_Qty);
  PARAMETER(PAR.RM_Production_Wgt);
  PARAMETER(PAR.Beginning_WIP_Inv_Qty);
  PARAMETER(PAR.Beginning_WIP_Inv_Wgt);
  PARAMETER(PAR.Ending_WIP_Inv_Qty);
  PARAMETER(PAR.Ending_WIP_Inv_Wgt);
  PARAMETER(PAR.Product_Delete_Qty);
  PARAMETER(PAR.Product_Delete_Wgt);
  PARAMETER(PAR.YDS_Comment);
  PARAMETER(PAR.YDS_Post_Status);
  PARAMETER(PAR.EDI_Status_1);
  PARAMETER(PAR.EDI_Status_2);
  PARAMETER(PAR.EDI_Status_3);
  PARAMETER(PAR.Record_Status);
  PARAMETER(PAR.Job_Time);
  PARAMETER(PAR.User_Id);
  PARAMETER(PAR.Job_Name);
  PARAMETER(PAR.Job_Date);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(SET Record Stamp CRTOB IF) TYPE(EXCINTFUN)                     AC1282865;
   PARAMETER(DB1.Record_Status);
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Record Status = CND.Active
    PAR.Record_Status = 'A';

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*PROGRAM
    PAR.Job_Name = JOB.*PROGRAM;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

  }

  //?USER: Process Data record

  // LCL.Beginning WIP Inv Wgt = DB1.Beginning WIP Inv Wgt + PAR.Beginning WIP Inv Wgt
  LCL.Beginning_WIP_Inv_Wgt = DB1.Beginning_WIP_Inv_Wgt + PAR.Beginning_WIP_Inv_Wgt;

  // LCL.Ending WIP Inv Wgt = DB1.Ending WIP Inv Wgt + PAR.Ending WIP Inv Wgt
  LCL.Ending_WIP_Inv_Wgt = DB1.Ending_WIP_Inv_Wgt + PAR.Ending_WIP_Inv_Wgt;

  // LCL.Product Delete Wgt = DB1.Product Delete Wgt + PAR.Product Delete Wgt
  LCL.Product_Delete_Wgt = DB1.Product_Delete_Wgt + PAR.Product_Delete_Wgt;

  EXECUTE FUNCTION(Chg Inv/Deletes       CH) TYPE(CHGOBJ) FILE(POCTCPP)           AC1667223;
  PARAMETER(DB1.Company_Number);
  PARAMETER(DB1.Department_Code);
  PARAMETER(DB1.Production_Line_Code);
  PARAMETER(DB1.Production_Date);
  PARAMETER(DB1.Production_Shift);
  PARAMETER(DB1.Item_Code);
  PARAMETER(LCL.Beginning_WIP_Inv_Wgt);
  PARAMETER(LCL.Ending_WIP_Inv_Wgt);
  PARAMETER(LCL.Product_Delete_Wgt);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*PROGRAM
    PAR.Job_Name = JOB.*PROGRAM;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

  }

 }

}


