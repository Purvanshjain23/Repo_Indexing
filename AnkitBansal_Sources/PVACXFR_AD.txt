// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PVACXFR
// ?Date: 14.08.2025 Time: 03:51:48
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Cnv Upd Hex 41 to BlankRT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC2216443;
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Header Status is Not cancelled
 IF DB1.Header_Status = 'L'/'A'/'C'/'R'/'E'/'H'/'I';

 // LCL.Text-18               USR = SUBSTRING(DB1.Ship To Name,CON.1,CON.18)
 LCL.Text_18_USR = SUBSTRING(DB1.Ship_To_Name:1:18);

 CASE;

 // IF LCL.Text-18               USR is Itochu Corporation
 IF LCL.Text_18_USR = 'Itochu Corporation';

 EXECUTE FUNCTION(Cnv Upd Hex 41 to BlankRT) TYPE(RTVOBJ) FILE(PDMRREP)          AC2216447;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER('H');
 {
  //?USER: Process Data record

  CASE;

  // IF DB1.ED Language Xlate Desc 2 is Chilled Pork
  IF DB1.ED_Language_Xlate_Desc_2 = 'Chilled Pork';

  // LCL.Text-18               USR = SUBSTRING(DB1.ED Consignee Name,CON.1,CON.18)
  LCL.Text_18_USR = SUBSTRING(DB1.ED_Consignee_Name:1:18);

  CASE;

  // IF LCL.Text-18               USR is Itochu Corporation
  IF LCL.Text_18_USR = 'Itochu Corporation';

  // LCL.ED Consignee Name = DB1.ED Consignee Name
  LCL.ED_Consignee_Name = DB1.ED_Consignee_Name;

  // LCL.ED Consignee Addr 1 = DB1.ED Consignee Addr 1
  LCL.ED_Consignee_Addr_1 = DB1.ED_Consignee_Addr_1;

  //?Update Hex Value '41' to 'blank'.
  // Execute function Cnv Upd Hex 41 to BlankUS.
  EXECUTE FUNCTION(Cnv Upd Hex 41 to BlankUS) TYPE(EXCUSRSRC) ('PVADUFR');
  PARAMETER(LCL.ED_Consignee_Name);
  PARAMETER(LCL.ED_Consignee_Addr_1);
  {
   * Cnv Upd Hex 41 to BlankUS
   D wkrhtx          s             63A                                        Consignee Name
   D wkritx          s             63A                                        Consignee Addr 1
   *
   * Consignee Name.
   C                   move      #brhtx        wkrhtx
   C                   if        wkrhtx <> *blank
   C     x'41':' '     xlate     wkrhtx        #brhtx
   C                   endif
   * Consignee Addr 1.
   C                   move      #britx        wkritx
   C                   if        wkritx <> *blank
   C     x'41':' '     xlate     wkritx        #britx
   C                   endif
   *
  }

  EXECUTE FUNCTION(Cnv Upd Hex 41 to BlankCH) TYPE(CHGOBJ) FILE(PDMRREP)          AC2216452;
  PARAMETER(DB1.Company_Number);
  PARAMETER(DB1.Order_Number);
  PARAMETER(DB1.ED_Export_Document_Type);
  PARAMETER(DB1.Country_Code);
  PARAMETER(LCL.ED_Consignee_Name);
  PARAMETER(LCL.ED_Consignee_Addr_1);
  ENDIF;

  ENDIF;

 }

 ENDIF;

 ENDIF;

}


