// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBPXXFR
// ?Date: 14.08.2025 Time: 03:48:53
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?*** DOCUMENTATION ***
DO;

//?PROGRAM DESCRIPTION:
//?     This program is called from a Stored Procedure.
ENDDO;

// PAR.DP Location = CON.*BLANK
PAR.DP_Location = *BLANK;

// PAR.DP Type Code USR = WRK.Blank for 3          USR
PAR.DP_Type_Code_USR = WRK.Blank_for_3_USR;

// PAR.DP Location = CON.*BLANK
PAR.DP_Location = *BLANK;

EXECUTE FUNCTION(RTV For DP Location   RT) TYPE(RTVOBJ) FILE(OPBFCPP)           AC2100378;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Order_Number);
PARAMETER(LCL.Order_Type_Sales);
PARAMETER(LCL.Ship_To_Customer);
PARAMETER(PAR.Ship_To_State_Code);
PARAMETER(PAR.Export_Status);
{
 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


CASE;

// IF LCL.Order Type - Sales is Regular Order
IF LCL.Order_Type_Sales = 'OR';

EXECUTE FUNCTION(RTV Type              RT) TYPE(RTVOBJ) FILE(PMAMREP)           AC2100377;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Order_Number);
PARAMETER(PAR.OHE_Override_Type_Code);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


EXECUTE FUNCTION(RTV Parent Customer    RT) TYPE(RTVOBJ) FILE(CABBREP)          AC1225254;
PARAMETER(LCL.Ship_To_Customer);
PARAMETER(PAR.Parent_Customer);
{
 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


// Call program Exc Format PrdLoc f/Or XF.
CALL PROGRAM(Exc Format PrdLoc f/Or XF) ('PBPPXFR');
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Parent_Customer);
PARAMETER(PAR.Ship_To_State_Code);
PARAMETER(PAR.Export_Status);
PARAMETER(PAR.Country_Code);
PARAMETER(PAR.OHE_Override_Type_Code);
PARAMETER(PAR.DP_Location);
PARAMETER(PAR.DP_Type_Code_USR);
PARAMETER(PAR.DP_Region_Txt_USR);

ENDIF;

