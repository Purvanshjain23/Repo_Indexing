// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PPGBXFR
// ?Date: 14.08.2025 Time: 03:40:21
// ?------------------------------------------------------------------------------------------------

//?Execute user function

// PAR.Item Code Error Sts Usr = CND.No Error on Item Code
PAR.Item_Code_Error_Sts_Usr = *BLANK;

//?Partial/Reject Code valadation
CASE;

// IF PAR.Item Code          041260 is GT  99999
IF PAR.Item_Code_041260 > 99999;

//?Partial Item Code or Wip Item Code must be <= 99999
// PAR.Item Code Error Sts Usr = CND.Greater then 5 Positions
PAR.Item_Code_Error_Sts_Usr = 'G';

//?Partial/Reject Code valadation
// IF *OTHERWISE
IF *OTHERWISE;

//?Cannot be an existing FG or WP Code - Read by Item Code
EXECUTE FUNCTION(Val FG/WP Item Exists RT) TYPE(RTVOBJ) FILE(OMBYREP)           AC1704054;
PARAMETER(PAR.Item_Code_041260);
PARAMETER(LCL.Record_Found_USR);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 // PAR.Record Found USR = CND.Record Not Found
 PAR.Record_Found_USR = 'N';

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

 // PAR.Record Found USR = CND.Record Found
 PAR.Record_Found_USR = 'Y';

}


CASE;

// IF LCL.Record Found USR is Record Found
IF LCL.Record_Found_USR = 'Y';

//?Partial or Reject Can not be a FG/Wip Item Code
// PAR.Item Code Error Sts Usr = CND.Item Code FG/WIP Error
PAR.Item_Code_Error_Sts_Usr = 'I';

// IF *OTHERWISE
IF *OTHERWISE;

//?Cannot exist on another existing FG or WP Code - Read by Partial
EXECUTE FUNCTION(VAL Partial Cd Exist  RT) TYPE(RTVOBJ) FILE(OMBYREP)           AC1704062;
PARAMETER(PAR.Partial_Item_Code);
PARAMETER(PAR.Item_Code);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 CASE;

 // IF DB1.Item Code EQ PAR.Item Code
 IF DB1.Item_Code = PAR.Item_Code;

 // IF *OTHERWISE
 IF *OTHERWISE;

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

 ENDIF;

}


CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// PAR.Item Code Error Sts Usr = CND.Partial Item Code Fnd Err
PAR.Item_Code_Error_Sts_Usr = 'P';

// IF *OTHERWISE
IF *OTHERWISE;

//?Cannot exist on another existing FG or WP Code - Read by Reject
EXECUTE FUNCTION(VAL WIP Reject Cd Exs RT) TYPE(RTVOBJ) FILE(OMBYREP)           AC1704063;
PARAMETER(PAR.WIP_Reject_Code);
PARAMETER(PAR.Item_Code);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 CASE;

 // IF DB1.Item Code EQ PAR.Item Code
 IF DB1.Item_Code = PAR.Item_Code;

 // IF *OTHERWISE
 IF *OTHERWISE;

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

 ENDIF;

}


CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// PAR.Item Code Error Sts Usr = CND.Reject Item Code Fnd Err
PAR.Item_Code_Error_Sts_Usr = 'R';

ENDIF;

ENDIF;

ENDIF;

ENDIF;

