// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PPAIPVR
// ?Date: 14.08.2025 Time: 03:39:43
// ?------------------------------------------------------------------------------------------------

//?USER: Validate fields

CASE;

// IF DTL.G5003-PURCHASE ORDER NUMB is Entered
IF DTL.G5003_PURCHASE_ORDER_NUMB <> *BLANK;

EXECUTE FUNCTION(Rtv Trans Set Num     RT) TYPE(RTVOBJ) FILE(ECP004)            AC1676221;
PARAMETER(DTL.G5003_PURCHASE_ORDER_NUMB);
PARAMETER(DTL.ST02_TRANS_SET_CONTROL_NU);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


ENDIF;

//?USER: User defined action

CASE;

// IF DTL.ST02-TRANS SET CONTROL NU is Entered
IF DTL.ST02_TRANS_SET_CONTROL_NU <> *ZERO;

// LCL.TRANS SET CONTROL APLHA = CVTVAR(DTL.ST02-TRANS SET CONTROL NU)
LCL.TRANS_SET_CONTROL_APLHA = CVTVAR(DTL.ST02_TRANS_SET_CONTROL_NU);

// Retrieve message - 'JOB(&1) jobq(&2) log(&3) hold(&4)'
PGM.*Sbmjob_override_string = RTVMSG(USR2684);
PARAMETER('EMAILPO');
PARAMETER(*JOBD);
PARAMETER(*JOBD_JOBD_JOBD);
PARAMETER(*JOBD);

// Call program Eml EDI Purchase Ords XF.
SBMJOB;
CALL PROGRAM(Eml EDI Purchase Ords XF) ('POOCXFR');
PARAMETER(WRK.EDI_Function_Sts_USR);
PARAMETER(WRK.EDI_In_Process_Sts_USR);
PARAMETER(*BLANK);
PARAMETER(LCL.TRANS_SET_CONTROL_APLHA);
SBMJOBEND;

ENDIF;

