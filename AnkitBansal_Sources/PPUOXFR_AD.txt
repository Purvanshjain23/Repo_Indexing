// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PPUOXFR
// ?Date: 14.08.2025 Time: 03:41:59
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Rtv Co/Customer Type) TYPE(RTVOBJ) FILE(CAEOREP)               AC1758338;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Ship_To_Customer);
PARAMETER(WRK.Type_Code);
{
 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 // PAR.Type Code = CON.*BLANK
 PAR.Type_Code = *BLANK;

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

 // PGM.*Return code = CND.*Normal
 PGM.*Return_code = *BLANK;

 QUIT;

}


//?selection on customer type code
CASE;

// IF PGM.*Return code is *Record does not exist
IF PGM.*Return_code = 'Y2U0005';

// PAR.*Record selected = CND.*NO
PAR.*Record_selected = 'N';

//?selection on customer type code
// IF PAR.Process Cust Types Usr is Order Selection
IF PAR.Process_Cust_Types_Usr = 'OR';

//?Allow to go through process with no checking of customer type
//?selection on customer type code
// IF PAR.Process Cust Types Usr is All Customers
IF PAR.Process_Cust_Types_Usr = 'BT';

//?All Customers is Type "BT" - select 3rd Party and Inter-Co
CASE;

// IF WRK.Type Code is Inter Company
IF WRK.Type_Code = 'IC';

// OR WRK.Type Code is 3rd Party Customer
OR WRK.Type_Code <> 'IC';

//?All Customers is Type "BT" - select 3rd Party and Inter-Co
// IF *OTHERWISE
IF *OTHERWISE;

// PAR.*Record selected = CND.*NO
PAR.*Record_selected = 'N';

ENDIF;

//?selection on customer type code
// IF PAR.Process Cust Types Usr is Inter Company User
IF PAR.Process_Cust_Types_Usr = 'IC';

//?Process selection is for IC ONLY
CASE;

// IF WRK.Type Code is Inter Company
IF WRK.Type_Code = 'IC';

//?Process selection is for IC ONLY
// IF *OTHERWISE
IF *OTHERWISE;

// PAR.*Record selected = CND.*NO
PAR.*Record_selected = 'N';

ENDIF;

//?selection on customer type code
// IF PAR.Process Cust Types Usr is 3rd Party Customer
IF PAR.Process_Cust_Types_Usr = 'TP';

//?Process selection is for all except IC
CASE;

// IF WRK.Type Code is 3rd Party Customer
IF WRK.Type_Code <> 'IC';

//?Process selection is for all except IC
// IF *OTHERWISE
IF *OTHERWISE;

// PAR.*Record selected = CND.*NO
PAR.*Record_selected = 'N';

ENDIF;

ENDIF;

