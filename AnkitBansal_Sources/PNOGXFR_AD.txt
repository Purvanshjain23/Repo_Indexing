// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PNOGXFR
// ?Date: 14.08.2025 Time: 03:45:51
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Rtv Dtls for ADN EDI  RT) TYPE(RTVOBJ) FILE(OPBGWKP)           AC1969497;
PARAMETER(PAR.Company);
PARAMETER(PAR.Order_Number);
PARAMETER(LCL.Order_Sequence_Number);
PARAMETER(LCL.Order_Secondary_Line_Seq);
PARAMETER(NLL.Item_Code);
PARAMETER(NLL.Ship_To_Customer);
PARAMETER(NLL.Detail_Line_Status);
PARAMETER(NLL.U_M_Ordered);
PARAMETER(NLL.Quantity_Ordered);
PARAMETER(NLL.Weight_Ordered);
PARAMETER(NLL.Quantity_Shipped_Total);
PARAMETER(NLL.Weight_Shipped_Total);
PARAMETER(NLL.Unit_Cost_Pricing_U_M);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Detail Line Status is Not cancelled
 IF DB1.Detail_Line_Status = 'L'/'A'/'C'/'R'/'E'/'H'/'I';

 // AND DB1.Weight Shipped Total is Greater than zero
 AND DB1.Weight_Shipped_Total > *ZERO;

 //?6/10/10 Chk to see if there is a cross ref # for this item.
 EXECUTE FUNCTION(Rtv Item Desc/pkging   RT) TYPE(RTVOBJ) FILE(OMBYREP)          AC2074791;
 PARAMETER(DB1.Item_Code);
 PARAMETER(LCL.Description_Line_One);
 PARAMETER(NLL.Description_Line_Two);
 PARAMETER(LCL.Packages_per_case);
 PARAMETER(NLL.Package_Level_size);
 PARAMETER(NLL.Pieces_Per_Bag);
 PARAMETER(NLL.Bags_Per_Unit);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 EXECUTE FUNCTION(Rtv Cust Item Ref     RT) TYPE(RTVOBJ) FILE(POBIREP)           AC1631725;
 PARAMETER(DB1.Ship_To_Customer);
 PARAMETER(DB1.Item_Code);
 PARAMETER(LCL.CIR_Resource_No);
 PARAMETER(NLL.CIR_Item_No);
 PARAMETER(NLL.CIR_Description_Line_1);
 PARAMETER(NLL.CIR_Description_Line_2);
 PARAMETER(NLL.CIR_Description_Line_3);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 CASE;

 // IF PGM.*Return code is *Normal
 IF PGM.*Return_code = *BLANK;

 // LCL.UPC Code 1 = LCL.CIR Resource No
 LCL.Item_Meat_Cost_Group_Code = LCL.CIR_Resource_No;

 // LCL.LIN03 Product ID-UPC = CVTVAR(LCL.UPC Code 1)
 LCL.LIN03_Product_ID_UPC = CVTVAR(LCL.Item_Meat_Cost_Group_Code);

 // IF *OTHERWISE
 IF *OTHERWISE;

 EXECUTE FUNCTION(RTV Federal ID         RT) TYPE(RTVOBJ) FILE(CAABREP)          AC1379325;
 PARAMETER(*ZERO);
 PARAMETER(LCL.Federal_Tax_Id);
 {
  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 // LCL.USR Text 7            USR = LCL.Federal Tax Id.
 LCL.USR_Text_7_USR = LCL.Federal_Tax_Id;

 // LCL.Item Code 5.0 = DB1.Item Code
 LCL.Item_Code_5_0 = DB1.Item_Code;

 // LCL.Item Code 5A = CVTVAR(LCL.Item Code 5.0)
 LCL.Item_Code_5A = CVTVAR(LCL.Item_Code_5_0);

 // WRK.UPC Code 1 = CONCAT(LCL.USR Text 7            USR,LCL.Item Code 5A,CON.*ZERO)
 WRK.Item_Meat_Cost_Group_Code = LCL.USR_Text_7_USR + LCL.Item_Code_5A (*ZERO);

 // LCL.LIN03 Product ID-UPC = CVTVAR(WRK.UPC Code 1)
 LCL.LIN03_Product_ID_UPC = CVTVAR(WRK.Item_Meat_Cost_Group_Code);

 ENDIF;

 EXECUTE FUNCTION(Create EDI-Adv Ship Notic) TYPE(CRTOBJ) FILE(ECP040)           AC1967266;
 PARAMETER(PAR.Order_Number);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER('UA');
 PARAMETER(LCL.LIN03_Product_ID_UPC);
 PARAMETER(DB1.Quantity_Shipped_Total);
 PARAMETER(DB1.U_M_Ordered);
 PARAMETER('B');
 PARAMETER(DB1.Weight_Shipped_Total);
 PARAMETER(01);
 PARAMETER(LCL.Packages_per_case);
 PARAMETER(*MISSING);
 PARAMETER(LCL.Description_Line_One);
 ENDIF;

}


