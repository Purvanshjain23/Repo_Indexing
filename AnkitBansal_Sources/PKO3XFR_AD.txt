// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKO3XFR
// ?Date: 14.08.2025 Time: 02:50:01
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications and Comments
DO;

//?H16853 ISE 11/02/20 - Increased the Buy Order Number field
//?                      length from 5 to 7.
ENDDO;

EXECUTE FUNCTION(ZUCV Rtv TH Info 4 OMS RT) TYPE(RTVOBJ) FILE(PKA1CPP)          AB1135074;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.BOH_Buy_Order_Number);
PARAMETER(PAR.BOL_Load_Number);
PARAMETER(PAR.Tattoo_Number_USR);
PARAMETER(PAR.TH_Kill_Date);
PARAMETER(PAR.TH_Head_Killed);
PARAMETER(PAR.TH_Live_Wgt);
PARAMETER(PAR.TH_Hot_Wgt);
PARAMETER(PAR.TH_Avg_Live_Wgt);
PARAMETER(PAR.TH_Avg_Hot_Wgt);
PARAMETER(PAR.TH_Avg_Light_Reflectance);
PARAMETER(PAR.TH_Avg_Lean_Percent);
PARAMETER(PAR.TH_Avg_Loin_Eye_Depth);
PARAMETER(PAR.TH_Avg_Backfat);
PARAMETER(WRK.TH_Payment_Sts);
PARAMETER(WRK.PD_Producer_Code);
PARAMETER(WRK.HB_Buyer_Code);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


// PAR.HB Buyer Code = WRK.HB Buyer Code
PAR.HB_Buyer_Code = WRK.HB_Buyer_Code;

// PAR.PD Producer Code = WRK.PD Producer Code
PAR.PD_Producer_Code = WRK.PD_Producer_Code;

//?Payment Status
CASE;

// IF WRK.TH Payment Sts is Paid Live
IF WRK.TH_Payment_Sts = 'PL';

// PAR.Payment Type USR = CND.Live
PAR.Payment_Type_USR = 'L';

//?Payment Status
// IF *OTHERWISE
IF *OTHERWISE;

// PAR.Payment Type USR = CND.Carcass Merit
PAR.Payment_Type_USR = 'C';

ENDIF;

EXECUTE FUNCTION(Rtv Buyer Type        RT) TYPE(RTVOBJ) FILE(PKADREP)           AB1134185;
PARAMETER(WRK.HB_Buyer_Code);
PARAMETER(PAR.HB_Type);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


EXECUTE FUNCTION(Rtv Producer Name     RT) TYPE(RTVOBJ) FILE(PKACREP)           AB1101542;
PARAMETER(WRK.PD_Producer_Code);
PARAMETER(PAR.PD_Name);
{
 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


EXECUTE FUNCTION(Rtv Hog Buyer Name    RT) TYPE(RTVOBJ) FILE(PKADREP)           AB1124643;
PARAMETER(WRK.HB_Buyer_Code);
PARAMETER(PAR.HB_Name);
{
 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


