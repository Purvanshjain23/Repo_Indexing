// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POS3XFR
// ?Date: 14.08.2025 Time: 03:38:57
// ?------------------------------------------------------------------------------------------------

//?Execute user function

// PAR.Date From Convert USR = CVTVAR(PAR.Purge Date USR)
PAR.Date_From_Convert_USR = CVTVAR(PAR.Purge_Date_USR);

// Call program Cvt Date              UP.
CALL PROGRAM(Cvt Date              UP) ('POD5UPR');
PARAMETER(PAR.Date_From_Convert_USR);
PARAMETER(PAR.Date_To_Convert_USR);
PARAMETER(*CYMD);
PARAMETER(*YYMD);
PARAMETER(*NONE);

//?** Move 11 char to 8 char
// WRK.AS Prod Date YYYYMMDD = PAR.Date To Convert USR
WRK.AS_Prod_Date_YYYYMMDD = PAR.Date_To_Convert_USR;

//?** Convert 8 char to 8 numeric
// LCL.PT Prod Date YYYYMMDD = CVTVAR(WRK.AS Prod Date YYYYMMDD)
LCL.PT_Prod_Date_YYYYMMDD = CVTVAR(WRK.AS_Prod_Date_YYYYMMDD);

EXECUTE FUNCTION(Read rcds Purge-Fresh  RT) TYPE(RTVOBJ) FILE(POB2CPP)          AC1657260;
PARAMETER(LCL.PT_Prod_Date_YYYYMMDD);
{
 //?USER: Initialize routine

 // WRK.First Time Flag = CND.Yes
 WRK.First_Time_Flag = 'Y';

 //?USER: Process Data record

 CASE;

 // IF DB1.User Id is SAMPLE
 IF DB1.User_Id = 'SAMPLE';

 // IF *OTHERWISE
 IF *OTHERWISE;

 //?** Purge Fresh
 EXECUTE FUNCTION(CRT Product Trace Purge) TYPE(CRTOBJ) FILE(POB2CPP)            AC1657266;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.PT_Serial_Number);
 PARAMETER(DB1.PT_Prod_Date_YYYYMMDD);
 PARAMETER(DB1.PT_Production_Time);
 PARAMETER(DB1.PT_Label_Date_YYYYMMDD);
 PARAMETER(DB1.PT_Offset_Prod_Date);
 PARAMETER(DB1.PT_Offset_Prod_Time);
 PARAMETER(DB1.PT_Inventory_Status);
 PARAMETER(DB1.PT_Net_Weight);
 PARAMETER(DB1.PT_Gross_Weight);
 PARAMETER(DB1.PT_Shift_Number);
 PARAMETER(DB1.PT_Warehouse_ID_Code);
 PARAMETER(DB1.PT_Order_Number);
 PARAMETER(DB1.PT_Pallet_Number);
 PARAMETER(DB1.PT_Product_Code);
 PARAMETER(DB1.PT_Item_Label_Line_1);
 PARAMETER(DB1.PT_Item_Label_Line_2);
 PARAMETER(DB1.PT_Fresh_Frozen_Code);
 PARAMETER(DB1.PT_Item_Picture_Key);
 PARAMETER(DB1.PT_Tattoo_Number);
 PARAMETER(DB1.PT_Source_Type);
 PARAMETER(DB1.PT_Source_Code);
 PARAMETER(DB1.PT_Source_Code_Desc);
 PARAMETER(DB1.PT_Producer_Cell_Mgr_Code);
 PARAMETER(DB1.PT_Producer_Cell_Mgr_Name);
 PARAMETER(DB1.PT_Producer_Farm_Code);
 PARAMETER(DB1.PT_Producer_Location_Code);
 PARAMETER(DB1.PT_Producer_Farm_Name);
 PARAMETER(DB1.PT_Producer_Farm_City);
 PARAMETER(DB1.PT_Producer_Farm_State);
 PARAMETER(DB1.PT_Producer_Farm_State_Nm);
 PARAMETER(DB1.PT_Genetic_Code);
 PARAMETER(DB1.PT_Genetic_Description);
 PARAMETER(DB1.PT_Gender_Code);
 PARAMETER(DB1.PT_Producer_Farm_Code_1);
 PARAMETER(DB1.PT_Producer_Farm_Code_2);
 PARAMETER(DB1.PT_Producer_Farm_Code_3);
 PARAMETER(DB1.PT_Producer_Farm_Code_4);
 PARAMETER(DB1.PT_Item_Type_Code);
 PARAMETER(DB1.PT_Item_Str_Class_Code);
 PARAMETER(DB1.PT_Item_Str_Group_Code);
 PARAMETER(DB1.PT_Item_Str_Type_Code);
 PARAMETER(DB1.PT_WIP_Dump_Production_Dt);
 PARAMETER(DB1.PT_WIP_Dump_Production_Tm);
 PARAMETER(DB1.PT_WIP_Dump_Production_Sh);
 PARAMETER(DB1.PT_WIP_Used_Not_Used_Sts);
 PARAMETER(DB1.PT_From_FG_Serial_Nbr);
 PARAMETER(DB1.PT_To_FG_Serial_Nbr);
 PARAMETER(DB1.PT_Unused_Nbr_3);
 PARAMETER(DB1.PT_Unused_Nbr_4);
 PARAMETER(DB1.PT_Incl_in_Prod_Trc_Match);
 PARAMETER(DB1.PT_Unused_Sts_4);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
 EXECUTE FUNCTION(DLT Product Trace Purge) TYPE(DLTOBJ) FILE(POB2CPP)            AC1657267;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.PT_Serial_Number);
 PARAMETER(DB1.PT_Prod_Date_YYYYMMDD);
 PARAMETER(DB1.PT_Production_Time);
 {
  //?USER: Processing after Data update

  //? ** 08/13/2007 LJB FP1009
  EXECUTE FUNCTION(RTV all FSS for Purge  RT) TYPE(RTVOBJ) FILE(POB3CPP)          AC1841758;
  PARAMETER(DB1.PT_Warehouse_ID_Code);
  PARAMETER(DB1.PT_Prod_Date_YYYYMMDD);
  PARAMETER(DB1.PT_Shift_Number);
  PARAMETER(DB1.PT_Producer_Farm_Code);
  PARAMETER(DB1.PT_Producer_Location_Code);
  {
   //?USER: Process Data record

   EXECUTE FUNCTION(CRT Frm Site Summ Purge) TYPE(CRTOBJ) FILE(POB3CPP)            AC1841742;
   PARAMETER(DB1.FS_Warehouse_ID_Code);
   PARAMETER(DB1.FS_Prod_Date_YYYYMMDD);
   PARAMETER(DB1.FS_Shift_Number);
   PARAMETER(DB1.FS_Producer_Farm_Code);
   PARAMETER(DB1.FS_Producer_Location_Code);
   PARAMETER(DB1.FS_Producer_Cell_Mgr_Code);
   PARAMETER(DB1.FS_Producer_Cell_Mgr_Name);
   PARAMETER(DB1.FS_Producer_Farm_Name);
   PARAMETER(DB1.FS_Producer_Farm_City);
   PARAMETER(DB1.FS_Producer_Farm_State);
   PARAMETER(DB1.FS_Producer_Farm_State_Nm);
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   EXECUTE FUNCTION(Delete Farm Site Summary) TYPE(DLTOBJ) FILE(POB3CPP)           AC1646309;
   PARAMETER(DB1.FS_Warehouse_ID_Code);
   PARAMETER(DB1.FS_Prod_Date_YYYYMMDD);
   PARAMETER(DB1.FS_Shift_Number);
   PARAMETER(DB1.FS_Producer_Farm_Code);
   PARAMETER(DB1.FS_Producer_Location_Code);
  }

 }

 //?** Moved to inside the Delete
 ENDIF;

}


