// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBD9XFR
// ?Date: 14.08.2025 Time: 03:47:35
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(RTV CDE for Act/Inact  RT) TYPE(RTVOBJ) FILE(PNF7REP)          AC2047185;
PARAMETER(PAR.Ship_To_Customer);
PARAMETER(PAR.Distribution_Code);
PARAMETER(PAR.CDE_Sequence_Number);
PARAMETER(PAR.CDE_Name);
PARAMETER(PAR.CDE_Destination_Type);
PARAMETER(PAR.CDE_Destination);
PARAMETER(PAR.Record_Status);
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Company_Organization);
{
 //?USER: Initialize routine

 MOVE *ALL (To: PAR From: CON);

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 //?For individual statements, return both active or inactive
 CASE;

 // IF DB1.CDE Destination Type EQ PAR.CDE Destination Type
 IF DB1.CDE_Destination_Type = PAR.CDE_Destination_Type;

 CASE;

 // IF PAR.Company Organization is Daily's
 IF PAR.Company_Organization = 'D';

 // WRK.Text 1 Length USR = SUBSTRING(DB1.CDE Destination,CON.1,CON.1)
 WRK.Text_1_Length_USR = SUBSTRING(DB1.CDE_Destination:1:1);

 //?Test for Daily's Salt Lake City
 CASE;

 // IF WRK.Text 1 Length USR is Salt Lake City
 IF WRK.Text_1_Length_USR = 'S';

 // AND PAR.Company Number is Salt Lake
 AND PAR.Company_Number = 364;

 MOVE *ALL (To: PAR From: DB1);

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

 QUIT;

 ENDIF;

 //?Test for Daily's Missoula
 CASE;

 // IF WRK.Text 1 Length USR is Missoula
 IF WRK.Text_1_Length_USR = 'M';

 // AND PAR.Company Number is Missoula
 AND PAR.Company_Number = 363;

 MOVE *ALL (To: PAR From: DB1);

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

 QUIT;

 ENDIF;

 // IF *OTHERWISE
 IF *OTHERWISE;

 MOVE *ALL (To: PAR From: DB1);

 // PGM.*Return code = CND.*Record already exists
 PGM.*Return_code = 'Y2U0003';

 QUIT;

 ENDIF;

 ENDIF;

}


