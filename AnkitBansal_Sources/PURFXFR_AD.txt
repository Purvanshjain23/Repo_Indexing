// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PURFXFR
// ?Date: 14.08.2025 Time: 03:51:10
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?**************************************************************************
//?** PR1 Parms Represent Old Record Fields (Will be blank for Insert).
//?** PR2 Parms Represent New Record Fields (Will be blank for Delete).
//?**************************************************************************
//?Trigger Processing for Insert Event.
CASE;

// IF PR3.TRG Database Event is Insert
IF PR3.TRG_Database_Event = '1';

EXECUTE FUNCTION(Crt Trailer TRG       CR) TYPE(CRTOBJ) FILE(PUB4CPP)           AC2185071;
PARAMETER(PR2.Carrier_Code);
PARAMETER(PR2.Trailer_Id);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.TT_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


//?If Record Already Exist.
CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Date);
PARAMETER(LCL.Current_System_Time);

// WRK.Current System Time = LCL.Current System Time
WRK.Current_System_Time = LCL.Current_System_Time;

//?S17018 DN 12/14/20-Loop Until System Time Changes.
// DOW LCL.Current System Time EQ WRK.Current System Time
DOW LCL.Current_System_Time = WRK.Current_System_Time;

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Date);
PARAMETER(WRK.Current_System_Time);

ENDDO;

EXECUTE FUNCTION(Crt Trailer TRG       CR) TYPE(CRTOBJ) FILE(PUB4CPP)           AC2185071;
PARAMETER(PR2.Carrier_Code);
PARAMETER(PR2.Trailer_Id);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.TT_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

ENDIF;

//?Trigger Processing for Update Event.
CASE;

// IF PR3.TRG Database Event is Update
IF PR3.TRG_Database_Event = '3';

//?Update If Any Non-Key Fields Have Changed.
CASE;

// IF PR1.Company Number NE PR2.Company Number
IF PR1.Company_Number <> PR2.Company_Number;

// OR PR1.Load Type NE PR2.Load Type
OR PR1.Load_Type <> PR2.Load_Type;

// OR PR1.Trailer Type NE PR2.Trailer Type
OR PR1.Trailer_Type <> PR2.Trailer_Type;

// OR PR1.Seaboard Owned Status NE PR2.Seaboard Owned Status
OR PR1.Seaboard_Owned_Status <> PR2.Seaboard_Owned_Status;

// OR PR1.On Yard Status NE PR2.On Yard Status
OR PR1.On_Yard_Status <> PR2.On_Yard_Status;

// OR PR1.On Yard Date NE PR2.On Yard Date
OR PR1.On_Yard_Date <> PR2.On_Yard_Date;

// OR PR1.On Yard Time NE PR2.On Yard Time
OR PR1.On_Yard_Time <> PR2.On_Yard_Time;

// OR PR1.Assigned Status NE PR2.Assigned Status
OR PR1.Assigned_Status <> PR2.Assigned_Status;

// OR PR1.Available Status NE PR2.Available Status
OR PR1.Available_Status <> PR2.Available_Status;

// OR PR1.Not Available Reason Code NE PR2.Not Available Reason Code
OR PR1.Not_Available_Reason_Code <> PR2.Not_Available_Reason_Code;

// OR PR1.Comment Line NE PR2.Comment Line
OR PR1.Comment_Line <> PR2.Comment_Line;

// OR PR1.Status Unused 1 NE PR2.Status Unused 1
OR PR1.Status_Unused_1 <> PR2.Status_Unused_1;

// OR PR1.Status Unused 2 NE PR2.Status Unused 2
OR PR1.Status_Unused_2 <> PR2.Status_Unused_2;

// OR PR1.Status Unused 3 NE PR2.Status Unused 3
OR PR1.Status_Unused_3 <> PR2.Status_Unused_3;

// OR PR1.Status Unused 4 NE PR2.Status Unused 4
OR PR1.Status_Unused_4 <> PR2.Status_Unused_4;

// OR PR1.Status Unused 5 NE PR2.Status Unused 5
OR PR1.Status_Unused_5 <> PR2.Status_Unused_5;

// OR PR1.Date Unused 1 NE PR2.Date Unused 1
OR PR1.Date_Unused_1 <> PR2.Date_Unused_1;

// OR PR1.Date Unused 2 NE PR2.Date Unused 2
OR PR1.Date_Unused_2 <> PR2.Date_Unused_2;

// OR PR1.Date Unused 3 NE PR2.Date Unused 3
OR PR1.Date_Unused_3 <> PR2.Date_Unused_3;

// OR PR1.Date Unused 4 NE PR2.Date Unused 4
OR PR1.Date_Unused_4 <> PR2.Date_Unused_4;

// OR PR1.Date Unused 5 NE PR2.Date Unused 5
OR PR1.Date_Unused_5 <> PR2.Date_Unused_5;

// OR PR1.EDI Status 1 NE PR2.EDI Status 1
OR PR1.EDI_Status_1 <> PR2.EDI_Status_1;

// OR PR1.EDI Status 2 NE PR2.EDI Status 2
OR PR1.EDI_Status_2 <> PR2.EDI_Status_2;

// OR PR1.EDI Status 3 NE PR2.EDI Status 3
OR PR1.EDI_Status_3 <> PR2.EDI_Status_3;

// OR PR1.Record Status NE PR2.Record Status
OR PR1.Record_Status <> PR2.Record_Status;

EXECUTE FUNCTION(Crt Trailer TRG       CR) TYPE(CRTOBJ) FILE(PUB4CPP)           AC2185071;
PARAMETER(PR2.Carrier_Code);
PARAMETER(PR2.Trailer_Id);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.TT_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


//?If Record Already Exist.
CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Date);
PARAMETER(LCL.Current_System_Time);

// WRK.Current System Time = LCL.Current System Time
WRK.Current_System_Time = LCL.Current_System_Time;

//?S17018 DN 12/14/20-Loop Until System Time Changes.
// DOW LCL.Current System Time EQ WRK.Current System Time
DOW LCL.Current_System_Time = WRK.Current_System_Time;

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Date);
PARAMETER(WRK.Current_System_Time);

ENDDO;

EXECUTE FUNCTION(Crt Trailer TRG       CR) TYPE(CRTOBJ) FILE(PUB4CPP)           AC2185071;
PARAMETER(PR2.Carrier_Code);
PARAMETER(PR2.Trailer_Id);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.TT_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

ENDIF;

ENDIF;

//?Trigger Processing for Delete Event.
CASE;

// IF PR3.TRG Database Event is Delete
IF PR3.TRG_Database_Event = '2';

EXECUTE FUNCTION(Crt Trailer TRG       CR) TYPE(CRTOBJ) FILE(PUB4CPP)           AC2185071;
PARAMETER(PR1.Carrier_Code);
PARAMETER(PR1.Trailer_Id);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.TT_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


//?If Record Already Exist.
CASE;

// IF PGM.*Return code is *Record already exists
IF PGM.*Return_code = 'Y2U0003';

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Date);
PARAMETER(LCL.Current_System_Time);

// WRK.Current System Time = LCL.Current System Time
WRK.Current_System_Time = LCL.Current_System_Time;

//?S17018 DN 12/14/20-Loop Until System Time Changes.
// DOW LCL.Current System Time EQ WRK.Current System Time
DOW LCL.Current_System_Time = WRK.Current_System_Time;

// Call program RTV System Date/Time   UP.
CALL PROGRAM(RTV System Date/Time   UP) ('PDGFUPC');
PARAMETER(LCL.Current_System_Time);
PARAMETER(WRK.Current_System_Time);

ENDDO;

EXECUTE FUNCTION(Crt Trailer TRG       CR) TYPE(CRTOBJ) FILE(PUB4CPP)           AC2185071;
PARAMETER(PR1.Carrier_Code);
PARAMETER(PR1.Trailer_Id);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.TT_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

ENDIF;

