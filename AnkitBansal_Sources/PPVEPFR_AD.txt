// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PPVEPFR
// ?Date: 14.08.2025 Time: 12:06:42
// ?------------------------------------------------------------------------------------------------

//?USER: Print required level headings

CASE;

IF NEW Company_Number;
// Print Company Number header format
PRINT Company Number header format;

ENDIF;

// SUPPRESSED PRINT Order Number header format

// SUPPRESSED PRINT Order Sequence Number header format

//?USER: Process before print of detail format

// WRK.Accrual Code = CON.*BLANK
WRK.Accrual_Code = *BLANK;

EXECUTE FUNCTION(RTV BK4 Record Chk   RTV) TYPE(RTVOBJ) FILE(OMHRCPP)           AC1764124;
PARAMETER(NXT.Company_Number);
PARAMETER(CUR.Order_Number);
PARAMETER(CUR.Order_Sequence_Number);
PARAMETER(CUR.Order_Secondary_Line_Seq);
PARAMETER(WRK.Accrual_Code);
{
 //?USER: Processing if Data record not found

 // PAR.Accrual Code = CND.Not Entered
 PAR.Accrual_Code = *BLANK;

 //?USER: Process Data record

 CASE;

 // IF DB1.Accrual Code is BK4
 IF DB1.Accrual_Code = 'BK4';

 // PAR.Accrual Code = DB1.Accrual Code
 PAR.Accrual_Code = DB1.Accrual_Code;

 QUIT;

 ENDIF;

}


//?USER: On print of detail format

CASE;

// IF WRK.Accrual Code is BK4
IF WRK.Accrual_Code = 'BK4';

// PGM.*Print format = CND.Print format
PGM.*Print_format = 'Y';

// IF *OTHERWISE
IF *OTHERWISE;

// PGM.*Print format = CND.Do not print format
PGM.*Print_format = 'N';

ENDIF;

//?PRTOBJ calls after print of detail format

//?Embedded PRTOBJ : Prt ShippDtl-CommOnly PO
CASE;

// IF WRK.Accrual Code is BK4
IF WRK.Accrual_Code = 'BK4';

// IF *OTHERWISE
IF *OTHERWISE;

QUIT;

ENDIF;

EXECUTE FUNCTION(Prt ShippDtl-CommOnly PO) TYPE(PRTOBJ);
PARAMETER(NXT.Company_Number);
PARAMETER(CUR.Order_Number);
PARAMETER(CUR.Order_Sequence_Number);
PARAMETER(CUR.Order_Secondary_Line_Seq);
PARAMETER(CUR.Commission_Amount);
{
 //?USER: Processing if Data record not found

 // PAR.Accrual Code = CND.Not Entered
 PAR.Accrual_Code = *BLANK;

 //?USER: Process Data record

 CASE;

 // IF DB1.Accrual Code is BK4
 IF DB1.Accrual_Code = 'BK4';

 // PAR.Accrual Code = DB1.Accrual Code
 PAR.Accrual_Code = DB1.Accrual_Code;

 QUIT;

 ENDIF;

}


//?USER: Print required level totals

// SUPPRESSED PRINT Order Sequence Number totals format

// SUPPRESSED PRINT Order Number totals format

CASE;

IF NEW Company_Number;
// Print Company Number totals format
PRINT Company Number totals format;

ENDIF;

