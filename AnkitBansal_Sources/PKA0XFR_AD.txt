// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKA0XFR
// ?Date: 14.08.2025 Time: 02:51:21
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?***** Change Log and Comments
DO;

//?*****
//?** 01/23/2009 LJB FP1009
//?** Create purged records in Purge Library, then delete
//?*****
//?** 09/14/2007 LJB FP1009
//?** Remove date calculation, it will be passed in. Remove company
//?** validation. Pass in generic parms even though they are not all
//?** being used since the purge programs are being called from a
//?** generic processer program.
//?*****
//?* 08/10/00 PKD Changed to call the generic program for
//?*              calculating the Purge Date.
//?*****
//?Calculate the Start Date for the Purge.  The Start Date is the
//?Job Date minus the Number of Days to save the data.
ENDDO;

//?Start reading the Primal Scale Detail based the PS Cut Date as
//?the Start Date.  The PS Cut Date is in descending order.
//?All the records that are older than the Start Date will be
//?deleted.
EXECUTE FUNCTION(Prg Primal Detail     RT) TYPE(RTVOBJ) FILE(PKDLCPP)           AB1176986;
PARAMETER(PAR.Purge_Date_USR);
{
 //?USER: Process Data record

 //?** Create records to be purged in the Purge file in the Purge
 //?** Library. Then delete from production.
 EXECUTE FUNCTION(Prg Primal Detail     CR) TYPE(CRTOBJ) FILE(PKDLCPP)           AB1176987;
 PARAMETER(DB1.CC_Company_Number);
 PARAMETER(DB1.PSA_Scale_ID);
 PARAMETER(DB1.PSA_Cut_Date);
 PARAMETER(DB1.PSA_Cut_Time);
 PARAMETER(DB1.PSA_Sequence);
 PARAMETER(DB1.PSA_Count);
 PARAMETER(DB1.PSA_Weight);
 PARAMETER(DB1.PSA_Tattoo);
 PARAMETER(DB1.PSA_Shift);
 PARAMETER(DB1.PSA_Trolley_Id);
 PARAMETER(DB1.RS_User_Changed);
 PARAMETER(DB1.RS_Date_Changed);
 PARAMETER(DB1.RS_Time_Changed);
 PARAMETER(DB1.RS_Record_Status);
 PARAMETER(DB1.RS_Job);
 PARAMETER(DB1.RS_Program);
 PARAMETER(DB1.RS_User_Added);
 PARAMETER(DB1.RS_Date_Added);
 PARAMETER(DB1.RS_Time_Added);
 //?Delete the record using the standard Update Index.  This will
 //?delete the record from production.
 EXECUTE FUNCTION(Prg Primal Detail     DL) TYPE(DLTOBJ) FILE(PKDLCPP)           AB1176989;
 PARAMETER(DB1.CC_Company_Number);
 PARAMETER(DB1.PSA_Scale_ID);
 PARAMETER(DB1.PSA_Cut_Date);
 PARAMETER(DB1.PSA_Cut_Time);
 PARAMETER(DB1.PSA_Sequence);
}


