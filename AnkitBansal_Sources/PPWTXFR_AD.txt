// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PPWTXFR
// ?Date: 14.08.2025 Time: 03:42:07
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications and Comments
DO;

//?E3387 JJH 09/09/14 - Recompiled because Shipping Method added to
//? A/R Claim Resale file.
ENDDO;

EXECUTE FUNCTION(RTV A/R Clm CvtOrdHDtlRT) TYPE(RTVOBJ) FILE(PDMKCPP)           AC1771907;
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Claim Status is Completed
 IF DB1.Claim_Status = 'C';

 // OR DB1.Claim Status is Memo Processing
 OR DB1.Claim_Status = 'M';

 EXECUTE FUNCTION(RTV A/R ClmPrd -OrdDtl RT) TYPE(RTVOBJ) FILE(PDMOCPP)          AC1771909;
 PARAMETER(DB1.Claim_Number);
 {
  //?USER: Process Data record

  CASE;

  // IF DB1.Claim Memo Number is Not equal to zeros
  IF DB1.Claim_Memo_Number <> *ZERO;

  CASE;

  // IF DB1.Clm Item TF Exempt Code is Pre Commencement
  IF DB1.Clm_Item_TF_Exempt_Code = 'PC';

  // OR DB1.Clm Item TF Exempt Code is Not Exempt
  OR DB1.Clm_Item_TF_Exempt_Code = 'NE';

  EXECUTE FUNCTION(Rtv ArClm OrdH/Prd/Rsl RT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC1771968;
  PARAMETER(DB1.Claim_Company_Number);
  PARAMETER(DB1.Claim_Memo_Number);
  PARAMETER(DB1.Clm_Item_TF_Exempt_Code);
  {
   //?USER: Process Data record

   EXECUTE FUNCTION(Chg TF Exempt         CH) TYPE(CHGOBJ) FILE(OPBFCPP)           AC1750711;
   PARAMETER(DB1.Company_Number);
   PARAMETER(DB1.Order_Number);
   PARAMETER(PAR.OH_TF_Exempt_Code);
   {
    //?USER: Processing before Data update

    EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
    PARAMETER(DB1.Job_Time);
    PARAMETER(DB1.User_Id);
    PARAMETER(DB1.Job_Name);
    PARAMETER(DB1.Job_Date);
    {
     //?Execute internal function

     // PAR.Job Time = JOB.*Job time
     PAR.Job_Time = JOB.*Job_time;

     // PAR.User Id = JOB.*USER
     PAR.User_Id = JOB.*USER;

     // PAR.Job Name = JOB.*PROGRAM
     PAR.Job_Name = JOB.*PROGRAM;

     // PAR.Job Date = JOB.*Job date
     PAR.Job_Date = JOB.*Job_date;

    }

   }

  }

  EXECUTE FUNCTION(RTV A/R CLM OrdDtl TF RT) TYPE(RTVOBJ) FILE(OPBGWKP)           AC1771911;
  PARAMETER(DB1.Claim_Company_Number);
  PARAMETER(DB1.Claim_Memo_Number);
  PARAMETER(DB1.Claim_Item_Line_Number);
  PARAMETER(1);
  PARAMETER(DB1.Clm_Item_TF_Exempt_Code);
  {
   //?USER: Process Data record

   EXECUTE FUNCTION(CHG TF-Exempt-Item    CH) TYPE(CHGOBJ) FILE(OPBGWKP)           AC1748616;
   PARAMETER(DB1.Company_Number);
   PARAMETER(DB1.Order_Number);
   PARAMETER(DB1.Order_Sequence_Number);
   PARAMETER(DB1.Order_Secondary_Line_Seq);
   PARAMETER(PAR.Ord_TF_Exempt_Code);
   {
    //?USER: Processing before Data update

    EXECUTE FUNCTION(Set Date/Time Stamp.PgmIF) TYPE(EXCINTFUN)                     AC1425284;
    PARAMETER(DB1.Job_Time);
    PARAMETER(DB1.User_Id);
    PARAMETER(DB1.Job_Name);
    PARAMETER(DB1.Job_Date);
    {
     //?Execute internal function

     // PAR.Job Time = JOB.*Job time
     PAR.Job_Time = JOB.*Job_time;

     // PAR.User Id = JOB.*USER
     PAR.User_Id = JOB.*USER;

     // PAR.Job Name = JOB.*PROGRAM
     PAR.Job_Name = JOB.*PROGRAM;

     // PAR.Job Date = JOB.*Job date
     PAR.Job_Date = JOB.*Job_date;

    }

   }

  }

  // IF *OTHERWISE
  IF *OTHERWISE;

  // Send error message - 'Tf Exempt error due to Item(s) used on Orders'
  ERROR(USR3585);
  MSGPARM(DB1.Clm_Item_TF_Exempt_Code);

  ENDIF;

  ENDIF;

 }

 EXECUTE FUNCTION(RTV A/R ClmRsl -OrdDtl RT) TYPE(RTVOBJ) FILE(PPA3CPP)          AC1772098;
 PARAMETER(DB1.Claim_Number);
 PARAMETER(DB1.Claim_Company_Number);
 {
  //?USER: Process Data record

  CASE;

  // IF DB1.Resale Memo Number is Not equal to zeros
  IF DB1.Resale_Memo_Number <> *ZERO;

  EXECUTE FUNCTION(RTV A/R ClmRsl -OrdDtl RT) TYPE(RTVOBJ) FILE(PDMPCPP)          AC1771927;
  PARAMETER(DB1.Claim_Number);
  PARAMETER(DB1.Ship_To_Customer);
  PARAMETER(DB1.Resale_Memo_Number);
  PARAMETER(PAR.Claim_Company_Number);
  {
   //?USER: Process Data record

   CASE;

   // IF DB1.Clm Resale TF Exempt Code is Pre Commencement
   IF DB1.Clm_Resale_TF_Exempt_Code = 'PC';

   // OR DB1.Clm Resale TF Exempt Code is Not Exempt
   OR DB1.Clm_Resale_TF_Exempt_Code = 'NE';

   // LCL.Order Number = PAR.Resale Memo Number
   LCL.Order_Number = PAR.Resale_Memo_Number;

   EXECUTE FUNCTION(Rtv ArClm OrdH/Prd/Rsl RT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC1771968;
   PARAMETER(DB1.Resale_Company_Number);
   PARAMETER(LCL.Order_Number);
   PARAMETER(DB1.Clm_Resale_TF_Exempt_Code);
   {
    //?USER: Process Data record

    EXECUTE FUNCTION(Chg TF Exempt         CH) TYPE(CHGOBJ) FILE(OPBFCPP)           AC1750711;
    PARAMETER(DB1.Company_Number);
    PARAMETER(DB1.Order_Number);
    PARAMETER(PAR.OH_TF_Exempt_Code);
    {
     //?USER: Processing before Data update

     EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
     PARAMETER(DB1.Job_Time);
     PARAMETER(DB1.User_Id);
     PARAMETER(DB1.Job_Name);
     PARAMETER(DB1.Job_Date);
     {
      //?Execute internal function

      // PAR.Job Time = JOB.*Job time
      PAR.Job_Time = JOB.*Job_time;

      // PAR.User Id = JOB.*USER
      PAR.User_Id = JOB.*USER;

      // PAR.Job Name = JOB.*PROGRAM
      PAR.Job_Name = JOB.*PROGRAM;

      // PAR.Job Date = JOB.*Job date
      PAR.Job_Date = JOB.*Job_date;

     }

    }

   }

   EXECUTE FUNCTION(RTV A/R CLM OrdDtl TF RT) TYPE(RTVOBJ) FILE(OPBGWKP)           AC1771911;
   PARAMETER(DB1.Resale_Company_Number);
   PARAMETER(LCL.Order_Number);
   PARAMETER(DB1.Resale_Item_Line_Number);
   PARAMETER(1);
   PARAMETER(DB1.Clm_Resale_TF_Exempt_Code);
   {
    //?USER: Process Data record

    EXECUTE FUNCTION(CHG TF-Exempt-Item    CH) TYPE(CHGOBJ) FILE(OPBGWKP)           AC1748616;
    PARAMETER(DB1.Company_Number);
    PARAMETER(DB1.Order_Number);
    PARAMETER(DB1.Order_Sequence_Number);
    PARAMETER(DB1.Order_Secondary_Line_Seq);
    PARAMETER(PAR.Ord_TF_Exempt_Code);
    {
     //?USER: Processing before Data update

     EXECUTE FUNCTION(Set Date/Time Stamp.PgmIF) TYPE(EXCINTFUN)                     AC1425284;
     PARAMETER(DB1.Job_Time);
     PARAMETER(DB1.User_Id);
     PARAMETER(DB1.Job_Name);
     PARAMETER(DB1.Job_Date);
     {
      //?Execute internal function

      // PAR.Job Time = JOB.*Job time
      PAR.Job_Time = JOB.*Job_time;

      // PAR.User Id = JOB.*USER
      PAR.User_Id = JOB.*USER;

      // PAR.Job Name = JOB.*PROGRAM
      PAR.Job_Name = JOB.*PROGRAM;

      // PAR.Job Date = JOB.*Job date
      PAR.Job_Date = JOB.*Job_date;

     }

    }

   }

   // IF *OTHERWISE
   IF *OTHERWISE;

   // Send error message - 'Tf Exempt error due to Item(s) used on Orders'
   ERROR(USR3585);
   MSGPARM(DB1.Clm_Resale_TF_Exempt_Code);

   ENDIF;

  }

  ENDIF;

 }

 ENDIF;

}


