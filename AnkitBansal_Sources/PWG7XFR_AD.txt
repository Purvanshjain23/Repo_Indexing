// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PWG7XFR
// ?Date: 14.08.2025 Time: 02:56:26
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?NOTE: Any changes to this program you should consider changing
//?      PWA7XFR program as well. PWG7XFR was a cloned from PWA7XFR.
EXECUTE FUNCTION(Prt Prod Loc Dist Wrk RT) TYPE(RTVOBJ) FILE(PWAMCPP)           AB1346298;
PARAMETER(PAR.Company_Number_Alpha_Usr);
{
 //?USER: Process Data record

 //?Retrieve HPS Automation Flag
 EXECUTE FUNCTION(Rtv HPS Automation    RT) TYPE(RTVOBJ) FILE(PLAOREP)           AB1342216;
 PARAMETER(DB1.PDW_Producer_Code);
 PARAMETER(LCL.HPS_Automation_Y_N);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 CASE;

 // IF LCL.HPS Automation (Y/N) is Yes
 IF LCL.HPS_Automation_Y_N = 'Y';

 // AND DB1.PDW Company Number is Sioux City
 AND DB1.PDW_Company_Number = 440;

 //?Print the Delivery Schedule Report by Producer/Producer Loc.
 // Call program Zzz4Delivery Schedule PF.
 CALL PROGRAM(Zzz4Delivery Schedule PF) ('PWFSPFR');
 PARAMETER(DB1.PDW_Company_Number);
 PARAMETER(DB1.PDW_BOL_Kill_Date);
 PARAMETER(DB1.PDW_Producer_Code);
 PARAMETER(DB1.PDW_Producer_Loc_Code);
 PARAMETER(DB1.PDW_Date_To);

 //?Send Email to the Producer
 //?03/04/2019 JJH E14585 - Modify Email Subject Line
 //?Build Subject of Email.
 CASE;

 // IF PAR.Company Number Alpha Usr is SEB TF-Sioux City, IA
 IF PAR.Company_Number_Alpha_Usr = '440';

 // LCL.Email Subject-50 USR = CONCAT(CON.STF Delivery Schedule-,DB1.PDW Producer Code,CON.*ZERO)
 LCL.Email_Subject_50_USR = 'STF Delivery Schedule-' + DB1.PDW_Producer_Code (*ZERO);

 // LCL.Email Subject-50 USR = CONCAT(LCL.Email Subject-50 USR,CON./,CON.*ZERO)
 LCL.Email_Subject_50_USR = LCL.Email_Subject_50_USR + '/' (*ZERO);

 // LCL.Email Subject-50 USR = CONCAT(LCL.Email Subject-50 USR,DB1.PDW Producer Loc Code,CON.*ZERO)
 LCL.Email_Subject_50_USR = LCL.Email_Subject_50_USR + DB1.PDW_Producer_Loc_Code (*ZERO);

 //?Build Subject of Email.
 // IF PAR.Company Number Alpha Usr is SEB Foods-Guymon, OK
 IF PAR.Company_Number_Alpha_Usr = '360';

 // LCL.Email Subject-50 USR = CONCAT(CON.Guymon Delivery Schedule-,DB1.PDW Producer Code,CON.*ZERO)
 LCL.Email_Subject_50_USR = 'Guymon Delivery Schedule-' + DB1.PDW_Producer_Code (*ZERO);

 // LCL.Email Subject-50 USR = CONCAT(LCL.Email Subject-50 USR,CON./,CON.*ZERO)
 LCL.Email_Subject_50_USR = LCL.Email_Subject_50_USR + '/' (*ZERO);

 // LCL.Email Subject-50 USR = CONCAT(LCL.Email Subject-50 USR,DB1.PDW Producer Loc Code,CON.*ZERO)
 LCL.Email_Subject_50_USR = LCL.Email_Subject_50_USR + DB1.PDW_Producer_Loc_Code (*ZERO);

 //?Build Subject of Email.
 // IF PAR.Company Number Alpha Usr is Triumph Foods-StJoseph,MO
 IF PAR.Company_Number_Alpha_Usr = '960';

 // LCL.Email Subject-50 USR = CONCAT(CON.Triumph Delivery Schedule,CON.-,CON.*ZERO)
 LCL.Email_Subject_50_USR = 'Triumph Delivery Schedule' + '-' (*ZERO);

 // LCL.Email Subject-50 USR = CONCAT(LCL.Email Subject-50 USR,DB1.PDW Producer Code,CON.*ZERO)
 LCL.Email_Subject_50_USR = LCL.Email_Subject_50_USR + DB1.PDW_Producer_Code (*ZERO);

 // LCL.Email Subject-50 USR = CONCAT(LCL.Email Subject-50 USR,CON./,CON.*ZERO)
 LCL.Email_Subject_50_USR = LCL.Email_Subject_50_USR + '/' (*ZERO);

 // LCL.Email Subject-50 USR = CONCAT(LCL.Email Subject-50 USR,DB1.PDW Producer Loc Code,CON.*ZERO)
 LCL.Email_Subject_50_USR = LCL.Email_Subject_50_USR + DB1.PDW_Producer_Loc_Code (*ZERO);

 ENDIF;

 // Call program Rtv Company Values    XF.
 CALL PROGRAM(Rtv Company Values    XF) ('PDGKXFR');
 PARAMETER(DB1.PDW_Company_Number);
 PARAMETER('DLVSCHFROM');
 PARAMETER(LCL.Override_User_Option_USR);

 //?T13559 DN 08/23/18-Pass in Email Subject USR.
 //?03/04/2019 JJH E14585 - Pass in Email Subject-50 USR.
 // Call program Zzz4Delivery Schedule CL.
 CALL PROGRAM(Zzz4Delivery Schedule CL) ('PWFUUPC');
 PARAMETER(DB1.PDW_Email);
 PARAMETER(LCL.Email_Subject_50_USR);
 PARAMETER('PWFSPFR$');
 PARAMETER(LCL.Override_User_Option_USR);

 // IF *OTHERWISE
 IF *OTHERWISE;

 //?Print the Delivery Schedule Report by Producer/Producer Loc.
 // Call program Prt2Delivery Schedule PF.
 CALL PROGRAM(Prt2Delivery Schedule PF) ('PWAGPFR');
 PARAMETER(DB1.PDW_Company_Number);
 PARAMETER(DB1.PDW_BOL_Kill_Date);
 PARAMETER(DB1.PDW_Producer_Code);
 PARAMETER(DB1.PDW_Producer_Loc_Code);
 PARAMETER(DB1.PDW_Date_To);

 //?Send Email to the Producer
 //?03/04/2019 JJH E14585 - Modify Email Subject Line
 //?Build Subject of Email.
 CASE;

 // IF PAR.Company Number Alpha Usr is SEB TF-Sioux City, IA
 IF PAR.Company_Number_Alpha_Usr = '440';

 // LCL.Email Subject-50 USR = CONCAT(CON.STF Delivery Schedule-,DB1.PDW Producer Code,CON.*ZERO)
 LCL.Email_Subject_50_USR = 'STF Delivery Schedule-' + DB1.PDW_Producer_Code (*ZERO);

 // LCL.Email Subject-50 USR = CONCAT(LCL.Email Subject-50 USR,CON./,CON.*ZERO)
 LCL.Email_Subject_50_USR = LCL.Email_Subject_50_USR + '/' (*ZERO);

 // LCL.Email Subject-50 USR = CONCAT(LCL.Email Subject-50 USR,DB1.PDW Producer Loc Code,CON.*ZERO)
 LCL.Email_Subject_50_USR = LCL.Email_Subject_50_USR + DB1.PDW_Producer_Loc_Code (*ZERO);

 //?Build Subject of Email.
 // IF PAR.Company Number Alpha Usr is SEB Foods-Guymon, OK
 IF PAR.Company_Number_Alpha_Usr = '360';

 // LCL.Email Subject-50 USR = CONCAT(CON.Guymon Delivery Schedule-,DB1.PDW Producer Code,CON.*ZERO)
 LCL.Email_Subject_50_USR = 'Guymon Delivery Schedule-' + DB1.PDW_Producer_Code (*ZERO);

 // LCL.Email Subject-50 USR = CONCAT(LCL.Email Subject-50 USR,CON./,CON.*ZERO)
 LCL.Email_Subject_50_USR = LCL.Email_Subject_50_USR + '/' (*ZERO);

 // LCL.Email Subject-50 USR = CONCAT(LCL.Email Subject-50 USR,DB1.PDW Producer Loc Code,CON.*ZERO)
 LCL.Email_Subject_50_USR = LCL.Email_Subject_50_USR + DB1.PDW_Producer_Loc_Code (*ZERO);

 //?Build Subject of Email.
 // IF PAR.Company Number Alpha Usr is Triumph Foods-StJoseph,MO
 IF PAR.Company_Number_Alpha_Usr = '960';

 // LCL.Email Subject-50 USR = CONCAT(CON.Triumph Delivery Schedule,CON.-,CON.*ZERO)
 LCL.Email_Subject_50_USR = 'Triumph Delivery Schedule' + '-' (*ZERO);

 // LCL.Email Subject-50 USR = CONCAT(LCL.Email Subject-50 USR,DB1.PDW Producer Code,CON.*ZERO)
 LCL.Email_Subject_50_USR = LCL.Email_Subject_50_USR + DB1.PDW_Producer_Code (*ZERO);

 // LCL.Email Subject-50 USR = CONCAT(LCL.Email Subject-50 USR,CON./,CON.*ZERO)
 LCL.Email_Subject_50_USR = LCL.Email_Subject_50_USR + '/' (*ZERO);

 // LCL.Email Subject-50 USR = CONCAT(LCL.Email Subject-50 USR,DB1.PDW Producer Loc Code,CON.*ZERO)
 LCL.Email_Subject_50_USR = LCL.Email_Subject_50_USR + DB1.PDW_Producer_Loc_Code (*ZERO);

 ENDIF;

 // Call program Rtv Company Values    XF.
 CALL PROGRAM(Rtv Company Values    XF) ('PDGKXFR');
 PARAMETER(DB1.PDW_Company_Number);
 PARAMETER('DLVSCHFROM');
 PARAMETER(LCL.Override_User_Option_USR);

 //?T13559 DN 08/23/18-Pass in Email Subject USR.
 //?03/04/2019 JJH E14585 - Pass in Email Subject-50 USR.
 // Call program Prt2Delivery Schedule CL.
 CALL PROGRAM(Prt2Delivery Schedule CL) ('PWA8UPR');
 PARAMETER(DB1.PDW_Email);
 PARAMETER(LCL.Email_Subject_50_USR);
 PARAMETER('PWAGPFR$');
 PARAMETER(LCL.Override_User_Option_USR);

 ENDIF;

}


