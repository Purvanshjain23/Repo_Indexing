// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKBHE1R
// ?Date: 14.08.2025 Time: 02:51:07
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?Modification history
DO;

//?H16853 ISE 11/02/20 - Increased the Buy Order Number field
//?  length from 5 to 7.
ENDDO;

//?USER: Validate detail screen relations

CASE;

// IF DTL.BOH Quoted Base Mkt Price NE WRK.Zero USR
IF DTL.BOH_Quoted_Base_Mkt_Price <> WRK.Zero_USR;

CASE;

// IF DTL.BOH Quote Price Type is Not Entered
IF DTL.BOH_Quote_Price_Type = *BLANK;

// Send error message - 'Base Quote Type is required.'
ERROR(PRK0497);
MSGPARM(DTL.BOH_Quote_Price_Type);

ENDIF;

// IF DTL.BOH Quote Price Type NE WRK.Blank Usr 1 fld Usr
IF DTL.BOH_Quote_Price_Type <> WRK.Blank_Usr_1_fld_Usr;

CASE;

// IF DTL.BOH Quote Price Type is Not Entered
IF DTL.BOH_Quote_Price_Type = *BLANK;

// Send error message - 'Base Quote Type is required.'
ERROR(PRK0647);
MSGPARM(DTL.BOH_Quoted_Base_Mkt_Price);

ENDIF;

ENDIF;

//?USER: Change DBF record

EXECUTE FUNCTION(Chg Buy Order Header  CH) TYPE(CHGOBJ) FILE(PKAWCPP)           AB1100515;
PARAMETER(DTL.BOH_Company_Number);
PARAMETER(DTL.BOH_Buy_Order_Number);
PARAMETER(DTL.BOH_Buy_Order_Date);
PARAMETER(DTL.BOH_Kill_Date);
PARAMETER(DTL.BOH_Payment_Type);
PARAMETER(DTL.BOH_Buy_Order_Type);
PARAMETER(DTL.BOH_Market_Add_Deduct);
PARAMETER(DTL.BOH_Status);
PARAMETER(DTL.BOH_Delv_Plan_Printed);
PARAMETER(DTL.BOH_Quote_Price_Type);
PARAMETER(DTL.BOH_Quoted_Base_Mkt_Price);
PARAMETER(DTL.BOH_Commodity_Market_Code);
PARAMETER(DTL.BOH_Commodity_Price_Group);
PARAMETER(DTL.BOH_Market_Date_Method);
PARAMETER(DTL.BOH_MPR_Reporting_Date);
PARAMETER(DTL.BOH_Hedge_Date);
PARAMETER(DTL.BOH_Unused_Date_3);
PARAMETER(DTL.BOH_Unused_Date_4);
PARAMETER(DTL.BOH_Unused_Date_5);
PARAMETER(DTL.BOH_Hedge_Head_Total);
PARAMETER(DTL.BOH_Hedge_Reference_BO);
PARAMETER(DTL.BOH_Hedge_Time_hhmm);
PARAMETER(DTL.BOH_Unused_Nbr_4);
PARAMETER(DTL.BOH_Unused_Nbr_5);
PARAMETER(DTL.BOH_Unused_Nbr_6);
PARAMETER(DTL.BOH_Unused_Nbr_7);
PARAMETER(DTL.BOH_Unused_Nbr_8);
PARAMETER(DTL.BOH_Unused_Nbr_9);
PARAMETER(DTL.BOH_Unused_Nbr_10);
PARAMETER(DTL.BOH_MPR_Reporting_Time);
PARAMETER(DTL.BOH_MPR_EST_RPT_STS);
PARAMETER(DTL.BOH_MPR_Purchase_Type);
PARAMETER(DTL.BOH_Status_4);
PARAMETER(DTL.BOH_Status_5);
PARAMETER(DTL.PPWS_Company_Number);
PARAMETER(DTL.CW_Year);
PARAMETER(DTL.CW_Week_Number);
PARAMETER(DTL.PD_Producer_Code);
PARAMETER(DTL.PL_Location_Code);
PARAMETER(DTL.PC_Contract_Code);
PARAMETER(DTL.PSC_Sub_Contract_Code);
PARAMETER(DTL.GN_Genetic_Code);
PARAMETER(DTL.PO_Option_Code);
PARAMETER(DTL.CMP_Program_Code);
PARAMETER(DTL.HB_Buyer_Code);
PARAMETER(DTL.RS_User_Changed);
PARAMETER(DTL.RS_Date_Changed);
PARAMETER(DTL.RS_Time_Changed);
PARAMETER(DTL.RS_Record_Status);
PARAMETER(DTL.RS_Job);
PARAMETER(DTL.RS_Program);
PARAMETER(DTL.RS_User_Added);
PARAMETER(DTL.RS_Date_Added);
PARAMETER(DTL.RS_Time_Added);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Rtv Change Stamp      IF) TYPE(EXCINTFUN)                      AB1100934;
 PARAMETER(DB1.RS_User_Changed);
 PARAMETER(DB1.RS_Date_Changed);
 PARAMETER(DB1.RS_Time_Changed);
 PARAMETER(DB1.RS_Job);
 PARAMETER(DB1.RS_Program);
 {
  //?Execute internal function

  // PAR.RS User Changed = JOB.*USER
  PAR.RS_User_Changed = JOB.*USER;

  // PAR.RS Date Changed = JOB.*Job date
  PAR.RS_Date_Changed = JOB.*Job_date;

  // PAR.RS Time Changed = JOB.*Job time
  PAR.RS_Time_Changed = JOB.*Job_time;

  // PAR.RS Job = JOB.*JOB
  PAR.RS_Job = JOB.*JOB;

  // PAR.RS Program = JOB.*PROGRAM
  PAR.RS_Program = JOB.*PROGRAM;

 }

}


