// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PUAAXFR
// ?Date: 14.08.2025 Time: 03:49:51
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?**************************************************************************
//?** PR1 Parms Represent Old Record Fields (Will be blank for Insert).
//?** PR2 Parms Represent New Record Fields (Will be blank for Delete).
//?**************************************************************************
//?Trigger Processing for Insert Event.
CASE;

// IF PR3.TRG Database Event is Insert
IF PR3.TRG_Database_Event = '1';

EXECUTE FUNCTION(Crt BI Order Hdr TRG  CR) TYPE(CRTOBJ) FILE(PTC4CPP)           AC2130502;
PARAMETER(PR2.Company_Number);
PARAMETER(PR2.Order_Number);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.BIOHT_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

//?Trigger Processing for Update Event.
CASE;

// IF PR3.TRG Database Event is Update
IF PR3.TRG_Database_Event = '3';

//?Do not Create if Called From PDXZXFR - Email Order has been shipped.
CASE;

// IF PR2.Order Emailed is Yes
IF PR2.Order_Emailed = 'Y';

// AND PR2.Order Emailed NE PR1.Order Emailed
AND PR2.Order_Emailed <> PR1.Order_Emailed;

//?This is done to prevent duplicate BI Order Header TRG record for
//?same Transaction.
//?Do not Create if Called From PDXZXFR - Email Order has been shipped.
// IF *OTHERWISE
IF *OTHERWISE;

// LCL.Update Record USR = CND.No
LCL.Update_Record_USR = 'N';

//?Set Update Flag If Any 1st 50 Non-Key Fields Have Changed.
CASE;

// IF PR1.Order Type - Sales NE PR2.Order Type - Sales
IF PR1.Order_Type_Sales <> PR2.Order_Type_Sales;

// OR PR1.A/R Customer Number NE PR2.A/R Customer Number
OR PR1.AR_Customer_Number <> PR2.AR_Customer_Number;

// OR PR1.Ship To Customer NE PR2.Ship To Customer
OR PR1.Ship_To_Customer <> PR2.Ship_To_Customer;

// OR PR1.Ship To Name NE PR2.Ship To Name
OR PR1.Ship_To_Name <> PR2.Ship_To_Name;

// OR PR1.Ship To Address Line 1 NE PR2.Ship To Address Line 1
OR PR1.Ship_To_Address_Line_1 <> PR2.Ship_To_Address_Line_1;

// OR PR1.Ship To Address Line 2 NE PR2.Ship To Address Line 2
OR PR1.Ship_To_Address_Line_2 <> PR2.Ship_To_Address_Line_2;

// OR PR1.Ship To Address Line 3 NE PR2.Ship To Address Line 3
OR PR1.Ship_To_Address_Line_3 <> PR2.Ship_To_Address_Line_3;

// OR PR1.Ship To City NE PR2.Ship To City
OR PR1.Ship_To_City <> PR2.Ship_To_City;

// OR PR1.Ship To State Code NE PR2.Ship To State Code
OR PR1.Ship_To_State_Code <> PR2.Ship_To_State_Code;

// OR PR1.Ship To Zip/Postal Code NE PR2.Ship To Zip/Postal Code
OR PR1.Ship_To_Zip_Postal_Code <> PR2.Ship_To_Zip_Postal_Code;

// OR PR1.Bill to Customer NE PR2.Bill to Customer
OR PR1.Bill_to_Customer <> PR2.Bill_to_Customer;

// OR PR1.Bill to Name NE PR2.Bill to Name
OR PR1.Bill_to_Name <> PR2.Bill_to_Name;

// OR PR1.Bill to Address Line 1 NE PR2.Bill to Address Line 1
OR PR1.Bill_to_Address_Line_1 <> PR2.Bill_to_Address_Line_1;

// OR PR1.Bill to Address Line 2 NE PR2.Bill to Address Line 2
OR PR1.Bill_to_Address_Line_2 <> PR2.Bill_to_Address_Line_2;

// OR PR1.Bill to Address Line 3 NE PR2.Bill to Address Line 3
OR PR1.Bill_to_Address_Line_3 <> PR2.Bill_to_Address_Line_3;

// OR PR1.Bill to City NE PR2.Bill to City
OR PR1.Bill_to_City <> PR2.Bill_to_City;

// OR PR1.Bill to State Code NE PR2.Bill to State Code
OR PR1.Bill_to_State_Code <> PR2.Bill_to_State_Code;

// OR PR1.Bill to Zip/Postal Code NE PR2.Bill to Zip/Postal Code
OR PR1.Bill_to_Zip_Postal_Code <> PR2.Bill_to_Zip_Postal_Code;

// OR PR1.Customer Purchase Order # NE PR2.Customer Purchase Order #
OR PR1.Customer_Purchase_Order_# <> PR2.Customer_Purchase_Order_#;

// OR PR1.Order Date NE PR2.Order Date
OR PR1.Order_Date <> PR2.Order_Date;

// OR PR1.Requested Ship Date NE PR2.Requested Ship Date
OR PR1.Requested_Ship_Date <> PR2.Requested_Ship_Date;

// OR PR1.Actual Shipped Date NE PR2.Actual Shipped Date
OR PR1.Actual_Shipped_Date <> PR2.Actual_Shipped_Date;

// OR PR1.Cancel Date NE PR2.Cancel Date
OR PR1.Cancel_Date <> PR2.Cancel_Date;

// OR PR1.Terms Code NE PR2.Terms Code
OR PR1.Terms_Code <> PR2.Terms_Code;

// OR PR1.Special Instructions NE PR2.Special Instructions
OR PR1.Special_Instructions <> PR2.Special_Instructions;

// OR PR1.Special Instructions 2 NE PR2.Special Instructions 2
OR PR1.Special_Instructions_2 <> PR2.Special_Instructions_2;

// OR PR1.Carrier Code NE PR2.Carrier Code
OR PR1.Carrier_Code <> PR2.Carrier_Code;

// OR PR1.Comment Print Acknowledge NE PR2.Comment Print Acknowledge
OR PR1.Comment_Print_Acknowledge <> PR2.Comment_Print_Acknowledge;

// OR PR1.Comment Print Inv/Cr.Memo NE PR2.Comment Print Inv/Cr.Memo
OR PR1.Comment_Print_Inv_Cr_Memo <> PR2.Comment_Print_Inv_Cr_Memo;

// OR PR1.Comment Print Pick Slip NE PR2.Comment Print Pick Slip
OR PR1.Comment_Print_Pick_Slip <> PR2.Comment_Print_Pick_Slip;

// OR PR1.Comment Print Ship Doc NE PR2.Comment Print Ship Doc
OR PR1.Comment_Print_Ship_Doc <> PR2.Comment_Print_Ship_Doc;

// OR PR1.Reason Code NE PR2.Reason Code
OR PR1.Reason_Code <> PR2.Reason_Code;

// OR PR1.Order in Use NE PR2.Order in Use
OR PR1.Order_in_Use <> PR2.Order_in_Use;

// OR PR1.Header Status NE PR2.Header Status
OR PR1.Header_Status <> PR2.Header_Status;

// OR PR1.Header Status Last NE PR2.Header Status Last
OR PR1.Header_Status_Last <> PR2.Header_Status_Last;

// OR PR1.Order Type Print Status NE PR2.Order Type Print Status
OR PR1.Order_Type_Print_Status <> PR2.Order_Type_Print_Status;

// OR PR1.Scheduled Ship Date NE PR2.Scheduled Ship Date
OR PR1.Scheduled_Ship_Date <> PR2.Scheduled_Ship_Date;

// OR PR1.User Original Entry NE PR2.User Original Entry
OR PR1.User_Original_Entry <> PR2.User_Original_Entry;

// OR PR1.Date of Original Entry NE PR2.Date of Original Entry
OR PR1.Date_of_Original_Entry <> PR2.Date_of_Original_Entry;

// OR PR1.Date of Original Entry NE PR2.Date of Original Entry
OR PR1.Date_of_Original_Entry <> PR2.Date_of_Original_Entry;

// OR PR1.Order Value Total NE PR2.Order Value Total
OR PR1.Order_Value_Total <> PR2.Order_Value_Total;

// OR PR1.Order Weight Total NE PR2.Order Weight Total
OR PR1.Order_Weight_Total <> PR2.Order_Weight_Total;

// OR PR1.Credit Hold NE PR2.Credit Hold
OR PR1.Credit_Hold <> PR2.Credit_Hold;

// OR PR1.Production Hold NE PR2.Production Hold
OR PR1.Production_Hold <> PR2.Production_Hold;

// OR PR1.New Customer Hold NE PR2.New Customer Hold
OR PR1.New_Customer_Hold <> PR2.New_Customer_Hold;

// OR PR1.Requested Delivery Date NE PR2.Requested Delivery Date
OR PR1.Requested_Delivery_Date <> PR2.Requested_Delivery_Date;

// OR PR1.Requested Delivery Time NE PR2.Requested Delivery Time
OR PR1.Requested_Delivery_Time <> PR2.Requested_Delivery_Time;

// OR PR1.Accounts Receiv. Ent 1 NE PR2.Accounts Receiv. Ent 1
OR PR1.Accounts_Receiv_Ent_1 <> PR2.Accounts_Receiv_Ent_1;

// OR PR1.Accounts Receiv. Ent 2 NE PR2.Accounts Receiv. Ent 2
OR PR1.Accounts_Receiv_Ent_2 <> PR2.Accounts_Receiv_Ent_2;

// OR PR1.Load ID NE PR2.Load ID
OR PR1.Load_ID <> PR2.Load_ID;

// LCL.Update Record USR = CND.Yes
LCL.Update_Record_USR = 'Y';

ENDIF;

//?Set Update Flag If Any Next 50 Non-Key Fields Have Changed.
CASE;

// IF PR1.Absorbed Freight Rate CWT NE PR2.Absorbed Freight Rate CWT
IF PR1.Absorbed_Freight_Rate_CWT <> PR2.Absorbed_Freight_Rate_CWT;

// OR PR1.Rated Freight NE PR2.Rated Freight
OR PR1.Rated_Freight <> PR2.Rated_Freight;

// OR PR1.LTL Flag NE PR2.LTL Flag
OR PR1.LTL_Flag <> PR2.LTL_Flag;

// OR PR1.Price Audit NE PR2.Price Audit
OR PR1.Price_Audit <> PR2.Price_Audit;

// OR PR1.Price Status NE PR2.Price Status
OR PR1.Price_Status <> PR2.Price_Status;

// OR PR1.Shipping Method NE PR2.Shipping Method
OR PR1.Shipping_Method <> PR2.Shipping_Method;

// OR PR1.Export Status NE PR2.Export Status
OR PR1.Export_Status <> PR2.Export_Status;

// OR PR1.Palletize NE PR2.Palletize
OR PR1.Palletize <> PR2.Palletize;

// OR PR1.Shrink Wrap NE PR2.Shrink Wrap
OR PR1.Shrink_Wrap <> PR2.Shrink_Wrap;

// OR PR1.Slip Sheet NE PR2.Slip Sheet
OR PR1.Slip_Sheet <> PR2.Slip_Sheet;

// OR PR1.Age Code NE PR2.Age Code
OR PR1.Age_Code <> PR2.Age_Code;

// OR PR1.Reefer Temperature NE PR2.Reefer Temperature
OR PR1.Reefer_Temperature <> PR2.Reefer_Temperature;

// OR PR1.Load Type NE PR2.Load Type
OR PR1.Load_Type <> PR2.Load_Type;

// OR PR1.Attach to Invoice Number NE PR2.Attach to Invoice Number
OR PR1.Attach_to_Invoice_Number <> PR2.Attach_to_Invoice_Number;

// OR PR1.Load Plan Order NE PR2.Load Plan Order
OR PR1.Load_Plan_Order <> PR2.Load_Plan_Order;

// OR PR1.Print Pick Slip NE PR2.Print Pick Slip
OR PR1.Print_Pick_Slip <> PR2.Print_Pick_Slip;

// OR PR1.Resell Reference Number NE PR2.Resell Reference Number
OR PR1.Resell_Reference_Number <> PR2.Resell_Reference_Number;

// OR PR1.Special Comment 1 NE PR2.Special Comment 1
OR PR1.Special_Comment_1 <> PR2.Special_Comment_1;

// OR PR1.Special Comment 2 NE PR2.Special Comment 2
OR PR1.Special_Comment_2 <> PR2.Special_Comment_2;

// OR PR1.Affect Auto Accruals NE PR2.Affect Auto Accruals
OR PR1.Affect_Auto_Accruals <> PR2.Affect_Auto_Accruals;

// OR PR1.Sales Route Code NE PR2.Sales Route Code
OR PR1.Sales_Route_Code <> PR2.Sales_Route_Code;

// OR PR1.Manager Level Code NE PR2.Manager Level Code
OR PR1.Manager_Level_Code <> PR2.Manager_Level_Code;

// OR PR1.VP Level Code NE PR2.VP Level Code
OR PR1.VP_Level_Code <> PR2.VP_Level_Code;

// OR PR1.Attach to Order Number NE PR2.Attach to Order Number
OR PR1.Attach_to_Order_Number <> PR2.Attach_to_Order_Number;

// OR PR1.Reason for Price Audit NE PR2.Reason for Price Audit
OR PR1.Reason_for_Price_Audit <> PR2.Reason_for_Price_Audit;

// OR PR1.Invoice Number NE PR2.Invoice Number
OR PR1.Invoice_Number <> PR2.Invoice_Number;

// OR PR1.Invoice Suffix NE PR2.Invoice Suffix
OR PR1.Invoice_Suffix <> PR2.Invoice_Suffix;

// OR PR1.Invoice Date NE PR2.Invoice Date
OR PR1.Invoice_Date <> PR2.Invoice_Date;

// OR PR1.Event Code NE PR2.Event Code
OR PR1.Event_Code <> PR2.Event_Code;

// OR PR1.Trans Contol AS400/Plant NE PR2.Trans Contol AS400/Plant
OR PR1.Trans_Contol_AS400_Plant <> PR2.Trans_Contol_AS400_Plant;

// OR PR1.Modified Flag NE PR2.Modified Flag
OR PR1.Modified_Flag <> PR2.Modified_Flag;

// OR PR1.A/R order Value Total NE PR2.A/R order Value Total
OR PR1.A_R_order_Value_Total <> PR2.A_R_order_Value_Total;

// OR PR1.Billing Activity Type NE PR2.Billing Activity Type
OR PR1.Billing_Activity_Type <> PR2.Billing_Activity_Type;

// OR PR1.Block Order Flag NE PR2.Block Order Flag
OR PR1.Block_Order_Flag <> PR2.Block_Order_Flag;

// OR PR1.Export USDA Approved NE PR2.Export USDA Approved
OR PR1.Export_USDA_Approved <> PR2.Export_USDA_Approved;

// OR PR1.Order Certification Flag NE PR2.Order Certification Flag
OR PR1.Order_Certification_Flag <> PR2.Order_Certification_Flag;

// OR PR1.Invoice Order Value Tot NE PR2.Invoice Order Value Tot
OR PR1.Invoice_Order_Value_Tot <> PR2.Invoice_Order_Value_Tot;

// OR PR1.Process Sts for 3C NE PR2.Process Sts for 3C
OR PR1.Process_Sts_for_3C <> PR2.Process_Sts_for_3C;

// OR PR1.Order Conf Fax Sts NE PR2.Order Conf Fax Sts
OR PR1.Order_Conf_Fax_Sts <> PR2.Order_Conf_Fax_Sts;

// OR PR1.Manifest Fax Sts NE PR2.Manifest Fax Sts
OR PR1.Manifest_Fax_Sts <> PR2.Manifest_Fax_Sts;

// OR PR1.Invoice Fax Sts NE PR2.Invoice Fax Sts
OR PR1.Invoice_Fax_Sts <> PR2.Invoice_Fax_Sts;

// OR PR1.Transfer in Storage Ind NE PR2.Transfer in Storage Ind
OR PR1.Transfer_in_Storage_Ind <> PR2.Transfer_in_Storage_Ind;

// OR PR1.Email Cust On Order Ship NE PR2.Email Cust On Order Ship
OR PR1.Email_Cust_On_Order_Ship <> PR2.Email_Cust_On_Order_Ship;

// OR PR1.Order Emailed NE PR2.Order Emailed
OR PR1.Order_Emailed <> PR2.Order_Emailed;

// OR PR1.Export Docs Go w/Driver NE PR2.Export Docs Go w/Driver
OR PR1.Export_Docs_Go_w_Driver <> PR2.Export_Docs_Go_w_Driver;

// OR PR1.Shipping Temp Code C/F NE PR2.Shipping Temp Code C/F
OR PR1.Shipping_Temp_Code_C_F <> PR2.Shipping_Temp_Code_C_F;

// OR PR1.Broker Order Status NE PR2.Broker Order Status
OR PR1.Broker_Order_Status <> PR2.Broker_Order_Status;

// OR PR1.Air Freight Order NE PR2.Air Freight Order
OR PR1.Air_Freight_Order <> PR2.Air_Freight_Order;

// OR PR1.Order Requires Review NE PR2.Order Requires Review
OR PR1.Order_Requires_Review <> PR2.Order_Requires_Review;

// OR PR1.OH Load Plan Ready NE PR2.OH Load Plan Ready
OR PR1.OH_Load_Plan_Ready <> PR2.OH_Load_Plan_Ready;

// LCL.Update Record USR = CND.Yes
LCL.Update_Record_USR = 'Y';

ENDIF;

//?Set Update Flag If Any Remaining Non-Key Fields Have Changed.
CASE;

// IF PR1.HPB Ship to Warehouse NE PR2.HPB Ship to Warehouse
IF PR1.HPB_Ship_to_Warehouse <> PR2.HPB_Ship_to_Warehouse;

// OR PR1.OH TF Exempt Code NE PR2.OH TF Exempt Code
OR PR1.OH_TF_Exempt_Code <> PR2.OH_TF_Exempt_Code;

// OR PR1.OH Appt Confirmation Dt NE PR2.OH Appt Confirmation Dt
OR PR1.OH_Appt_Confirmation_Dt <> PR2.OH_Appt_Confirmation_Dt;

// OR PR1.JPN Invoice Issuance Date NE PR2.JPN Invoice Issuance Date
OR PR1.JPN_Invoice_Issuance_Date <> PR2.JPN_Invoice_Issuance_Date;

// OR PR1.Load Actual Shipped Date NE PR2.Load Actual Shipped Date
OR PR1.Load_Actual_Shipped_Date <> PR2.Load_Actual_Shipped_Date;

// OR PR1.Load BOL Complete Date NE PR2.Load BOL Complete Date
OR PR1.Load_BOL_Complete_Date <> PR2.Load_BOL_Complete_Date;

// OR PR1.Load Truck Departure Date NE PR2.Load Truck Departure Date
OR PR1.Load_Truck_Departure_Date <> PR2.Load_Truck_Departure_Date;

// OR PR1.Maximum Gross Weight NE PR2.Maximum Gross Weight
OR PR1.Maximum_Gross_Weight <> PR2.Maximum_Gross_Weight;

// OR PR1.Time of Original Entry NE PR2.Time of Original Entry
OR PR1.Time_of_Original_Entry <> PR2.Time_of_Original_Entry;

// OR PR1.OH Appt Confirmation Tm NE PR2.OH Appt Confirmation Tm
OR PR1.OH_Appt_Confirmation_Tm <> PR2.OH_Appt_Confirmation_Tm;

// OR PR1.Load BOL Complete Time NE PR2.Load BOL Complete Time
OR PR1.Load_BOL_Complete_Time <> PR2.Load_BOL_Complete_Time;

// OR PR1.Load Truck Departure Time NE PR2.Load Truck Departure Time
OR PR1.Load_Truck_Departure_Time <> PR2.Load_Truck_Departure_Time;

// OR PR1.Act Frt Reference Amount NE PR2.Act Frt Reference Amount
OR PR1.Act_Frt_Reference_Amount <> PR2.Act_Frt_Reference_Amount;

// OR PR1.Act Non-Ref Frt Amount NE PR2.Act Non-Ref Frt Amount
OR PR1.Act_Non_Ref_Frt_Amount <> PR2.Act_Non_Ref_Frt_Amount;

// OR PR1.OH Fuel Surcharge Amount NE PR2.OH Fuel Surcharge Amount
OR PR1.OH_Fuel_Surcharge_Amount <> PR2.OH_Fuel_Surcharge_Amount;

// OR PR1.OH Total Non-Ref Frt Amt NE PR2.OH Total Non-Ref Frt Amt
OR PR1.OH_Total_Non_Ref_Frt_Amt <> PR2.OH_Total_Non_Ref_Frt_Amt;

// OR PR1.OH Total Ref Frt Amt NE PR2.OH Total Ref Frt Amt
OR PR1.OH_Total_Ref_Frt_Amt <> PR2.OH_Total_Ref_Frt_Amt;

// OR PR1.Claim Number NE PR2.Claim Number
OR PR1.Claim_Number <> PR2.Claim_Number;

// OR PR1.EDI Status 1 NE PR2.EDI Status 1
OR PR1.EDI_Status_1 <> PR2.EDI_Status_1;

// OR PR1.EDI Status 2 NE PR2.EDI Status 2
OR PR1.EDI_Status_2 <> PR2.EDI_Status_2;

// OR PR1.EDI Status 3 NE PR2.EDI Status 3
OR PR1.EDI_Status_3 <> PR2.EDI_Status_3;

// LCL.Update Record USR = CND.Yes
LCL.Update_Record_USR = 'Y';

ENDIF;

//?Update Record?
CASE;

// IF LCL.Update Record USR is Yes
IF LCL.Update_Record_USR = 'Y';

EXECUTE FUNCTION(Crt BI Order Hdr TRG  CR) TYPE(CRTOBJ) FILE(PTC4CPP)           AC2130502;
PARAMETER(PR2.Company_Number);
PARAMETER(PR2.Order_Number);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.BIOHT_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

ENDIF;

ENDIF;

//?Trigger Processing for Delete Event.
CASE;

// IF PR3.TRG Database Event is Delete
IF PR3.TRG_Database_Event = '2';

EXECUTE FUNCTION(Crt BI Order Hdr TRG  CR) TYPE(CRTOBJ) FILE(PTC4CPP)           AC2130502;
PARAMETER(PR1.Company_Number);
PARAMETER(PR1.Order_Number);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.BIOHT_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

