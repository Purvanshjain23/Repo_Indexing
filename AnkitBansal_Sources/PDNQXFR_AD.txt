// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDNQXFR
// ?Date: 14.08.2025 Time: 03:28:59
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?*** Modification Log ***
DO;

//?TPA071307 - Instead of checking the Authorized Salesperson
//?on the Sales Route file, check against the Sales Route Authority
//?file for the specific approval type.
ENDDO;

// PAR.Access Denied (Y/N) = CND.yes
PAR.Access_Denied_Y_N = 'Y';

//?Allow access if person entered is User; Else check authority
CASE;

// IF PAR.USR Salesperson Code EQ PAR.Salesperson Code
IF PAR.USR_Salesperson_Code = PAR.Salesperson_Code;

// PAR.Access Denied (Y/N) = CND.no
PAR.Access_Denied_Y_N = 'N';

//?Allow access if person entered is User; Else check authority
// IF *OTHERWISE
IF *OTHERWISE;

//?TPA071307 - Add check of Sales Route Authority file
EXECUTE FUNCTION(RTV Check by Full Key  RT) TYPE(RTVOBJ) FILE(PMA7REP)          AC1836072;
PARAMETER(PAR.Salesperson_Code);
PARAMETER(PAR.USR_Salesperson_Code);
PARAMETER(PAR.Approval_Type);
PARAMETER(PAR.Access_Denied_Y_N);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Record Status is Active
 IF DB1.Record_Status = 'A';

 // PAR.Access Denied (Y/N) = CND.no
 PAR.Access_Denied_Y_N = 'N';

 ENDIF;

}


ENDIF;

