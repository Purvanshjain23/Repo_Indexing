// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMF1XFR
// ?Date: 14.08.2025 Time: 03:43:01
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Cnv Init whs fm/OrdHdr RT) TYPE(RTVOBJ) FILE(PMAMREP)          AC1859404;
{
 //?USER: Process Data record

 EXECUTE FUNCTION(RTV Whse/Non Cancelled RT) TYPE(RTVOBJ) FILE(OPBGWKP)          AC1428700;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(1);
 PARAMETER(1);
 PARAMETER(PAR.OHE_Late_Delivery_Code);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  //?C2748:  Changed RTV Warehouse Code RT to exclude Cancelled lines.
  CASE;

  // IF DB1.Detail Line Status is Cancelled
  IF DB1.Detail_Line_Status = 'X';

  // IF *OTHERWISE
  IF *OTHERWISE;

  MOVE *ALL (To: PAR From: DB1);

  QUIT;

  ENDIF;

 }

 //?** If the Order Detail whse and OHE whse don't match, update OHE whse
 CASE;

 // IF DB1.OHE From Warehouse NE PAR.OHE From Warehouse
 IF DB1.OHE_Late_Delivery_Code <> PAR.OHE_Late_Delivery_Code;

 EXECUTE FUNCTION(CHG Order Header Exten CH) TYPE(CHGOBJ) FILE(PMAMREP)          AC1814352;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(DB1.Load_ID);
 PARAMETER(DB1.Stop_Drop_Sequence_Number);
 PARAMETER(DB1.Shipping_Line);
 PARAMETER(DB1.Port_Delv_Terminal);
 PARAMETER(DB1.OHE_City);
 PARAMETER(DB1.OHE_Vessel_Airline);
 PARAMETER(DB1.OHE_Voyage_Flight);
 PARAMETER(DB1.OHE_Booking_Number);
 PARAMETER(DB1.OHE_Discharge_Port_Airprt);
 PARAMETER(DB1.OHE_Sail_Flight_Date);
 PARAMETER(DB1.OHE_Port_Cut_Date);
 PARAMETER(DB1.OHE_Arrival_Date);
 PARAMETER(PAR.OHE_Late_Delivery_Code);
 PARAMETER(DB1.OHE_Ship_Status);
 PARAMETER(DB1.OHE_Container_Number);
 PARAMETER(DB1.OHE_Comment_1);
 PARAMETER(DB1.OHE_Comment_2);
 PARAMETER(DB1.OHE_Unused_Number_1_11_0);
 PARAMETER(DB1.OHE_Unused_Number_2_11_0);
 PARAMETER(DB1.OHE_Unused_Number_3_11_0);
 PARAMETER(DB1.OHE_Unused_Number_4_11_0);
 PARAMETER(DB1.OHE_HPB_RIN_Equiv_Value);
 PARAMETER(DB1.OHE_HPB_RIN_Price);
 PARAMETER(DB1.Transload_Terminal_Fees);
 PARAMETER(DB1.OHE_Est_Arrv_at_Dest_Date);
 PARAMETER(DB1.OHE_Backhaul_ETA_RtrnDate);
 PARAMETER(DB1.OHE_Port_Pier_Paid_Date);
 PARAMETER(DB1.OHE_Actual_Ship_Date);
 PARAMETER(DB1.OHE_Carrier_SCAC_Code);
 PARAMETER(DB1.OHE_Spot_Buy);
 PARAMETER(DB1.OHE_PO_ACK_Flag);
 PARAMETER(DB1.OHE_Override_Type_Code);
 PARAMETER(DB1.OHE_Backhaul_Status);
 PARAMETER(DB1.OHE_Backhaul_ETA_AM_PM);
 PARAMETER(DB1.OHE_Load_Haul_Type);
 PARAMETER(DB1.OHE_Backhaul_Carrier_Code);
 PARAMETER(DB1.OHE_Bookings_Confirmed);
 PARAMETER(DB1.OHE_EDI_Error_Reasons);
 PARAMETER(*MISSING);
 PARAMETER(DB1.HPB_COA_Batch_Number);
 PARAMETER(DB1.Delivery_P_O_Number);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(*MISSING);
 PARAMETER(DB1.EDI_Status_1);
 PARAMETER(DB1.EDI_Status_2);
 PARAMETER(DB1.EDI_Status_3);
 PARAMETER(DB1.Record_Status);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
 {
  //?USER: Processing if Data record not found

  EXECUTE FUNCTION(CRT Existing OHE       CR) TYPE(CRTOBJ) FILE(PMAMREP)          AC1816936;
  PARAMETER(PAR.Company_Number);
  PARAMETER(PAR.Order_Number);
  PARAMETER(PAR.Load_ID);
  PARAMETER(PAR.Stop_Drop_Sequence_Number);
  PARAMETER(PAR.Shipping_Line);
  PARAMETER(PAR.Port_Delv_Terminal);
  PARAMETER(PAR.OHE_City);
  PARAMETER(PAR.OHE_Vessel_Airline);
  PARAMETER(PAR.OHE_Voyage_Flight);
  PARAMETER(PAR.OHE_Booking_Number);
  PARAMETER(PAR.OHE_Discharge_Port_Airprt);
  PARAMETER(PAR.OHE_Sail_Flight_Date);
  PARAMETER(PAR.OHE_Port_Cut_Date);
  PARAMETER(PAR.OHE_Arrival_Date);
  PARAMETER(PAR.OHE_Late_Delivery_Code);
  PARAMETER(PAR.OHE_Ship_Status);
  PARAMETER(PAR.OHE_Container_Number);
  PARAMETER(PAR.OHE_Comment_1);
  PARAMETER(PAR.OHE_Comment_2);
  PARAMETER(PAR.OHE_Unused_Number_1_11_0);
  PARAMETER(PAR.OHE_Unused_Number_2_11_0);
  PARAMETER(PAR.OHE_Unused_Number_3_11_0);
  PARAMETER(PAR.OHE_Unused_Number_4_11_0);
  PARAMETER(PAR.OHE_HPB_RIN_Equiv_Value);
  PARAMETER(PAR.OHE_HPB_RIN_Price);
  PARAMETER(PAR.Transload_Terminal_Fees);
  PARAMETER(PAR.OHE_Est_Arrv_at_Dest_Date);
  PARAMETER(PAR.OHE_Backhaul_ETA_RtrnDate);
  PARAMETER(PAR.OHE_Port_Pier_Paid_Date);
  PARAMETER(PAR.OHE_Actual_Ship_Date);
  PARAMETER(PAR.OHE_Carrier_SCAC_Code);
  PARAMETER(PAR.OHE_Spot_Buy);
  PARAMETER(PAR.OHE_PO_ACK_Flag);
  PARAMETER(PAR.OHE_Override_Type_Code);
  PARAMETER(PAR.OHE_Backhaul_Status);
  PARAMETER(PAR.OHE_Backhaul_ETA_AM_PM);
  PARAMETER(PAR.OHE_Load_Haul_Type);
  PARAMETER(PAR.OHE_Backhaul_Carrier_Code);
  PARAMETER(PAR.OHE_Bookings_Confirmed);
  PARAMETER(PAR.OHE_EDI_Error_Reasons);
  PARAMETER(PAR.OHE_EDI_Error_Reasons_2);
  PARAMETER(PAR.HPB_COA_Batch_Number);
  PARAMETER(PAR.Delivery_P_O_Number);
  PARAMETER(PAR.OHE_Intended_for_ExportCC);
  PARAMETER(PAR.OHE_EDI_943_Action);
  PARAMETER(PAR.OHE_EDI_944_Action);
  PARAMETER(PAR.OHE_EDI_940_Action);
  PARAMETER(PAR.OHE_EDI_945_Action);
  PARAMETER(PAR.OHE_EDI_856_Action);
  PARAMETER(PAR.OHE_EDI_824_Action);
  PARAMETER(PAR.OHE_Transload_Seal_Nbr);
  PARAMETER(PAR.OHE_Abs_Rate_Override_Rsn);
  PARAMETER(PAR.OHE_Appt_Confirmation_#);
  PARAMETER(PAR.OHE_Backhaul_Container#);
  PARAMETER(PAR.OHE_Backhaul_Chassis_#);
  PARAMETER(PAR.OHE_Transload_Container#);
  PARAMETER(PAR.OHE_Pier_Pass_Invoice);
  PARAMETER(PAR.OHE_Carrier_Nm);
  PARAMETER(PAR.OHE_Appt_Confirmation_Nm);
  PARAMETER(PAR.OHE_Backhaul_Comment);
  PARAMETER(PAR.Letter_of_Credit_Number);
  PARAMETER(PAR.OHE_Backhaul_Return_to_Co);
  PARAMETER(PAR.LD_Stop_Drop);
  PARAMETER(PAR.OHE_Unused_Number_3_0);
  PARAMETER(PAR.OHE_Pier_Pass_Fee_Amount);
  PARAMETER(PAR.OHE_Port_Check_Fee_Amount);
  PARAMETER(PAR.OHE_Port_Cut_Time);
  PARAMETER(PAR.OHE_Backhaul_Truck_Number);
  PARAMETER(PAR.OHE_Load_Sched_Seq_Num);
  PARAMETER(PAR.Original_Appointment_Date);
  PARAMETER(PAR.Original_Appointment_Time);
  PARAMETER(PAR.OHE_PowerPro_Load#_Outbnd);
  PARAMETER(PAR.OHE_PowerPro_Load#_Bckhl);
  PARAMETER(PAR.OHE_Unused_Numeric_9_0_3);
  PARAMETER(PAR.OHE_Orig_ABS_Freight_Rate);
  PARAMETER(PAR.OHE_Genset_Number);
  PARAMETER(PAR.OHE_Email_BOL_Sent);
  PARAMETER(PAR.OHE_EDI_Order_Automated);
  PARAMETER(PAR.OHE_EDI_601_Action);
  PARAMETER(PAR.OHE_Unused_Status_4);
  PARAMETER(PAR.OHE_Unused_Text_1);
  PARAMETER(PAR.OHE_Unused_Text_2);
  PARAMETER(PAR.OHE_Customer_Vendor_f_PO);
  PARAMETER(PAR.OHE_EDI_824_AES_ITN_#);
  PARAMETER(PAR.OHE_Unused_Text_5);
  PARAMETER(PAR.OHE_Unused_Date_1);
  PARAMETER(PAR.OHE_Unused_Date_2);
  PARAMETER(PAR.EDI_Status_1);
  PARAMETER(PAR.EDI_Status_2);
  PARAMETER(PAR.EDI_Status_3);
  PARAMETER(PAR.Record_Status);
  PARAMETER(PAR.Job_Time);
  PARAMETER(PAR.User_Id);
  PARAMETER(PAR.Job_Name);
  PARAMETER(PAR.Job_Date);
  {
   //?USER: Processing before Data update

   // DB1.Job Time = JOB.*Job time
   DB1.Job_Time = JOB.*Job_time;

   // DB1.Job Date = JOB.*Job date
   DB1.Job_Date = JOB.*Job_date;

   // DB1.Job Name = JOB.*PROGRAM
   DB1.Job_Name = JOB.*PROGRAM;

   // DB1.User Id = JOB.*USER
   DB1.User_Id = JOB.*USER;

  }

  //?USER: Processing before Data update

  // DB1.Job Time = JOB.*Job time
  DB1.Job_Time = JOB.*Job_time;

  // DB1.Job Date = JOB.*Job date
  DB1.Job_Date = JOB.*Job_date;

  // DB1.Job Name = JOB.*PROGRAM
  DB1.Job_Name = JOB.*PROGRAM;

  // DB1.User Id = JOB.*USER
  DB1.User_Id = JOB.*USER;

 }

 ENDIF;

}


//?***** Change Log and Comments
DO;

//?** Change XF to update records only if the warehouse code is blank
ENDDO;

