// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PWK5XFR
// ?Date: 14.08.2025 Time: 02:56:46
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?comments
DO;

//?9/18/2020 slm
//?This prgram will read all records that are not *blanks
//?and change the status to *blanks.  This process is used
//?to restart using the tattoo numbers again from the beginning
ENDDO;

EXECUTE FUNCTION(Upd Tattoo Nbr *blanks RT) TYPE(RTVOBJ) FILE(PKATREP)          AB1354623;
PARAMETER(PAR.Company);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Tattoo Usage Status is Tattoo number Used
 IF DB1.Tattoo_Usage_Status = 'U';

 //?Change to not used
 EXECUTE FUNCTION(Chg Tattoo Nbr        CH) TYPE(CHGOBJ) FILE(PKATREP)           AB1354068;
 PARAMETER(DB1.Company);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.Tattoo_Nbr_Group);
 PARAMETER(DB1.Tattoo_Nbr_Group_Seq);
 PARAMETER(*BLANK);
 PARAMETER(DB1.RS_User_Changed);
 PARAMETER(DB1.RS_Date_Changed);
 PARAMETER(DB1.RS_Time_Changed);
 PARAMETER(DB1.RS_Record_Status);
 PARAMETER(DB1.RS_Job);
 PARAMETER(DB1.RS_Program);
 PARAMETER(DB1.RS_User_Added);
 PARAMETER(DB1.RS_Date_Added);
 PARAMETER(DB1.RS_Time_Added);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Rtv Change Stamp-SysDtIF) TYPE(EXCINTFUN)                      AB1237006;
  PARAMETER(DB1.RS_User_Changed);
  PARAMETER(DB1.RS_Date_Changed);
  PARAMETER(DB1.RS_Time_Changed);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  {
   //?Execute internal function

   // PAR.RS User Changed = JOB.*USER
   PAR.RS_User_Changed = JOB.*USER;

   // Call program Rtv System Date & Tim UP.
   CALL PROGRAM(Rtv System Date & Tim UP) ('PKWDUPC');
   PARAMETER(PAR.RS_Date_Changed);
   PARAMETER(PAR.RS_Time_Changed);

   // PAR.RS Job = JOB.*JOB
   PAR.RS_Job = JOB.*JOB;

   // PAR.RS Program = JOB.*PROGRAM
   PAR.RS_Program = JOB.*PROGRAM;

  }

 }

 // IF *OTHERWISE
 IF *OTHERWISE;

 ENDIF;

}


