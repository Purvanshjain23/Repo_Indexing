// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKTBXFR
// ?Date: 14.08.2025 Time: 02:52:41
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modification history
DO;

//? 5/30/2017 JJH E9815 - Pass in Company Number from Job Schedule
//? 4/04/2017 JBB E9815 - Add processing for companies 440 and 961
//?                       Made Company# primary key to this function.
ENDDO;

//?E9815 JJH 05/30/17 - Pass in Company Number from Job Schedule
// LCL.CC Company Number = CVTVAR(PAR.CC Company Num-Alpha)
LCL.CC_Company_Number = CVTVAR(PAR.CC_Company_Num_Alpha);

// Call program Rtv Prior Sunday      XF.
CALL PROGRAM(Rtv Prior Sunday      XF) ('PDLNXFR');
PARAMETER(LCL.CC_Company_Number);
PARAMETER(JOB.*Job_date);
PARAMETER(LCL.Date_USR);

//?Do not select if Holiday or if Weekend Date is = to this weekend date
DO;

ENDDO;

//?1WK:
// LCL.Week(1)               USR = LCL.Date USR + CON.-6 *DAYS
LCL.Week1_USR = DATEINCR(LCL.Date_USR '-6' 'DY' 1111111 'NONE' 'N' 1);

//?2WK:
// LCL.Date From USR = LCL.Week(1)               USR + CON.-1 *DAYS
LCL.Date_From_USR = DATEINCR(LCL.Week1_USR '-1' 'DY' 1111111 'NONE' 'N' 1);

// LCL.Week(2)               USR = LCL.Date From USR + CON.-6 *DAYS
LCL.Week2_USR = DATEINCR(LCL.Date_From_USR '-6' 'DY' 1111111 'NONE' 'N' 1);

//?4WK:
// LCL.Date To   USR = LCL.Week(2)               USR + CON.-1 *DAYS
LCL.Date_To_USR = DATEINCR(LCL.Week2_USR '-1' 'DY' 1111111 'NONE' 'N' 1);

// LCL.Week(4) = LCL.Date To   USR + CON.-13 *DAYS
LCL.Week4 = DATEINCR(LCL.Date_To_USR '-13' 'DY' 1111111 'NONE' 'N' 1);

//?E9815 JJH 05/30/17 - Use Company Number passed in from Job Schedule
// Call program Clc Producer History  PF.
CALL PROGRAM(Clc Producer History  PF) ('PKTDPFR');
PARAMETER(LCL.CC_Company_Number);
PARAMETER(LCL.Week1_USR);
PARAMETER(LCL.Date_USR);
PARAMETER(LCL.Week2_USR);
PARAMETER(LCL.Date_From_USR);
PARAMETER(LCL.Week4);
PARAMETER(LCL.Date_To_USR);
PARAMETER(LCL.Text_1_USR);

// Call program Prt Prod History Summ PF.
CALL PROGRAM(Prt Prod History Summ PF) ('PKVEPFR');
PARAMETER(LCL.CC_Company_Number);
PARAMETER(LCL.Date_USR);

