/***************************************************************** */
/*                                                                 */
/*  System:          Hog Procurement System  (HPS)                 */
/*  Program Number:  HPSDIBDDCL                                    */
/*  Program Name:    Safe Data BGF Daily Upload Driver             */
/*  Programmer:      Brad Baden                                    */
/*  Create Date:     08/19/2021                                    */
/*                                                                 */
/*  Function:        This CL is called from Informatica and        */
/*                   submits HPSDIBDCL to upload the Sow Daily     */
/*                   data from SafeData.                           */
/*                                                                 */
/*                   The job is submitted to jobq DMLIVEQ.         */
/*                                                                 */
/*********************************************************************/
/*  MODIFIED BY     ->                                               */
/*********************************************************************/

             PGM

             DCL        VAR(&JOBD)   TYPE(*CHAR) LEN(10)
             DCL        VAR(&JOBQ)   TYPE(*CHAR) LEN(10)
             DCL        VAR(&GRPPRF) TYPE(*CHAR) LEN(10)

             CHGJOB     LOG(4 99 *SECLVL) LOGCLPGM(*YES)

/*-------------------------------------------------------------------*/
/*  Set Jobd and library list based on user's group profile          */
/*-------------------------------------------------------------------*/

          /* Retrive user's Group Profile for library list */
             RTVUSRPRF  GRPPRF(&GRPPRF)

/* Set library list                                                  */
             SELECT
               WHEN     COND(&GRPPRF *EQ 'SBDPGMR') THEN(DO)
                 CHGVAR VAR(&JOBD) VALUE('PRKINTT' )
               ENDDO

               WHEN     COND(&GRPPRF *NE 'SBDPGMR') THEN(DO)
                 CHGVAR VAR(&JOBD) VALUE('PRKPRDGUY' )
               ENDDO
             ENDSELECT

/* Submit job                                                        */
             SBMJOB     CMD(CALL PGM(HPSDIBDCL)) JOB(HPSDIBD) +
                          JOBD(&JOBD) JOBQ(DMLIVEQ) INLLIBL(*JOBD) +
                          LOG(4 99 *SECLVL) LOGCLPGM(*YES)

 ENDIT:      ENDPGM
