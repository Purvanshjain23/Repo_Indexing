// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLLOXFR
// ?Date: 14.08.2025 Time: 02:54:37
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?MODIFICATIONS
//?11/02/2020 ISE H16853 - CHANGE BUY ORDER NUMBER FIELD LENGTH FROM 5 TO 7
EXECUTE FUNCTION(Crt/Chg TttDtl Kill/Af RT) TYPE(RTVOBJ) FILE(PKA2CPP)          AB1186417;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.BOH_Buy_Order_Number);
PARAMETER(PAR.BOL_Load_Number);
PARAMETER(PAR.TH_Tattoo_Number);
PARAMETER(PAR.TH_Kill_Date);
PARAMETER(PAR.TD_Sequence_Number);
PARAMETER(PAR.TD_Live_Wgt);
PARAMETER(PAR.TD_Pen_Head);
PARAMETER(PAR.TD_Avg_Live_Wgt);
PARAMETER(PAR.TD_Gen_Bal_To_Kill);
PARAMETER(PAR.TD_Recs_Created_for_HO);
PARAMETER(PAR.TD_User_Status_2);
PARAMETER(PAR.TD_User_Status_3);
PARAMETER(PAR.TD_User_Date_1);
PARAMETER(PAR.TD_User_Date_2);
PARAMETER(PAR.Pen_Company_Number);
PARAMETER(PAR.Pen_Number);
{
 //?USER: Processing if Data record not found

 EXECUTE FUNCTION(Create Tattoo Detail) TYPE(CRTOBJ) FILE(PKA2CPP)               AB1101750;
 PARAMETER(PAR.BOH_Company_Number);
 PARAMETER(PAR.BOH_Buy_Order_Number);
 PARAMETER(PAR.BOL_Load_Number);
 PARAMETER(PAR.TH_Tattoo_Number);
 PARAMETER(PAR.TH_Kill_Date);
 PARAMETER(PAR.TD_Sequence_Number);
 PARAMETER(PAR.TD_Live_Wgt);
 PARAMETER(PAR.TD_Pen_Head);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*BLANK);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(PAR.TD_Avg_Live_Wgt);
 PARAMETER(PAR.TD_Gen_Bal_To_Kill);
 PARAMETER('Y');
 PARAMETER(PAR.TD_User_Status_2);
 PARAMETER(PAR.TD_User_Status_3);
 PARAMETER(PAR.TD_User_Date_1);
 PARAMETER(PAR.TD_User_Date_2);
 PARAMETER(*ZERO);
 PARAMETER(PAR.Pen_Company_Number);
 PARAMETER(PAR.Pen_Number);
 PARAMETER('O');
 PARAMETER(*ZERO);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER('A');
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(*BLANK);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Rtv Add Stamp         IF) TYPE(EXCINTFUN)                      AB1100935;
  PARAMETER(DB1.RS_Record_Status);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  PARAMETER(DB1.RS_User_Added);
  PARAMETER(DB1.RS_Date_Added);
  PARAMETER(DB1.RS_Time_Added);
  {
   //?Execute internal function

   // PAR.RS Record Status = CND.Active
   PAR.RS_Record_Status = 'A';

   // PAR.RS User Added = JOB.*USER
   PAR.RS_User_Added = JOB.*USER;

   // PAR.RS Date Added = JOB.*Job date
   PAR.RS_Date_Added = JOB.*Job_date;

   // PAR.RS Time Added = JOB.*Job time
   PAR.RS_Time_Added = JOB.*Job_time;

   // PAR.RS Program = JOB.*PROGRAM
   PAR.RS_Program = JOB.*PROGRAM;

   // PAR.RS Job = JOB.*JOB
   PAR.RS_Job = JOB.*JOB;

  }

 }

 //?USER: Process Data record

 EXECUTE FUNCTION(Chg TDtl A/SntKilNR SydCH) TYPE(CHGOBJ) FILE(PKA2CPP)          AB1186398;
 PARAMETER(PAR.BOH_Company_Number);
 PARAMETER(PAR.BOH_Buy_Order_Number);
 PARAMETER(PAR.BOL_Load_Number);
 PARAMETER(PAR.TH_Tattoo_Number);
 PARAMETER(PAR.TH_Kill_Date);
 PARAMETER(PAR.TD_Sequence_Number);
 PARAMETER(PAR.TD_Live_Wgt);
 PARAMETER(PAR.TD_Pen_Head);
 PARAMETER(PAR.Pen_Company_Number);
 PARAMETER(PAR.Pen_Number);
 {
  //?USER: Processing after Data read

  //?H163749 SLM 8/18/2020
  //?change from jobdate to system date
  EXECUTE FUNCTION(Rtv Change Stamp-SysDtIF) TYPE(EXCINTFUN)                      AB1237006;
  PARAMETER(DB1.RS_User_Changed);
  PARAMETER(DB1.RS_Date_Changed);
  PARAMETER(DB1.RS_Time_Changed);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  {
   //?Execute internal function

   // PAR.RS User Changed = JOB.*USER
   PAR.RS_User_Changed = JOB.*USER;

   // Call program Rtv System Date & Tim UP.
   CALL PROGRAM(Rtv System Date & Tim UP) ('PKWDUPC');
   PARAMETER(PAR.RS_Date_Changed);
   PARAMETER(PAR.RS_Time_Changed);

   // PAR.RS Job = JOB.*JOB
   PAR.RS_Job = JOB.*JOB;

   // PAR.RS Program = JOB.*PROGRAM
   PAR.RS_Program = JOB.*PROGRAM;

  }

 }

}


