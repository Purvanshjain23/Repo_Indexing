// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKUTXFR
// ?Date: 14.08.2025 Time: 02:50:32
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?H16853 ISE 11/09/2020 - Recompiled due to change in Buy Order Number
EXECUTE FUNCTION(Crt Ttto Drv f/1day   RT) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1153033;
PARAMETER(PAR.BOH_Company_Number);
PARAMETER(PAR.TH_Kill_Date);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.TH Kill Date EQ PAR.TH Kill Date
 IF DB1.TH_Kill_Date = PAR.TH_Kill_Date;

 // WRK.Tattoo Sequence Number = WRK.Tattoo Sequence Number + CON.1
 WRK.Tattoo_Sequence_Number = WRK.Tattoo_Sequence_Number + 1;

 EXECUTE FUNCTION(Create Tattoo Header Driv) TYPE(CRTOBJ) FILE(PKC6CPP)          AB1148318;
 PARAMETER(WRK.Tattoo_Sequence_Number);
 PARAMETER('Carc Sum');
 PARAMETER(DB1.TH_AP_Voucher_Document#);
 PARAMETER(DB1.TH_Voucher_Payment_Date);
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.TH_Kill_Date);
 PARAMETER(DB1.RS_User_Changed);
 PARAMETER(DB1.RS_Date_Changed);
 PARAMETER(DB1.RS_Time_Changed);
 PARAMETER(DB1.RS_Record_Status);
 PARAMETER(DB1.RS_Job);
 PARAMETER(DB1.RS_Program);
 PARAMETER(DB1.RS_User_Added);
 PARAMETER(DB1.RS_Date_Added);
 PARAMETER(DB1.RS_Time_Added);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Rtv Add Stamp         IF) TYPE(EXCINTFUN)                      AB1100935;
  PARAMETER(DB1.RS_Record_Status);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  PARAMETER(DB1.RS_User_Added);
  PARAMETER(DB1.RS_Date_Added);
  PARAMETER(DB1.RS_Time_Added);
  {
   //?Execute internal function

   // PAR.RS Record Status = CND.Active
   PAR.RS_Record_Status = 'A';

   // PAR.RS User Added = JOB.*USER
   PAR.RS_User_Added = JOB.*USER;

   // PAR.RS Date Added = JOB.*Job date
   PAR.RS_Date_Added = JOB.*Job_date;

   // PAR.RS Time Added = JOB.*Job time
   PAR.RS_Time_Added = JOB.*Job_time;

   // PAR.RS Program = JOB.*PROGRAM
   PAR.RS_Program = JOB.*PROGRAM;

   // PAR.RS Job = JOB.*JOB
   PAR.RS_Job = JOB.*JOB;

  }

 }

 ENDIF;

}


