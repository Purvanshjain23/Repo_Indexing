// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PNNBXFR
// ?Date: 14.08.2025 Time: 03:45:46
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Upd Fix TF/CM/SB Amt  RT) TYPE(RTVOBJ) FILE(OPBFCPP)           AC1962550;
PARAMETER(1091112);
{
 //?USER: Initialize routine

 // WRK.Invoice Date = CON.1091112
 WRK.Invoice_Date = 1091112;

 // WRK.To Date               USR = CON.1091119
 WRK.To_Date_USR = 1091119;

 //?USER: Process Data record

 CASE;

 // IF DB1.Invoice Date GE WRK.Invoice Date
 IF DB1.Invoice_Date >= WRK.Invoice_Date;

 // AND DB1.Invoice Date LE WRK.To Date               USR
 AND DB1.Invoice_Date <= WRK.To_Date_USR;

 //?SEL: Billing Activity Type = 1
 CASE;

 // IF DB1.Billing Activity Type is Invoice
 IF DB1.Billing_Activity_Type = '1';

 // LCL.Status Flag 1  Y/N = CND.Yes
 LCL.Status_Flag_1_Y_N = 'Y';

 //?SEL: Billing Activity Type = 1
 // IF *OTHERWISE
 IF *OTHERWISE;

 // LCL.Status Flag 1  Y/N = CND.No
 LCL.Status_Flag_1_Y_N = 'N';

 ENDIF;

 CASE;

 // IF LCL.Status Flag 1  Y/N is Yes
 IF LCL.Status_Flag_1_Y_N = 'Y';

 EXECUTE FUNCTION(RTV 1st Warehouse      RT) TYPE(RTVOBJ) FILE(OPBGWKP)          AC1575817;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Order_Number);
 PARAMETER(1);
 PARAMETER(1);
 PARAMETER(LCL.Warehouse_Code);
 {
  //?USER: Process Data record

  // PAR.Warehouse Code = DB1.Warehouse Code
  PAR.Warehouse_Code = DB1.Warehouse_Code;

  QUIT;

 }

 EXECUTE FUNCTION(Rtv Acct Co          RT) TYPE(RTVOBJ) FILE(CAADREP)            AC1802492;
 PARAMETER(LCL.Warehouse_Code);
 PARAMETER(LCL.Accounting_Company);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 // Call program Zzz Fix TF/CM/SB Amt  XF.
 CALL PROGRAM(Zzz Fix TF/CM/SB Amt  XF) ('PPF8XFR');
 PARAMETER(LCL.Accounting_Company);
 PARAMETER(DB1.Order_Number);

 ENDIF;

 ENDIF;

}


