// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBV8PVR
// ?Date: 14.08.2025 Time: 03:49:32
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

// PAR.Company Number = CON.360
PAR.Company_Number = 360;

// WRK.HPS Beg Week 8/0 = CON.*ZERO
WRK.HPS_Beg_Week_8_0 = *ZERO;

// WRK.HPS End Week 8/0 = CON.*ZERO
WRK.HPS_End_Week_8_0 = *ZERO;

//?USER: Validate fields

CASE;

// IF DTL.HPS Business Office EQ WRK.HPS Business Office
IF DTL.HPS_Business_Office = WRK.HPS_Business_Office;

// Send error message - 'You must select one from the list.'
ERROR(USR3628);

ENDIF;

//?CALC: Screen function fields

// DTL.HPS Beg Week 8/0 = CON.*ZERO
DTL.HPS_Beg_Week_8_0 = *ZERO;

// DTL.HPS End Week 8/0 = CON.*ZERO
DTL.HPS_End_Week_8_0 = *ZERO;

// Call program Rtv Sun/Sat/Yr/Wk HPS2XF.
CALL PROGRAM(Rtv Sun/Sat/Yr/Wk HPS2XF) ('PBV3XFR');
PARAMETER(DTL.Company_Number);
PARAMETER(DTL.HPS_Calendar_Year);
PARAMETER(DTL.HPS_Calendar_Week);
PARAMETER(WRK.HPS_Beg_Week);
PARAMETER(WRK.HPS_End_Week);
PARAMETER(DTL.HPS_Beg_Week_8_0);
PARAMETER(DTL.HPS_End_Week_8_0);

CASE;

// IF DTL.HPS Calendar Year is equal to zero
IF DTL.HPS_Calendar_Year = *ZERO;

// DTL.HPS Beg Week 8/0 = CON.*ZERO
DTL.HPS_Beg_Week_8_0 = *ZERO;

// DTL.HPS End Week 8/0 = CON.*ZERO
DTL.HPS_End_Week_8_0 = *ZERO;

// IF DTL.HPS Calendar Week is Equal to Zero
IF DTL.HPS_Calendar_Week = *ZERO;

// DTL.HPS Beg Week 8/0 = CON.*ZERO
DTL.HPS_Beg_Week_8_0 = *ZERO;

// DTL.HPS End Week 8/0 = CON.*ZERO
DTL.HPS_End_Week_8_0 = *ZERO;

ENDIF;

//?USER: Validate relations

CASE;

// IF DTL.HPS Beg Week 8/0 EQ WRK.HPS Beg Week 8/0
IF DTL.HPS_Beg_Week_8_0 = WRK.HPS_Beg_Week_8_0;

// Send error message - 'Selection not allowed on output field.'
ERROR(USR2389);

// IF DTL.HPS End Week 8/0 EQ WRK.HPS End Week 8/0
IF DTL.HPS_End_Week_8_0 = WRK.HPS_End_Week_8_0;

// Send error message - 'Selection not allowed on output field.'
ERROR(USR2389);

ENDIF;

//?USER: User defined action

// Call program Rtv Sun/Sat/Yr/Wk HPS2XF.
CALL PROGRAM(Rtv Sun/Sat/Yr/Wk HPS2XF) ('PBV3XFR');
PARAMETER(PAR.Company_Number);
PARAMETER(DTL.HPS_Calendar_Year);
PARAMETER(DTL.HPS_Calendar_Week);
PARAMETER(WRK.HPS_Beg_Week);
PARAMETER(WRK.HPS_End_Week);
PARAMETER(WRK.HPS_Beg_Week_8_0);
PARAMETER(WRK.HPS_End_Week_8_0);

// Call program Zzz CF Weekly Tran    Clp.
CALL PROGRAM(Zzz CF Weekly Tran    Clp) ('PBWAUPRCLP');
PARAMETER(WRK.Return_Code_Usr);
PARAMETER(DTL.HPS_Business_Office);
PARAMETER(DTL.HPS_Calendar_Year);
PARAMETER(DTL.HPS_Calendar_Week);
PARAMETER(WRK.HPS_Beg_Week_8_0);
PARAMETER(WRK.HPS_End_Week_8_0);
PARAMETER(DTL.Email_Address);

