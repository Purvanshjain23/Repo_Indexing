// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDMGXFR
// ?Date: 14.08.2025 Time: 03:28:44
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?05/12/04 SLM PKTR01 Multi-Company - Order Header TRG Remove Co
//?                                    from Logical View
// PAR.@Numeric 15.2 = CON.*ZERO
PAR.@Numeric_15_2 = *ZERO;

EXECUTE FUNCTION(RTV All Ord by Parent  RT) TYPE(RTVOBJ) FILE(OPBFCPP)          AC1306899;
PARAMETER(PAR.AR_Customer_Number);
PARAMETER(PAR.@Numeric_15_2);
PARAMETER(PAR.Parent_Customer);
{
 //?USER: Initialize routine

 //?05/12/04 SLM PKTR01 Multi-Company - Function was changed
 //?                                    to remove Company RST or Pos
 //?USER: Process Data record

 CASE;

 // IF DB1.Header Status is Not cancelled
 IF DB1.Header_Status = 'L'/'A'/'C'/'R'/'E'/'H'/'I';

 CASE;

 // IF PAR.A/R Customer Number EQ DB1.A/R Customer Number
 IF PAR.AR_Customer_Number = DB1.AR_Customer_Number;

 // PAR.@Numeric 15.2 = PAR.@Numeric 15.2 + DB1.Order Value Total
 PAR.@Numeric_15_2 = PAR.@Numeric_15_2 + DB1.Order_Value_Total;

 // IF *OTHERWISE
 IF *OTHERWISE;

 EXECUTE FUNCTION(RTV Parent Customer    RT) TYPE(RTVOBJ) FILE(CABBREP)          AC1225254;
 PARAMETER(DB1.AR_Customer_Number);
 PARAMETER(WRK.Parent_Customer);
 {
  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 CASE;

 // IF WRK.Parent Customer EQ PAR.Parent Customer
 IF WRK.Parent_Customer = PAR.Parent_Customer;

 // PAR.@Numeric 15.2 = PAR.@Numeric 15.2 + DB1.Order Value Total
 PAR.@Numeric_15_2 = PAR.@Numeric_15_2 + DB1.Order_Value_Total;

 ENDIF;

 ENDIF;

 ENDIF;

}


