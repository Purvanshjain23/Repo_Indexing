// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POWTXFR
// ?Date: 14.08.2025 Time: 03:39:24
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Upd Line/Structure    RT) TYPE(RTVOBJ) FILE(POCQCPP)           AC1668645;
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Rtv Item Str w/PrtlCd RT) TYPE(RTVOBJ) FILE(CABZREP)           AC1668648;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Partial_Item_Code);
 PARAMETER(LCL.Item_Code);
 PARAMETER(LCL.Item_Structure_Class_Code);
 PARAMETER(LCL.Item_Structure_Group_Code);
 PARAMETER(LCL.Item_Structure_Type_Code);
 PARAMETER(LCL.Record_Found_USR);
 {
  //?USER: Processing if Data record not found

  // PAR.Record Found USR = CND.Record Not Found
  PAR.Record_Found_USR = 'N';

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

  // PAR.Record Found USR = CND.Record Found
  PAR.Record_Found_USR = 'Y';

 }

 CASE;

 // IF LCL.Record Found USR is Record Found
 IF LCL.Record_Found_USR = 'Y';

 EXECUTE FUNCTION(Rtv Dept/Line         RT) TYPE(RTVOBJ) FILE(POCNREP)           AC1664090;
 PARAMETER(LCL.Item_Structure_Type_Code);
 PARAMETER(LCL.Item_Structure_Group_Code);
 PARAMETER(LCL.Item_Structure_Class_Code);
 PARAMETER(LCL.Department_Code);
 PARAMETER(LCL.Production_Line_Code);
 PARAMETER(LCL.WIP_Usage_Dept_Code);
 PARAMETER(LCL.WIP_Usage_Prod_Line_Code);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 CASE;

 // IF DB1.Department Code EQ LCL.Department Code
 IF ( DB1.Department_Code = LCL.Department_Code;

 // AND DB1.Production Line Code EQ LCL.Production Line Code
 AND DB1.Production_Line_Code = LCL.Production_Line_Code );

 // AND DB1.Item Structure Type Code NE LCL.Item Structure Type Code
 AND ( DB1.Item_Structure_Type_Code <> LCL.Item_Structure_Type_Code;

 // OR DB1.Item Structure Group Code NE LCL.Item Structure Group Code
 OR DB1.Item_Structure_Group_Code <> LCL.Item_Structure_Group_Code;

 // OR DB1.Item Structure Class Code NE LCL.Item Structure Class Code
 OR DB1.Item_Structure_Class_Code <> LCL.Item_Structure_Class_Code );

 EXECUTE FUNCTION(Chg Line/Structure    CH) TYPE(CHGOBJ) FILE(POCQCPP)           AC1668649;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Department_Code);
 PARAMETER(DB1.Production_Line_Code);
 PARAMETER(DB1.Transaction_Date_Code);
 PARAMETER(DB1.Transaction_Time);
 PARAMETER(DB1.Partial_Item_Code);
 PARAMETER(DB1.Yld_Transaction_Seq);
 PARAMETER(LCL.Item_Structure_Type_Code);
 PARAMETER(LCL.Item_Structure_Group_Code);
 PARAMETER(LCL.Item_Structure_Class_Code);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 // IF DB1.Department Code NE LCL.Department Code
 IF ( DB1.Department_Code <> LCL.Department_Code;

 // OR DB1.Production Line Code NE LCL.Production Line Code
 OR DB1.Production_Line_Code <> LCL.Production_Line_Code );

 EXECUTE FUNCTION(Crt Yld Prtl No Stamp CR) TYPE(CRTOBJ) FILE(POCQCPP)           AC1668650;
 PARAMETER(DB1.Company_Number);
 PARAMETER(LCL.Department_Code);
 PARAMETER(LCL.Production_Line_Code);
 PARAMETER(DB1.Transaction_Date_Code);
 PARAMETER(DB1.Transaction_Time);
 PARAMETER(DB1.Partial_Item_Code);
 PARAMETER(DB1.Yld_Transaction_Seq);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Production_Date);
 PARAMETER(DB1.Production_Shift);
 PARAMETER(DB1.Yld_Transaction_Quantity);
 PARAMETER(DB1.Yld_Transaction_Weight);
 PARAMETER(DB1.Yld_Transaction_Comment);
 PARAMETER(DB1.Yld_Transaction_Source);
 PARAMETER(DB1.Yld_Inv_Balance_Type);
 PARAMETER(LCL.Item_Structure_Type_Code);
 PARAMETER(LCL.Item_Structure_Group_Code);
 PARAMETER(LCL.Item_Structure_Class_Code);
 PARAMETER(DB1.EDI_Status_1);
 PARAMETER(DB1.EDI_Status_2);
 PARAMETER(DB1.EDI_Status_3);
 PARAMETER(DB1.Record_Status);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
 {
  //?USER: Processing before Data update

  //?DO NOT ADD RECORD STAMP -Purva
 }

 EXECUTE FUNCTION(Del Yield Partial Trn DL) TYPE(DLTOBJ) FILE(POCQCPP)           AC1664054;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Department_Code);
 PARAMETER(DB1.Production_Line_Code);
 PARAMETER(DB1.Transaction_Date_Code);
 PARAMETER(DB1.Transaction_Time);
 PARAMETER(DB1.Partial_Item_Code);
 PARAMETER(DB1.Yld_Transaction_Seq);
 ENDIF;

 ENDIF;

}


