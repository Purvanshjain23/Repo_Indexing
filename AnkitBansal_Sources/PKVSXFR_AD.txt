// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKVSXFR
// ?Date: 14.08.2025 Time: 02:53:05
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?H16853 ISE 11/05/2020-Recompiled due to change in Buy Order Number
EXECUTE FUNCTION(Tmp Upd Farm/Prod/Loc RT) TYPE(RTVOBJ) FILE(PKE0CPP)           AB1234368;
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Rtv Farm/Prod/Loc     RT) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1234364;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.TH_Kill_Date);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(LCL.HRH_Farm_Site);
 PARAMETER(LCL.HRH_Producer_Code);
 PARAMETER(LCL.HRH_Location_Code);
 PARAMETER(LCL.HRH_Hot_Weight);
 PARAMETER(LCL.HRH_Live_Weight);
 {
  //?USER: Initialize routine

  MOVE *ALL (To: PAR From: CON);

  //?E2423 Mtech Live or Not Live *** Interfaces to HPS ***
  //?Get the MTech Live Yes or No
  DO;

  //?Mtech Live Yes or no
  // Call program Rtv Company Values    XF.
  CALL PROGRAM(Rtv Company Values    XF) ('PDGKXFR');
  PARAMETER(PAR.BOH_Company_Number);
  PARAMETER('MTECHLIVE');
  PARAMETER(WRK.System_Value_Alpha_USR);

  // LCL.MTech Live Yes or No = WRK.System Value Alpha    USR
  LCL.MTech_Live_Yes_or_No = WRK.System_Value_Alpha_USR;

  ENDDO;

  //?USER: Process Data record

  // PAR.HRH Hot Weight = PAR.HRH Hot Weight + DB1.TH Hot Wgt
  PAR.HRH_Hot_Weight = PAR.HRH_Hot_Weight + DB1.TH_Hot_Wgt;

  // PAR.HRH Live Weight = PAR.HRH Live Weight + DB1.TH Live Wgt
  PAR.HRH_Live_Weight = PAR.HRH_Live_Weight + DB1.TH_Live_Wgt;

  // PAR.PD Producer Code = DB1.PD Producer Code
  PAR.PD_Producer_Code = DB1.PD_Producer_Code;

  // PAR.PL Location Code = DB1.PL Location Code
  PAR.PL_Location_Code = DB1.PL_Location_Code;

  CASE;

  // IF LCL.MTech Live Yes or No is No MTech not Live
  IF LCL.MTech_Live_Yes_or_No = 'N';

  CASE;

  // IF DB1.TH HPS Farm Site is *Zeros
  IF DB1.TH_HPS_Farm_Site = *ZERO;

  // Call program Z1v HPS Farm Info     UP.
  CALL PROGRAM(Z1v HPS Farm Info     UP) ('HP249');
  PARAMETER(PGM.*Return_code);
  PARAMETER(DB1.TH_HPS_Movement_Ref_#);
  PARAMETER(WRK.Farm_site_Name_f_HPS_USR);
  PARAMETER(PAR.TH_HPS_Farm_Site);
  PARAMETER(WRK.HPS_FS_Comp_Relation_USR);
  PARAMETER(WRK.State);

  // IF *OTHERWISE
  IF *OTHERWISE;

  // PAR.TH HPS Farm Site = DB1.TH HPS Farm Site
  PAR.TH_HPS_Farm_Site = DB1.TH_HPS_Farm_Site;

  ENDIF;

  // IF LCL.MTech Live Yes or No is Yes MTech is Live
  IF LCL.MTech_Live_Yes_or_No = 'Y';

  // PAR.TH HPS Farm Site = DB1.TH HPS Farm Site
  PAR.TH_HPS_Farm_Site = DB1.TH_HPS_Farm_Site;

  ENDIF;

 }

 EXECUTE FUNCTION(Tmp Upd Farm/Prod/Loc CH) TYPE(CHGOBJ) FILE(PKE0CPP)           AB1234369;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.TH_Kill_Date);
 PARAMETER(LCL.HRH_Hot_Weight);
 PARAMETER(LCL.HRH_Live_Weight);
 PARAMETER(LCL.HRH_Farm_Site);
 PARAMETER(LCL.HRH_Producer_Code);
 PARAMETER(LCL.HRH_Location_Code);
}


