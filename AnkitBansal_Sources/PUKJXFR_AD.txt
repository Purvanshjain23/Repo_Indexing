// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PUKJXFR
// ?Date: 14.08.2025 Time: 03:50:37
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Val Pre-Validtn 4/PHIS RT) TYPE(RTVOBJ) FILE(PDMRREP)          AC2161788;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Order_Number);
PARAMETER(PAR.ED_Export_Document_Type);
PARAMETER(PAR.Country_Code);
PARAMETER(PAR.Program_name_USR);
PARAMETER(PAR.SUP_SPM_Have_Print_USR);
PARAMETER(PAR.PHIS_Pre_Validtn_Err_USR);
{
 //?USER: Initialize routine

 // LCL.USR Blank Field = CND.Blank
 LCL.USR_Blank_Field = *BLANK;

 // LCL.First Time Flag = CND.Yes
 LCL.First_Time_Flag = 'Y';

 // PAR.SUP/SPM Have Print USR = CND.Yes
 PAR.SUP_SPM_Have_Print_USR = 'Y';

 // PAR.PHIS Pre-Validtn Err USR = CND.Not Entered
 PAR.PHIS_Pre_Validtn_Err_USR = *BLANK;

 //?USER: Process Data record

 //?Match By Country.
 CASE;

 // IF PAR.Country Code EQ DB1.Country Code
 IF PAR.Country_Code = DB1.Country_Code;

 //?Get Doc Type 'A' Info for PHIS & Validate One Time.
 CASE;

 // IF LCL.First Time Flag is Yes
 IF LCL.First_Time_Flag = 'Y';

 // LCL.First Time Flag = CND.NO
 LCL.First_Time_Flag = 'N';

 EXECUTE FUNCTION(Rtv PHIS Info         RT) TYPE(RTVOBJ) FILE(PUA6CPP)           AC2161519;
 PARAMETER(PAR.Company_Number);
 PARAMETER(PAR.Order_Number);
 PARAMETER('A');
 PARAMETER(DB1.Country_Code);
 PARAMETER(NLL.EDE_Reason_f_Replcmnt_Sts);
 PARAMETER(LCL.EDE_Shipment_Type_Sts);
 PARAMETER(NLL.EDE_Frozen_Shelf_Life_Sts);
 PARAMETER(NLL.EDE_ISO_Alpha_2_code);
 PARAMETER(NLL.EDE_USDA_Export_Mark_Sts);
 PARAMETER(NLL.EDE_Special_Printing_Ctl);
 PARAMETER(LCL.EDE_Appl_Billing_First_Nm);
 PARAMETER(LCL.EDE_Appl_Billing_Last_Nm);
 PARAMETER(NLL.EDE_Unused_Date);
 PARAMETER(LCL.EDE_Country_of_Final_Dest);
 PARAMETER(LCL.EDE_Transit_Country);
 PARAMETER(NLL.EDE_Container_Number);
 PARAMETER(NLL.EDE_Unused_Text_25);
 PARAMETER(NLL.EDE_Additional_Stmt);
 PARAMETER(LCL.EDE_IFS_PHIS_Doc_Filename);
 PARAMETER(LCL.EDE_Port_of_Entry);
 PARAMETER(NLL.EDE_Unused_2);
 PARAMETER(LCL.EDE_Unused_3);
 PARAMETER(NLL.EDE_Unused_4);
 PARAMETER(NLL.EDE_Unused_5);
 PARAMETER(NLL.EDE_Consignee_Tele_PHIS);
 PARAMETER(LCL.EDE_Unused_6);
 PARAMETER(LCL.EDE_Unused_7);
 PARAMETER(NLL.EDE_Unused_8);
 PARAMETER(LCL.EDE_Unused_9);
 PARAMETER(NLL.EDE_Unused_10);
 PARAMETER(NLL.EDE_Unused_11);
 PARAMETER(NLL.EDE_Consignor_Tele_PHIS);
 PARAMETER(NLL.EDE_PHIS_Process_Status);
 PARAMETER(NLL.EDE_ETL_Process_Timestamp);
 PARAMETER(NLL.EDE_PHIS_Action);
 PARAMETER(NLL.EDE_Return_Cde_Error);
 PARAMETER(NLL.EDE_Application_UID);
 {
  //?USER: Initialize routine

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 //?From WW Export Doc (PDO4DFR) Screen.
 CASE;

 // IF PAR.Program name USR is WW Exp Doc for Order   DF
 IF PAR.Program_name_USR = 'PDO4DFR';

 //?Required Fields That Must Be Entered For PHIS.
 CASE;

 // IF LCL.EDE Shipment Type Sts EQ LCL.USR Blank Field
 IF LCL.EDE_Shipment_Type_Sts = LCL.USR_Blank_Field;

 // PAR.PHIS Pre-Validtn Err USR = CND.Shipment Type
 PAR.PHIS_Pre_Validtn_Err_USR = 'SHPTYP';

 QUIT;

 //?Required Fields That Must Be Entered For PHIS.
 // IF LCL.EDE Country of Final Dest is Blank
 IF LCL.EDE_Country_of_Final_Dest = *BLANK;

 //?W123517 DN 03/31/23-Commented Out. Country of Final Dest. not Required.
 // PAR.PHIS Pre-Validtn Err USR = CND.Country of Final Dest
 PAR.PHIS_Pre_Validtn_Err_USR = 'CFDSTN';

 QUIT;

 //?Required Fields That Must Be Entered For PHIS.
 // IF DB1.ED Consignor Name is Blank
 IF DB1.ED_Consignor_Name = *BLANK;

 // PAR.PHIS Pre-Validtn Err USR = CND.Consignor Name
 PAR.PHIS_Pre_Validtn_Err_USR = 'CSNRNM';

 QUIT;

 //?Required Fields That Must Be Entered For PHIS.
 // IF DB1.ED Consignor Addr 1 is Blank
 IF DB1.ED_Consignor_Addr_1 = *BLANK;

 // PAR.PHIS Pre-Validtn Err USR = CND.Consignor Addr 1
 PAR.PHIS_Pre_Validtn_Err_USR = 'CSNRA1';

 QUIT;

 //?Required Fields That Must Be Entered For PHIS.
 // IF DB1.ED Consignor Addr 4 is Blank
 IF DB1.ED_Consignor_Addr_4 = *BLANK;

 // PAR.PHIS Pre-Validtn Err USR = CND.Consignor City
 PAR.PHIS_Pre_Validtn_Err_USR = 'CSNRCT';

 QUIT;

 //?Required Fields That Must Be Entered For PHIS.
 // IF DB1.ED Consignor Country Code is Blank
 IF DB1.ED_Consignor_Country_Code = *BLANK;

 // PAR.PHIS Pre-Validtn Err USR = CND.Consignor Country
 PAR.PHIS_Pre_Validtn_Err_USR = 'CSNRCY';

 QUIT;

 //?Required Fields That Must Be Entered For PHIS.
 // IF DB1.ED Consignee Name is Blank
 IF DB1.ED_Consignee_Name = *BLANK;

 // PAR.PHIS Pre-Validtn Err USR = CND.Consignee Name
 PAR.PHIS_Pre_Validtn_Err_USR = 'CSNENM';

 QUIT;

 //?Required Fields That Must Be Entered For PHIS.
 // IF DB1.ED Consignee Addr 1 is Blank
 IF DB1.ED_Consignee_Addr_1 = *BLANK;

 // PAR.PHIS Pre-Validtn Err USR = CND.Consignee Addr 1
 PAR.PHIS_Pre_Validtn_Err_USR = 'CSNEA1';

 QUIT;

 //?Required Fields That Must Be Entered For PHIS.
 // IF DB1.ED Consignee Addr 4 is Blank
 IF DB1.ED_Consignee_Addr_4 = *BLANK;

 // PAR.PHIS Pre-Validtn Err USR = CND.Consignee City
 PAR.PHIS_Pre_Validtn_Err_USR = 'CSNECT';

 QUIT;

 //?Required Fields That Must Be Entered For PHIS.
 // IF DB1.ED Consignee Country Code is Blank
 IF DB1.ED_Consignee_Country_Code = *BLANK;

 // PAR.PHIS Pre-Validtn Err USR = CND.Consignee Country
 PAR.PHIS_Pre_Validtn_Err_USR = 'CSNECY';

 QUIT;

 //?Required Fields That Must Be Entered For PHIS.
 // IF LCL.EDE Appl/Billing First Nm is Not Entered
 IF LCL.EDE_Appl_Billing_First_Nm = *BLANK;

 // PAR.PHIS Pre-Validtn Err USR = CND.Clerk First Name
 PAR.PHIS_Pre_Validtn_Err_USR = 'CLRKFN';

 QUIT;

 //?Required Fields That Must Be Entered For PHIS.
 // IF LCL.EDE Appl/Billing Last Nm is Not Entered
 IF LCL.EDE_Appl_Billing_Last_Nm = *BLANK;

 // PAR.PHIS Pre-Validtn Err USR = CND.Clerk Last Name
 PAR.PHIS_Pre_Validtn_Err_USR = 'CLRKLN';

 QUIT;

 ENDIF;

 ENDIF;

 ENDIF;

 //?From Edt PHIS (PUKIE2R) or WW Exp Doc (PDO4DFR) Screen. Chk All DocTyp.
 CASE;

 // IF PAR.Program name USR is Edt Appl 4/Exp Hdr PHISE2
 IF PAR.Program_name_USR = 'PUKIE2R';

 //?From PUKIE2R.
 //?DO2416 DN 05/20/22-Commented Out Transit Country is Required.
 //?From Edt PHIS (PUKIE2R) or WW Exp Doc (PDO4DFR) Screen. Chk All DocTyp.
 // IF PAR.Program name USR is WW Exp Doc for Order   DF
 IF PAR.Program_name_USR = 'PDO4DFR';

 //?From PDO4DFR.
 //?DO2416 DN 05/20/22-Commented Out Transit Country is Required.
 //?DO2416 DN 01/18/23-Commented Out. No longer required by PHIS.
 ENDIF;

 ENDIF;

}


