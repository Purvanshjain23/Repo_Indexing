// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POUTXFR
// ?Date: 14.08.2025 Time: 03:39:05
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Cpy Production Sched  RT) TYPE(RTVOBJ) FILE(PDLMCPP)           AC1662625;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Production_Type);
PARAMETER(PAR.Production_Date);
PARAMETER(PAR.Date_To_USR);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Create PS Prod Dept Sched) TYPE(CRTOBJ) FILE(PDLMCPP)          AC1475024;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Production_Type);
 PARAMETER(PAR.Date_To_USR);
 PARAMETER(DB1.Department_Code);
 PARAMETER(DB1.CDS_RM_Pieces_Available);
 PARAMETER(DB1.CDS_RM_Weight_Available);
 PARAMETER(DB1.CDS_Average_Piece_Weight);
 PARAMETER(DB1.CDS_CV_Pieces_Available);
 PARAMETER(DB1.CDS_CV_Weight_Available);
 PARAMETER(DB1.CDS_Pieces_Unused_1);
 PARAMETER(DB1.CDS_Weight_Unused_1);
 PARAMETER(DB1.CDS_Pieces_Unused_2);
 PARAMETER(DB1.CDS_Weight_Unused_2);
 PARAMETER(DB1.CDS_Pieces_Unused_3);
 PARAMETER(DB1.CDS_Weight_Unused_3);
 PARAMETER(DB1.CDS_Pieces_Unused_4);
 PARAMETER(DB1.CDS_Weight_Unused_4);
 PARAMETER(DB1.CDS_Pieces_Unused_5);
 PARAMETER(DB1.CDS_Weight_Unused_5);
 PARAMETER(DB1.CDS_Department_Type);
 PARAMETER(DB1.CDS_Unused_Sts_1);
 PARAMETER(DB1.CDS_Unused_Sts_2);
 PARAMETER(DB1.CDS_Unused_Sts_3);
 PARAMETER(DB1.CDS_Unused_Sts_4);
 PARAMETER(DB1.CDS_Unused_Sts_5);
 PARAMETER(DB1.EDI_Status_1);
 PARAMETER(DB1.EDI_Status_2);
 PARAMETER(DB1.EDI_Status_3);
 PARAMETER(DB1.Record_Status);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(UPS CRTOBJ Stamp      IF) TYPE(EXCINTFUN)                      AC1359517;
  PARAMETER(DB1.Record_Status);
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Record Status = CND.Active
   PAR.Record_Status = 'A';

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

}


EXECUTE FUNCTION(Cpy Production Sched  RT) TYPE(RTVOBJ) FILE(PDI8CPP)           AC1662627;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Production_Type);
PARAMETER(PAR.Production_Date);
PARAMETER(PAR.Date_To_USR);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.PS Item Id is FG *All Base
 IF DB1.PS_Item_Id = 'FGB'/'FBC';

 EXECUTE FUNCTION(U1LP Crt Prd Plan Dtl CR) TYPE(CRTOBJ) FILE(PDI8CPP)           AC1294980;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Production_Type);
 PARAMETER(PAR.Date_To_USR);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Warehouse_Code);
 PARAMETER(DB1.PS_Available_Ship_Date);
 PARAMETER(DB1.PS_Weight_Planned_Prod);
 PARAMETER(DB1.PS_Pieces_Planned_Prod);
 PARAMETER(DB1.PS_Pct_of_Carcass_Yield);
 PARAMETER(DB1.PS_Avg_Piece_Wgt);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(DB1.PS_Weight_Standard);
 PARAMETER(DB1.PS_Pieces_Standard);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(DB1.PS_Unit_Weight);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(DB1.PS_Pieces_Unused_2);
 PARAMETER(DB1.PS_Weight_Unused_3);
 PARAMETER(DB1.PS_Pieces_Unused_3);
 PARAMETER(DB1.PS_Weight_Unused_4);
 PARAMETER(DB1.PS_Pieces_Unused_4);
 PARAMETER(DB1.PS_Weight_Unused_5);
 PARAMETER(DB1.PS_Pieces_Unused_5);
 PARAMETER(DB1.PS_Weight_Unused_6);
 PARAMETER(DB1.PS_Pieces_Unused_6);
 PARAMETER(DB1.PS_Item_Id);
 PARAMETER(DB1.Warehouse_Type);
 PARAMETER(DB1.PS_Lock_Status);
 PARAMETER(DB1.PS_Export_Domestic);
 PARAMETER(DB1.PS_Print_On_Schedule);
 PARAMETER(DB1.PS_Piece_Count_Item);
 PARAMETER(DB1.PS_Unused_Sts_1);
 PARAMETER(DB1.PS_Unused_Sts_2);
 PARAMETER(DB1.PS_Unused_Sts_3);
 PARAMETER(DB1.PS_Unused_Sts_4);
 PARAMETER(DB1.PS_Item_Sched_Need_Sts);
 PARAMETER(DB1.PS_Production_Warehouse);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(DB1.Department_Code);
 PARAMETER(DB1.Item_Structure_Type_Code);
 PARAMETER(DB1.Item_Structure_Group_Code);
 PARAMETER(DB1.Item_Structure_Class_Code);
 PARAMETER(DB1.Primal_Group_Code);
 PARAMETER(DB1.EDI_Status_1);
 PARAMETER(DB1.EDI_Status_2);
 PARAMETER(DB1.EDI_Status_3);
 PARAMETER(DB1.Record_Status);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(SET Record Stamp CRTOB IF) TYPE(EXCINTFUN)                     AC1282865;
  PARAMETER(DB1.Record_Status);
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Record Status = CND.Active
   PAR.Record_Status = 'A';

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

  // DB1.Job Name = JOB.*PROGRAM
  DB1.Job_Name = JOB.*PROGRAM;

  // DB1.PS Lock Status = CND.NOT LOCKED
  DB1.PS_Lock_Status = 'N';

 }

 // IF DB1.PS Item Id is FG *All Conv/Fab
 IF DB1.PS_Item_Id = 'FCV'/'FCC'/'FFB'/'FFC';

 EXECUTE FUNCTION(U1LP Crt Prd Plan Dtl CR) TYPE(CRTOBJ) FILE(PDI8CPP)           AC1294980;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Production_Type);
 PARAMETER(PAR.Date_To_USR);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Warehouse_Code);
 PARAMETER(DB1.PS_Available_Ship_Date);
 PARAMETER(DB1.PS_Weight_Planned_Prod);
 PARAMETER(DB1.PS_Pieces_Planned_Prod);
 PARAMETER(DB1.PS_Pct_of_Carcass_Yield);
 PARAMETER(DB1.PS_Avg_Piece_Wgt);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(DB1.PS_Unit_Weight);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(DB1.PS_Pieces_Unused_2);
 PARAMETER(DB1.PS_Weight_Unused_3);
 PARAMETER(DB1.PS_Pieces_Unused_3);
 PARAMETER(DB1.PS_Weight_Unused_4);
 PARAMETER(DB1.PS_Pieces_Unused_4);
 PARAMETER(DB1.PS_Weight_Unused_5);
 PARAMETER(DB1.PS_Pieces_Unused_5);
 PARAMETER(DB1.PS_Weight_Unused_6);
 PARAMETER(DB1.PS_Pieces_Unused_6);
 PARAMETER(DB1.PS_Item_Id);
 PARAMETER(DB1.Warehouse_Type);
 PARAMETER(DB1.PS_Lock_Status);
 PARAMETER(DB1.PS_Export_Domestic);
 PARAMETER(DB1.PS_Print_On_Schedule);
 PARAMETER(DB1.PS_Piece_Count_Item);
 PARAMETER(DB1.PS_Unused_Sts_1);
 PARAMETER(DB1.PS_Unused_Sts_2);
 PARAMETER(DB1.PS_Unused_Sts_3);
 PARAMETER(DB1.PS_Unused_Sts_4);
 PARAMETER(DB1.PS_Item_Sched_Need_Sts);
 PARAMETER(DB1.PS_Production_Warehouse);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(DB1.Department_Code);
 PARAMETER(DB1.Item_Structure_Type_Code);
 PARAMETER(DB1.Item_Structure_Group_Code);
 PARAMETER(DB1.Item_Structure_Class_Code);
 PARAMETER(DB1.Primal_Group_Code);
 PARAMETER(DB1.EDI_Status_1);
 PARAMETER(DB1.EDI_Status_2);
 PARAMETER(DB1.EDI_Status_3);
 PARAMETER(DB1.Record_Status);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(SET Record Stamp CRTOB IF) TYPE(EXCINTFUN)                     AC1282865;
  PARAMETER(DB1.Record_Status);
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Record Status = CND.Active
   PAR.Record_Status = 'A';

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

  // DB1.Job Name = JOB.*PROGRAM
  DB1.Job_Name = JOB.*PROGRAM;

  // DB1.PS Lock Status = CND.NOT LOCKED
  DB1.PS_Lock_Status = 'N';

 }

 ENDIF;

}


EXECUTE FUNCTION(Cpy Production Sched  RT) TYPE(RTVOBJ) FILE(PDJCCPP)           AC1662626;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Production_Type);
PARAMETER(PAR.Production_Date);
PARAMETER(PAR.Date_To_USR);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(U1LP Crt Prd Plan Hdr CR) TYPE(CRTOBJ) FILE(PDJCCPP)           AC1294988;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Production_Type);
 PARAMETER(PAR.Date_To_USR);
 PARAMETER(DB1.Hog_Volume);
 PARAMETER(DB1.Average_Live_Weight);
 PARAMETER(DB1.Average_Hot_Weight);
 PARAMETER(DB1.Cooler_Shrink_Percent);
 PARAMETER(DB1.Average_Cold_Weight);
 PARAMETER(DB1.Average_Lean_Percent);
 PARAMETER(DB1.Average_Backfat_Inches);
 PARAMETER(DB1.Average_Loin_Eye_Depth);
 PARAMETER(DB1.Hot_Weight_Total);
 PARAMETER(DB1.EDI_Status_1);
 PARAMETER(DB1.EDI_Status_2);
 PARAMETER(DB1.EDI_Status_3);
 PARAMETER(DB1.Record_Status);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(RTV Cooler Shrink %    RT) TYPE(RTVOBJ) FILE(CAAQREP)          AC1255852;
  PARAMETER(DB1.Company_Number);
  PARAMETER(DB1.Cooler_Shrink_Percent);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

  }

  // Cold Weight
  DB1.Average_Cold_Weight = DB1.Average_Hot_Weight - ( DB1.Average_Hot_Weight * (
  DB1.Cooler_Shrink_Percent / 100 'H' ) 'H' );

  EXECUTE FUNCTION(SET Record Stamp CRTOB IF) TYPE(EXCINTFUN)                     AC1282865;
  PARAMETER(DB1.Record_Status);
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Record Status = CND.Active
   PAR.Record_Status = 'A';

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

}


// Call program Upd Kill/Cut Pln 4OMS XF.
CALL PROGRAM(Upd Kill/Cut Pln 4OMS XF) ('PLDBXFR');
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Date_To_USR);
PARAMETER(PAR.Kill_Plan_USR);
PARAMETER(PAR.Cut_Plan_USR);

