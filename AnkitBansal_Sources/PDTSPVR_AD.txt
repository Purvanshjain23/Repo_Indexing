// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDTSPVR
// ?Date: 14.08.2025 Time: 03:33:03
// ?------------------------------------------------------------------------------------------------

//?USER: Load screen

// DTL.Check Protection Txt 1 = CON.*BLANK
DTL.Check_Protection_Txt_1 = *BLANK;

// DTL.Check Protection Txt 2 = CON.*BLANK
DTL.Check_Protection_Txt_2 = *BLANK;

//?W83936 DN 09/27/21-Added 'Completion Message 3 USR'.
// DTL.Completion Message 3 USR = CON.*BLANK
DTL.Completion_Message_3_USR = *BLANK;

//?First message
CASE;

// IF PAR.Header Status is Cancelled
IF PAR.Header_Status = 'X';

// Call program RTV Message Text       UP.
CALL PROGRAM(RTV Message Text       UP) ('PDTTUPR');
PARAMETER('USR2096');
PARAMETER(DTL.Check_Protection_Txt_1);

//?First message
// IF PAR.Header Status is Not Held
IF PAR.Header_Status = *BLANK/'L'/'A'/'X'/'C'/'R'/'E';

// Call program RTV Message Text       UP.
CALL PROGRAM(RTV Message Text       UP) ('PDTTUPR');
PARAMETER('USR0609');
PARAMETER(DTL.Check_Protection_Txt_1);

//?First message
// IF PAR.Credit Hold is Yes
IF PAR.Credit_Hold = 'Y';

// Call program RTV Message Text       UP.
CALL PROGRAM(RTV Message Text       UP) ('PDTTUPR');
PARAMETER('USR2033');
PARAMETER(DTL.Check_Protection_Txt_1);

ENDIF;

//?Production Hold message
CASE;

// IF PAR.Production Hold is Yes
IF PAR.Production_Hold = 'Y';

// Call program RTV Message Text       UP.
CALL PROGRAM(RTV Message Text       UP) ('PDTTUPR');
PARAMETER('USR2032');
PARAMETER(DTL.Check_Protection_Txt_2);

ENDIF;

//?W83936 DN 09/27/21-Customer Setup for EDI.
CASE;

// IF PAR.Customer Setup for EDI U is Yes
IF PAR.Customer_Setup_for_EDI_U = 'Y';

// Call program RTV Message Text       UP.
CALL PROGRAM(RTV Message Text       UP) ('PDTTUPR');
PARAMETER('USR5215');
PARAMETER(DTL.Completion_Message_3_USR);

ENDIF;

//?Move Production Hold message up if 1st message is blank
CASE;

// IF DTL.Check Protection Txt 1 is Blank
IF DTL.Check_Protection_Txt_1 = *BLANK;

// DTL.Check Protection Txt 1 = DTL.Check Protection Txt 2
DTL.Check_Protection_Txt_1 = DTL.Check_Protection_Txt_2;

// DTL.Check Protection Txt 2 = CON.*BLANK
DTL.Check_Protection_Txt_2 = *BLANK;

ENDIF;

//?W83936 DN 09/27/21-Move Message Up 1 Line If 2nd Message is Blank.
CASE;

// IF PAR.Customer Setup for EDI U is Yes
IF PAR.Customer_Setup_for_EDI_U = 'Y';

// AND DTL.Check Protection Txt 2 is Not Entered
AND DTL.Check_Protection_Txt_2 = *BLANK;

// DTL.Check Protection Txt 2 = DTL.Completion Message 3 USR
DTL.Check_Protection_Txt_2 = DTL.Completion_Message_3_USR;

// DTL.Completion Message 3 USR = CON.*BLANK
DTL.Completion_Message_3_USR = *BLANK;

ENDIF;

