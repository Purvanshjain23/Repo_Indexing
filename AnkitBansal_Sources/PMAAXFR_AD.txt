// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMAAXFR
// ?Date: 14.08.2025 Time: 03:44:36
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Bld Cmsn/NonCmsn Itms RT) TYPE(RTVOBJ) FILE(OMHLREP)           AC1903518;
PARAMETER('CM');
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Standard Schedule (Y/N) is yes
 IF DB1.Standard_Schedule_Y_N = 'Y';

 EXECUTE FUNCTION(Bld Cmsn/NonCmsn Itms RT) TYPE(RTVOBJ) FILE(OMBYREP)           AC1903520;
 PARAMETER(DB1.Accrual_Code);
 PARAMETER(DB1.All_Products_Y_N);
 PARAMETER(DB1.Accrual_Rate);
 PARAMETER(DB1.Accrual_Detail_Search);
 PARAMETER(DB1.Standard_Schedule_Y_N);
 {
  //?USER: Process Data record

  // PGM.*Record selected = CND.*YES
  PGM.*Record_selected = 'Y';

  //?SEL: Finished Goods
  CASE;

  // IF DB1.Item Type Code is Not Finished Good
  IF DB1.Item_Type_Code <> 'FG';

  // PGM.*Record selected = CND.*NO
  PGM.*Record_selected = 'N';

  ENDIF;

  CASE;

  // IF PGM.*Record selected is *YES
  IF PGM.*Record_selected = 'Y';

  //?BLD: Accrual Program Setup
  CASE;

  // IF PAR.All Products (Y/N) is Yes
  IF PAR.All_Products_Y_N = 'Y';

  //?** CRT: Accrual Rate = PAR.Accrual Rate
  EXECUTE FUNCTION(Crt Cmsn/NonCmsn Itms CR) TYPE(CRTOBJ) FILE(PMECCPP)           AC1903522;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Code);
  PARAMETER(DB1.Description_Line_One);
  PARAMETER(PAR.Accrual_Rate);
  //?BLD: Accrual Program Setup
  // IF PAR.All Products (Y/N) is No
  IF PAR.All_Products_Y_N = 'N';

  //?RTV: Accrual Rate
  CASE;

  // IF PAR.Accrual Detail Search is Item
  IF PAR.Accrual_Detail_Search = 'I';

  //?** RTV: With Item Code
  EXECUTE FUNCTION(RTV Item Rate         RT) TYPE(RTVOBJ) FILE(PPAHREP)           AC1903525;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Code);
  PARAMETER(LCL.Accrual_Rate_Type);
  PARAMETER(LCL.Accrual_Rate);
  PARAMETER(LCL.Record_Found_USR);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   // PAR.Record Found USR = CND.Record Not Found
   PAR.Record_Found_USR = 'N';

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

   // PAR.Record Found USR = CND.Record Found
   PAR.Record_Found_USR = 'Y';

  }

  //?CRT: Rate Record
  CASE;

  // IF LCL.Record Found USR is Record Found
  IF LCL.Record_Found_USR = 'Y';

  //?** CRT: Accrual Rate = LCL.Accrual Rate
  EXECUTE FUNCTION(Crt Cmsn/NonCmsn Itms CR) TYPE(CRTOBJ) FILE(PMECCPP)           AC1903522;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Code);
  PARAMETER(DB1.Description_Line_One);
  PARAMETER(LCL.Accrual_Rate);
  //?CRT: Rate Record
  // IF *OTHERWISE
  IF *OTHERWISE;

  //?** CRT: Accrual Rate = Zero
  EXECUTE FUNCTION(Crt Cmsn/NonCmsn Itms CR) TYPE(CRTOBJ) FILE(PMECCPP)           AC1903522;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Code);
  PARAMETER(DB1.Description_Line_One);
  PARAMETER(*ZERO);
  ENDIF;

  //?RTV: Accrual Rate
  // IF PAR.Accrual Detail Search is Item Structure
  IF PAR.Accrual_Detail_Search = 'S';

  //?** RTV: With Item Structure Type/Group/Class
  EXECUTE FUNCTION(RTV Rate Type/Grp/Cls RT) TYPE(RTVOBJ) FILE(PMA3REP)           AC1903539;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Structure_Type_Code);
  PARAMETER(DB1.Item_Structure_Group_Code);
  PARAMETER(DB1.Item_Structure_Class_Code);
  PARAMETER(LCL.Accrual_Rate_Type);
  PARAMETER(LCL.Accrual_Rate);
  PARAMETER(LCL.Record_Found_USR);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   // PAR.Record Found USR = CND.Record Not Found
   PAR.Record_Found_USR = 'N';

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

   // PAR.Record Found USR = CND.Record Found
   PAR.Record_Found_USR = 'Y';

  }

  //?CRT: Rate Record
  CASE;

  // IF LCL.Record Found USR is Record Found
  IF LCL.Record_Found_USR = 'Y';

  //?** CRT: Accrual Rate = LCL.Accrual Rate
  EXECUTE FUNCTION(Crt Cmsn/NonCmsn Itms CR) TYPE(CRTOBJ) FILE(PMECCPP)           AC1903522;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Code);
  PARAMETER(DB1.Description_Line_One);
  PARAMETER(LCL.Accrual_Rate);
  //?CRT: Rate Record
  // IF *OTHERWISE
  IF *OTHERWISE;

  //?** RTV: With Item Structure Class = Zero
  EXECUTE FUNCTION(RTV Rate Type/Grp/Cls RT) TYPE(RTVOBJ) FILE(PMA3REP)           AC1903539;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Structure_Type_Code);
  PARAMETER(DB1.Item_Structure_Group_Code);
  PARAMETER(*ZERO);
  PARAMETER(LCL.Accrual_Rate_Type);
  PARAMETER(LCL.Accrual_Rate);
  PARAMETER(LCL.Record_Found_USR);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   // PAR.Record Found USR = CND.Record Not Found
   PAR.Record_Found_USR = 'N';

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

   // PAR.Record Found USR = CND.Record Found
   PAR.Record_Found_USR = 'Y';

  }

  //?CRT: Rate Record
  CASE;

  // IF LCL.Record Found USR is Record Found
  IF LCL.Record_Found_USR = 'Y';

  //?** CRT: Accrual Rate = LCL.Accrual Rate
  EXECUTE FUNCTION(Crt Cmsn/NonCmsn Itms CR) TYPE(CRTOBJ) FILE(PMECCPP)           AC1903522;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Code);
  PARAMETER(DB1.Description_Line_One);
  PARAMETER(LCL.Accrual_Rate);
  //?CRT: Rate Record
  // IF *OTHERWISE
  IF *OTHERWISE;

  //?** CRT: Accrual Rate = Zero
  EXECUTE FUNCTION(Crt Cmsn/NonCmsn Itms CR) TYPE(CRTOBJ) FILE(PMECCPP)           AC1903522;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Code);
  PARAMETER(DB1.Description_Line_One);
  PARAMETER(*ZERO);
  ENDIF;

  ENDIF;

  ENDIF;

  //?BLD: Accrual Program Setup
  // IF PAR.All Products (Y/N) is Yes + Exceptions
  IF PAR.All_Products_Y_N = 'X';

  //?RTV: Accrual Rate
  CASE;

  // IF PAR.Accrual Detail Search is Item
  IF PAR.Accrual_Detail_Search = 'I';

  //?** RTV: With Item Code
  EXECUTE FUNCTION(RTV Item Rate         RT) TYPE(RTVOBJ) FILE(PPAHREP)           AC1903525;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Code);
  PARAMETER(LCL.Accrual_Rate_Type);
  PARAMETER(LCL.Accrual_Rate);
  PARAMETER(LCL.Record_Found_USR);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   // PAR.Record Found USR = CND.Record Not Found
   PAR.Record_Found_USR = 'N';

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

   // PAR.Record Found USR = CND.Record Found
   PAR.Record_Found_USR = 'Y';

  }

  //?CRT: Rate Record
  CASE;

  // IF LCL.Record Found USR is Record Found
  IF LCL.Record_Found_USR = 'Y';

  //?** CRT: Accrual Rate = LCL.Accrual Rate
  EXECUTE FUNCTION(Crt Cmsn/NonCmsn Itms CR) TYPE(CRTOBJ) FILE(PMECCPP)           AC1903522;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Code);
  PARAMETER(DB1.Description_Line_One);
  PARAMETER(LCL.Accrual_Rate);
  //?CRT: Rate Record
  // IF *OTHERWISE
  IF *OTHERWISE;

  //?** CRT: Accrual Rate = PAR.Accrual Rate
  EXECUTE FUNCTION(Crt Cmsn/NonCmsn Itms CR) TYPE(CRTOBJ) FILE(PMECCPP)           AC1903522;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Code);
  PARAMETER(DB1.Description_Line_One);
  PARAMETER(PAR.Accrual_Rate);
  ENDIF;

  //?RTV: Accrual Rate
  // IF PAR.Accrual Detail Search is Item Structure
  IF PAR.Accrual_Detail_Search = 'S';

  //?** RTV: With Item Structure Type/Group/Class
  EXECUTE FUNCTION(RTV Rate Type/Grp/Cls RT) TYPE(RTVOBJ) FILE(PMA3REP)           AC1903539;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Structure_Type_Code);
  PARAMETER(DB1.Item_Structure_Group_Code);
  PARAMETER(DB1.Item_Structure_Class_Code);
  PARAMETER(LCL.Accrual_Rate_Type);
  PARAMETER(LCL.Accrual_Rate);
  PARAMETER(LCL.Record_Found_USR);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   // PAR.Record Found USR = CND.Record Not Found
   PAR.Record_Found_USR = 'N';

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

   // PAR.Record Found USR = CND.Record Found
   PAR.Record_Found_USR = 'Y';

  }

  //?CRT: Rate Record
  CASE;

  // IF LCL.Record Found USR is Record Found
  IF LCL.Record_Found_USR = 'Y';

  //?** CRT: Accrual Rate = LCL.Accrual Rate
  EXECUTE FUNCTION(Crt Cmsn/NonCmsn Itms CR) TYPE(CRTOBJ) FILE(PMECCPP)           AC1903522;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Code);
  PARAMETER(DB1.Description_Line_One);
  PARAMETER(LCL.Accrual_Rate);
  //?CRT: Rate Record
  // IF *OTHERWISE
  IF *OTHERWISE;

  //?** RTV: With Item Structure Class = Zero
  EXECUTE FUNCTION(RTV Rate Type/Grp/Cls RT) TYPE(RTVOBJ) FILE(PMA3REP)           AC1903539;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Structure_Type_Code);
  PARAMETER(DB1.Item_Structure_Group_Code);
  PARAMETER(*ZERO);
  PARAMETER(LCL.Accrual_Rate_Type);
  PARAMETER(LCL.Accrual_Rate);
  PARAMETER(LCL.Record_Found_USR);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   // PAR.Record Found USR = CND.Record Not Found
   PAR.Record_Found_USR = 'N';

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

   // PAR.Record Found USR = CND.Record Found
   PAR.Record_Found_USR = 'Y';

  }

  //?CRT: Rate Record
  CASE;

  // IF LCL.Record Found USR is Record Found
  IF LCL.Record_Found_USR = 'Y';

  //?** CRT: Accrual Rate = LCL.Accrual Rate
  EXECUTE FUNCTION(Crt Cmsn/NonCmsn Itms CR) TYPE(CRTOBJ) FILE(PMECCPP)           AC1903522;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Code);
  PARAMETER(DB1.Description_Line_One);
  PARAMETER(LCL.Accrual_Rate);
  //?CRT: Rate Record
  // IF *OTHERWISE
  IF *OTHERWISE;

  //?** CRT: Accrual Rate = PAR.Accrual Rate
  EXECUTE FUNCTION(Crt Cmsn/NonCmsn Itms CR) TYPE(CRTOBJ) FILE(PMECCPP)           AC1903522;
  PARAMETER(PAR.Accrual_Code);
  PARAMETER(DB1.Item_Code);
  PARAMETER(DB1.Description_Line_One);
  PARAMETER(PAR.Accrual_Rate);
  ENDIF;

  ENDIF;

  ENDIF;

  ENDIF;

  ENDIF;

 }

 ENDIF;

}


