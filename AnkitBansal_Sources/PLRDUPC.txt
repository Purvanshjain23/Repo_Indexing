/***************************************************************** */
/*                                                                 */
/*  PROGRAM NUMBER:  PLRDUPC (FROM JOB SCHEDULER)                  */
/*  PROGRAM NAME:    RUN ENTIRE MPR MORNING JOB                   */
/*  PROGRAMMER:      ROSE CENTONZE                                 */
/*  CREATE DATE:     11/16/11                                      */
/*                                                                 */
/*  NOTE  ***** MUST BE COMPILED USER PROFILE(*OWNER)   *****       */
/*                                                                 */
/*                                                                 */
/*  FUNCTION:        CALLED FROM JOB SCHEDULER TO:              */
/*                  1) RUN UPLOAD AND BALANCING RTN - CRT EVAL TRAN*/
/*                  2) RUN MPR PAYMENT EDIT OVER THE LIVE FILES.  */
/*                  3) UNDO THE PROCESS IN AN SUBSEQUENT ROUTINE  */
/*                  4) FTP THE MPR REPORTING FILES TO THE FOLDER */
/*                                                                 */
/*******************************************************************/
/*  Modification History                                           */
/*******************************************************************/
/*‚JM   06/13/25 SDN1295 - MPR Upgrade-Set MPR libl for test box   */
/*******************************************************************/
             PGM        PARM(&PLTCO &JOBD)
/* PRINT OPTION PARMS                                             */
             DCL        VAR(&PLTCO) TYPE(*CHAR) LEN(3)
             DCL        VAR(&JOBD) TYPE(*CHAR) LEN(10)
/*‚JM   06/13/25 SDN1295 */
             DCL        VAR(&SYSNAME) TYPE(*CHAR) LEN(10)
/*‚JM   06/13/25 SDN1295 */

/*‚JM   06/13/25 SDN1295 */
             RTVNETA    SYSNAME(&SYSNAME)
             IF         COND(&SYSNAME *EQ 'SBFDEV') THEN(DO)

             SELECT
             WHEN       COND(&PLTCO *EQ '360') THEN(CHGVAR +
                          VAR(&JOBD) VALUE('MPRGUPJD'))
             WHEN       COND(&PLTCO *EQ '440') THEN(CHGVAR +
                          VAR(&JOBD) VALUE('MPRSTPJD'))
             WHEN       COND(&PLTCO *EQ '960') THEN(CHGVAR +
                          VAR(&JOBD) VALUE('MPRTFPJD'))
             OTHERWISE
             ENDSELECT

             CHKOBJ     OBJ(&JOBD) OBJTYPE(*JOBD)
             MONMSG     MSGID(CPF9801) EXEC(DO)
             CHGVAR     VAR(&JOBD) VALUE('MPRJOBD')
             CHKOBJ     OBJ(&JOBD) OBJTYPE(*JOBD)
             MONMSG     MSGID(CPF9801) EXEC(DO)
             CHGVAR     VAR(&JOBD) VALUE('PRKPRDGUY')
             ENDDO
             ENDDO
             ENDDO
/*‚JM   06/13/25 SDN1295 */
/* *********************************************************/
/*  SEND MESSAGE THAT MORNING MPR JOB HAS STARTED          *****/
/* *********************************************************/

             CALL       PGM(PRKPLIB/PKW5UPC) PARM('1' &PLTCO)

/* *********************************************************/
/* RUN BALANCING AND PAYMENT EDIT                          */
/* *********************************************************/

             CALL       PGM(PRKPLIB/PKWPUPC) PARM(&PLTCO &JOBD)

/* *********************************************************/
/*  BUILD FILES/ FTP TO UPLOAD FOLDER  */
/* *********************************************************/

             CALL       PGM(PRKPLIB/PLL7UPC) PARM(&PLTCO &JOBD)

/* *********************************************************/
  /*   UNDO PAYMENTS & SEND STATUS MESSAGE                 */
/* *********************************************************/

  UNDO:
             CALL       PGM(PRKPLIB/PKW8XFR) PARM(' ' &PLTCO &JOBD)

/* *********************************************************/


 END:
             ENDPGM
