// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMNUXFR
// ?Date: 14.08.2025 Time: 03:43:32
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?** Process all application areas
EXECUTE FUNCTION(RTV Copy Files to Tape RT) TYPE(RTVOBJ) FILE(PDLPREP)          AC1848882;
PARAMETER(PAR.PCG_Code);
PARAMETER(PAR.PCG_From_Library);
PARAMETER(PAR.Purge_Run_Frequency);
PARAMETER(PAR.Text_USR);
PARAMETER(PAR.Text_USR_7);
PARAMETER(PAR.To_Library_USR);
{
 //?USER: Initialize routine

 //?***** Change Log and Comments
 DO;

 //?** LJB 05/01/2009 E00391 Add Frequency to the selection criteria
 //?** LJB 02/21/2008 FP1009 Post Install Changes
 //?** Change to run once for all run frequencies.
 //?** LJB 01/30/2008 FP1009 Post Install Changes
 //?** Pass "Purge To Library" from the Purge Control Group file
 ENDDO;

 //?USER: Processing if Data record not found

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 //?** Process all active application areas
 CASE;

 // IF DB1.Record Status is Active
 IF DB1.Record_Status = 'A';

 //?** Only process Purge Method of "Tape"
 CASE;

 // IF DB1.PCA Purge Method is Tape
 IF DB1.PCA_Purge_Method = 'T';

 // AND DB1.Purge Run Frequency EQ PAR.Purge Run Frequency
 AND DB1.Purge_Run_Frequency = PAR.Purge_Run_Frequency;

 // Call program RTV Copy "Z"mbrs-Tape  XF.
 CALL PROGRAM(RTV Copy "Z"mbrs-Tape  XF) ('PMO1XFR');
 PARAMETER(PAR.PCG_Code);
 PARAMETER(DB1.PCG_From_Library);
 PARAMETER(DB1.Purge_Application_Code);
 PARAMETER(PAR.Text_USR);
 PARAMETER(PAR.Text_USR_7);
 PARAMETER(PAR.To_Library_USR);

 ENDIF;

 ENDIF;

}


