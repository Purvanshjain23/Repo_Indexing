// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDLSXFR
// ?Date: 14.08.2025 Time: 03:32:15
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Use this function to get a market price
EXECUTE FUNCTION(RTV Item Pricing Info  RT) TYPE(RTVOBJ) FILE(CABZREP)          AC1412083;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Item_Code);
PARAMETER(PAR.UOM_Primary);
PARAMETER(PAR.Conversion_Factor_1);
PARAMETER(PAR.Operation_Factor_1);
PARAMETER(PAR.UOM_Second);
PARAMETER(PAR.Conversion_Factor_2);
PARAMETER(PAR.Operation_Factor_2);
PARAMETER(PAR.UOM_Third);
PARAMETER(PAR.UOM_Pricing);
PARAMETER(PAR.Unit_Weight);
PARAMETER(PAR.Production_Date_Control);
PARAMETER(PAR.Catch_Weight_Status);
PARAMETER(PAR.Commodity_Market_Code);
PARAMETER(PAR.Commodity_Price_Group);
{
 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


// PAR.Price Method Code = CON.MKC
PAR.Price_Method_Code = 'MKC';

// Call program CLC Price Item         XF.
CALL PROGRAM(CLC Price Item         XF) ('PDG9XFR');
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Price_Method_Code);
PARAMETER(*ZERO);
PARAMETER(PAR.As_of_Date);
PARAMETER(99);
PARAMETER(*ZERO);
PARAMETER(*ZERO);
PARAMETER(*ZERO);
PARAMETER(*ZERO);
PARAMETER(*ZERO);
PARAMETER(*ZERO);
PARAMETER(*ZERO);
PARAMETER(WRK.Error_Return);
PARAMETER('I');

CASE;

// IF PAR.U/M - Pricing is Pounds
IF PAR.UOM_Pricing = 'LB';

// IF PAR.Unit Weight EQ WRK.ZERO
IF PAR.Unit_Weight = WRK.ZERO;

// PAR.Unit Cost Per Pound = CON.*ZERO
PAR.Unit_Cost_Per_Pound = *ZERO;

// IF *OTHERWISE
IF *OTHERWISE;

// PAR.Unit Cost Per Pound = PAR.Cost per Primary U/M / PAR.Unit Weight *Rounded
PAR.Unit_Cost_Per_Pound = PAR.Cost_per_Primary_UOM / PAR.Unit_Weight 'H';

ENDIF;

