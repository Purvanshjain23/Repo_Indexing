// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PUPWXFR
// ?Date: 14.08.2025 Time: 03:51:05
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?**************************************************************************
//?** PR1 Parms Represent Old Record Fields (Will be blank for Insert).
//?** PR2 Parms Represent New Record Fields (Will be blank for Delete).
//?**************************************************************************
//?Trigger Processing for Insert Event.
CASE;

// IF PR3.TRG Database Event is Insert
IF PR3.TRG_Database_Event = '1';

EXECUTE FUNCTION(Crt History Dtl AccrTRGCR) TYPE(CRTOBJ) FILE(PUBXCPP)          AC2182299;
PARAMETER(PR2.Company_Number);
PARAMETER(PR2.Order_Number);
PARAMETER(PR2.Order_Sequence_Number);
PARAMETER(PR2.Order_Secondary_Line_Seq);
PARAMETER(PR2.Sequence_Number);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.HDA_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

//?Trigger Processing for Update Event.
CASE;

// IF PR3.TRG Database Event is Update
IF PR3.TRG_Database_Event = '3';

//?Update If Any Non-Key Fields Have Changed.
CASE;

// IF PR1.Accrual Rate NE PR2.Accrual Rate
IF PR1.Accrual_Rate <> PR2.Accrual_Rate;

// OR PR1.Extended Amount NE PR2.Extended Amount
OR PR1.Extended_Amount <> PR2.Extended_Amount;

// OR PR1.Item Accrual Amt NE PR2.Item Accrual Amt
OR PR1.Item_Accrual_Amt <> PR2.Item_Accrual_Amt;

// OR PR1.Item Code NE PR2.Item Code
OR PR1.Item_Code <> PR2.Item_Code;

// OR PR1.Ship To Customer NE PR2.Ship To Customer
OR PR1.Ship_To_Customer <> PR2.Ship_To_Customer;

// OR PR1.HDA Actual Ship Date NE PR2.HDA Actual Ship Date
OR PR1.HDA_Actual_Ship_Date <> PR2.HDA_Actual_Ship_Date;

// OR PR1.Weight Billed NE PR2.Weight Billed
OR PR1.Weight_Billed <> PR2.Weight_Billed;

// OR PR1.Use G/L Code Dr/Cr NE PR2.Use G/L Code Dr/Cr
OR PR1.Use_G_L_Code_Dr_Cr <> PR2.Use_G_L_Code_Dr_Cr;

// OR PR1.Retro Comm Calculated NE PR2.Retro Comm Calculated
OR PR1.Retro_Comm_Calculated <> PR2.Retro_Comm_Calculated;

// OR PR1.Accrual Type NE PR2.Accrual Type
OR PR1.Accrual_Type <> PR2.Accrual_Type;

// OR PR1.HDA Affect Sales Realz NE PR2.HDA Affect Sales Realz
OR PR1.HDA_Affect_Sales_Realz <> PR2.HDA_Affect_Sales_Realz;

// OR PR1.HDA Affect Invoice Price NE PR2.HDA Affect Invoice Price
OR PR1.HDA_Affect_Invoice_Price <> PR2.HDA_Affect_Invoice_Price;

// OR PR1.HDA Print on Invoice NE PR2.HDA Print on Invoice
OR PR1.HDA_Print_on_Invoice <> PR2.HDA_Print_on_Invoice;

// OR PR1.HDA SA Week Ending Date NE PR2.HDA SA Week Ending Date
OR PR1.HDA_SA_Week_Ending_Date <> PR2.HDA_SA_Week_Ending_Date;

// OR PR1.HDA Atch to Ord ActShpDt NE PR2.HDA Atch to Ord ActShpDt
OR PR1.HDA_Atch_to_Ord_ActShpDt <> PR2.HDA_Atch_to_Ord_ActShpDt;

// OR PR1.HDA Unused Amt 1 NE PR2.HDA Unused Amt 1
OR PR1.HDA_Unused_Amt_1 <> PR2.HDA_Unused_Amt_1;

// OR PR1.HDA Unused Amt 2 NE PR2.HDA Unused Amt 2
OR PR1.HDA_Unused_Amt_2 <> PR2.HDA_Unused_Amt_2;

// OR PR1.SH Expense Bucket NE PR2.SH Expense Bucket
OR PR1.SH_Expense_Bucket <> PR2.SH_Expense_Bucket;

// OR PR1.G/L Sub Account NE PR2.G/L Sub Account
OR PR1.G_L_Sub_Account <> PR2.G_L_Sub_Account;

// OR PR1.HDA Post to G/L Y/N NE PR2.HDA Post to G/L Y/N
OR PR1.HDA_Post_to_G_L_Y_N <> PR2.HDA_Post_to_G_L_Y_N;

// OR PR1.HDA Accrual Rate Type NE PR2.HDA Accrual Rate Type
OR PR1.HDA_Accrual_Rate_Type <> PR2.HDA_Accrual_Rate_Type;

// OR PR1.HDA Invoice Date NE PR2.HDA Invoice Date
OR PR1.HDA_Invoice_Date <> PR2.HDA_Invoice_Date;

// OR PR1.HDA Sub Ledger Code NE PR2.HDA Sub Ledger Code
OR PR1.HDA_Sub_Ledger_Code <> PR2.HDA_Sub_Ledger_Code;

// OR PR1.HDA G/L Sub Ledger NE PR2.HDA G/L Sub Ledger
OR PR1.HDA_G_L_Sub_Ledger <> PR2.HDA_G_L_Sub_Ledger;

// OR PR1.HDA G/L Code Dr NE PR2.HDA G/L Code Dr
OR PR1.HDA_G_L_Code_Dr <> PR2.HDA_G_L_Code_Dr;

// OR PR1.HDA G/L Code Cr NE PR2.HDA G/L Code Cr
OR PR1.HDA_G_L_Code_Cr <> PR2.HDA_G_L_Code_Cr;

// OR PR1.HDA JDE Account ID Dr NE PR2.HDA JDE Account ID Dr
OR PR1.HDA_JDE_Account_ID_Dr <> PR2.HDA_JDE_Account_ID_Dr;

// OR PR1.HDA JDE Account ID Cr NE PR2.HDA JDE Account ID Cr
OR PR1.HDA_JDE_Account_ID_Cr <> PR2.HDA_JDE_Account_ID_Cr;

// OR PR1.Broker Code NE PR2.Broker Code
OR PR1.Broker_Code <> PR2.Broker_Code;

// OR PR1.Accrual Code NE PR2.Accrual Code
OR PR1.Accrual_Code <> PR2.Accrual_Code;

// OR PR1.HDA Invoice Print Type NE PR2.HDA Invoice Print Type
OR PR1.HDA_Invoice_Print_Type <> PR2.HDA_Invoice_Print_Type;

EXECUTE FUNCTION(Crt History Dtl AccrTRGCR) TYPE(CRTOBJ) FILE(PUBXCPP)          AC2182299;
PARAMETER(PR2.Company_Number);
PARAMETER(PR2.Order_Number);
PARAMETER(PR2.Order_Sequence_Number);
PARAMETER(PR2.Order_Secondary_Line_Seq);
PARAMETER(PR2.Sequence_Number);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.HDA_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

ENDIF;

//?Trigger Processing for Delete Event.
CASE;

// IF PR3.TRG Database Event is Delete
IF PR3.TRG_Database_Event = '2';

EXECUTE FUNCTION(Crt History Dtl AccrTRGCR) TYPE(CRTOBJ) FILE(PUBXCPP)          AC2182299;
PARAMETER(PR1.Company_Number);
PARAMETER(PR1.Order_Number);
PARAMETER(PR1.Order_Sequence_Number);
PARAMETER(PR1.Order_Secondary_Line_Seq);
PARAMETER(PR1.Sequence_Number);
PARAMETER(PR3.TRG_Database_Event);
PARAMETER(0);
PARAMETER(*ZERO);
{
 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Timestamp TS#     IF) TYPE(EXCINTFUN)                      AC2131367;
 PARAMETER(DB1.HDA_Timestamp);
 {
  //?Execute internal function

  // PAR.@Timestamp TS# = JOB.*System timestamp
  PAR.@Timestamp_TS# = JOB.*System_timestamp;

 }

}


ENDIF;

