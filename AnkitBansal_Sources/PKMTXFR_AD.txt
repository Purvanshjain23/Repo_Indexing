// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKMTXFR
// ?Date: 14.08.2025 Time: 02:52:12
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modifications and Comments
DO;

//?H16853 ISE 11/02/20 - Increased the Buy Order Number field
//? length from 5 to 7.
ENDDO;

CASE;

// IF PAR.Post or Select Rpts   USR is Post
IF PAR.Post_or_Select_Rpts_USR = 'P';

EXECUTE FUNCTION(Rtv/Fax CrcSum/Dtl    RT) TYPE(RTVOBJ) FILE(PKD7CPP)           AB1204285;
PARAMETER(PAR.TFD_Producer_Sequence_Sts);
PARAMETER(PAR.TFD_Area_Code);
PARAMETER(PAR.TFD_Phone_#_or_Email);
PARAMETER(PAR.Oms_System_Value_Alpha);
PARAMETER(PAR.Status_3);
{
 //?USER: Process Data record

 //?Get parms to check Print Live as Carcass
 //? Do not print Actual Live as of 10/14/96
 EXECUTE FUNCTION(Rtv PayTyp/Src Hc/Prd Rt) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1193170;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.TH_Kill_Date);
 PARAMETER(WRK.TH_Source_Type);
 PARAMETER(WRK.TH_Payment_Type);
 PARAMETER(WRK.TH_Hog_Class_Type);
 PARAMETER(PAR.PD_Producer_Code);
 PARAMETER(PAR.PL_Location_Code);
 {
  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 CASE;

 // IF WRK.TH Payment Type is Live
 IF WRK.TH_Payment_Type = 'L';

 // AND WRK.TH Hog Class Type is Market
 AND WRK.TH_Hog_Class_Type = 'M';

 // Call program Zzz Crc Sum & Dtl LMKTPF.
 CALL PROGRAM(Zzz Crc Sum & Dtl LMKTPF) ('PKMLPFR');
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER('N');
 PARAMETER(DB1.TFD_Header_Action_Crc_Dtl);
 PARAMETER(DB1.TFD_Header_Action_Crc_Sum);
 PARAMETER('N');
 PARAMETER(PAR.Status_3);

 EXECUTE FUNCTION(Rtv BOH Pay Type      RT) TYPE(RTVOBJ) FILE(PKAWCPP)           AB1134737;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(WRK.BOH_Payment_Type);
 PARAMETER(WRK.BOH_Buy_Order_Type);
 {
  //?USER: Processing if Data record not found

  // *MO.VE             1183529*Bu = ilt. in functions
  PAR.BOH_Payment_Type = 'L';

  // *MO.VE             1183529*Bu = ilt. in functions
  PAR.BOH_Buy_Order_Type = 'O';

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 CASE;

 // IF WRK.BOH Payment Type is Live
 IF WRK.BOH_Payment_Type = 'L';

 // Call program Zzz Crc Sum & Dtl LMKTPF.
 CALL PROGRAM(Zzz Crc Sum & Dtl LMKTPF) ('PKMLPFR');
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER('Y');
 PARAMETER(DB1.TFD_Header_Action_Crc_Dtl);
 PARAMETER(DB1.TFD_Header_Action_Crc_Sum);
 PARAMETER('N');
 PARAMETER(PAR.Status_3);

 ENDIF;

 // IF *OTHERWISE
 IF *OTHERWISE;

 //?remove * out code
 // Call program Prt Crc Sum & Dtl     PF.
 CALL PROGRAM(Prt Crc Sum & Dtl     PF) ('PLEMPFR');
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER('N');
 PARAMETER(DB1.TFD_Header_Action_Crc_Dtl);
 PARAMETER(DB1.TFD_Header_Action_Crc_Sum);
 PARAMETER('N');
 PARAMETER(PAR.Status_3);

 ENDIF;

}


// IF PAR.Post or Select Rpts   USR is Select from prompt
IF PAR.Post_or_Select_Rpts_USR = 'S';

EXECUTE FUNCTION(Rtv/Fax Sel CrcSm/Dtl RT) TYPE(RTVOBJ) FILE(PKD7CPP)           AB1204834;
PARAMETER(PAR.TFD_Producer_Sequence_Sts);
PARAMETER(PAR.TFD_Area_Code);
PARAMETER(PAR.TFD_Phone_#_or_Email);
PARAMETER(PAR.Oms_System_Value_Alpha);
PARAMETER(PAR.Status_3);
PARAMETER(PAR.Print_Carcass_Analysis_Us);
{
 //?USER: Process Data record

 //?Get parms to check Print Live as Carcass
 //? Do not print Actual Live as of 10/14/96
 EXECUTE FUNCTION(Rtv PayTyp/Src Hc/Prd Rt) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1193170;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.TH_Kill_Date);
 PARAMETER(WRK.TH_Source_Type);
 PARAMETER(WRK.TH_Payment_Type);
 PARAMETER(WRK.TH_Hog_Class_Type);
 PARAMETER(PAR.PD_Producer_Code);
 PARAMETER(PAR.PL_Location_Code);
 {
  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 //?If BOTH or NO is selected for the ANALYSIS
 CASE;

 // IF PAR.Print Carcass Analysis Us is Both/No
 IF PAR.Print_Carcass_Analysis_Us = 'B'/'N';

 // Call program Prt Crc Sum & Dtl     PF.
 CALL PROGRAM(Prt Crc Sum & Dtl     PF) ('PLEMPFR');
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER('N');
 PARAMETER(DB1.TFD_Header_Action_Crc_Dtl);
 PARAMETER(DB1.TFD_Header_Action_Crc_Sum);
 PARAMETER('N');
 PARAMETER(PAR.Status_3);

 ENDIF;

 //?If BOTH or YES is selected for the ANALYSIS
 CASE;

 // IF PAR.Print Carcass Analysis Us is Both/Yes
 IF PAR.Print_Carcass_Analysis_Us = 'B'/'Y';

 CASE;

 // IF WRK.TH Payment Type is Live
 IF WRK.TH_Payment_Type = 'L';

 // AND WRK.TH Hog Class Type is Market
 AND WRK.TH_Hog_Class_Type = 'M';

 EXECUTE FUNCTION(Rtv BOH Pay Type      RT) TYPE(RTVOBJ) FILE(PKAWCPP)           AB1134737;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(WRK.BOH_Payment_Type);
 PARAMETER(WRK.BOH_Buy_Order_Type);
 {
  //?USER: Processing if Data record not found

  // *MO.VE             1183529*Bu = ilt. in functions
  PAR.BOH_Payment_Type = 'L';

  // *MO.VE             1183529*Bu = ilt. in functions
  PAR.BOH_Buy_Order_Type = 'O';

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 CASE;

 // IF WRK.BOH Payment Type is Live
 IF WRK.BOH_Payment_Type = 'L';

 // Call program Zzz Crc Sum & Dtl LMKTPF.
 CALL PROGRAM(Zzz Crc Sum & Dtl LMKTPF) ('PKMLPFR');
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER('Y');
 PARAMETER(DB1.TFD_Header_Action_Crc_Dtl);
 PARAMETER(DB1.TFD_Header_Action_Crc_Sum);
 PARAMETER('N');
 PARAMETER(PAR.Status_3);

 ENDIF;

 ENDIF;

 ENDIF;

}


ENDIF;

