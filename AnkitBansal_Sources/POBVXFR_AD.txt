// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POBVXFR
// ?Date: 14.08.2025 Time: 03:36:42
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Utl Upd Prnt CrdLmt   RT) TYPE(RTVOBJ) FILE(CABBREP)           AC1583637;
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Ship To Customer EQ DB1.Parent Customer
 IF DB1.Ship_To_Customer = DB1.Parent_Customer;

 EXECUTE FUNCTION(Utl Upd Prnt CrdLmt 2 RT) TYPE(RTVOBJ) FILE(CABBREP)           AC1583645;
 PARAMETER(DB1.Parent_Customer);
 PARAMETER(DB1.Parent_Credit_Limit);
 {
  //?USER: Process Data record

  CASE;

  // IF DB1.Ship To Customer NE PAR.Parent Customer
  IF DB1.Ship_To_Customer <> PAR.Parent_Customer;

  EXECUTE FUNCTION(CHG CHild Parent Cred  CH) TYPE(CHGOBJ) FILE(CABBREP)          AC1395748;
  PARAMETER(DB1.Ship_To_Customer);
  PARAMETER(PAR.Parent_Credit_Limit);
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?USER: Processing if Data record not found

   QUIT;

   //?USER: Processing before Data update

   EXECUTE FUNCTION(Set Date/Time Stamp   IF) TYPE(EXCINTFUN)                      AC1142219;
   PARAMETER(DB1.Job_Time);
   PARAMETER(DB1.User_Id);
   PARAMETER(DB1.Job_Name);
   PARAMETER(DB1.Job_Date);
   {
    //?Execute internal function

    // PAR.Job Time = JOB.*Job time
    PAR.Job_Time = JOB.*Job_time;

    // PAR.User Id = JOB.*USER
    PAR.User_Id = JOB.*USER;

    // PAR.Job Name = JOB.*JOB
    PAR.Job_Name = JOB.*JOB;

    // PAR.Job Date = JOB.*Job date
    PAR.Job_Date = JOB.*Job_date;

   }

   // DB1.Parent Credit Limit = PAR.Parent Credit Limit
   DB1.Parent_Credit_Limit = PAR.Parent_Credit_Limit;

  }

  ENDIF;

 }

 ENDIF;

}


