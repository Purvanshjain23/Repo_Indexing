// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PPNTXFR
// ?Date: 14.08.2025 Time: 03:41:16
// ?------------------------------------------------------------------------------------------------

//?Execute user function

// Call program Crt A/R Claim Apprl   XF.
CALL PROGRAM(Crt A/R Claim Apprl   XF) ('PPMIXFR');
PARAMETER(PAR.Claim_Number);
PARAMETER(PAR.Salesperson_to_Rvw_Claim);
PARAMETER(PAR.Claim_Company_Number);
PARAMETER(PAR.Claim_Order_Number);
PARAMETER(PAR.Load_ID);
PARAMETER(PAR.Claim_Ship_to_Customer);
PARAMETER(PAR.Claim_Customer_Name);
PARAMETER(PAR.Claim_Type);
PARAMETER(PAR.Claim_Status);

EXECUTE FUNCTION(CHG Status only        CH) TYPE(CHGOBJ) FILE(PDMKCPP)          AC1573743;
PARAMETER(PAR.Claim_Number);
PARAMETER('P');
{
 //?USER: Processing after Data read

 CASE;

 // IF PAR.Claim Status is Completed
 IF PAR.Claim_Status = 'C';

 // AND PAR.Claim Status NE DB1.Claim Status
 AND PAR.Claim_Status <> DB1.Claim_Status;

 // DB1.Memo Post Date = JOB.*Job date
 DB1.Memo_Post_Date = JOB.*Job_date;

 // DB1.Memo Post Time = JOB.*Job time
 DB1.Memo_Post_Time = JOB.*Job_time;

 // IF PAR.Claim Status is Memo Processing
 IF PAR.Claim_Status = 'M';

 // AND PAR.Claim Status NE DB1.Claim Status
 AND PAR.Claim_Status <> DB1.Claim_Status;

 // DB1.Memo Created = CND.Yes
 DB1.Memo_Created = 'Y';

 // DB1.Memo Created Date = JOB.*Job date
 DB1.Memo_Created_Date = JOB.*Job_date;

 // DB1.Memo Created Time = JOB.*Job time
 DB1.Memo_Created_Time = JOB.*Job_time;

 // DB1.Memo Created User = JOB.*USER
 DB1.Memo_Created_User = JOB.*USER;

 ENDIF;

 //?USER: Processing before Data update

 EXECUTE FUNCTION(Set Chg Date/Time      IF) TYPE(EXCINTFUN)                     AC1523476;
 PARAMETER(DB1.Change_Date);
 PARAMETER(DB1.Change_Time);
 PARAMETER(DB1.Change_User);
 PARAMETER(DB1.Change_Program);
 {
  //?Execute internal function

  // PAR.Change Date = JOB.*Job date
  PAR.Change_Date = JOB.*Job_date;

  // PAR.Change Time = JOB.*Job time
  PAR.Change_Time = JOB.*Job_time;

  // PAR.Change User = JOB.*USER
  PAR.Change_User = JOB.*USER;

  // PAR.Change Program = JOB.*PROGRAM
  PAR.Change_Program = JOB.*PROGRAM;

 }

}


