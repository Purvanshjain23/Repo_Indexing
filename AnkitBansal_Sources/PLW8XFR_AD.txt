// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLW8XFR
// ?Date: 14.08.2025 Time: 02:55:41
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Rtv Next Voucher Nbr   RT) TYPE(RTVOBJ) FILE(PLCEREP)          AB1324740;
PARAMETER(PAR.M3_Voucher_Number_Series);
PARAMETER(PAR.M3_Voucher_Next_Number);
{
 //?USER: Process Data record

 // PAR.M3 Voucher Next Number = DB1.M3 Voucher Next Number
 PAR.M3_Voucher_Next_Number = DB1.M3_Voucher_Next_Number;

 //?Increment
 // LCL.M3 Voucher Next Number = DB1.M3 Voucher Next Number + CON.1
 LCL.M3_Voucher_Next_Number = DB1.M3_Voucher_Next_Number + 1;

 CASE;

 // IF LCL.M3 Voucher Next Number GT DB1.M3 Voucher High Number
 IF LCL.M3_Voucher_Next_Number > DB1.M3_Voucher_High_Number;

 // LCL.M3 Voucher Next Number = DB1.M3 Voucher Low Number
 LCL.M3_Voucher_Next_Number = DB1.M3_Voucher_Low_Number;

 ENDIF;

 EXECUTE FUNCTION(Chg M3 Voucher Number  CH) TYPE(CHGOBJ) FILE(PLCEREP)          AB1324701;
 PARAMETER(DB1.M3_Voucher_Number_Series);
 PARAMETER(DB1.M3_Voucher_Description);
 PARAMETER(DB1.M3_Voucher_Low_Number);
 PARAMETER(DB1.M3_Voucher_High_Number);
 PARAMETER(LCL.M3_Voucher_Next_Number);
 PARAMETER(DB1.RS_User_Changed);
 PARAMETER(DB1.RS_Date_Changed);
 PARAMETER(DB1.RS_Time_Changed);
 PARAMETER(DB1.RS_Record_Status);
 PARAMETER(DB1.RS_Job);
 PARAMETER(DB1.RS_Program);
 PARAMETER(DB1.RS_User_Added);
 PARAMETER(DB1.RS_Date_Added);
 PARAMETER(DB1.RS_Time_Added);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Rtv Change Stamp      IF) TYPE(EXCINTFUN)                      AB1100934;
  PARAMETER(DB1.RS_User_Changed);
  PARAMETER(DB1.RS_Date_Changed);
  PARAMETER(DB1.RS_Time_Changed);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  {
   //?Execute internal function

   // PAR.RS User Changed = JOB.*USER
   PAR.RS_User_Changed = JOB.*USER;

   // PAR.RS Date Changed = JOB.*Job date
   PAR.RS_Date_Changed = JOB.*Job_date;

   // PAR.RS Time Changed = JOB.*Job time
   PAR.RS_Time_Changed = JOB.*Job_time;

   // PAR.RS Job = JOB.*JOB
   PAR.RS_Job = JOB.*JOB;

   // PAR.RS Program = JOB.*PROGRAM
   PAR.RS_Program = JOB.*PROGRAM;

  }

 }

}


