// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBY2CRT
// ?Date: 14.08.2025 Time: 03:49:51
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?RMC 12/05/16
//?RUN ONE TIME TO CREATE CHARGES FOR ALL MG CREATED LOADS SO FAR
EXECUTE FUNCTION(RTV to Create ALL Lds RT) TYPE(RTVOBJ) FILE(PBCVCPP)           AC2130081;
PARAMETER(PAR.TMS_Load_ID);
{
 //?USER: Process Data record

 //?ONE time to create charges for all loads processed so far with TMS
 CASE;

 // IF DB1.TMS Load ID NE LCL.TMS Load ID
 IF DB1.TMS_Load_ID <> LCL.TMS_Load_ID;

 // Call program CVT *YYMD to *CYMD    XF.
 CALL PROGRAM(CVT *YYMD to *CYMD    XF) ('PDGYXFR');
 PARAMETER(LCL.Date_USR);
 PARAMETER(DB1.TMS_Extract_Date);

 // LCL.LFC TFP Carrier Paid Date = LCL.Date                  USR
 LCL.LFC_TFP_Carrier_Paid_Date = LCL.Date_USR;

 // Call program Exc Crt Load FC       XF.
 CALL PROGRAM(Exc Crt Load FC       XF) ('PBY2XFR');
 PARAMETER(DB1.TMS_Load_ID);
 PARAMETER(LCL.Date_USR);
 PARAMETER(DB1.TMS_Extract_Time);

 // LCL.TMS Load ID = DB1.TMS Load ID
 LCL.TMS_Load_ID = DB1.TMS_Load_ID;

 ENDIF;

}


