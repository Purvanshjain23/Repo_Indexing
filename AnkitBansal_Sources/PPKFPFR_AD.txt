// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PPKFPFR
// ?Date: 14.08.2025 Time: 12:06:34
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

// WRK.Print Yes/No          USR = CND.Yes
WRK.Print_Yes_No_USR = 'Y';

// WRK.USR Display field = CND.no
WRK.USR_Display_field = 'N';

// WRK.Print (Yes/No) USR = CND.No
WRK.Print_Yes_No_USR = 'N';

//?USER: Record selection processing

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

CASE;

// IF PAR.Reason Code is Not Entered
IF PAR.Reason_Code = *BLANK;

// PGM.*Record selected = CND.*YES
PGM.*Record_selected = 'Y';

// IF *OTHERWISE
IF *OTHERWISE;

CASE;

// IF PAR.Reason Code EQ DB1.Reason Code
IF PAR.Reason_Code = DB1.Reason_Code;

// PGM.*Record selected = CND.*YES
PGM.*Record_selected = 'Y';

ENDIF;

ENDIF;

//?USER: Process top of page

CASE;

// IF WRK.USR Display field is no
IF WRK.USR_Display_field = 'N';

MOVE *ALL (To: TOP From: PAR);

EXECUTE FUNCTION(Rtv Claim Department   RT) TYPE(RTVOBJ) FILE(PPATREP)          AC1721713;
PARAMETER(PAR.Claim_Department_Code);
PARAMETER(TOP_Claim_Department_Desc);
PARAMETER(LCL.Claim_Responsibility);
PARAMETER(LCL.Record_Status);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

 // PGM.*Return code = CND.*Normal
 PGM.*Return_code = *BLANK;

}


//?Claim Reason Description
CASE;

// IF PAR.Reason Code is Not Entered
IF PAR.Reason_Code = *BLANK;

// TOP.Reason Description = CON.*All
TOP_Reason_Description = *All;

//?Claim Reason Description
// IF *OTHERWISE
IF *OTHERWISE;

EXECUTE FUNCTION(RTV Description        RT) TYPE(RTVOBJ) FILE(OPCXREP)          AC1273797;
PARAMETER(PAR.Reason_Code);
PARAMETER(TOP_Reason_Description);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


ENDIF;

ENDIF;

CASE;

// IF WRK.USR Display field is no
IF WRK.USR_Display_field = 'N';

// WRK.Print (Yes/No) USR = CND.Yes
WRK.Print_Yes_No_USR = 'Y';

ENDIF;

//?USER: Null report processing

// Execute function CLC Set for Null Rpt   US.
EXECUTE FUNCTION(CLC Set for Null Rpt   US) TYPE(EXCUSRSRC) ('PDUUUFR');
{
 C                     MOVEL'Y'       W0AP1P
 C                     MOVEL'Y'       W0NEWP
}


// WRK.Print (Yes/No) USR = CND.Yes
WRK.Print_Yes_No_USR = 'Y';

//?USER: Print required level headings

// SUPPRESSED PRINT Claim Department Code header format

//?USER: On print of detail format

// WRK.USR Display field = CND.yes
WRK.USR_Display_field = 'Y';

EXECUTE FUNCTION(RTV Description        RT) TYPE(RTVOBJ) FILE(OPCXREP)          AC1273797;
PARAMETER(CUR.Reason_Code);
PARAMETER(CUR.Reason_Description);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


// CUR.Text 1 USR = Condition name of DB1.Claim Reason Type
CUR.Text_1_USR = RTVCND(DB1.Require_CM_Approval);

//?USER: Print required level totals

// SUPPRESSED PRINT Claim Department Code totals format

