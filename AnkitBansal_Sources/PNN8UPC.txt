/*  SYNOPSIS - BUILED FILES FOR THE LOAD SCHEDULING PROCESSING     */
/*  BLD LDSCHPST,WFITEM POST,LDSCHPOSITION & UPD GRADEOCESSING     */
/*                                                                 */
/*                                                                 */
/*  SYSTEM    - ORDER MANAGEMENT SYSTEM                            */
/*  PROGRAM   - BUILE LOAD SCHEDULING POSITION FILES               */
/*  DATE      - 01/30/09                                           */
/*                                                                 */
/*  FILES THAT ARE USED IN THIS PROCESS:                           */
/*  CALENDAR                    CAAFREP                            */
/*  COMPANY ITEM              CABZREP                              */
/*  ITEM BALANCE DETAIL      CAB1REP                               */
/*  LOAD DETAIL                   OMFLCPP                          */
/*  LOAD HEADER                 OMFJCPP                            */
/*  LOAD SCHDLNG POSITION      PDMHCPP                             */
/*  LOAD SCHDLNG PSTN KEY      PDMJCPP                             */
/*  ORDER DETAIL                OPBGWKP                            */
/*  ORDER HEADER TRG           OPBFCPP                             */
/*  PFS INVENTORY ADJUSTMENT   PPBGCPP                             */
/*  PROCESS REQUEST PARMS      PME2REP                             */
/*  WAREHOUSE                   CAADREP                            */
/*  WF ITEM POSITION BALANCE   PME0CPP                             */
/*                                                                 */
/*  FILES THAT ARE CREATED DURING THIS PROCESS.                    */
/*  WF ITEM POSITION BALANCE   PME0CPP                             */
/*  LOAD SCHDLNG PSTN KEY      PDMJCPP                             */
/*  LOAD SCHDLNG POSITION      PDMHCPP                             */
/*                                                                 */
/*  UPDATE THE ORDER GRADE                                         */
/*  LOAD HEADER                 OMFJCPP                            */
/*                                                                 */
/*      PARAMETERS RECEIVED:   NONE                                */
/*                                                                 */
/*  SPECIAL PROCESSING....                                         */
/*  SEE IF FILES ARE IN USE IN THE PRKFHST                         */
/*  NOT IN USE THEN COPY FILE FROM PRKFLIB TO PRKFHST              */
/*  CURRENTLY ONLY FILE IN NEED IS THE PDMHCPP - LOAD SCHEDULE     */
/*  ALCOBJ FOR 10 SECONDS TRY 3 TIMES                              */
/*  POSITION DATA BASE.                                            */
/*******************************************************************/
/*  MODIFICATION HISTORY                                           */
/*---------------------------------------------------------------- */
/*  04/15/2009 SUSAN MASON  - ERROR ON BB, ON THE CLRPFM           */
/*                            COULD MONMSG FOR THE ERROR           */
/*                            BUT MUST NOT CLEAR ANY OF THE FILES  */
/*                            UNTIL ALL 3 OF THE FILES BEING       */
/*                            CLEARED IN THE PRODUCTION CAN BE     */
/*                            ALLOCATED.                           */
/*                                                                 */
/*           CLRPFM     FILE(*LIBL/PDMJCPP)    KEY FILE            */
/*           CLRPFM     FILE(*LIBL/PME0CPP)    SUMMARY             */
/*           CLRPFM     FILE(*LIBL/PDMHCPP)    LD POSITION         */
/*                                                                 */
/*  05/19/2009 SUSAN MASON  - DUE TO PDMHCPP NOT GETTING BUILT     */
/*                            WE ARE ADDING A PRINT ON THE         */
/*                            WRKOBJLCK PDMHCPP IN PRKFHST         */
/*                            SO WE CAN SEE MORE INFORMATION.      */
/*                                                                 */
/*  05/19/2009 SUSAN MASON  - DUE TO PDMHCPP NOT GETTING BUILT     */
/*                            WE ARE TAKING THE WAIT ON THE        */
/*                            ALLOCATION FROM 10 SECONDS TO 20     */
/*                            SECONDS                              */
/*******************************************************************/
/*                                                                 */
/*******************************************************************/

 PMB8XCLP:   PGM

             DCL        VAR(&USER) TYPE(*CHAR) LEN(10) /* +
                          USER                      */
/*******************************************************************/
/*                                                                 */
/* Create Duplicate verion of file to QTEMP.                       */
/*                                                                 */
/*  Pull the data from the physical only.                          */
/*                                                                 */
/*******************************************************************/
/*                                                                 */
/*           DCL        VAR(&DATA) TYPE(*CHAR) LEN(10)             */
/*           DCL        VAR(&DATAH) TYPE(*CHAR) LEN(10)            */
/*           DCL        VAR(&DATAS) TYPE(*CHAR) LEN(10)            */
/*                                                                 */
/*           GET THE DATA LIBRARY                                  */
/*           CALL       PGM(CAQXXFR) PARM(' ' &DATA &DATAH)        */
/*           GET THE USER WORK LIBRARY                             */
/*           CALL       PGM(PMD9XFR) PARM(' ' &DATAS)              */
/*                                                                 */
/*           CHGVAR     VAR(&DATAS) VALUE(MASFLIB)                 */
/*******************************************************************/

             RTVJOBA    USER(&USER)

CLRFLS4:



             CLRPFM     FILE(*LIBL/PDMJCPP) /* KEY FILE  */
             CLRPFM     FILE(*LIBL/PME0CPP) /* SUMMARY   */
             CLRPFM     FILE(*LIBL/PDMHCPP) /* LD POSITION */

             CALL       PGM(PMCVXFR) PARM(' ' '0000000')

             GOTO       CMDLBL(END)
/**************************************************************/
 END:        ENDPGM
