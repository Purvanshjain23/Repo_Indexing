// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMP5SRR
// ?Date: 14.08.2025 Time: 03:43:44
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

// LCL.CUSTOMER NUMBER = CON.*ZERO
LCL.CUSTOMER_NUMBER = *ZERO;

//?USER: Load subfile record from DBF record

EXECUTE FUNCTION(RTV Ship To Flag       RT) TYPE(RTVOBJ) FILE(CABBREP)          AC1464722;
PARAMETER(RCD.CUSTOMER_NUMBER);
PARAMETER(LCL.Ship_To_Customer_Flag);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 // PGM.*Return code = CND.*Record does not exist
 PGM.*Return_code = 'Y2U0005';

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


CASE;

// IF PGM.*Return code is *Record does not exist
IF PGM.*Return_code = 'Y2U0005';

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

CASE;

// IF LCL.Ship To Customer Flag is No Use as Ship to Cust
IF LCL.Ship_To_Customer_Flag = 'N';

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

CASE;

// IF PGM.*Record selected is *YES
IF PGM.*Record_selected = 'Y';

//?SEL: Customer
CASE;

// IF LCL.CUSTOMER NUMBER EQ RCD.CUSTOMER NUMBER
IF LCL.CUSTOMER_NUMBER = RCD.CUSTOMER_NUMBER;

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

//?SEL: Customer
// IF *OTHERWISE
IF *OTHERWISE;

// LCL.CUSTOMER NUMBER = RCD.CUSTOMER NUMBER
LCL.CUSTOMER_NUMBER = RCD.CUSTOMER_NUMBER;

ENDIF;

ENDIF;

//?CALC: Screen function fields

EXECUTE FUNCTION(Customer Name DRV) TYPE(DRVFLD)                                AC1631131;
PARAMETER(RCD.Customer_Name_DRV);
PARAMETER(RCD.CUSTOMER_NUMBER);
{
 //?Calculate derived field

 EXECUTE FUNCTION(RTV Customer Name      RT) TYPE(RTVOBJ) FILE(CABBREP)          AC1108159;
 PARAMETER(PAR.Ship_To_Customer);
 PARAMETER(PAR.Customer_Name_DRV);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  // PGM.*Return code = CND.*Record does not exist
  PGM.*Return_code = 'Y2U0005';

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

}


