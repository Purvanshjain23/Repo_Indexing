/**************************************************************************/
/*  PROGRAM:       TRG085CL                                               */
/*  PROGRAM DESC:  APPLY TRIGGER TO HPS FEED TICKET DTL (HSP085) FILE     */
/*  PROGRAMMER:    DANNY NGUYEN                                           */
/*  CREATE DATE:   01/20/2022                                             */
/*  PROJECT:       W88663                                                 */
/*                                                                        */
/*  PURPOSE:       THIS WILL APPLY PHYSICAL FILE TRIGGER TO THE HPS SALES */
/*                 MOVEMENT DTL (HSP085) FILE FOR ALL TRIGGER DATABASE    */
/*                 EVENTS:                                                */
/*                   INSERT, UPDATE & DELETE.                             */
/* -----------------------------------------------------------------------*/
/*  PARMS:                                                                */
/*                 &ADDRMV = 'A' (ADD) OR 'R' (REMOVE)                    */
/*                 &OBJLIB = OBJECT LIBRARY                               */
/**************************************************************************/
/* MODIFICATION HISTORY                                                   */
/**************************************************************************/
/* DATE     INT  PROJECT DESCRIPTION                                      */
/* -------- ---- ------- -------------------------------------------------*/
/* 04/05/22  BLG WHD88663 Changed to execute trigger wrapper program      */
/*                        TRG085W instead of TRG002W to follow out HPS    */
/*                        standards. Also renamed pGM from TRG002CL to    */
/*                        TRG085CL.                                       */
/**************************************************************************/

             PGM        PARM(&ADDRMV &OBJLIB)

             DCL        VAR(&ADDRMV) TYPE(*CHAR) LEN(1)
             DCL        VAR(&OBJLIB) TYPE(*CHAR) LEN(10)

/* ADD TRIGGER */
             IF         COND(&ADDRMV *EQ 'A') THEN(DO)
/* ADD TRIGGER FOR INSERT */
             ADDPFTRG   FILE(&OBJLIB/HSP085) TRGTIME(*AFTER) +
                          TRGEVENT(*INSERT) PGM(TRG085W) +
                          RPLTRG(*YES) TRG(SEB_HSP085_INSERT)

/* ADD TRIGGER FOR UPDATE */
             ADDPFTRG   FILE(&OBJLIB/HSP085) TRGTIME(*AFTER) +
                          TRGEVENT(*UPDATE) PGM(TRG085W) +
                          RPLTRG(*YES) TRG(SEB_HSP085_UPDATE) +
                          TRGUPDCND(*CHANGE)

/* ADD TRIGGER FOR DELETE */
             ADDPFTRG   FILE(&OBJLIB/HSP085) TRGTIME(*AFTER) +
                          TRGEVENT(*DELETE) PGM(TRG085W) +
                          RPLTRG(*YES) TRG(SEB_HSP085_DELETE)
             ENDDO      /* &ADDRMV = 'A' */


/* REMOVE TRIGGER */
             IF         COND(&ADDRMV *EQ 'R') THEN(DO)
             RMVPFTRG   FILE(&OBJLIB/HSP085) TRGEVENT(*ALL)
             ENDDO

 END:        ENDPGM
