/*                                                                  */
/*  SYNOPSIS -  THIS PROGRAM WILL BE CALLED FROM A TRIGGER ON THE   */
/*              LOAD DETAIL FILE IN THE STC POULTRY  SYSTEM         */
/*              THIS PROGRAM WILL CALL AN RPG PROGRAM TO RETRIEVE   */
/*              THE COMPANY AND LOAD FROM THE TRIGGER BUFFER        */
/*              THIS PROGRAM WILL CALL AN RPG PROGRAM TO UPDATE     */
/*              THE LOAD HEADER, LOAD DETAIL AND ORDER HEADER       */
/*              FILE IN THE ELBERTON OMS SYSTEM.                    */
/*                                                                  */
/*  SYSTEM    - IDEAS/400 ORDER PROCESSING                          */
/*  USER NAME - MARK ARENSBERG                                      */
/*  DATE      - 01/18/99                                            */
/*                                                                  */
/********************************************************************/
/*  MODIFIED:                                                       */
/*   5/20/99   MARY SHARP      ONLY RUN CL IF TRIGGER WAS FIRED     */
/*                             ON BIGBYTE (DATA AREA)               */
/*                                                                  */
/********************************************************************/
/*      PARAMETERS RECEIVED:                                        */
/*                                                                  */
/*               &TRGBUF  - TRIGGER BUFFER                          */
/*               &TRGLEN  - TRIGGER LENGTH                          */
/********************************************************************/
/*      PARAMETERS USED:                                            */
/*                                                                  */
/*               &COMP    - COMPANY NUMBER                          */
/*               &LOAD    - LOAD NUMBER                             */
/*               &RUN     - FIRE TRIGGER                            */
/********************************************************************/

 PDVDPCLP:  PGM         PARM(&TRGBUF &TRGLEN)

         DCL     &TRGBUF     *CHAR    (568)  /*  TRIGGER BUFFER */
         DCL     &TRGLEN     *DEC     (4 0)  /*  BUFFER LENGTH  */
         DCL     &COMP       *DEC     (3 0)  /*  COMPANY #  */
         DCL     &LOAD       *DEC     (7 0)  /*  LOAD #     */
         DCL     &RUN        *CHAR    (1)    /*  FIRE TRIGGER */

/********************************************************************/
/*   CHECK BIGBYTE DATA AREA TO SEE IF TRIGGER SHOULD BE FIRED      */
/********************************************************************/

             RTVDTAARA  DTAARA(QGPL/BIGBYTE) RTNVAR(&RUN)

             IF         COND(&RUN *EQ 'Y') THEN(DO)

/********************************************************************/
/*   CALL PROGRAM TO RTV COMP AND LOAD FROM THE TRIGGER BUFFER      */
/********************************************************************/

             CALL       PGM(LP304)  PARM(&TRGBUF &TRGLEN &COMP &LOAD)

/********************************************************************/
/*   THIS PROGRAM WILL BE TRIGGERED SO WE ONLY WANT COMPANY 260     */
/********************************************************************/

             IF         COND(&COMP = 260)  THEN(DO)
/********************************************************************/
/*   CALL PROGRAM TO MOVE DATA FROM STC POULTRY TO INTERFACE FILES  */
/********************************************************************/

             CALL       PGM(LP302)  PARM(&COMP &LOAD)

/********************************************************************/
/*   SETUP ELBERTON LIBRARY LIST                                    */
/********************************************************************/

             PSHLIBL
             CALL SETELB

/********************************************************************/
/*   CALL PROGRAM TO MOVE DATA FROM INTERFACE FILES TO ELBERTON OMS */
/********************************************************************/

             CALL       PGM(LP303)  PARM(&COMP &LOAD)

/********************************************************************/
/*   SETUP STC POULTRY LIBRARY LIST                                 */
/********************************************************************/

             POPLIBL

             ENDDO

             ENDDO

 END:        ENDPGM

