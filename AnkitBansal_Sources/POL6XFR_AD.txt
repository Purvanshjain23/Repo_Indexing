// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for POL6XFR
// ?Date: 14.08.2025 Time: 03:38:03
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Clc Freight Charges   RT) TYPE(RTVOBJ) FILE(OMFJCPP)           AC1627995;
PARAMETER(PAR.FCR_Week_Begin_Date);
{
 //?USER: Initialize routine

 EXECUTE FUNCTION(RTV Default Co No App IF) TYPE(EXCINTFUN)                      AC1628378;
 PARAMETER(LCL.Company_Number);
 {
  //?Execute internal function

  EXECUTE FUNCTION(RTV Program Setup w/Co RT) TYPE(RTVOBJ) FILE(CADRREP)          AC1935572;
  PARAMETER(JOB.*USER);
  PARAMETER(NLL.Allow_Multi_Company);
  PARAMETER(NLL.Default_Printer);
  PARAMETER(NLL.Salesperson_Code);
  PARAMETER(LCL.Company_Number);
  PARAMETER(PAR.User_Code_Model);
  {
   //?USER: Processing if Data record not found

   // PGM.*Return code = CND.*Record does not exist
   PGM.*Return_code = 'Y2U0005';

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

  }

  CASE;

  // IF LCL.Company Number is Equal to zero
  IF LCL.Company_Number = *ZERO;

  CASE;

  // IF PAR.User Code Model is equal to blank
  IF PAR.User_Code_Model = *BLANK;

  EXECUTE FUNCTION(RTV First Default Co  RT) TYPE(RTVOBJ) FILE(CADTREP)           AC1628379;
  PARAMETER(JOB.*USER);
  PARAMETER(PAR.Company_Number);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

   QUIT;

  }

  // IF *OTHERWISE
  IF *OTHERWISE;

  EXECUTE FUNCTION(RTV First Default Co  RT) TYPE(RTVOBJ) FILE(CADTREP)           AC1628379;
  PARAMETER(PAR.User_Code_Model);
  PARAMETER(PAR.Company_Number);
  {
   //?USER: Processing if Data record not found

   MOVE *ALL (To: PAR From: CON);

   //?USER: Process Data record

   MOVE *ALL (To: PAR From: DB1);

   QUIT;

  }

  ENDIF;

  // IF *OTHERWISE
  IF *OTHERWISE;

  // PAR.Company Number = LCL.Company Number
  PAR.Company_Number = LCL.Company_Number;

  ENDIF;

 }

 EXECUTE FUNCTION(Rtv NextSat/Yr/Wk HPS RT) TYPE(RTVOBJ) FILE(CAAFREP)           AC1605349;
 PARAMETER(LCL.Company_Number);
 PARAMETER(PAR.BOL_Complete_Date);
 PARAMETER(LCL.Saturday_USR);
 PARAMETER(LCL.HPS_Calendar_Year);
 PARAMETER(LCL.HPS_Calendar_Week);
 {
  //?USER: Initialize routine

  MOVE *ALL (To: PAR From: CON);

  //?USER: Processing if Data record not found

  // PGM.*Return code = CND.Calendar not found
  PGM.*Return_code = 'USR0018';

  //?USER: Process Data record

  CASE;

  // IF DB1.Day of Week is Saturday
  IF DB1.Day_of_Week = '7';

  MOVE *ALL (To: PAR From: DB1);

  // PAR.Date Out = DB1.Post to G/L Date
  PAR.Date_Out = DB1.Post_to_G_L_Date;

  QUIT;

  ENDIF;

 }

 //?***** Change Log and Comments
 DO;

 //?** 12/08/2010 RMC C01199
 //?** Use bol complete date as the driver instead of the Sched Ship Dt
 //?** 08/12/2008 LJB E00207
 //?** Pass Override Miles to Clc Freight Charges XF
 ENDDO;

 //?USER: Process Data record

 CASE;

 // IF DB1.BOL Complete Date GT LCL.Saturday              USR
 IF DB1.BOL_Complete_Date > LCL.Saturday_USR;

 QUIT;

 ENDIF;

 CASE;

 // IF DB1.Load Status is Shipped or Invoiced
 IF DB1.Load_Status = 'I'/'S';

 // AND DB1.Shipping Method is Prepaid
 AND DB1.Shipping_Method = 'PR'/'PT';

 CASE;

 // IF DB1.LH Carrier Payment Sts is Paid
 IF DB1.LH_Carrier_Payment_Sts = 'P';

 // IF *OTHERWISE
 IF *OTHERWISE;

 // Call program Clc Freight Charges   XF.
 CALL PROGRAM(Clc Freight Charges   XF) ('POL2XFR');
 PARAMETER(DB1.Load_ID);
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Scheduled_Ship_Date);
 PARAMETER(DB1.Load_Status);
 PARAMETER(DB1.Flat_Amount);
 PARAMETER(DB1.Total_Stops);
 PARAMETER(DB1.Carrier_Code);
 PARAMETER(DB1.Load_Type);
 PARAMETER(DB1.Total_Load_Miles);
 PARAMETER(DB1.Shipping_Method);
 PARAMETER(DB1.Ship_From_Warehouse);
 PARAMETER(DB1.Ship_To_State_Code);
 PARAMETER(DB1.Export_Status);
 PARAMETER(DB1.BOL_Complete_Date);
 PARAMETER(DB1.Shipping_Line);
 PARAMETER(DB1.Discharge_Port);
 PARAMETER(DB1.Load_Shag_Flag);
 PARAMETER(DB1.Load_Wash_Flag);
 PARAMETER(DB1.Override_Total_Load_Miles);

 ENDIF;

 ENDIF;

}


