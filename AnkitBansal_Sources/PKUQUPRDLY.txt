/*******************************************************************/
/***TESTTTTTTTTTTTTTTTTTTTTT CHANGE THE ESEND BEFORE PRODUCTION*****/
/*******************************************************************/
/* MODIFIED:  RMC 5/02/02  CHANGE TLX400J TO TLX400P               */
/*            RMC 2/01/05  ADDED CODE FOR GENIFAX SOFTWARE         */
/*            SLM 4/11/07  REMOVE THE TLX FAXING ROUTINE           */
/*                         AND CLEAN UP LINES AND DOCUMENT CL      */
/*            SLM 4/11/07  ADD THE FAXING VERIFICATION ROUTINE     */
/*                         THIS IS BY COMPANY AND ONLY IF THE      */
/*                         FAXING VERIFICATION IS TURNNED ON DO    */
/*                         WE PERFORM THIS PROCESS.                */
/*                         ADDED PARMS FROM COMPANY TO FAXPX2      */
/* 05/21/2007 LJB DLY029  I CREATED A BACKUP COPY OF THIS CLP IN   */
/*                        HPEDEVGEN/QCLSRC NAMED PKUQUPRSV BECAUSE */
/*                        THERE WOULD BE A LOT OF COMMENTED CODE.  */
/*                        PPITPFR HAS BEEN CHANGED TO PMG6PFR AND  */
/*                        IS OVER THE NEW COMPANY DOCUMENT         */
/*                        DEFAULTS FILE. ADDITIONAL PARMS NEEDED   */
/*                        BY THE OVERLAY PROCESS HAVE BEEN ADDED.  */
/*******************************************************************/
 PKUQUPR:    PGM        PARM(&PRTF &DESC &COVER &FAXC &FAXR &FAXAREA +
                          &FAXPHONE &XCO &F1 &FAXPX1 &FAXPX2)

            DCL        VAR(&PRTF)     TYPE(*CHAR) LEN(10)
            DCL        VAR(&DESC)     TYPE(*CHAR) LEN(25)
            DCL        VAR(&COVER)    TYPE(*CHAR) LEN(10)
            DCL        VAR(&FAXC)     TYPE(*CHAR) LEN(25)
            DCL        VAR(&FAXR)     TYPE(*CHAR) LEN(25)
            DCL        VAR(&FAXAREA)  TYPE(*CHAR) LEN(3)
            DCL        VAR(&FAXPHONE) TYPE(*CHAR) LEN(12)
            DCL        VAR(&XCO)      TYPE(*DEC)
            DCL        VAR(&COMPANY)  TYPE(*DEC) LEN(3 0)
            DCL        VAR(&DEPT)     TYPE(*CHAR) LEN(6)

            DCL        VAR(&FTX2)     TYPE(*CHAR) LEN(75)
            DCL        VAR(&FTX3)     TYPE(*CHAR) LEN(75)
            DCL        VAR(&FTX4)     TYPE(*CHAR) LEN(75)
            DCL        VAR(&F1)       TYPE(*CHAR) LEN(1) /* VERIFY=Y */
            DCL        VAR(&FAXPX1)   TYPE(*CHAR) LEN(25)
            DCL        VAR(&FAXPX2)   TYPE(*CHAR) LEN(25)
 /*                Fax to area and phone                             */
             DCL        VAR(&ADDPHN)  TYPE(*CHAR) LEN(25)
             DCL        VAR(&ADDPH1)  TYPE(*CHAR) LEN(25)
             DCL        VAR(&ADDPH2)  TYPE(*CHAR) LEN(25)
 /*                Location of fax server                            */
             DCL        VAR(&ADDR)    TYPE(*CHAR) LEN(100)
 /*   -------------------------------------------------------------- */
             CHGVAR     VAR(&ADDPHN) VALUE(&FAXAREA *TCAT &FAXPHONE)
             OVRPRTF    FILE(PMG6PFR$) PAGRTT(*AUTO) OUTQ(FAXQ) +
                          HOLD(*NO)
             CHGVAR     VAR(&DEPT) VALUE('CARCSUM')
             CHGVAR     VAR(&COMPANY) VALUE(&XCO)

 /*----------------------------------------------------------------- */
 /* PRINT THE COVER SHEET WITH THE OVERLAY FOR THE CORRECT COMPANY   */
 /*----------------------------------------------------------------- */
             CALL       PGM(PMG6PFR) PARM('' &DEPT &FAXC &FAXR &ADDPHN)

 /*  RTV THE EMAIL ADDRESS FROM THE SYSTEM VALUES FILE               */
 /*  &ADDR WILL CONTAIN @S FROM THE SYSTEM VALUES FILE               */
             CALL       PGM(PPJXXFR) PARM(' ' 'FAXSERVER' &ADDR)

 /*----------------------------------------------------------------- */
 /* FTX2 IS THE FAX NUMBER GOING TO THE PRODUCER OR THE PRODUCER     */
 /* LOCATION. THIS IS WHAT IS IN THE TATTOO FAX DRIVER               */
 /*----------------------------------------------------------------- */
             CHGVAR     VAR(&FTX2) VALUE(&ADDPHN *TCAT &ADDR)
             CHGVAR     VAR(&DESC) VALUE(&FAXC) /* CUSTOMER NAME */

 /********************************************************************/
 /* IF THE FAXING VERIFICATION HAS BEEN TURNED ON THEN SEND A FAX    */
 /*  TO THE SEABOARD FAX NUMBER, AND POSSIBLY TO THE FAX MACHINE     */
 /*  THAT IS ON THE 2ND FLOOR.                                       */
 /* FTX3 WILL BE THE SEABOARD FAX NUMBER                             */
 /* FTX4 WILL BE THE FAX THAT IS SET UP BY SALLY ON THE 2ND FLOOR    */
 /********************************************************************/
             IF         COND(&F1 = 'N') THEN(GOTO CMDLBL(ENDFX4))

 /*    SEND TO SUSAN_MASON@SEABAORDFOODS.COM                         */
             ESEND/ESNDMAIL RECIPIENT(ISSUSANM) SUBJECT(&DESC) +
                          MSG(*NONE) MSGTYPE(*TEXT) ATTLIST((* *PDF +
                          *N PMG6PFR$) (* *PDF *N &PRTF))

 /*----------------------------------------------------------------- */
             IF         COND(&FAXPX1 = 'N') +
                          THEN(GOTO CMDLBL(ENDFX3))

             CHGVAR     VAR(&FTX3) VALUE(&FAXPX1 *TCAT &ADDR)
             ESEND/ESNDMAIL RECIPIENT(&FTX3) SUBJECT(&DESC) +
                          MSG(*NONE) MSGTYPE(*TEXT) ATTLIST((* *MSG +
                          *N PPITPFR$) (* *PDF *N &PRTF))

 /*----------------------------------------------------------------- */
 ENDFX3:     IF         COND(&FAXPX2 = 'N') THEN(GOTO CMDLBL(ENDFX4))

             CHGVAR     VAR(&FTX4) VALUE(&FAXPX2 *TCAT &ADDR)
             ESEND/ESNDMAIL RECIPIENT(&FTX4) SUBJECT(&DESC) +
                          MSG(*NONE) MSGTYPE(*TEXT) ATTLIST((* *PDF +
                          *N PMG6PFR$) (* *PDF *N &PRTF))

 ENDFX4:     DLTSPLF    FILE(&PRTF) SELECT(*ALL)
             MONMSG     MSGID(CPF3309)
             DLTSPLF    FILE(PMG6PFR$) SELECT(*ALL)
             MONMSG     MSGID(CPF3309)

 END:       ENDPGM
