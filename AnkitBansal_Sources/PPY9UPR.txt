/***************************************************************** */
/*  PROGRAM NUMBER:  PPY9UPR                                       */
/*  PROGRAM NAME:    SELECT SESSION COMPANY                        */
/*  PROGRAMMER:      Purva DROGE                                   */
/*  CREATE DATE:     06/27/06                                      */
/*                                                                 */
/*  FUNCTION:        This CLP CREATES THE USER PROFILE IN QTEMP    */
/*                   WITH THE SESSION COMPANY AS THE DEFAULT       */
/*                                                                 */
/*******************************************************************/
/*  Modification History                                           */
/*   2/16/2017 Brad Baden  E9064 - Add processing for company 440  */
/*                                                                 */
/*                                                                 */
/*******************************************************************/
             PGM        PARM(&USER &CO &WHS)

/*-----------------------------------------------------------------*/
/*                      PARAMETER                                  */
/*-----------------------------------------------------------------*/
             DCL        VAR(&USER) TYPE(*CHAR) LEN(10)
             DCL        VAR(&CO) TYPE(*DEC) LEN(3 0)
             DCL        VAR(&WHS) TYPE(*CHAR) LEN(3)
             DCL        VAR(&XCO) TYPE(*CHAR) LEN(3)
             DCL        VAR(&XWHS) TYPE(*CHAR) LEN(5)

/*-----------------------------------------------------------------*/
/*                     INITIALIZATION                              */
/*-----------------------------------------------------------------*/

             CHGVAR     VAR(&XCO) VALUE(&CO)
             CHGVAR     VAR(&XWHS) VALUE('"' *TCAT &WHS *TCAT '"')

/*-----------------------------------------------------------------*/
/*                           MAIN                                  */
/*-----------------------------------------------------------------*/
COMP360:     IF         COND(&XCO *EQ '360') THEN(DO)
             CHGCURLIB  CURLIB(*CRTDFT)
             MONMSG     MSGID(CPF0000)
             UPDATE     SET((DTAJCD &XWHS)) SQL('from cadtrep WHERE +
                          DTAJVN="' *TCAT &USER *TCAT '"')
             MONMSG     MSGID(CPF0000)
             RMVLIBLE   LIB(PRKFTFP)
             MONMSG     MSGID(CPF0000)
             ADDLIBLE   LIB(PRKFGUP)
             MONMSG     MSGID(CPF0000)
             ENDDO

COMP440:     IF         COND(&XCO *EQ '440') THEN(DO)
             DELETE     SQL('FROM prkfdft440/cadtrep where DTAJVN="' +
                          *TCAT &USER *TCAT '"')
             CPYF       FROMFILE(PRKFLIB/CADTREP) +
                          TOFILE(PRKFDFT440/CADTREP) MBROPT(*ADD) +
                          CRTFILE(*YES) INCREL((*IF DTAJVN *EQ +
                          &USER)) FMTOPT(*MAP *DROP)
                          MONMSG CPF0000
             UPDATE     SET((DTAIC3 &XCO) (DTAJCD &XWHS)) SQL('from +
                          PRKFDFT440/cadtrep WHERE DTAJVN="' *TCAT +
                          &USER *TCAT '"')
             MONMSG     MSGID(CPF0000)
             CHGCURLIB  CURLIB(PRKFDFT440)
             MONMSG     MSGID(CPF0000)
             RMVLIBLE   LIB(PRKFGUP)
             MONMSG     MSGID(CPF0000)
             ADDLIBLE   LIB(PRKFTFP)
             MONMSG     MSGID(CPF0000)
             ENDDO

COMP960:     IF         COND(&XCO *EQ '960') THEN(DO)
             DELETE     SQL('FROM prkfdft960/cadtrep where DTAJVN="' +
                          *TCAT &USER *TCAT '"')
             CPYF       FROMFILE(PRKFLIB/CADTREP) +
                          TOFILE(PRKFDFT960/CADTREP) MBROPT(*ADD) +
                          CRTFILE(*YES) INCREL((*IF DTAJVN *EQ +
                          &USER)) FMTOPT(*MAP *DROP)
                          MONMSG CPF0000
             UPDATE     SET((DTAIC3 &XCO) (DTAJCD &XWHS)) SQL('from +
                          PRKFDFT960/cadtrep WHERE DTAJVN="' *TCAT +
                          &USER *TCAT '"')
             MONMSG     MSGID(CPF0000)
             CHGCURLIB  CURLIB(PRKFDFT960)
             MONMSG     MSGID(CPF0000)
             RMVLIBLE   LIB(PRKFGUP)
             MONMSG     MSGID(CPF0000)
             ADDLIBLE   LIB(PRKFTFP)
             MONMSG     MSGID(CPF0000)
             ENDDO

/*-----------------------------------------------------------------*/
/*                      PROGRAM END                                */
/*-----------------------------------------------------------------*/
 ENDPGM:
             ENDPGM
