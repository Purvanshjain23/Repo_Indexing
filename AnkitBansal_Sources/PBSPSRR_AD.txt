// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PBSPSRR
// ?Date: 14.08.2025 Time: 03:49:15
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

// LCL.First Time Flag = CND.Yes
LCL.First_Time_Flag = 'Y';

//?USER: Load subfile record from DBF record

//?Display Company Name
CASE;

// IF LCL.First Time Flag is Yes
IF LCL.First_Time_Flag = 'Y';

EXECUTE FUNCTION(RTV Company Name       RT) TYPE(RTVOBJ) FILE(CAABREP)          AC1255767;
PARAMETER(PAR.Company_Number);
PARAMETER(CTL.Company_Name);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


// LCL.First Time Flag = CND.NO
LCL.First_Time_Flag = 'N';

ENDIF;

//?Only display records that can be on a PFS Prod Sched Batch
CASE;

// IF RCD.Record Status is Active
IF RCD.Record_Status = 'A';

// AND RCD.Base/Conv/Loss Item is Base/Converted
AND RCD.Base_Conv_Loss_Item = 'B'/'C';

// AND RCD.Item Type Code is FG/WP
AND RCD.Item_Type_Code = 'FG'/'WP';

// AND RCD.Item Prod Sched Send PFS is Yes
AND RCD.Item_Prod_Sched_Send_PFS = 'Y';

// AND RCD.Item Code is LT 8000000
AND RCD.Item_Code < 8000000;

// AND RCD.U/M - Primary is Combos
AND ( RCD.UOM_Primary = 'CB';

// OR RCD.U/M - Primary is EQ Boxes
OR RCD.UOM_Primary = 'BX' );

// IF *OTHERWISE
IF *OTHERWISE;

// PGM.*Record selected = CND.*NO
PGM.*Record_selected = 'N';

ENDIF;

