// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PNVCXFR
// ?Date: 14.08.2025 Time: 03:46:40
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(CVT PreCk Bcn Cost    RT) TYPE(RTVOBJ) FILE(POAXCPP)           AC2007508;
{
 //?USER: Initialize routine

 // LCL.Item Code = CON.*ZERO
 LCL.Item_Code = *ZERO;

 //?USER: Process Data record

 CASE;

 // IF LCL.Item Code NE DB1.Item Code
 IF LCL.Item_Code <> DB1.Item_Code;

 EXECUTE FUNCTION(Rtv DPM Cost Info     RT) TYPE(RTVOBJ) FILE(CABZREP)           AC2007086;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Item_Code);
 PARAMETER(LCL.UOM_Pricing);
 PARAMETER(LCL.Unit_Weight);
 PARAMETER(LCL.Item_Structure_Class_Code);
 PARAMETER(LCL.Item_Structure_Group_Code);
 PARAMETER(LCL.Item_Structure_Type_Code);
 PARAMETER(LCL.Credit_Item_Status);
 PARAMETER(LCL.FP_Std_Green_Weight);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

 }

 // LCL.Item Code = DB1.Item Code
 LCL.Item_Code = DB1.Item_Code;

 ENDIF;

 CASE;

 // IF LCL.Credit Item Status is Not Yes
 IF LCL.Credit_Item_Status = *BLANK/'N';

 //?CALC: Costs
 CASE;

 // IF LCL.U/M - Pricing is Cases
 IF LCL.UOM_Pricing = 'CS';

 // AND LCL.FP Std Green Weight is Entered
 AND LCL.FP_Std_Green_Weight <> *ZERO;

 // Std Packaging Cost/CWT
 PAR.Std_Packaging_Cost_CWT = ( ( ( DB1.Std_Packaging_Cost_CWT / 100 'H' )
 * LCL.FP_Std_Green_Weight 'H' ) / LCL.Unit_Weight 'H' ) * 100 'H';

 // Std Other Cost/CWT
 PAR.Std_Other_Cost_CWT = ( ( ( DB1.Std_Other_Cost_CWT / 100 'H' )
 * LCL.FP_Std_Green_Weight 'H' ) / LCL.Unit_Weight 'H' ) * 100 'H';

 // Std Inc. Labor Cost/Cwt
 PAR.Std_Inc_Labor_Cost_CWT = ( ( ( DB1.Std_Inc_Labor_Cost_CWT / 100 'H' )
 * LCL.FP_Std_Green_Weight 'H' ) / LCL.Unit_Weight 'H' ) * 100 'H';

 // Std Ingredient Cost/CWT
 PAR.Std_Ingredient_Cost_CWT = ( ( ( DB1.Std_Ingredient_Cost_CWT / 100 'H' )
 * LCL.FP_Std_Green_Weight 'H' ) / LCL.Unit_Weight 'H' ) * 100 'H';

 // Std Meat Cost/CWT
 PAR.Std_Meat_Cost_CWT = ( ( ( DB1.Std_Meat_Cost_CWT / 100 'H' )
 * LCL.FP_Std_Green_Weight 'H' ) / LCL.Unit_Weight 'H' ) * 100 'H';

 // Std Total Labor Cost/CWT
 PAR.Std_Total_Labor_Cost_CWT = ( ( ( PAR.Std_Packaging_Cost_CWT + PAR.Std_Other_Cost_CWT )
 + PAR.Std_Inc_Labor_Cost_CWT ) + PAR.Std_Ingredient_Cost_CWT ) + PAR.Std_Meat_Cost_CWT;

 EXECUTE FUNCTION(CVT PreCk Bcn Cost    CH) TYPE(CHGOBJ) FILE(POAXCPP)           AC2007509;
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Effective_Date);
 PARAMETER(PAR.Std_Packaging_Cost_CWT);
 PARAMETER(PAR.Std_Other_Cost_CWT);
 PARAMETER(PAR.Std_Inc_Labor_Cost_CWT);
 PARAMETER(PAR.Std_Ingredient_Cost_CWT);
 PARAMETER(PAR.Std_Meat_Cost_CWT);
 PARAMETER(PAR.Std_Total_Labor_Cost_CWT);
 PARAMETER(LCL.FP_Std_Green_Weight);
 ENDIF;

 ENDIF;

}


