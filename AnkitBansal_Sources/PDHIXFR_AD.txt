// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDHIXFR
// ?Date: 14.08.2025 Time: 03:34:36
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Rtv/Chg Assigned Sts   RT) TYPE(RTVOBJ) FILE(PDLYREP)          AC1504560;
{
 //?USER: Process Data record

 CASE;

 // IF DB1.Assigned Status is yes
 IF DB1.Assigned_Status = 'Y';

 EXECUTE FUNCTION(RTV Load for DrpTrlrRp RT) TYPE(RTVOBJ) FILE(OMFJCPP)          AC1504531;
 PARAMETER(WRK.Load_ID);
 PARAMETER(NLL.Company_Number);
 PARAMETER(WRK.Load_Status);
 PARAMETER(DB1.Trailer_Id);
 PARAMETER(DB1.Carrier_Code);
 PARAMETER(WRK.Load_Type);
 PARAMETER(WRK.BOL_Complete_Date);
 PARAMETER(WRK.BOL_Complete_Time);
 PARAMETER(WRK.Truck_Departure_Date);
 PARAMETER(WRK.Truck_Departure_Time);
 PARAMETER(WRK.Deadline_Departure_Date);
 PARAMETER(WRK.Deadline_Departure_Time);
 PARAMETER(WRK.USR_Active_Load);
 {
  //?USER: Initialize routine

  // PAR.USR Active Load = CND.no
  PAR.USR_Active_Load = 'N';

  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  // PAR.USR Active Load = CND.no
  PAR.USR_Active_Load = 'N';

  //?USER: Process Data record

  CASE;

  // IF DB1.Truck Departure Date is not entered
  IF DB1.Truck_Departure_Date = *ZERO;

  //?Active load
  MOVE *ALL (To: PAR From: DB1);

  // PAR.USR Active Load = CND.yes
  PAR.USR_Active_Load = 'Y';

  QUIT;

  // IF *OTHERWISE
  IF *OTHERWISE;

  //?NOT Active load
  ENDIF;

 }

 CASE;

 // IF WRK.USR Active Load is no
 IF WRK.USR_Active_Load = 'N';

 EXECUTE FUNCTION(Chg PD Trailer         CH) TYPE(CHGOBJ) FILE(PDLYREP)          AC1496469;
 PARAMETER(DB1.Carrier_Code);
 PARAMETER(DB1.Trailer_Id);
 PARAMETER(DB1.Company_Number);
 PARAMETER(DB1.Load_Type);
 PARAMETER(DB1.Trailer_Type);
 PARAMETER(DB1.Seaboard_Owned_Status);
 PARAMETER(DB1.On_Yard_Status);
 PARAMETER(DB1.On_Yard_Date);
 PARAMETER(DB1.On_Yard_Time);
 PARAMETER('N');
 PARAMETER(DB1.Available_Status);
 PARAMETER(DB1.Not_Available_Reason_Code);
 PARAMETER(DB1.Comment_Line);
 PARAMETER(DB1.Status_Unused_1);
 PARAMETER(DB1.Status_Unused_2);
 PARAMETER(DB1.Status_Unused_3);
 PARAMETER(DB1.Status_Unused_4);
 PARAMETER(DB1.Status_Unused_5);
 PARAMETER(DB1.Date_Unused_1);
 PARAMETER(DB1.Date_Unused_2);
 PARAMETER(DB1.Date_Unused_3);
 PARAMETER(DB1.Date_Unused_4);
 PARAMETER(DB1.Date_Unused_5);
 PARAMETER(DB1.EDI_Status_1);
 PARAMETER(DB1.EDI_Status_2);
 PARAMETER(DB1.EDI_Status_3);
 PARAMETER(DB1.Record_Status);
 PARAMETER(DB1.Job_Time);
 PARAMETER(DB1.User_Id);
 PARAMETER(DB1.Job_Name);
 PARAMETER(DB1.Job_Date);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Set Record Stamp CHGOB IF) TYPE(EXCINTFUN)                     AC1283156;
  PARAMETER(DB1.Job_Time);
  PARAMETER(DB1.User_Id);
  PARAMETER(DB1.Job_Name);
  PARAMETER(DB1.Job_Date);
  {
   //?Execute internal function

   // PAR.Job Time = JOB.*Job time
   PAR.Job_Time = JOB.*Job_time;

   // PAR.User Id = JOB.*USER
   PAR.User_Id = JOB.*USER;

   // PAR.Job Name = JOB.*PROGRAM
   PAR.Job_Name = JOB.*PROGRAM;

   // PAR.Job Date = JOB.*Job date
   PAR.Job_Date = JOB.*Job_date;

  }

 }

 ENDIF;

 ENDIF;

}


