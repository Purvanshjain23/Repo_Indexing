// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PLDYDFR
// ?Date: 14.08.2025 Time: 02:53:52
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?Program Modification
DO;

//? 6/19/2017 JBB C9426 - Add Delivery Schedule REF Fields
//?                       Screen error found when called from program
//?                       PLAQDFR: RPG1225 - Session or device error
//?                       occurred.  The error did not occur when in
//?                       debug.  The problem was fixed by changing
//?                       the positioning of the window from Auto to
//?                       User. A=*Auto, U=*User
//?11/02/2020 ISE H16853 - CHANGE BUY ORDER NUMBER FIELD LENGTH FROM 5 TO 7
ENDDO;

//?USER: Initialize subfile control

// CTL.BOH Company Number = PAR.BOH Company Number
CTL.BOH_Company_Number = PAR.BOH_Company_Number;

// CTL.Head Total USR = CON.*ZERO
CTL.Head_Total_USR = *ZERO;

//?USER: Initialize subfile record from DBF record

EXECUTE FUNCTION(Calc BO No of Head    RT) TYPE(RTVOBJ) FILE(PKAXCPP)           AB1101147;
PARAMETER(RCD.BOH_Company_Number);
PARAMETER(RCD.BOH_Buy_Order_Number);
PARAMETER(RCD.Head_BO_USR);
{
 //?USER: Process Data record

 // PAR.Head BO USR = PAR.Head BO USR + DB1.BOL Pln Head Delv
 PAR.Head_BO_USR = PAR.Head_BO_USR + DB1.BOL_Pln_Head_Delv;

}


//?USER: Process subfile control (Pre-confirm)

//?CMD Key 06: Create Buy Order
CASE;

// IF CTL.*CMD key is Create
IF CTL.*CMD_key = '06';

// PAR.Buy Order Number USR = CON.*ZERO
PAR.Buy_Order_Number_USR = *ZERO;

PGM.*Return_code = *BLANK;

RETURN;

ENDIF;

//?USER: Process subfile record (Pre-confirm)

//?Option 1:  Select Buy Order
CASE;

// IF RCD.*SFLSEL is *Select#1
IF RCD.*SFLSEL = '1';

// PAR.Buy Order Number USR = RCD.BOH Buy Order Number
PAR.Buy_Order_Number_USR = RCD.BOH_Buy_Order_Number;

PGM.*Return_code = *BLANK;

RETURN;

ENDIF;

//?USER: Exit program processing

CASE;

// IF CTL.*CMD key is CF03
IF CTL.*CMD_key = '03';

// PAR.Buy Order Number USR = CON.*ZERO
PAR.Buy_Order_Number_USR = *ZERO;

// PGM.*Return code = CND.*User QUIT requested
PGM.*Return_code = 'Y2U9999';

RETURN;

ENDIF;

