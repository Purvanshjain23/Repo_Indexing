// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PNX0XFR
// ?Date: 14.08.2025 Time: 03:47:03
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?C01578 new pgm
// PAR.Ship To Customer = CON.*ZERO
PAR.Ship_To_Customer = *ZERO;

EXECUTE FUNCTION(RTV Phone Lookup cust RT) TYPE(RTVOBJ) FILE(CABBREP)           AC2021367;
PARAMETER(PAR.Ship_To_Customer);
PARAMETER(PAR.Telephone_Number_FF);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 EXECUTE FUNCTION(Rtv Cust Fax Buyer NbrsRT) TYPE(RTVOBJ) FILE(PDM3REP)          AC1718279;
 PARAMETER(DB1.Ship_To_Customer);
 PARAMETER(*BLANK);
 PARAMETER(LCL.Buyer_Fax_Number);
 PARAMETER(LCL.Buyer_Fax_Name);
 PARAMETER(LCL.Buyer_Email_Address);
 {
  //?USER: Processing if Data record not found

  MOVE *ALL (To: PAR From: CON);

  //?USER: Process Data record

  MOVE *ALL (To: PAR From: DB1);

  QUIT;

 }

 CASE;

 // IF DB1.Telephone Number FF EQ PAR.Telephone Number FF
 IF DB1.Telephone_Number_FF = PAR.Telephone_Number_FF;

 // OR DB1.Fax Number FF EQ PAR.Telephone Number FF
 OR DB1.Fax_Number_FF = PAR.Telephone_Number_FF;

 // OR LCL.Buyer Fax Number EQ PAR.Telephone Number FF
 OR LCL.Buyer_Fax_Number = PAR.Telephone_Number_FF;

 MOVE *ALL (To: PAR From: DB1);

 QUIT;

 ENDIF;

}


CASE;

// IF PAR.Ship To Customer is equal to zero
IF PAR.Ship_To_Customer = *ZERO;

EXECUTE FUNCTION(RTV Phone Lookup      RT) TYPE(RTVOBJ) FILE(PNF7REP)           AC2047783;
PARAMETER(PAR.Ship_To_Customer);
PARAMETER(PAR.Telephone_Number_FF);
{
 //?USER: Process Data record

 CASE;

 // IF DB1.CDE Destination EQ PAR.CDE Destination
 IF DB1.CDE_Destination = PAR.CDE_Destination;

 // AND DB1.Record Status is Active
 AND DB1.Record_Status = 'A';

 MOVE *ALL (To: PAR From: DB1);

 QUIT;

 ENDIF;

}


ENDIF;

