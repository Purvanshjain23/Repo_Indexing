// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PMVMPVR
// ?Date: 14.08.2025 Time: 03:44:13
// ?------------------------------------------------------------------------------------------------

//?USER: Load screen

CASE;

// IF PAR.Ship to Customer      USR is Entered
IF PAR.Ship_to_Customer_USR <> 0;

// DTL.Ship to Customer      USR = PAR.Ship to Customer      USR
DTL.Ship_to_Customer_USR = PAR.Ship_to_Customer_USR;

ENDIF;

//?USER: Validate fields

CASE;

// IF DTL.*CMD key is *Prompt
IF DTL.*CMD_key = '04';

CASE;

// IF PGM.*Cursor field <IS> DTL.Ship to Customer      USR
IF PGM.*Cursor_field = DTL.Ship_to_Customer_USR;

// Call program SEL Search by Nbr/Name SR.
CALL PROGRAM(SEL Search by Nbr/Name SR) ('PMWMSRR');
PARAMETER(DTL.Ship_to_Customer_USR);
PARAMETER(LCL.Customer_Name);

ENDIF;

ENDIF;

CASE;

// IF DTL.From Date             USR GT DTL.To Date               USR
IF DTL.From_Date_USR > DTL.To_Date_USR;

// Send error message - 'From date exceeds to date.  Please re-enter.'
ERROR(USR0319);
MSGPARM(DTL.From_Date_USR);

// PGM.*Defer confirm = CND.Defer confirm
PGM.*Defer_confirm = 'Y';

ENDIF;

//?USER: User defined action

// PAR.From Date             USR = DTL.From Date             USR
PAR.From_Date_USR = DTL.From_Date_USR;

// PAR.To Date               USR = DTL.To Date               USR
PAR.To_Date_USR = DTL.To_Date_USR;

// PAR.Ship to Customer      USR = DTL.Ship to Customer      USR
PAR.Ship_to_Customer_USR = DTL.Ship_to_Customer_USR;

//?USER: Exit program processing

CASE;

// IF DTL.*CMD key is *Exit
IF DTL.*CMD_key = '03';

MOVE *ALL (To: PAR From: CON);

// PGM.*Return code = CND.*User QUIT requested
PGM.*Return_code = 'Y2U9999';

RETURN;

ENDIF;

