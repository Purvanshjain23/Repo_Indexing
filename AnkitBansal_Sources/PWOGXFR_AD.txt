// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PWOGXFR
// ?Date: 14.08.2025 Time: 02:57:12
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?Modification history
DO;

//? 9/13/2021 JBB WHD83659 - Previous Day Repayment Issue
//?                          Function created.  This function will
//?                          delete all Carcass Detail records for
//?                          each Tattoo for the Repayment ID.
//?                          Also. all Tattoo Header D/A records
//?                          will be deleted for the Repayment ID,
//?                          except for the FRT record.
ENDDO;

EXECUTE FUNCTION(Dlt Crc Dtl & Tat D/A RT) TYPE(RTVOBJ) FILE(PWAXCPP)           AB1370961;
PARAMETER(PAR.CC_Company_Number);
PARAMETER(PAR.TRH_Repayment_ID);
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Dlt Carc Dtl for Repay RT) TYPE(RTVOBJ) FILE(PKB1CPP)          AB1370965;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.TH_Kill_Date);
 {
  //?USER: Process Data record

  EXECUTE FUNCTION(Dlt Carcass Detail    DL) TYPE(DLTOBJ) FILE(PKB1CPP)           AB1104739;
  PARAMETER(DB1.BOH_Company_Number);
  PARAMETER(DB1.BOH_Buy_Order_Number);
  PARAMETER(DB1.BOL_Load_Number);
  PARAMETER(DB1.TH_Tattoo_Number);
  PARAMETER(DB1.TH_Kill_Date);
  PARAMETER(DB1.CD_Scale_Sequence_Number);
  PARAMETER(DB1.CD_Carcass_Number);
  PARAMETER(DB1.CD_Carcass_Number_Insert);
 }

 EXECUTE FUNCTION(Dlt Ttt D/A excpt FRT RT) TYPE(RTVOBJ) FILE(PKCDCPP)           AB1346412;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 {
  //?USER: Process Data record

  //?If D/A Code <> FRT, delete the record
  CASE;

  // IF NOT DB1.DED D/A Code is Freight
  IF ! DB1.DED_D_A_Code = 'FRT';

  EXECUTE FUNCTION(Delete Tattoo Deduction) TYPE(DLTOBJ) FILE(PKCDCPP)            AB1107819;
  PARAMETER(DB1.BOH_Company_Number);
  PARAMETER(DB1.BOH_Buy_Order_Number);
  PARAMETER(DB1.BOL_Load_Number);
  PARAMETER(DB1.TH_Tattoo_Number);
  PARAMETER(DB1.TH_Kill_Date);
  PARAMETER(DB1.DED_D_A_Code);
  ENDIF;

 }

}


