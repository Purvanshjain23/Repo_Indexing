// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PKYBXFR
// ?Date: 14.08.2025 Time: 02:50:48
// ?------------------------------------------------------------------------------------------------

//?Execute user function

//?H16853 ISE 11/05/2020-Recompiled due to change in Buy Order Number
//?The hot scale is only for company 360
// WRK.CC Company Number = CON.360
WRK.CC_Company_Number = 360;

EXECUTE FUNCTION(Rtv Current Kill Dt   RT) TYPE(RTVOBJ) FILE(PKAZREP)           AB1125333;
PARAMETER(WRK.CC_Company_Number);
PARAMETER(WRK.Current_Kill_Date);
{
 //?USER: Processing if Data record not found

 MOVE *ALL (To: PAR From: CON);

 //?USER: Process Data record

 MOVE *ALL (To: PAR From: DB1);

}


// Call program Zzzpl to EvUpl         UP.
CALL PROGRAM(Zzzpl to EvUpl         UP) ('PKX9XFR');
PARAMETER(PGM.*Return_code);
PARAMETER(WRK.EA_Shift);

//?*  BRING BACK THE SHIFT THAT IS TO BE PROCESSED
// Call program UPD EvUPL - EvTrans    XF.
CALL PROGRAM(UPD EvUPL - EvTrans    XF) ('PKO7XFR');
PARAMETER(WRK.CC_Company_Number);
PARAMETER(WRK.Current_Kill_Date);
PARAMETER(WRK.EA_Shift);

// WRK.Date Alpha USR = CVTVAR(WRK.Current Kill Date)
WRK.Date_Alpha_USR = CVTVAR(WRK.Current_Kill_Date);

// Call program Rtv Company Values    XF.
CALL PROGRAM(Rtv Company Values    XF) ('PDGKXFR');
PARAMETER(LCL.BOH_Company_Number);
PARAMETER('PRKHSUPL');
PARAMETER(WRK.Office_Dist_List_USR);

// Retrieve message - 'Hot Scale Transactions has been uploaded for &3 &1 kill and shift &2.'
WRK.Office_Dist_Message_USR = RTVMSG(PRK0609);
PARAMETER(WRK.Current_Kill_Date);
PARAMETER(WRK.EA_Shift);
PARAMETER(WRK.CC_Company_Number);

// Call program Snd Pager Msg (MPLUS) UP.
CALL PROGRAM(Snd Pager Msg (MPLUS) UP) ('POMSUPC');
PARAMETER(WRK.Office_Dist_List_USR);
PARAMETER(WRK.Office_Dist_Message_USR);

// Execute command - 'SBM Bal to Kill Edit'
EXECUTE COMMAND(PRK0351);
PARAMETER('GUPPRT201');
PARAMETER(*YES);
PARAMETER(*YES);
PARAMETER(1);
PARAMETER(*JOBD);
PARAMETER(WRK.CC_Company_Number);
PARAMETER(WRK.Date_Alpha_USR);
PARAMETER(WRK.Oms_System_Value_Alpha);
PARAMETER('U');
PARAMETER(WRK.EA_Shift);

// Call program Exc Upd Last Dt Cllctn XF.
CALL PROGRAM(Exc Upd Last Dt Cllctn XF) ('PDTCXFR');
PARAMETER(WRK.CC_Company_Number);
PARAMETER('HOTSCL');

