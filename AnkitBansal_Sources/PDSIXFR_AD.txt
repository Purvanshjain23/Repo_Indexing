// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PDSIXFR
// ?Date: 14.08.2025 Time: 03:32:56
// ?------------------------------------------------------------------------------------------------

//?Execute user function

CASE;

// IF PAR.Array Processing Control is Process Create
IF PAR.Array_Processing_Control = 'CR';

// Call program RTV for Ord.Detail     XF.
CALL PROGRAM(RTV for Ord.Detail     XF) ('PDC3XFR');
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Item_Code);
PARAMETER(PAR.Description_Line_One);
PARAMETER(PAR.Description_Line_Two);
PARAMETER(PAR.UOM_Primary);
PARAMETER(PAR.UOM_Pricing);
PARAMETER(PAR.Unit_Weight);
PARAMETER(PAR.Item_Level);
PARAMETER(PAR.Production_Date_Control);
PARAMETER(PAR.Catch_Weight_Status);
PARAMETER(PAR.Item_Structure_Class_Code);
PARAMETER(PAR.Item_Structure_Group_Code);
PARAMETER(PAR.Item_Structure_Type_Code);
PARAMETER(PAR.Default_Commod_Mark_basis);
PARAMETER(WRK.Transportation_Temp);
PARAMETER(PAR.Item_Type_Code);
PARAMETER(PAR.Commodity_Price_Group);
PARAMETER(WRK.Default_Warehouse);
PARAMETER(PAR.Price_Method_Default);
PARAMETER(PAR.Fresh_Chilling_Time);
PARAMETER(PAR.Variety_Rendered_Cut);
PARAMETER(PAR.OD_Item_Target_Price);
PARAMETER(WRK.Error_Status);

EXECUTE FUNCTION(CRT Substitution List  CR) TYPE(CRTOBJ) ARRAY(Substituting_ItemAC1438725;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Item_Code);
PARAMETER(PAR.Warehouse_Code);
PARAMETER(PAR.Item_Structure_Class_Code);
PARAMETER(PAR.Item_Structure_Group_Code);
PARAMETER(PAR.Item_Structure_Type_Code);
PARAMETER(PAR.Description_Line_One);
PARAMETER(PAR.Description_Line_Two);
PARAMETER(PAR.UOM_Primary);
PARAMETER(PAR.UOM_Pricing);
PARAMETER(PAR.Unit_Weight);
PARAMETER(PAR.Item_Level);
PARAMETER(PAR.Production_Date_Control);
PARAMETER(PAR.Catch_Weight_Status);
PARAMETER(PAR.Default_Commod_Mark_basis);
PARAMETER(PAR.Item_Type_Code);
PARAMETER(PAR.Commodity_Price_Group);
PARAMETER(PAR.Price_Method_Default);
PARAMETER(PAR.Fresh_Chilling_Time);
PARAMETER(PAR.Variety_Rendered_Cut);
PARAMETER(PAR.OD_Item_Target_Price);
PARAMETER(PAR.Quantity_Ordered_1_USR);

//?assume chill time usr starts at 0
//?pass back highest chill time
CASE;

// IF PAR.Chilling Time GT PAR.Chilling Time USR
IF PAR.Fresh_Chilling_Time > PAR.Chilling_Time_USR;

// PAR.Chilling Time USR = PAR.Chilling Time
PAR.Chilling_Time_USR = PAR.Fresh_Chilling_Time;

ENDIF;

// IF PAR.Array Processing Control is Process Delete All
IF PAR.Array_Processing_Control = 'DA';

EXECUTE FUNCTION(DLT All Substitutions  DL) TYPE(DLTOBJ) ARRAY(Substituting_ItemAC1439902;

// IF PAR.Array Processing Control is Process Delete One Entry
IF PAR.Array_Processing_Control = 'D1';

EXECUTE FUNCTION(DLT A Substitution     DL) TYPE(DLTOBJ) ARRAY(Substituting_ItemAC1439903;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Warehouse_Code);
PARAMETER(PAR.Item_Code);

// IF PAR.Array Processing Control is Process Update
IF PAR.Array_Processing_Control = 'UP';

EXECUTE FUNCTION(ZZUpd Substituting ItemRT) TYPE(RTVOBJ) ARRAY(Substituting_ItemAC1438731;
PARAMETER(PAR.Company_Number);
PARAMETER(PAR.Item_Code);
PARAMETER(PAR.Warehouse_Code);
PARAMETER(PAR.Order_Number);
PARAMETER(PAR.Order_Sequence_Number);
PARAMETER(PAR.Order_Secondary_Line_Seq);
PARAMETER(PAR.Age_Code);
PARAMETER(PAR.OD_Item_Target_Price);
PARAMETER(PAR.USR_Quantity_to_Confirm);
{
 //?USER: Initialize routine

 // Call program Zzz for Substitution   XF.
 CALL PROGRAM(Zzz for Substitution   XF) ('PDSYXFR');
 PARAMETER(PAR.Company_Number);
 PARAMETER(PAR.Order_Number);
 PARAMETER(PAR.Order_Sequence_Number);
 PARAMETER(PAR.Order_Secondary_Line_Seq);
 PARAMETER(PAR.Ship_To_Customer);
 PARAMETER(PAR.Order_Group_Code);
 PARAMETER(PAR.Comment_Print_Acknowledge);
 PARAMETER(PAR.Comment_Print_Inv_Cr_Memo);
 PARAMETER(PAR.Comment_Print_Pick_Slip);
 PARAMETER(PAR.Comment_Print_Ship_Doc);
 PARAMETER(PAR.Palletize);
 PARAMETER(PAR.Slip_Sheet);
 PARAMETER(PAR.Quantity_Ordered);
 PARAMETER(PAR.Weight_Ordered);
 PARAMETER(PAR.Requested_Ship_Date);
 PARAMETER(PAR.Scheduled_Ship_Date);
 PARAMETER(PAR.Actual_Shipped_Date);
 PARAMETER(PAR.Affect_Inventory_Status);
 PARAMETER(PAR.Affect_Sales_Doll_Status);
 PARAMETER(PAR.Affect_Sales_Pnds_Status);
 PARAMETER(PAR.Country_Code);
 PARAMETER(PAR.Event_Code);
 PARAMETER(PAR.Sales_Route_Code);
 PARAMETER(PAR.Affect_Trade_Fund);
 PARAMETER(PAR.Affect_Commission);
 PARAMETER(PAR.Affect_Pricing);
 PARAMETER(PAR.Billing_Activity_Type);

 //?USER: Process Data record

 // PAR.USR Quantity = PAR.USR Quantity to Confirm * DB1.Quantity Ordered 1 USR *
 PAR.USR_Quantity = PAR.USR_Quantity_to_Confirm * DB1.Quantity_Ordered_1_USR;

 // PAR.USR Weight = PAR.USR Quantity * DB1.Unit Weight *
 PAR.USR_Weight = PAR.USR_Quantity * DB1.Unit_Weight;

 // Call program ZZUPD Crt Substitution XF.
 CALL PROGRAM(ZZUPD Crt Substitution XF) ('PDSXXFR');
 PARAMETER(PAR.Company_Number);
 PARAMETER(PAR.Order_Number);
 PARAMETER(PAR.Order_Sequence_Number);
 PARAMETER(*MISSING);
 PARAMETER(DB1.Item_Code);
 PARAMETER(DB1.Warehouse_Code);
 PARAMETER(PAR.Ship_To_Customer);
 PARAMETER(PAR.Order_Group_Code);
 PARAMETER(PAR.USR_Quantity);
 PARAMETER(PAR.Comment_Print_Acknowledge);
 PARAMETER(PAR.Comment_Print_Inv_Cr_Memo);
 PARAMETER(PAR.Comment_Print_Pick_Slip);
 PARAMETER(PAR.Comment_Print_Ship_Doc);
 PARAMETER(DB1.Default_Commod_Mark_basis);
 PARAMETER(DB1.Price_Method_Default);
 PARAMETER(DB1.UOM_Pricing);
 PARAMETER(DB1.UOM_Primary);
 PARAMETER(DB1.Description_Line_One);
 PARAMETER(PAR.Age_Code);
 PARAMETER(PAR.Palletize);
 PARAMETER(PAR.Slip_Sheet);
 PARAMETER(DB1.Catch_Weight_Status);
 PARAMETER(DB1.Production_Date_Control);
 PARAMETER(*ZERO);
 PARAMETER(*ZERO);
 PARAMETER(PAR.Quantity_Scheduled);
 PARAMETER(PAR.Weight_Scheduled);
 PARAMETER(PAR.Requested_Ship_Date);
 PARAMETER(PAR.Scheduled_Ship_Date);
 PARAMETER(PAR.Actual_Shipped_Date);
 PARAMETER(PAR.Affect_Inventory_Status);
 PARAMETER(PAR.Affect_Sales_Doll_Status);
 PARAMETER(PAR.Affect_Sales_Pnds_Status);
 PARAMETER(DB1.Item_Structure_Type_Code);
 PARAMETER(DB1.Item_Structure_Group_Code);
 PARAMETER(DB1.Item_Structure_Class_Code);
 PARAMETER(DB1.Item_Level);
 PARAMETER(PAR.Country_Code);
 PARAMETER(PAR.Event_Code);
 PARAMETER(PAR.Sales_Route_Code);
 PARAMETER(PAR.Affect_Trade_Fund);
 PARAMETER(PAR.Affect_Commission);
 PARAMETER(PAR.Affect_Pricing);
 PARAMETER(PAR.OD_Item_Target_Price);
 PARAMETER(PAR.USR_Weight);
 PARAMETER(PAR.Billing_Activity_Type);
 PARAMETER(DB1.Commodity_Price_Group);

 //?USER: Exit processing

 // Call program Zzz Substitution Flag  XF.
 CALL PROGRAM(Zzz Substitution Flag  XF) ('PDSZXFR');
 PARAMETER(DB1.Company_Number);
 PARAMETER(PAR.Order_Number);
 PARAMETER(PAR.Order_Sequence_Number);
 PARAMETER(PAR.Order_Secondary_Line_Seq);
 PARAMETER('Y');

}


// IF PAR.Array Processing Control is Process Retrieve
IF PAR.Array_Processing_Control = 'RT';

// IF PAR.Array Processing Control is Closedown Program
IF PAR.Array_Processing_Control = 'CP';

// Execute function SET Closedown Program  US.
EXECUTE FUNCTION(SET Closedown Program  US) TYPE(EXCUSRSRC) ('PDSVUFR');
{
 *  RECLAIM RESOURCES
 C                     CALL 'Y2RCRSC'
}


ENDIF;

