// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PWFMPVR
// ?Date: 14.08.2025 Time: 02:56:19
// ?------------------------------------------------------------------------------------------------

//?USER: Initialize program

//?E10812 JJH 03/13/18 - Initialize TH Posted to HPS Flag
//?- Add logic to set the TH Posted to HPS Flag from R to Blank
//?  prior to running the Initialize TH Posted to HPS Flag = R report.
//?E10812 JJH 12/20/17 - Initialize TH Posted to HPS Flag
//?H16853 ISE 11/04/2020 - Recompiled due to change in Buy Order Number
//?USER: Load screen

// DTL.Update Flag = CND.No
DTL.Update_Flag = 'N';

//?USER: User defined action

//?E10812 - Add logic to set the TH Posted to HPS Flag from R to Blank
//?          for all records prior to running the report.
EXECUTE FUNCTION(Rtv HPS PostFlag R-BlkRT) TYPE(RTVOBJ) FILE(PKA1CPP)           AB1343912;
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Chg HPS Interface Sts CH) TYPE(CHGOBJ) FILE(PKA1CPP)           AB1234957;
 PARAMETER(DB1.BOH_Company_Number);
 PARAMETER(DB1.BOH_Buy_Order_Number);
 PARAMETER(DB1.BOL_Load_Number);
 PARAMETER(DB1.TH_Tattoo_Number);
 PARAMETER(DB1.TH_Kill_Date);
 PARAMETER(*BLANK);
 {
  //?USER: Processing before Data update

  EXECUTE FUNCTION(Rtv Change Stamp      IF) TYPE(EXCINTFUN)                      AB1100934;
  PARAMETER(DB1.RS_User_Changed);
  PARAMETER(DB1.RS_Date_Changed);
  PARAMETER(DB1.RS_Time_Changed);
  PARAMETER(DB1.RS_Job);
  PARAMETER(DB1.RS_Program);
  {
   //?Execute internal function

   // PAR.RS User Changed = JOB.*USER
   PAR.RS_User_Changed = JOB.*USER;

   // PAR.RS Date Changed = JOB.*Job date
   PAR.RS_Date_Changed = JOB.*Job_date;

   // PAR.RS Time Changed = JOB.*Job time
   PAR.RS_Time_Changed = JOB.*Job_time;

   // PAR.RS Job = JOB.*JOB
   PAR.RS_Job = JOB.*JOB;

   // PAR.RS Program = JOB.*PROGRAM
   PAR.RS_Program = JOB.*PROGRAM;

  }

 }

}


// Call program Zzz Posted to HPS FlagPF.
CALL PROGRAM(Zzz Posted to HPS FlagPF) ('PWFLPFR');
PARAMETER(DTL.Company_Number_USR);
PARAMETER(DTL.TH_Kill_Date);
PARAMETER(DTL.Update_Flag);

