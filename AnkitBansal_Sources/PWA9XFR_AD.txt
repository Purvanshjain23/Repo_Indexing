// ?------------------------------------------------------------------------------------------------
// ?Synon action diagram for PWA9XFR
// ?Date: 14.08.2025 Time: 02:55:53
// ?------------------------------------------------------------------------------------------------

//?Execute user function

EXECUTE FUNCTION(Fix Producer Site MileRT) TYPE(RTVOBJ) FILE(PLATREP)           AB1331620;
{
 //?USER: Process Data record

 EXECUTE FUNCTION(Fix Producer Site MileRT) TYPE(RTVOBJ) FILE(PLASREP)           AB1331621;
 PARAMETER(DB1.PD_Producer_Code);
 PARAMETER(DB1.PS_Site_ID);
 PARAMETER(DB1.RS_Record_Status);
 {
  //?USER: Process Data record

  CASE;

  // IF DB1.RS Record Status NE PAR.RS Record Status
  IF DB1.RS_Record_Status <> PAR.RS_Record_Status;

  EXECUTE FUNCTION(Chg RS Record Status  CO) TYPE(CHGOBJ) FILE(PLASREP)           AB1331616;
  PARAMETER(DB1.PD_Producer_Code);
  PARAMETER(DB1.PS_Site_ID);
  PARAMETER(DB1.PSM_Company_Number);
  PARAMETER(PAR.RS_Record_Status);
  {
   //?USER: Processing before Data update

   EXECUTE FUNCTION(Rtv Change Stamp      IF) TYPE(EXCINTFUN)                      AB1100934;
   PARAMETER(DB1.RS_User_Changed);
   PARAMETER(DB1.RS_Date_Changed);
   PARAMETER(DB1.RS_Time_Changed);
   PARAMETER(DB1.RS_Job);
   PARAMETER(DB1.RS_Program);
   {
    //?Execute internal function

    // PAR.RS User Changed = JOB.*USER
    PAR.RS_User_Changed = JOB.*USER;

    // PAR.RS Date Changed = JOB.*Job date
    PAR.RS_Date_Changed = JOB.*Job_date;

    // PAR.RS Time Changed = JOB.*Job time
    PAR.RS_Time_Changed = JOB.*Job_time;

    // PAR.RS Job = JOB.*JOB
    PAR.RS_Job = JOB.*JOB;

    // PAR.RS Program = JOB.*PROGRAM
    PAR.RS_Program = JOB.*PROGRAM;

   }

  }

  ENDIF;

 }

}


